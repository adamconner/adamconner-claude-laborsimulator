{"version":3,"mappings":"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","names":["round","v","lim","l","h","p2b","n2b","b2n","n2p","map$1","hex","h1","b","h2","eq","isShort","hexParse","str","len","ret","alpha","f","hexString","HUE_RE","hsl2rgbn","s","a","n","k","hsv2rgbn","hwb2rgbn","w","rgb","i","hueValue","r","g","d","max","rgb2hsl","min","calln","c","hsl2rgb","hwb2rgb","hsv2rgb","hue","hueParse","m","p1","p2","rotate","deg","hslString","map","names$1","unpack","unpacked","keys","tkeys","j","ok","nk","names","nameParse","RGB_RE","rgbParse","rgbString","to","from","interpolate","rgb1","rgb2","t","modHSL","ratio","tmp","clone","proto","fromObject","input","functionParse","Color","type","obj","color","weight","c1","c2","w2","p","w1","val","noop","uid","id","isNullOrUndef","value","isArray","isObject","isNumberFinite","finiteOrDefault","defaultValue","valueOrDefault","toPercentage","dimension","toDimension","callback","fn","args","thisArg","each","loopable","reverse","_elementsEqual","a0","a1","ilen","v0","v1","source","target","klen","isValidKey","key","_merger","options","tval","sval","merge","sources","merger","current","mergeIf","_mergerIf","keyResolvers","o","_splitKey","parts","part","_getKeyResolver","resolveObjectKey","_capitalize","defined","isFunction","setsEqual","item","_isClickEvent","e","PI","TAU","PITAU","INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","x","y","epsilon","niceNum","range","roundedRange","niceRange","fraction","_factorize","result","sqrt","isNonPrimitive","isNumber","almostWhole","rounded","_setMinAndMaxByKey","array","property","toRadians","degrees","toDegrees","radians","_decimalPlaces","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","start","end","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_int16Range","_isBetween","_lookup","table","cmp","index","hi","lo","mid","_lookupByKey","last","ti","_rlookupByKey","_filterBetween","values","arrayEvents","listenArrayEvents","listener","method","base","res","object","unlistenArrayEvents","stub","listeners","_arrayUnique","items","set","requestAnimFrame","throttled","argsToUse","ticking","debounce","delay","timeout","_toLeftRightCenter","align","_alignStartEnd","_textX","left","right","rtl","_getStartAndCountOfVisiblePoints","meta","points","animationsDisabled","pointCount","count","iScale","vScale","_parsed","spanGaps","axis","minDefined","maxDefined","distanceToDefinedLo","point","distanceToDefinedHi","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","changed","atEdge","elasticIn","elasticOut","effects","isPatternOrGradient","getHoverColor","numbers","colors","applyAnimationsDefaults","defaults","name","applyLayoutsDefaults","intlCache","getNumberFormat","locale","cacheKey","formatter","formatNumber","num","formatters","tickValue","ticks","notation","delta","maxTick","calculateDelta","logDelta","numDecimal","remain","Ticks","applyScaleDefaults","_ctx","overrides","descriptors","getScope$1","node","root","scope","Defaults","_descriptors","_appliers","context","ctx","targetScope","targetName","scopeObject","targetScopeObject","privateName","local","appliers","apply","toFontString","font","_measureText","data","gc","longest","string","textWidth","_longestText","arrayOfThings","cache","jlen","thing","nestedThing","gcLen","_alignPixel","chart","pixel","width","devicePixelRatio","halfWidth","clearCanvas","canvas","drawPoint","drawPointLegend","xOffset","yOffset","size","cornerRadius","xOffsetW","yOffsetW","style","rotation","radius","rad","_isPointInArea","area","margin","clipArea","unclipArea","_steppedLineTo","previous","flip","mode","midpoint","_bezierCurveTo","setRenderOpts","opts","decorateText","line","metrics","top","bottom","yDecoration","drawBackdrop","oldColor","renderText","text","lines","stroke","addRoundedRectPath","rect","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","numberOrZero","_readValueToProps","props","objProps","read","prop","toTRBL","toTRBLCorners","toPadding","toFont","fallback","resolve","inputs","info","_addGrace","minmax","grace","beginAtZero","change","keepZero","add","createContext","parentContext","_createResolver","scopes","prefixes","rootScopes","getTarget","finalRootScopes","_resolve","_cached","_resolveWithPrefixes","getKeysFromAllScopes","storage","_attachContext","proxy","subProxy","descriptorDefaults","receiver","_resolveWithContext","_scriptable","_indexable","_allKeys","readKey","prefix","needsSubResolver","_proxy","_context","_subProxy","_resolveScriptable","_resolveArray","getValue","_stack","createSubResolver","isIndexable","arr","resolver","resolveFallback","getScope","parent","addScopes","parentScopes","parentFallback","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","parsed","EPSILON","getPoint","getValueAxis","indexAxis","splineCurve","firstPoint","middlePoint","afterPoint","next","d01","d12","s01","s12","fa","fb","monotoneAdjust","deltaK","mK","pointsLen","alphaK","betaK","tauK","squaredMagnitude","pointCurrent","pointAfter","monotoneCompute","valueAxis","pointBefore","iPixel","vPixel","splineCurveMonotone","slopeDelta","capControlPoint","pt","capBezierPoints","inArea","inAreaPrev","inAreaNext","_updateBezierControlPoints","loop","controlPoints","prev","_isDomSupported","_getParentNode","domNode","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","element","getStyle","el","positions","getPositionedStyle","styles","suffix","pos","useOffsetPos","getCanvasPosition","touches","offsetX","offsetY","box","getRelativePosition","event","currentDevicePixelRatio","borderBox","paddings","borders","height","getContainerSize","maxWidth","maxHeight","container","containerStyle","containerBorder","containerPadding","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","containerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","supportsEventListenerOptions","passiveSupported","readUsedSize","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRightToLeftAdapter","rectX","itemWidth","getLeftToRightAdapter","_itemWidth","getRtlAdapter","overrideTextDirection","direction","original","restoreTextDirection","propertyFn","normalizeSegment","getSegment","segment","bounds","startBound","endBound","between","normalize","_boundSegment","compare","inside","subStart","prevValue","startIsBefore","endIsBefore","shouldStart","shouldStop","_boundSegments","segments","sub","findStartAndEnd","solidSegments","cur","_computeSegments","segmentOptions","splitByStyles","completeLoop","doSplitByStyles","chartContext","baseStyle","readStyle","datasetIndex","prevStyle","addStyle","st","dir","styleChanged","replacer","getSizeForArea","scale","chartArea","field","getDatasetArea","getDatasetClipArea","clip","Animator","anims","date","callbacks","numSteps","remaining","draw","charts","cb","acc","animator","transparent","interpolators","factor","c0","Animation","cfg","currentValue","elapsed","duration","promises","rej","resolved","Animations","config","animationOptions","animatedProps","option","newOptions","resolveTargetOptions","animations","awaitAll","running","animation","properties","anim","scaleClip","allowedOverflow","defaultClip","toClip","getSortedDatasetIndices","filterVisible","metasets","applyStack","stack","dsIndex","singleMode","otherValue","found","convertObjectDataToArray","iAxisKey","vAxisKey","adata","isStacked","stacked","getStackKey","indexScale","valueScale","getUserBounds","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","positive","updateStacks","controller","iAxis","vAxis","itemStacks","visualValues","getFirstScaleId","scales","createDatasetContext","createDataContext","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","createStack","canStack","DatasetController","dataset","chooseId","xid","yid","rid","iid","vid","scaleID","_data","resetNewElements","stackChanged","oldStacked","scopeKeys","_stacked","sorted","isNotInOrderComparedToPrev","labels","singleScale","xAxisKey","yAxisKey","parsedValue","otherScale","otherMin","otherMax","_skip","elements","active","drawActiveElementsOnTop","elementType","sharing","transition","sharedOptions","firstOpts","previouslySharedOptions","includeOptions","arg1","arg2","numMeta","numData","move","removed","newCount","__publicField","getAllScaleValues","visibleMetas","computeMinSampleSize","curr","updateMinAndPrev","computeFitCategoryTraits","ruler","stackCount","thickness","computeFlexCategoryTraits","pixels","percent","parseFloatBar","entry","startValue","endValue","barStart","barEnd","parseValue","parseArrayOrPrimitive","isFloatBar","custom","barSign","actualBase","borderProps","setBorderSkipped","edge","parseEdge","swap","startEnd","orig","v2","setInflateAmount","inflateAmount","BarController","bars","reset","horizontal","vpixels","ipixels","dataIndex","currentParsed","iScaleValue","skipNull","indexScaleId","firstScaleAxisId","barThickness","baseValue","minBarLength","floating","length","head","startPixel","endPixel","halfGrid","maxBarThickness","center","axisCount","axisID","axisNumber","stackIndex","rects","BubbleController","getRatioAndOffset","circumference","cutout","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","DoughnutController","getter","arcs","spacing","maxSize","chartWeight","maxRadius","outerRadius","innerRadius","radiusLength","animationOpts","centerX","centerY","animateScale","arc","metaData","total","ringWeightOffset","pointStyle","textAlign","useBorderRadius","borderRadius","label","legendItem","legend","LineController","_dataset","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","border","lastPoint","PolarAreaController","minSize","datasetStartAngle","defaultAngle","PieController","RadarController","pointPosition","ScatterController","showLine","controllers","abstract","DateAdapterBase","members","adapters","binarySearch","metaset","intersect","_sorted","lookupMethod","evaluateInteractionItems","position","handler","getDistanceMetricForAxis","useX","useY","deltaX","deltaY","getIntersectItems","useFinalPosition","includeInvisible","getNearestRadialItems","evaluationFunc","getNearestCartesianItems","distanceMetric","minDistance","inRange","distance","getNearestItems","getAxisItems","rangeMethod","intersectsItem","Interaction","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","wrapBoxes","boxes","layoutBoxes","stackWeight","buildStacks","layouts","wrap","setLayoutDims","params","vBoxMaxWidth","hBoxMaxHeight","layout","fullSize","buildLayoutBoxes","centerHorizontal","centerVertical","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","newWidth","newHeight","widthChanged","heightChanged","handleMaxPadding","updatePos","getMargins","marginForPositions","fitBoxes","refitBoxes","refit","same","other","setBoxDims","placeBoxes","userPadding","layoutItem","minPadding","padding","availableWidth","availableHeight","verticalBoxes","horizontalBoxes","visibleVerticalBoxCount","BasePlatform","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","isNullOrEmpty","initCanvas","renderHeight","renderWidth","displayWidth","displayHeight","eventListenerOptions","addListener","removeListener","fromNativeEvent","nodeListContains","nodeList","createAttachObserver","observer","entries","trigger","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","resize","listenDevicePixelRatioChanges","unlistenDevicePixelRatioChanges","createResizeObserver","releaseObserver","createProxyAndListen","DomPlatform","initial","proxies","_detectPlatform","Element","final","autoSkip","tickOpts","determinedMaxTicks","determineMaxTicks","ticksLimit","majorIndices","getMajorIndices","numMajorIndices","first","newTicks","skipMajors","calculateSpacing","avgMajorSpacing","skip","offset","tickLength","maxScale","maxChart","evenMajorSpacing","getEvenSpacing","factors","majorStart","majorEnd","diff","reverseAlign","offsetFromEdge","getTicksLimit","ticksLength","maxTicksLimit","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","garbageCollect","caches","getTickMarkLength","getTitleHeight","createScaleContext","createTickContext","tick","titleAlign","titleArgs","titleX","titleY","positionAxisID","Scale","raw","_userMin","_userMax","_suggestedMin","_suggestedMax","metas","sampleSize","samplingEnabled","reversePixels","numTicks","minRotation","maxRotation","labelRotation","tickWidth","maxLabelDiagonal","labelSizes","maxLabelWidth","maxLabelHeight","titleOpts","gridOpts","display","isHorizontal","titleHeight","widest","highest","tickPadding","angleRadians","cos","sin","labelHeight","labelWidth","isRotated","labelsBelowTicks","offsetLeft","offsetRight","paddingLeft","paddingRight","paddingTop","paddingBottom","widths","heights","widestLabelSize","highestLabelSize","tickFont","fontString","lineHeight","nestedLabel","valueAt","idx","decimal","optionTicks","rot","grid","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","limit","step","optsAtIndex","optsAtIndexBorder","lineWidth","lineColor","borderDash","borderDashOffset","tickColor","tickBorderDash","tickBorderDashOffset","crossAlign","mirror","tickAndPadding","hTickAndPadding","lineCount","textOffset","textBaseline","halfCount","strokeColor","strokeWidth","tickTextAlign","backdrop","labelPadding","backgroundColor","drawLine","lastLineWidth","renderTextOptions","title","tz","gz","bz","fontSize","TypedRegistry","override","parentScope","isIChartComponent","registerDefaults","itemDefaults","routeDefaults","routes","propertyParts","sourceName","sourceScope","Registry","typedRegistry","arg","reg","itemReg","registry","component","camelMethod","PluginService","hook","filter","descriptor","plugin","all","plugins","allPlugins","createDescriptors","previousDescriptors","localIds","getOpts","pluginOpts","getIndexAxis","datasetDefaults","getAxisFromDefaultScaleID","getDefaultScaleIDFromAxis","idMatchesAxis","axisFromPosition","determineAxis","scaleOptions","getAxisFromDataset","retrieveAxisFromDatasets","boundDs","mergeScaleConfig","chartDefaults","configScales","chartIndexAxis","scaleConf","defaultId","defaultScaleOptions","defaultID","initOptions","initData","initConfig","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","datasetType","mainScope","resetCache","_scopeCache","keyLists","subPrefixes","getResolver","needContext","subResolver","resolverCache","hasFunction","isScriptable","scriptable","indexable","version","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onAnimationProgress","getCanvas","instances","getChart","moveNumericKeys","intKey","determineLastEvent","lastEvent","inChartArea","isClick","Chart$1","_a","invalidatePlugins","userConfig","initialCanvas","existingChart","maintainAspectRatio","_aspectRatio","newSize","newRatio","scalesOptions","axisOptions","scaleOpts","updated","isRadial","scaleType","scaleClass","hasUpdated","datasets","newControllers","ControllerClass","datasetElementType","dataElementType","animsDisabled","_active","_lastEvent","existingEvents","newEvents","_hiddenIndices","changes","_dataChanges","datasetCount","makeSet","changeSet","noArea","layers","visible","platform","_add","_remove","detached","attached","enabled","activeElements","lastActive","pluginId","replay","hoverOptions","deactivated","activated","eventFilter","Chart","clipSelf","borderWidth","borderJoinStyle","outerAngleClip","innerAngleClip","clipWidth","clipArc","pixelMargin","angleMargin","toRadiusCorners","parseBorderRadius$1","angleDelta","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","rThetaToXY","theta","pathArc","circular","innerR","spacingOffset","noSpacingInnerRadius","noSpacingOuterRadius","avNogSpacingRadius","adjustedAngle","beta","angleOffset","outerStart","outerEnd","innerStart","innerEnd","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","innerMidAdjustedAngle","p8","outerStartX","outerStartY","outerEndX","outerEndY","drawArc","fullCircles","drawBorder","inner","ArcElement","chartX","chartY","rAdjust","_circumference","nonZeroBetween","betweenAngles","withinRadius","halfAngle","halfRadius","fix","radiusOffset","setStyle","lineTo","getLineMethod","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","fastPathSegment","avgX","countX","prevX","lastY","pointIndex","drawX","truncX","_getSegmentMethod","_getInterpolationMethod","strokePathWithCache","path","strokePathDirect","segmentMethod","usePath2D","LineElement","_interpolate","interpolated","inRange$1","PointElement","mouseX","mouseY","getBarBounds","bar","half","skipOrLimit","parseBorderWidth","maxW","maxH","parseBorderRadius","enableBorderRadius","maxR","enableBorder","boundingRects","skipX","skipY","hasRadius","addNormalRectPath","inflateRect","amount","refRect","BarElement","borderColor","outer","addRectPath","BORDER_COLORS","BACKGROUND_COLORS","getBorderColor","getBackgroundColor","colorizeDefaultDataset","colorizeDoughnutDataset","colorizePolarAreaDataset","getColorizer","containsColorsDefinitions","containsColorsDefinition","containsDefaultColorsDefenitions","plugin_colors","_args","chartOptions","containsColorDefenition","colorizer","lttbDecimation","samples","decimated","bucketWidth","sampledIndex","endIndex","maxAreaPoint","maxArea","nextA","avgY","avgRangeStart","avgRangeEnd","avgRangeLength","rangeOffs","rangeTo","pointAx","pointAy","minMaxDecimation","minIndex","maxIndex","startIndex","xMin","dx","lastIndex","intermediateIndex1","intermediateIndex2","cleanDecimatedDataset","cleanDecimatedData","getStartAndCountOfVisiblePointsSimplified","plugin_decimation","xAxis","threshold","_segments","tpoints","_findSegmentEnd","_getBounds","targetSegments","tgt","subBounds","fillSources","fillSource","_getEdge","_pointsFromSegments","boundary","linePoints","_createBoundaryLine","_loop","_shouldApplyFill","_resolveTarget","propagate","fill","visited","_decodeFill","parseFillOption","decodeTargetIndex","firstCh","_getTargetPixel","_getTargetValue","fillOption","_buildStackLine","sourcePoints","linesBelow","getLinesBelow","addPointsBelow","below","sourcePoint","postponed","findPoint","pointValue","firstValue","lastValue","simpleArc","_getTarget","getLineByIndex","computeBoundary","computeCircularBoundary","computeLinearBoundary","_drawfill","lineOpts","above","doFill","fillColor","clipVertical","clipHorizontal","clipY","lineLoop","clipX","src","notShape","clipBounds","interpolatedLineTo","targetLoop","interpolatedPoint","getBoxSize","labelOpts","boxHeight","boxWidth","itemsEqual","Legend","legendItems","labelFont","itemHeight","hitboxes","lineWidths","totalHeight","row","_itemHeight","columnSizes","heightLimit","totalWidth","currentColWidth","currentColHeight","col","calculateItemSize","rtlHelper","hitbox","defaultColor","halfFontSize","cursor","drawLegendBox","drawOptions","yBoxTop","xBoxLeft","fillText","realX","fontLineHeight","calculateLegendItemHeight","titleFont","titlePadding","topPaddingPlusHalfFontSize","hitBox","lh","isListened","hoveredItem","sameItem","calculateItemWidth","calculateItemHeight","legendItemText","plugin_legend","ci","usePointStyle","Title","textSize","fontOpts","createTitle","plugin_title","titleBlock","plugin_subtitle","positioners","xSet","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","getTooltipSize","tooltip","body","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","bodyLineHeight","widthPadding","maxLineWidth","determineYAlign","doesNotFitWithAlign","xAlign","caret","determineXAlign","yAlign","chartWidth","determineAlignment","alignX","alignY","paddingAndSize","getBackgroundPoint","alignment","caretSize","caretPadding","topLeft","topRight","bottomLeft","bottomRight","getAlignedX","getBeforeAfterBodyLines","createTooltipContext","tooltipItems","overrideCallbacks","defaultCallbacks","labelCount","tooltipItem","invokeCallbackWithFallback","Tooltip","beforeTitle","afterTitle","bodyItems","scoped","beforeFooter","afterFooter","labelColors","labelPointStyles","labelTextColors","positionAndSize","backgroundPoint","tooltipPoint","caretPosition","ptX","ptY","x3","y3","titleSpacing","labelColor","labelPointStyle","colorX","rtlColorX","yOffSet","colorY","outerX","innerX","bodySpacing","bodyAlign","displayColors","xLinePadding","fillLineOfText","bodyAlignForCalculation","textColor","tooltipSize","animX","animY","opacity","hasTooltipContent","positionChanged","caretX","caretY","plugin_tooltip","addIfString","addedLabels","findOrAddLabel","_getLabelForValue","CategoryScale","added","generateTicks$1","generationOptions","dataRange","precision","maxTicks","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","minSpacing","niceMin","niceMax","numSpaces","decimalPlaces","relativeLabelSize","LinearScaleBase","setMin","setMax","minSign","maxSign","stepSize","numericGeneratorOptions","LinearScale","log10Floor","changeExponent","isMajor","tickVal","steps","rangeExp","rangeStep","startExp","generateTicks","minExp","exp","significand","lastTick","LogarithmicScale","getTickBackdropHeight","measureLabelSize","determineLimits","fitWithPointLabels","limits","valueCount","pointLabelOpts","additionalAngle","plFont","hLimits","vLimits","updateLimits","buildPointLabelItems","createPointLabelItem","itemOpts","outerDistance","extra","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","isNotOverlapped","centerPointLabels","drawPointLabelBox","backdropColor","backdropLeft","backdropTop","backdropWidth","backdropHeight","drawPointLabels","pointLabels","pathRadiusLine","drawRadiusLine","gridLineOpts","createPointLabelContext","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","angleMultiplier","scalingFactor","scaledDistance","pointLabel","distanceFromCenter","angleLines","INTERVALS","UNITS","sorter","parse","adapter","parser","isoWeekday","determineUnitForAutoTicks","minUnit","capacity","interval","determineUnitForFormatting","determineMajorUnit","addTick","time","timestamps","timestamp","setMajorTicks","majorUnit","major","ticksFromTimestamps","TimeScale","_applyBounds","timeOpts","minor","weekday","hasWeekday","format","formats","fmt","minorFormat","majorFormat","offsets","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","displayFormats","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","span","TimeSeriesScale","registerables","EconomicDataService","response","error","baseline","live","useLive","unemployment_rate","total_employment","labor_force_participation","job_openings","average_hourly","seriesIds","startYear","endYear","apiKey","payload","seriesId","startDate","endDate","url","indicators","historical","indicator","snapshot","labor_market","wages","productivity","derived","exportData","EconomicIndicators","weights","score","totalWeight","normalizedValue","category","sectorData","exposures","sector","exposure","totalEmployment","totalAtRisk","byRiskLevel","atRisk","level","targetYear","scenario","years","growth","shock","RealMetricsSystem","dataService","allMetrics","metric","adjustments","saved","realMetricsSystem","HypotheticalIndicatorsSystem","ind","realMetrics","baselineMetrics","results","newValue","coefficient","baselineValue","scenarioParams","projections","ai_adoption","productivity_growth","wage_growth","automation_pace","paceMultiplier","projectedValue","aiChange","urChange","prodChange","wageChange","newIndicator","updates","allIndicators","categories","cat","hypotheticalIndicators","SimulationEngine","economicData","totalSteps","state","year","progress","aiAdoption","laborImpact","interventionEffects","aiIndicators","curve","adoption","sigmoid","adoptionChange","automationPace","totalDisplaced","totalNewJobs","sectorImpacts","employment","displacementRate","displaced","newJobRate","newJobs","targetAdjustment","pace","currentUR","targetUR","laborForce","currentUnemployed","targetUnemployed","neededChange","interventions","totalJobEffect","totalWageEffect","intervention","effect","newState","netJobChange","employed","impact","interventionSummary","summary","months","lastResult","initialSectors","finalSectors","headers","rows","parameterName","originalScenario","InterventionSystem","parameters","interventionType","finalParams","paramDef","annualCost","lfprEffect","consumptionMultiplier","jobEffect","economicImpact","participants","successfulRetrains","monthlyLag","cost","avgWage","eligibleEmployment","subsidyPerWorker","jobsSaved","reduction","wageCost","taxRevenue","displacementReduction","jobsSavedValue","investmentDrag","futureJobEffect","productivityGain","unemployed","takeupRate","annualWage","gigWorkforce","benefitCost","mobilityGain","entrepreneurshipGain","assistancePerWorker","jobMatchImprovement","consumptionMaintained","betterMatchValue","EconomicCalculations","rate","periods","workingAgePopulation","population","unemploymentChange","unemploymentRate","nairu","matchingEfficiency","incomes","mean","sum","totalWages","gdp","output","hoursWorked","nominalWage","priceIndex","baseIndex","percentile90","percentile10","tasks","automationExposure","adoptionRate","timeframe","annualRate","aiInvestment","jobMultiplier","hires","vacancies","elasticity","jobRequirements","workerSkills","mismatch","skill","required","available","cashFlows","discountRate","cf","costs","benefits","totalCost","L","t0","window","xValues","yValues","sumX","sumY","sumXY","sumXX","slope","intercept","historicalData","_","forecasts","squaredDiffs","meanX","meanY","numerator","denomX","denomY","dy","createElement","tag","attrs","dataKey","dataValue","setText","clearChildren","appendChildren","children","child","createFragment","fragment","createTableRow","cells","rowAttrs","tr","cell","td","createCard","content","className","card","header","createLoadingSpinner","message","spinner","createErrorMessage","createStatDisplay","labelDiv","nameSpan","valueDiv","createButton","onClick","disabled","btn","createProgressBar","percentage","createTag","variant","escapeHtml","div","parseSimpleMarkdown","strong","VisualizationManager","containerId","sectors","sectorNames","backgroundColors","jobEffects","projected","historicalYears","projectedYears","uniqueProjectedYears","projectedByYear","newData","AISummaryService","callRecord","today","todayCalls","thisWeek","weekCalls","prompt","errorData","_e","_d","_c","_b","aiSummaryService","AIScenarioEnhancer","_f","simpleInputs","jsonStr","jsonStart","jsonEnd","enhancedParams","simulationResults","stored","record","password","hash","storedHash","char","aiScenarioEnhancer","ModelTrainer","simulations","patterns","sim","analysis","trainedParams","history","engine","trained","simCount","modelTrainer","ResultsInterpreter","netJobs","outlook","severity","created","finalAdoption","findings","finalUR","netImpact","productivityGrowth","risks","urFinal","giniChange","overallScore","firstHalf","secondHalf","getAvg","unemploymentTrend","displacementTrend","inflectionPoints","early","late","prevSlope","nextSlope","maxVal","maxMonth","urValues","byDisplacement","byCreation","recommendations","priorityOrder","millions","bullets","resultsInterpreter","SimulationHistoryService","simulation","_h","_g","trimmed","smaller","filtered","mins","hours","days","simulationHistory","SimulationSharingService","textArea","simulationSharing","ScenarioComparison","chartData","scenarioComparison","OccupationDrilldown","grouped","occ","occupationId","aiAdoptionRate","adoptionFactor","task","adjustedExposure","automationLikelihood","baseChange","adoptionMultiplier","adjustedChange","taskTypeExposure","sortedTypes","skills","html","occupations","riskClass","riskLabel","taskImpact","projection","occupationDrilldown","PDFExporter","reportContent","printWindow","pdfExporter","PDFReportGenerator","jsPDF","doc","filename","reject","script","scenarioName","ur","aiImpact","overviewText","finding","riskLevel","riskColor","riskFactors","lm","ai","impactType","demographics","age","edu","rec","skillsGap","neededSpace","pageNum","pdfReportGenerator","SensitivityAnalysis","parameterId","simulationEngine","baseConfig","selectedOutcomes","param","outcomes","testValues","simResults","outcomeValues","outcomeId","outcome","analysisResults","paramValues","paramRange","multiParamResults","paramId","sensitivityAnalysis","MonteCarloSimulation","baseScenario","progressCallback","allResults","randomizedConfig","ranges","variance","u1","u2","z","finalResult","yearlyResults","yearly","distributions","yearlyDistributions","yearMetrics","sortedValues","stdDev","lower","upper","bins","binWidth","histogram","binStart","binEnd","comparison","dist","InterventionCostCalculator","jobsDisplaced","yearsSimulated","costAnalysis","annualRevenue","estimatedJobsSaved","description","retraining","subsidy","workweek","robotTax","education","roi","monthlyAmount","annualAmount","eligiblePopulation","grossCost","economicBenefit","reducedSocialCosts","netCost","jobsFromSpending","fundingPerWorker","successRate","annualParticipants","subsidyRate","maxWageCovered","jobsCovered","avgSubsidy","targetHours","currentHours","hourReduction","wageAdjustment","costMultiplier","jobsCreated","taxRate","avgLaborCost","automationSlowdown","fundingLevel","additionalSpending","improvedOutcomes","start_year","end_year","interventionRows","interventionCostCalculator","TimelinePlayer","yearlyData","speed","TimelineUI","player","isPlaying","decimalYear","monthDecimal","monthIndex","allData","series","metricSeries","firstYearFormatted","lastYearFormatted","formatValue","currentIndex","chartHeight","minVal","yMin","yMax","toX","toY","yearDisplay","valueEl","oldValue","startTime","animate","currentTime","easeProgress","playIcon","playBtn","timelinePlayer","timelineUI","initializeTimeline","RegionalHeatMap","baseUR","baseDisplacement","region","urMultiplier","displacementMultiplier","noise","scaleName","stops","color1","color2","r1","g1","b1","r2","g2","b2","abbrev","stop","panel","getMax","getMin","findState","findMax","stats","regionalHeatMap","DemographicsAnalyzer","sectorSummary","totalDisplacement","ageGroup","sectorExposure","displacementShare","estimatedDisplacement","impactLevel","eduLevel","gender","weightedVulnerability","concentration","effectiveVulnerability","affectedSectors","share","affected","vulnerability","vulnerable","group","youngWorkers","olderWorkers","lowEdu","hsOnly","highImpactGroups","criticalGroups","demographicsAnalyzer","ABMSensitivityAnalysis","ps","frictionFactor","cv","paramMean","paramIds","multiResults","baseResult","paramCount","sensitivities","avgElasticity","mostSensitive","leastSensitive","criticalCount","tornadoData","lowWidth","highWidth","abmSensitivity","SkillsGapAnalyzer","decliningSkills","growingSkills","transitionPaths","trainingRecommendations","gapMetrics","displacementFactor","sectorImpact","adjustedDecline","workersAffected","adjustedGrowth","projectedDemand","newPositions","paths","declining","transitions","targetSkill","growing","training","urgentSkills","totalDecliningWorkers","totalNewPositions","skillGap","sectorNeeds","sectorSkillMap","growthRate","salary","trainingMonths","salaryScore","growthScore","accessibilityScore","fromSkill","toSkill","likelihood","programs","workers","salaryNum","skillsGapAnalyzer","URLSharingService","short","long","ivEncoded","queryString","ap","ac","pd","njm","iv","code","typeMap","typeCode","encoded","typeNames","paramsStr","baseURL","newURL","textarea","urlSharing","copyScenarioURL","showShareURLModal","modal","copyShareInput","applyScenarioFromURL","nameInput","endInput","urInput","aiInput","apInput","urValue","aiValue","acInput","updateSlidersFromInputs","inputId","sliderId","slider","showShareModal","hideShareModal","copyShareUrl","EmploymentStatus","EducationLevel","AIExperience","WorkerAgent$1","rand","educationBonus","baseWage","eduMultipliers","experienceMultiplier","policy","baseSupport","laborMarket","aiCapability","displacementRisk","occupationExposure","personalMitigation","employerRisk","tenureRisk","searchThreshold","searchProbability","potentialWageIncrease","yearsRemaining","suitableJobs","job","applicationLimit","applications","eduRank","scoredOffers","offer","bestOffer","firm","reason","contact","influenceWeight","ideologyWeight","program","wageIncrease","WorkerAgent","AIAdoptionStatus","FirmSize","LaborStrategy","FirmAgent$1","sizeMultipliers","industryWageMultipliers","baseMonthlyWage","multiplier","competitors","adoptionScores","totalAdoption","comp","adoptionThreshold","competitivePressure","effectiveThreshold","potentialSavings","implementationCost","capabilityMultiplier","automationReduction","effectiveHeadcount","currentHeadcount","headcountGap","posting","wage","sortedEmployees","scoreA","scoreB","employee","marketWage","emp","investmentRates","automationSavings","applicants","applicant","skillMatches","has","requiredRank","applicantRank","wageRatio","rankedApplicants","offers","maxOffers","offerWage","worker","laidOff","FirmAgent","ProgramType","ProgramStatus","TrainingProgramAgent$1","suffixes","baseOccupations","numOccupations","effectiveCost","currentMonth","eligibility","priority","currentSkill","effectiveGain","dropoutProb","processed","spotsAvailable","recentCompletion","outcomeScore","marketConditions","demandedSkills","subsidyLevel","expectedWageIncrease","successProbability","expectedBenefit","TrainingProgramAgent","LaborMarket$1","firms","visibleJobs","applicationsByJob","app","ranked","acceptedOffer","regionStats","visibility","regionScoreA","regionScoreB","industry","totalWorkers","inLaborForce","totalFirms","firmsAdoptingAI","openPositions","medianWage","policies","supportLevels","median","strongSupport","strongOppose","byAge","byEducation","byStatus","support","calcAvg","LaborMarket","WageDynamics$1","market","industryMultiplier","skillPremium","eduMultiplier","tightness","laborSupply","laborDemand","supplyDemandRatio","wagePressure","industries","vacancyRate","adjustment","regions","localUR","skilledWorkers","skillShare","premium","totalAdjustment","requiredSkills","totalPremium","skillCount","basePremium","sumOfDifferences","distribution","lowWage","highWage","lowShare","midShare","highShare","polarizationRatio","highAISkill","lowAISkill","highAIAvgWage","lowAIAvgWage","WageDynamics","InformationType","MediaEventType","InformationDiffusion$1","month","layoffCount","policyChanges","processedEvents","affectedCount","exposureProbability","totalDiffusion","networkInfo","infoChange","anxietyChange","network","totalInfoLevel","totalAnxiety","hasJobInfo","retrainingSuccess","closeness","totalCloseness","searchingWorkers","retrainingWorkers","chambers","similarities","similarity","avgSimilarity","cascades","InformationDiffusion","TaskCategories","OCCUPATION_AUTOMATION_DATA","INDUSTRY_AUTOMATION","AICapabilityFrontier$1","advanceRates","affectedCategory","occupation","occData","baseExposure","indData","modifier","skillMitigation","eduMitigation","taskCategory","capability","automationCost","highRisk","currentExposure","rankings","monthsAhead","projectedLevel","AICapabilityFrontier","US_REGIONS","INDUSTRY_SECTORS","REGIONAL_INDUSTRY_MIX","Region","mix","regionMix","totalShare","remainingShare","wageToCost","globalConditions","employedWorkers","aiAdoptingFirms","totalSupport","otherRegions","avgOtherAttractiveness","outPressure","inPressure","destinationRegion","industryId","industryWorkers","totalExposure","RegionalMarketSystem$1","numRegions","regionData","snapshots","totalPop","cumulative","allWorkers","allUnemployed","allEmployed","rates","ascending","aVal","bVal","RegionalMarketSystem","WA","FA","TPA","LM","WD","ID","AICF","RMS","ABMSimulationEngine$1","AICapabilityFrontierInline","matchingResults","regionPopulations","suitablePrograms","roiA","shuffled","workerIndex","targetEmployees","networkSize","byIndustry","sameindustry","populations","pop","eligibleWorkers","prevStats","aiAdoptionChange","cascade","nationalStats","policyStats","aiAdoptionByStatus","status","wageDistribution","trainingStats","firstMonth","lastMonth","sCurveGrowth","ABMSimulationEngine","initializeABM","testABM","WorkerManager","requestId","request","ParallelSimulationManager","numWorkers","manager","mainWorker","DOMUtils"],"ignoreList":[0,1,2,3],"sources":["../../node_modules/@kurkle/color/dist/color.esm.js","../../node_modules/chart.js/dist/chunks/helpers.dataset.js","../../node_modules/chart.js/dist/chart.js","../../node_modules/chart.js/auto/auto.js","../../src/data/economic-data.js","../../src/models/indicators.js","../../src/models/real-metrics.js","../../src/models/hypothetical-indicators.js","../../src/simulation/engine.js","../../src/simulation/interventions.js","../../src/utils/calculations.js","../../src/utils/dom-utils.js","../../src/components/visualizations.js","../../src/services/ai-summary.js","../../src/services/ai-scenario-enhancer.js","../../src/services/model-trainer.js","../../src/services/results-interpreter.js","../../src/services/simulation-history.js","../../src/services/simulation-sharing.js","../../src/features/scenario-comparison.js","../../src/features/occupation-drilldown.js","../../src/features/pdf-export.js","../../src/features/pdf-report.js","../../src/features/sensitivity-analysis.js","../../src/features/monte-carlo.js","../../src/features/intervention-cost-calculator.js","../../src/features/timeline-player.js","../../src/features/regional-heatmap.js","../../src/features/demographics-analysis.js","../../src/features/abm-sensitivity.js","../../src/features/skills-gap-analysis.js","../../src/features/url-sharing.js","../../src/abm/agents/worker.js","../../src/abm/agents/firm.js","../../src/abm/agents/training-program.js","../../src/abm/market/labor-market.js","../../src/abm/market/wage-dynamics.js","../../src/abm/market/information.js","../../src/abm/environment/ai-frontier.js","../../src/abm/environment/regions.js","../../src/abm/engine.js","../../src/abm/index.js","../../src/workers/worker-manager.js","../../src/main.js"],"sourcesContent":["/*!\n * @kurkle/color v0.3.4\n * https://github.com/kurkle/color#readme\n * (c) 2024 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction b2p(v) {\n  return lim(round(v / 2.55), 0, 100);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\n\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\n\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\nconst map = {\n\tx: 'dark',\n\tZ: 'light',\n\tY: 're',\n\tX: 'blu',\n\tW: 'gr',\n\tV: 'medium',\n\tU: 'slate',\n\tA: 'ee',\n\tT: 'ol',\n\tS: 'or',\n\tB: 'ra',\n\tC: 'lateg',\n\tD: 'ights',\n\tR: 'in',\n\tQ: 'turquois',\n\tE: 'hi',\n\tP: 'ro',\n\tO: 'al',\n\tN: 'le',\n\tM: 'de',\n\tL: 'yello',\n\tF: 'en',\n\tK: 'ch',\n\tG: 'arks',\n\tH: 'ea',\n\tI: 'ightg',\n\tJ: 'wh'\n};\nconst names$1 = {\n\tOiceXe: 'f0f8ff',\n\tantiquewEte: 'faebd7',\n\taqua: 'ffff',\n\taquamarRe: '7fffd4',\n\tazuY: 'f0ffff',\n\tbeige: 'f5f5dc',\n\tbisque: 'ffe4c4',\n\tblack: '0',\n\tblanKedOmond: 'ffebcd',\n\tXe: 'ff',\n\tXeviTet: '8a2be2',\n\tbPwn: 'a52a2a',\n\tburlywood: 'deb887',\n\tcaMtXe: '5f9ea0',\n\tKartYuse: '7fff00',\n\tKocTate: 'd2691e',\n\tcSO: 'ff7f50',\n\tcSnflowerXe: '6495ed',\n\tcSnsilk: 'fff8dc',\n\tcrimson: 'dc143c',\n\tcyan: 'ffff',\n\txXe: '8b',\n\txcyan: '8b8b',\n\txgTMnPd: 'b8860b',\n\txWay: 'a9a9a9',\n\txgYF: '6400',\n\txgYy: 'a9a9a9',\n\txkhaki: 'bdb76b',\n\txmagFta: '8b008b',\n\txTivegYF: '556b2f',\n\txSange: 'ff8c00',\n\txScEd: '9932cc',\n\txYd: '8b0000',\n\txsOmon: 'e9967a',\n\txsHgYF: '8fbc8f',\n\txUXe: '483d8b',\n\txUWay: '2f4f4f',\n\txUgYy: '2f4f4f',\n\txQe: 'ced1',\n\txviTet: '9400d3',\n\tdAppRk: 'ff1493',\n\tdApskyXe: 'bfff',\n\tdimWay: '696969',\n\tdimgYy: '696969',\n\tdodgerXe: '1e90ff',\n\tfiYbrick: 'b22222',\n\tflSOwEte: 'fffaf0',\n\tfoYstWAn: '228b22',\n\tfuKsia: 'ff00ff',\n\tgaRsbSo: 'dcdcdc',\n\tghostwEte: 'f8f8ff',\n\tgTd: 'ffd700',\n\tgTMnPd: 'daa520',\n\tWay: '808080',\n\tgYF: '8000',\n\tgYFLw: 'adff2f',\n\tgYy: '808080',\n\thoneyMw: 'f0fff0',\n\thotpRk: 'ff69b4',\n\tRdianYd: 'cd5c5c',\n\tRdigo: '4b0082',\n\tivSy: 'fffff0',\n\tkhaki: 'f0e68c',\n\tlavFMr: 'e6e6fa',\n\tlavFMrXsh: 'fff0f5',\n\tlawngYF: '7cfc00',\n\tNmoncEffon: 'fffacd',\n\tZXe: 'add8e6',\n\tZcSO: 'f08080',\n\tZcyan: 'e0ffff',\n\tZgTMnPdLw: 'fafad2',\n\tZWay: 'd3d3d3',\n\tZgYF: '90ee90',\n\tZgYy: 'd3d3d3',\n\tZpRk: 'ffb6c1',\n\tZsOmon: 'ffa07a',\n\tZsHgYF: '20b2aa',\n\tZskyXe: '87cefa',\n\tZUWay: '778899',\n\tZUgYy: '778899',\n\tZstAlXe: 'b0c4de',\n\tZLw: 'ffffe0',\n\tlime: 'ff00',\n\tlimegYF: '32cd32',\n\tlRF: 'faf0e6',\n\tmagFta: 'ff00ff',\n\tmaPon: '800000',\n\tVaquamarRe: '66cdaa',\n\tVXe: 'cd',\n\tVScEd: 'ba55d3',\n\tVpurpN: '9370db',\n\tVsHgYF: '3cb371',\n\tVUXe: '7b68ee',\n\tVsprRggYF: 'fa9a',\n\tVQe: '48d1cc',\n\tVviTetYd: 'c71585',\n\tmidnightXe: '191970',\n\tmRtcYam: 'f5fffa',\n\tmistyPse: 'ffe4e1',\n\tmoccasR: 'ffe4b5',\n\tnavajowEte: 'ffdead',\n\tnavy: '80',\n\tTdlace: 'fdf5e6',\n\tTive: '808000',\n\tTivedBb: '6b8e23',\n\tSange: 'ffa500',\n\tSangeYd: 'ff4500',\n\tScEd: 'da70d6',\n\tpOegTMnPd: 'eee8aa',\n\tpOegYF: '98fb98',\n\tpOeQe: 'afeeee',\n\tpOeviTetYd: 'db7093',\n\tpapayawEp: 'ffefd5',\n\tpHKpuff: 'ffdab9',\n\tperu: 'cd853f',\n\tpRk: 'ffc0cb',\n\tplum: 'dda0dd',\n\tpowMrXe: 'b0e0e6',\n\tpurpN: '800080',\n\tYbeccapurpN: '663399',\n\tYd: 'ff0000',\n\tPsybrown: 'bc8f8f',\n\tPyOXe: '4169e1',\n\tsaddNbPwn: '8b4513',\n\tsOmon: 'fa8072',\n\tsandybPwn: 'f4a460',\n\tsHgYF: '2e8b57',\n\tsHshell: 'fff5ee',\n\tsiFna: 'a0522d',\n\tsilver: 'c0c0c0',\n\tskyXe: '87ceeb',\n\tUXe: '6a5acd',\n\tUWay: '708090',\n\tUgYy: '708090',\n\tsnow: 'fffafa',\n\tsprRggYF: 'ff7f',\n\tstAlXe: '4682b4',\n\ttan: 'd2b48c',\n\tteO: '8080',\n\ttEstN: 'd8bfd8',\n\ttomato: 'ff6347',\n\tQe: '40e0d0',\n\tviTet: 'ee82ee',\n\tJHt: 'f5deb3',\n\twEte: 'ffffff',\n\twEtesmoke: 'f5f5f5',\n\tLw: 'ffff00',\n\tLwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\n\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\n\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\n\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\n\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\n\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nexport { Color, b2n, b2p, index_esm as default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round };\n","/*!\n * Chart.js v4.5.1\n * https://www.chartjs.org\n * (c) 2025 Chart.js Contributors\n * Released under the MIT License\n */\nimport { Color } from '@kurkle/color';\n\n/**\n * @namespace Chart.helpers\n */ /**\n * An empty function that can be used, for example, for optional callback.\n */ function noop() {\n/* noop */ }\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */ const uid = (()=>{\n    let id = 0;\n    return ()=>id++;\n})();\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */ function isNullOrUndef(value) {\n    return value === null || value === undefined;\n}\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */ function isArray(value) {\n    if (Array.isArray && Array.isArray(value)) {\n        return true;\n    }\n    const type = Object.prototype.toString.call(value);\n    if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n        return true;\n    }\n    return false;\n}\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */ function isObject(value) {\n    return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */ function isNumberFinite(value) {\n    return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */ function finiteOrDefault(value, defaultValue) {\n    return isNumberFinite(value) ? value : defaultValue;\n}\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */ function valueOrDefault(value, defaultValue) {\n    return typeof value === 'undefined' ? defaultValue : value;\n}\nconst toPercentage = (value, dimension)=>typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 : +value / dimension;\nconst toDimension = (value, dimension)=>typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 * dimension : +value;\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */ function callback(fn, args, thisArg) {\n    if (fn && typeof fn.call === 'function') {\n        return fn.apply(thisArg, args);\n    }\n}\nfunction each(loopable, fn, thisArg, reverse) {\n    let i, len, keys;\n    if (isArray(loopable)) {\n        len = loopable.length;\n        if (reverse) {\n            for(i = len - 1; i >= 0; i--){\n                fn.call(thisArg, loopable[i], i);\n            }\n        } else {\n            for(i = 0; i < len; i++){\n                fn.call(thisArg, loopable[i], i);\n            }\n        }\n    } else if (isObject(loopable)) {\n        keys = Object.keys(loopable);\n        len = keys.length;\n        for(i = 0; i < len; i++){\n            fn.call(thisArg, loopable[keys[i]], keys[i]);\n        }\n    }\n}\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */ function _elementsEqual(a0, a1) {\n    let i, ilen, v0, v1;\n    if (!a0 || !a1 || a0.length !== a1.length) {\n        return false;\n    }\n    for(i = 0, ilen = a0.length; i < ilen; ++i){\n        v0 = a0[i];\n        v1 = a1[i];\n        if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */ function clone(source) {\n    if (isArray(source)) {\n        return source.map(clone);\n    }\n    if (isObject(source)) {\n        const target = Object.create(null);\n        const keys = Object.keys(source);\n        const klen = keys.length;\n        let k = 0;\n        for(; k < klen; ++k){\n            target[keys[k]] = clone(source[keys[k]]);\n        }\n        return target;\n    }\n    return source;\n}\nfunction isValidKey(key) {\n    return [\n        '__proto__',\n        'prototype',\n        'constructor'\n    ].indexOf(key) === -1;\n}\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */ function _merger(key, target, source, options) {\n    if (!isValidKey(key)) {\n        return;\n    }\n    const tval = target[key];\n    const sval = source[key];\n    if (isObject(tval) && isObject(sval)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        merge(tval, sval, options);\n    } else {\n        target[key] = clone(sval);\n    }\n}\nfunction merge(target, source, options) {\n    const sources = isArray(source) ? source : [\n        source\n    ];\n    const ilen = sources.length;\n    if (!isObject(target)) {\n        return target;\n    }\n    options = options || {};\n    const merger = options.merger || _merger;\n    let current;\n    for(let i = 0; i < ilen; ++i){\n        current = sources[i];\n        if (!isObject(current)) {\n            continue;\n        }\n        const keys = Object.keys(current);\n        for(let k = 0, klen = keys.length; k < klen; ++k){\n            merger(keys[k], target, current, options);\n        }\n    }\n    return target;\n}\nfunction mergeIf(target, source) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return merge(target, source, {\n        merger: _mergerIf\n    });\n}\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */ function _mergerIf(key, target, source) {\n    if (!isValidKey(key)) {\n        return;\n    }\n    const tval = target[key];\n    const sval = source[key];\n    if (isObject(tval) && isObject(sval)) {\n        mergeIf(tval, sval);\n    } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n        target[key] = clone(sval);\n    }\n}\n/**\n * @private\n */ function _deprecated(scope, value, previous, current) {\n    if (value !== undefined) {\n        console.warn(scope + ': \"' + previous + '\" is deprecated. Please use \"' + current + '\" instead');\n    }\n}\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n    // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n    '': (v)=>v,\n    // default resolvers\n    x: (o)=>o.x,\n    y: (o)=>o.y\n};\n/**\n * @private\n */ function _splitKey(key) {\n    const parts = key.split('.');\n    const keys = [];\n    let tmp = '';\n    for (const part of parts){\n        tmp += part;\n        if (tmp.endsWith('\\\\')) {\n            tmp = tmp.slice(0, -1) + '.';\n        } else {\n            keys.push(tmp);\n            tmp = '';\n        }\n    }\n    return keys;\n}\nfunction _getKeyResolver(key) {\n    const keys = _splitKey(key);\n    return (obj)=>{\n        for (const k of keys){\n            if (k === '') {\n                break;\n            }\n            obj = obj && obj[k];\n        }\n        return obj;\n    };\n}\nfunction resolveObjectKey(obj, key) {\n    const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n    return resolver(obj);\n}\n/**\n * @private\n */ function _capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nconst defined = (value)=>typeof value !== 'undefined';\nconst isFunction = (value)=>typeof value === 'function';\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nconst setsEqual = (a, b)=>{\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a){\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * @param e - The event\n * @private\n */ function _isClickEvent(e) {\n    return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */ const PI = Math.PI;\nconst TAU = 2 * PI;\nconst PITAU = TAU + PI;\nconst INFINITY = Number.POSITIVE_INFINITY;\nconst RAD_PER_DEG = PI / 180;\nconst HALF_PI = PI / 2;\nconst QUARTER_PI = PI / 4;\nconst TWO_THIRDS_PI = PI * 2 / 3;\nconst log10 = Math.log10;\nconst sign = Math.sign;\nfunction almostEquals(x, y, epsilon) {\n    return Math.abs(x - y) < epsilon;\n}\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */ function niceNum(range) {\n    const roundedRange = Math.round(range);\n    range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n    const niceRange = Math.pow(10, Math.floor(log10(range)));\n    const fraction = range / niceRange;\n    const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n    return niceFraction * niceRange;\n}\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */ function _factorize(value) {\n    const result = [];\n    const sqrt = Math.sqrt(value);\n    let i;\n    for(i = 1; i < sqrt; i++){\n        if (value % i === 0) {\n            result.push(i);\n            result.push(value / i);\n        }\n    }\n    if (sqrt === (sqrt | 0)) {\n        result.push(sqrt);\n    }\n    result.sort((a, b)=>a - b).pop();\n    return result;\n}\n/**\n * Verifies that attempting to coerce n to string or number won't throw a TypeError.\n */ function isNonPrimitive(n) {\n    return typeof n === 'symbol' || typeof n === 'object' && n !== null && !(Symbol.toPrimitive in n || 'toString' in n || 'valueOf' in n);\n}\nfunction isNumber(n) {\n    return !isNonPrimitive(n) && !isNaN(parseFloat(n)) && isFinite(n);\n}\nfunction almostWhole(x, epsilon) {\n    const rounded = Math.round(x);\n    return rounded - epsilon <= x && rounded + epsilon >= x;\n}\n/**\n * @private\n */ function _setMinAndMaxByKey(array, target, property) {\n    let i, ilen, value;\n    for(i = 0, ilen = array.length; i < ilen; i++){\n        value = array[i][property];\n        if (!isNaN(value)) {\n            target.min = Math.min(target.min, value);\n            target.max = Math.max(target.max, value);\n        }\n    }\n}\nfunction toRadians(degrees) {\n    return degrees * (PI / 180);\n}\nfunction toDegrees(radians) {\n    return radians * (180 / PI);\n}\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */ function _decimalPlaces(x) {\n    if (!isNumberFinite(x)) {\n        return;\n    }\n    let e = 1;\n    let p = 0;\n    while(Math.round(x * e) / e !== x){\n        e *= 10;\n        p++;\n    }\n    return p;\n}\n// Gets the angle from vertical upright to the point about a centre.\nfunction getAngleFromPoint(centrePoint, anglePoint) {\n    const distanceFromXCenter = anglePoint.x - centrePoint.x;\n    const distanceFromYCenter = anglePoint.y - centrePoint.y;\n    const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n    let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n    if (angle < -0.5 * PI) {\n        angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n    }\n    return {\n        angle,\n        distance: radialDistanceFromCenter\n    };\n}\nfunction distanceBetweenPoints(pt1, pt2) {\n    return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */ function _angleDiff(a, b) {\n    return (a - b + PITAU) % TAU - PI;\n}\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */ function _normalizeAngle(a) {\n    return (a % TAU + TAU) % TAU;\n}\n/**\n * @private\n */ function _angleBetween(angle, start, end, sameAngleIsFullCircle) {\n    const a = _normalizeAngle(angle);\n    const s = _normalizeAngle(start);\n    const e = _normalizeAngle(end);\n    const angleToStart = _normalizeAngle(s - a);\n    const angleToEnd = _normalizeAngle(e - a);\n    const startToAngle = _normalizeAngle(a - s);\n    const endToAngle = _normalizeAngle(a - e);\n    return a === s || a === e || sameAngleIsFullCircle && s === e || angleToStart > angleToEnd && startToAngle < endToAngle;\n}\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */ function _limitValue(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/**\n * @param {number} value\n * @private\n */ function _int16Range(value) {\n    return _limitValue(value, -32768, 32767);\n}\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */ function _isBetween(value, start, end, epsilon = 1e-6) {\n    return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n\nfunction _lookup(table, value, cmp) {\n    cmp = cmp || ((index)=>table[index] < value);\n    let hi = table.length - 1;\n    let lo = 0;\n    let mid;\n    while(hi - lo > 1){\n        mid = lo + hi >> 1;\n        if (cmp(mid)) {\n            lo = mid;\n        } else {\n            hi = mid;\n        }\n    }\n    return {\n        lo,\n        hi\n    };\n}\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */ const _lookupByKey = (table, key, value, last)=>_lookup(table, value, last ? (index)=>{\n        const ti = table[index][key];\n        return ti < value || ti === value && table[index + 1][key] === value;\n    } : (index)=>table[index][key] < value);\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */ const _rlookupByKey = (table, key, value)=>_lookup(table, value, (index)=>table[index][key] >= value);\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */ function _filterBetween(values, min, max) {\n    let start = 0;\n    let end = values.length;\n    while(start < end && values[start] < min){\n        start++;\n    }\n    while(end > start && values[end - 1] > max){\n        end--;\n    }\n    return start > 0 || end < values.length ? values.slice(start, end) : values;\n}\nconst arrayEvents = [\n    'push',\n    'pop',\n    'shift',\n    'splice',\n    'unshift'\n];\nfunction listenArrayEvents(array, listener) {\n    if (array._chartjs) {\n        array._chartjs.listeners.push(listener);\n        return;\n    }\n    Object.defineProperty(array, '_chartjs', {\n        configurable: true,\n        enumerable: false,\n        value: {\n            listeners: [\n                listener\n            ]\n        }\n    });\n    arrayEvents.forEach((key)=>{\n        const method = '_onData' + _capitalize(key);\n        const base = array[key];\n        Object.defineProperty(array, key, {\n            configurable: true,\n            enumerable: false,\n            value (...args) {\n                const res = base.apply(this, args);\n                array._chartjs.listeners.forEach((object)=>{\n                    if (typeof object[method] === 'function') {\n                        object[method](...args);\n                    }\n                });\n                return res;\n            }\n        });\n    });\n}\nfunction unlistenArrayEvents(array, listener) {\n    const stub = array._chartjs;\n    if (!stub) {\n        return;\n    }\n    const listeners = stub.listeners;\n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n        listeners.splice(index, 1);\n    }\n    if (listeners.length > 0) {\n        return;\n    }\n    arrayEvents.forEach((key)=>{\n        delete array[key];\n    });\n    delete array._chartjs;\n}\n/**\n * @param items\n */ function _arrayUnique(items) {\n    const set = new Set(items);\n    if (set.size === items.length) {\n        return items;\n    }\n    return Array.from(set);\n}\n\nfunction fontString(pixelSize, fontStyle, fontFamily) {\n    return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n/**\n* Request animation polyfill\n*/ const requestAnimFrame = function() {\n    if (typeof window === 'undefined') {\n        return function(callback) {\n            return callback();\n        };\n    }\n    return window.requestAnimationFrame;\n}();\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */ function throttled(fn, thisArg) {\n    let argsToUse = [];\n    let ticking = false;\n    return function(...args) {\n        // Save the args for use later\n        argsToUse = args;\n        if (!ticking) {\n            ticking = true;\n            requestAnimFrame.call(window, ()=>{\n                ticking = false;\n                fn.apply(thisArg, argsToUse);\n            });\n        }\n    };\n}\n/**\n * Debounces calling `fn` for `delay` ms\n */ function debounce(fn, delay) {\n    let timeout;\n    return function(...args) {\n        if (delay) {\n            clearTimeout(timeout);\n            timeout = setTimeout(fn, delay, args);\n        } else {\n            fn.apply(this, args);\n        }\n        return delay;\n    };\n}\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */ const _toLeftRightCenter = (align)=>align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */ const _alignStartEnd = (align, start, end)=>align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */ const _textX = (align, left, right, rtl)=>{\n    const check = rtl ? 'left' : 'right';\n    return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n/**\n * Return start and count of visible points.\n * @private\n */ function _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {\n    const pointCount = points.length;\n    let start = 0;\n    let count = pointCount;\n    if (meta._sorted) {\n        const { iScale , vScale , _parsed  } = meta;\n        const spanGaps = meta.dataset ? meta.dataset.options ? meta.dataset.options.spanGaps : null : null;\n        const axis = iScale.axis;\n        const { min , max , minDefined , maxDefined  } = iScale.getUserBounds();\n        if (minDefined) {\n            start = Math.min(// @ts-expect-error Need to type _parsed\n            _lookupByKey(_parsed, axis, min).lo, // @ts-expect-error Need to fix types on _lookupByKey\n            animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo);\n            if (spanGaps) {\n                const distanceToDefinedLo = _parsed.slice(0, start + 1).reverse().findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                start -= Math.max(0, distanceToDefinedLo);\n            }\n            start = _limitValue(start, 0, pointCount - 1);\n        }\n        if (maxDefined) {\n            let end = Math.max(// @ts-expect-error Need to type _parsed\n            _lookupByKey(_parsed, iScale.axis, max, true).hi + 1, // @ts-expect-error Need to fix types on _lookupByKey\n            animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1);\n            if (spanGaps) {\n                const distanceToDefinedHi = _parsed.slice(end - 1).findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                end += Math.max(0, distanceToDefinedHi);\n            }\n            count = _limitValue(end, start, pointCount) - start;\n        } else {\n            count = pointCount - start;\n        }\n    }\n    return {\n        start,\n        count\n    };\n}\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */ function _scaleRangesChanged(meta) {\n    const { xScale , yScale , _scaleRanges  } = meta;\n    const newRanges = {\n        xmin: xScale.min,\n        xmax: xScale.max,\n        ymin: yScale.min,\n        ymax: yScale.max\n    };\n    if (!_scaleRanges) {\n        meta._scaleRanges = newRanges;\n        return true;\n    }\n    const changed = _scaleRanges.xmin !== xScale.min || _scaleRanges.xmax !== xScale.max || _scaleRanges.ymin !== yScale.min || _scaleRanges.ymax !== yScale.max;\n    Object.assign(_scaleRanges, newRanges);\n    return changed;\n}\n\nconst atEdge = (t)=>t === 0 || t === 1;\nconst elasticIn = (t, s, p)=>-(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t, s, p)=>Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */ const effects = {\n    linear: (t)=>t,\n    easeInQuad: (t)=>t * t,\n    easeOutQuad: (t)=>-t * (t - 2),\n    easeInOutQuad: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1),\n    easeInCubic: (t)=>t * t * t,\n    easeOutCubic: (t)=>(t -= 1) * t * t + 1,\n    easeInOutCubic: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2),\n    easeInQuart: (t)=>t * t * t * t,\n    easeOutQuart: (t)=>-((t -= 1) * t * t * t - 1),\n    easeInOutQuart: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2),\n    easeInQuint: (t)=>t * t * t * t * t,\n    easeOutQuint: (t)=>(t -= 1) * t * t * t * t + 1,\n    easeInOutQuint: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2),\n    easeInSine: (t)=>-Math.cos(t * HALF_PI) + 1,\n    easeOutSine: (t)=>Math.sin(t * HALF_PI),\n    easeInOutSine: (t)=>-0.5 * (Math.cos(PI * t) - 1),\n    easeInExpo: (t)=>t === 0 ? 0 : Math.pow(2, 10 * (t - 1)),\n    easeOutExpo: (t)=>t === 1 ? 1 : -Math.pow(2, -10 * t) + 1,\n    easeInOutExpo: (t)=>atEdge(t) ? t : t < 0.5 ? 0.5 * Math.pow(2, 10 * (t * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n    easeInCirc: (t)=>t >= 1 ? t : -(Math.sqrt(1 - t * t) - 1),\n    easeOutCirc: (t)=>Math.sqrt(1 - (t -= 1) * t),\n    easeInOutCirc: (t)=>(t /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n    easeInElastic: (t)=>atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n    easeOutElastic: (t)=>atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n    easeInOutElastic (t) {\n        const s = 0.1125;\n        const p = 0.45;\n        return atEdge(t) ? t : t < 0.5 ? 0.5 * elasticIn(t * 2, s, p) : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n    },\n    easeInBack (t) {\n        const s = 1.70158;\n        return t * t * ((s + 1) * t - s);\n    },\n    easeOutBack (t) {\n        const s = 1.70158;\n        return (t -= 1) * t * ((s + 1) * t + s) + 1;\n    },\n    easeInOutBack (t) {\n        let s = 1.70158;\n        if ((t /= 0.5) < 1) {\n            return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));\n        }\n        return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n    },\n    easeInBounce: (t)=>1 - effects.easeOutBounce(1 - t),\n    easeOutBounce (t) {\n        const m = 7.5625;\n        const d = 2.75;\n        if (t < 1 / d) {\n            return m * t * t;\n        }\n        if (t < 2 / d) {\n            return m * (t -= 1.5 / d) * t + 0.75;\n        }\n        if (t < 2.5 / d) {\n            return m * (t -= 2.25 / d) * t + 0.9375;\n        }\n        return m * (t -= 2.625 / d) * t + 0.984375;\n    },\n    easeInOutBounce: (t)=>t < 0.5 ? effects.easeInBounce(t * 2) * 0.5 : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5\n};\n\nfunction isPatternOrGradient(value) {\n    if (value && typeof value === 'object') {\n        const type = value.toString();\n        return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n    }\n    return false;\n}\nfunction color(value) {\n    return isPatternOrGradient(value) ? value : new Color(value);\n}\nfunction getHoverColor(value) {\n    return isPatternOrGradient(value) ? value : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n\nconst numbers = [\n    'x',\n    'y',\n    'borderWidth',\n    'radius',\n    'tension'\n];\nconst colors = [\n    'color',\n    'borderColor',\n    'backgroundColor'\n];\nfunction applyAnimationsDefaults(defaults) {\n    defaults.set('animation', {\n        delay: undefined,\n        duration: 1000,\n        easing: 'easeOutQuart',\n        fn: undefined,\n        from: undefined,\n        loop: undefined,\n        to: undefined,\n        type: undefined\n    });\n    defaults.describe('animation', {\n        _fallback: false,\n        _indexable: false,\n        _scriptable: (name)=>name !== 'onProgress' && name !== 'onComplete' && name !== 'fn'\n    });\n    defaults.set('animations', {\n        colors: {\n            type: 'color',\n            properties: colors\n        },\n        numbers: {\n            type: 'number',\n            properties: numbers\n        }\n    });\n    defaults.describe('animations', {\n        _fallback: 'animation'\n    });\n    defaults.set('transitions', {\n        active: {\n            animation: {\n                duration: 400\n            }\n        },\n        resize: {\n            animation: {\n                duration: 0\n            }\n        },\n        show: {\n            animations: {\n                colors: {\n                    from: 'transparent'\n                },\n                visible: {\n                    type: 'boolean',\n                    duration: 0\n                }\n            }\n        },\n        hide: {\n            animations: {\n                colors: {\n                    to: 'transparent'\n                },\n                visible: {\n                    type: 'boolean',\n                    easing: 'linear',\n                    fn: (v)=>v | 0\n                }\n            }\n        }\n    });\n}\n\nfunction applyLayoutsDefaults(defaults) {\n    defaults.set('layout', {\n        autoPadding: true,\n        padding: {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n        }\n    });\n}\n\nconst intlCache = new Map();\nfunction getNumberFormat(locale, options) {\n    options = options || {};\n    const cacheKey = locale + JSON.stringify(options);\n    let formatter = intlCache.get(cacheKey);\n    if (!formatter) {\n        formatter = new Intl.NumberFormat(locale, options);\n        intlCache.set(cacheKey, formatter);\n    }\n    return formatter;\n}\nfunction formatNumber(num, locale, options) {\n    return getNumberFormat(locale, options).format(num);\n}\n\nconst formatters = {\n values (value) {\n        return isArray(value) ?  value : '' + value;\n    },\n numeric (tickValue, index, ticks) {\n        if (tickValue === 0) {\n            return '0';\n        }\n        const locale = this.chart.options.locale;\n        let notation;\n        let delta = tickValue;\n        if (ticks.length > 1) {\n            const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n            if (maxTick < 1e-4 || maxTick > 1e+15) {\n                notation = 'scientific';\n            }\n            delta = calculateDelta(tickValue, ticks);\n        }\n        const logDelta = log10(Math.abs(delta));\n        const numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n        const options = {\n            notation,\n            minimumFractionDigits: numDecimal,\n            maximumFractionDigits: numDecimal\n        };\n        Object.assign(options, this.options.ticks.format);\n        return formatNumber(tickValue, locale, options);\n    },\n logarithmic (tickValue, index, ticks) {\n        if (tickValue === 0) {\n            return '0';\n        }\n        const remain = ticks[index].significand || tickValue / Math.pow(10, Math.floor(log10(tickValue)));\n        if ([\n            1,\n            2,\n            3,\n            5,\n            10,\n            15\n        ].includes(remain) || index > 0.8 * ticks.length) {\n            return formatters.numeric.call(this, tickValue, index, ticks);\n        }\n        return '';\n    }\n};\nfunction calculateDelta(tickValue, ticks) {\n    let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n    if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n        delta = tickValue - Math.floor(tickValue);\n    }\n    return delta;\n}\n var Ticks = {\n    formatters\n};\n\nfunction applyScaleDefaults(defaults) {\n    defaults.set('scale', {\n        display: true,\n        offset: false,\n        reverse: false,\n        beginAtZero: false,\n bounds: 'ticks',\n        clip: true,\n grace: 0,\n        grid: {\n            display: true,\n            lineWidth: 1,\n            drawOnChartArea: true,\n            drawTicks: true,\n            tickLength: 8,\n            tickWidth: (_ctx, options)=>options.lineWidth,\n            tickColor: (_ctx, options)=>options.color,\n            offset: false\n        },\n        border: {\n            display: true,\n            dash: [],\n            dashOffset: 0.0,\n            width: 1\n        },\n        title: {\n            display: false,\n            text: '',\n            padding: {\n                top: 4,\n                bottom: 4\n            }\n        },\n        ticks: {\n            minRotation: 0,\n            maxRotation: 50,\n            mirror: false,\n            textStrokeWidth: 0,\n            textStrokeColor: '',\n            padding: 3,\n            display: true,\n            autoSkip: true,\n            autoSkipPadding: 3,\n            labelOffset: 0,\n            callback: Ticks.formatters.values,\n            minor: {},\n            major: {},\n            align: 'center',\n            crossAlign: 'near',\n            showLabelBackdrop: false,\n            backdropColor: 'rgba(255, 255, 255, 0.75)',\n            backdropPadding: 2\n        }\n    });\n    defaults.route('scale.ticks', 'color', '', 'color');\n    defaults.route('scale.grid', 'color', '', 'borderColor');\n    defaults.route('scale.border', 'color', '', 'borderColor');\n    defaults.route('scale.title', 'color', '', 'color');\n    defaults.describe('scale', {\n        _fallback: false,\n        _scriptable: (name)=>!name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n        _indexable: (name)=>name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash'\n    });\n    defaults.describe('scales', {\n        _fallback: 'scale'\n    });\n    defaults.describe('scale.ticks', {\n        _scriptable: (name)=>name !== 'backdropPadding' && name !== 'callback',\n        _indexable: (name)=>name !== 'backdropPadding'\n    });\n}\n\nconst overrides = Object.create(null);\nconst descriptors = Object.create(null);\n function getScope$1(node, key) {\n    if (!key) {\n        return node;\n    }\n    const keys = key.split('.');\n    for(let i = 0, n = keys.length; i < n; ++i){\n        const k = keys[i];\n        node = node[k] || (node[k] = Object.create(null));\n    }\n    return node;\n}\nfunction set(root, scope, values) {\n    if (typeof scope === 'string') {\n        return merge(getScope$1(root, scope), values);\n    }\n    return merge(getScope$1(root, ''), scope);\n}\n class Defaults {\n    constructor(_descriptors, _appliers){\n        this.animation = undefined;\n        this.backgroundColor = 'rgba(0,0,0,0.1)';\n        this.borderColor = 'rgba(0,0,0,0.1)';\n        this.color = '#666';\n        this.datasets = {};\n        this.devicePixelRatio = (context)=>context.chart.platform.getDevicePixelRatio();\n        this.elements = {};\n        this.events = [\n            'mousemove',\n            'mouseout',\n            'click',\n            'touchstart',\n            'touchmove'\n        ];\n        this.font = {\n            family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n            size: 12,\n            style: 'normal',\n            lineHeight: 1.2,\n            weight: null\n        };\n        this.hover = {};\n        this.hoverBackgroundColor = (ctx, options)=>getHoverColor(options.backgroundColor);\n        this.hoverBorderColor = (ctx, options)=>getHoverColor(options.borderColor);\n        this.hoverColor = (ctx, options)=>getHoverColor(options.color);\n        this.indexAxis = 'x';\n        this.interaction = {\n            mode: 'nearest',\n            intersect: true,\n            includeInvisible: false\n        };\n        this.maintainAspectRatio = true;\n        this.onHover = null;\n        this.onClick = null;\n        this.parsing = true;\n        this.plugins = {};\n        this.responsive = true;\n        this.scale = undefined;\n        this.scales = {};\n        this.showLine = true;\n        this.drawActiveElementsOnTop = true;\n        this.describe(_descriptors);\n        this.apply(_appliers);\n    }\n set(scope, values) {\n        return set(this, scope, values);\n    }\n get(scope) {\n        return getScope$1(this, scope);\n    }\n describe(scope, values) {\n        return set(descriptors, scope, values);\n    }\n    override(scope, values) {\n        return set(overrides, scope, values);\n    }\n route(scope, name, targetScope, targetName) {\n        const scopeObject = getScope$1(this, scope);\n        const targetScopeObject = getScope$1(this, targetScope);\n        const privateName = '_' + name;\n        Object.defineProperties(scopeObject, {\n            [privateName]: {\n                value: scopeObject[name],\n                writable: true\n            },\n            [name]: {\n                enumerable: true,\n                get () {\n                    const local = this[privateName];\n                    const target = targetScopeObject[targetName];\n                    if (isObject(local)) {\n                        return Object.assign({}, target, local);\n                    }\n                    return valueOrDefault(local, target);\n                },\n                set (value) {\n                    this[privateName] = value;\n                }\n            }\n        });\n    }\n    apply(appliers) {\n        appliers.forEach((apply)=>apply(this));\n    }\n}\nvar defaults = /* #__PURE__ */ new Defaults({\n    _scriptable: (name)=>!name.startsWith('on'),\n    _indexable: (name)=>name !== 'events',\n    hover: {\n        _fallback: 'interaction'\n    },\n    interaction: {\n        _scriptable: false,\n        _indexable: false\n    }\n}, [\n    applyAnimationsDefaults,\n    applyLayoutsDefaults,\n    applyScaleDefaults\n]);\n\n/**\n * Converts the given font object into a CSS font string.\n * @param font - A font object.\n * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */ function toFontString(font) {\n    if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n        return null;\n    }\n    return (font.style ? font.style + ' ' : '') + (font.weight ? font.weight + ' ' : '') + font.size + 'px ' + font.family;\n}\n/**\n * @private\n */ function _measureText(ctx, data, gc, longest, string) {\n    let textWidth = data[string];\n    if (!textWidth) {\n        textWidth = data[string] = ctx.measureText(string).width;\n        gc.push(string);\n    }\n    if (textWidth > longest) {\n        longest = textWidth;\n    }\n    return longest;\n}\n/**\n * @private\n */ // eslint-disable-next-line complexity\nfunction _longestText(ctx, font, arrayOfThings, cache) {\n    cache = cache || {};\n    let data = cache.data = cache.data || {};\n    let gc = cache.garbageCollect = cache.garbageCollect || [];\n    if (cache.font !== font) {\n        data = cache.data = {};\n        gc = cache.garbageCollect = [];\n        cache.font = font;\n    }\n    ctx.save();\n    ctx.font = font;\n    let longest = 0;\n    const ilen = arrayOfThings.length;\n    let i, j, jlen, thing, nestedThing;\n    for(i = 0; i < ilen; i++){\n        thing = arrayOfThings[i];\n        // Undefined strings and arrays should not be measured\n        if (thing !== undefined && thing !== null && !isArray(thing)) {\n            longest = _measureText(ctx, data, gc, longest, thing);\n        } else if (isArray(thing)) {\n            // if it is an array lets measure each element\n            // to do maybe simplify this function a bit so we can do this more recursively?\n            for(j = 0, jlen = thing.length; j < jlen; j++){\n                nestedThing = thing[j];\n                // Undefined strings and arrays should not be measured\n                if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n                    longest = _measureText(ctx, data, gc, longest, nestedThing);\n                }\n            }\n        }\n    }\n    ctx.restore();\n    const gcLen = gc.length / 2;\n    if (gcLen > arrayOfThings.length) {\n        for(i = 0; i < gcLen; i++){\n            delete data[gc[i]];\n        }\n        gc.splice(0, gcLen);\n    }\n    return longest;\n}\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param chart - The chart instance.\n * @param pixel - A pixel value.\n * @param width - The width of the element.\n * @returns The aligned pixel value.\n * @private\n */ function _alignPixel(chart, pixel, width) {\n    const devicePixelRatio = chart.currentDevicePixelRatio;\n    const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n    return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n/**\n * Clears the entire canvas.\n */ function clearCanvas(canvas, ctx) {\n    if (!ctx && !canvas) {\n        return;\n    }\n    ctx = ctx || canvas.getContext('2d');\n    ctx.save();\n    // canvas.width and canvas.height do not consider the canvas transform,\n    // while clearRect does\n    ctx.resetTransform();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.restore();\n}\nfunction drawPoint(ctx, options, x, y) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    drawPointLegend(ctx, options, x, y, null);\n}\n// eslint-disable-next-line complexity\nfunction drawPointLegend(ctx, options, x, y, w) {\n    let type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;\n    const style = options.pointStyle;\n    const rotation = options.rotation;\n    const radius = options.radius;\n    let rad = (rotation || 0) * RAD_PER_DEG;\n    if (style && typeof style === 'object') {\n        type = style.toString();\n        if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n            ctx.save();\n            ctx.translate(x, y);\n            ctx.rotate(rad);\n            ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n            ctx.restore();\n            return;\n        }\n    }\n    if (isNaN(radius) || radius <= 0) {\n        return;\n    }\n    ctx.beginPath();\n    switch(style){\n        // Default includes circle\n        default:\n            if (w) {\n                ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n            } else {\n                ctx.arc(x, y, radius, 0, TAU);\n            }\n            ctx.closePath();\n            break;\n        case 'triangle':\n            width = w ? w / 2 : radius;\n            ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            rad += TWO_THIRDS_PI;\n            ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            rad += TWO_THIRDS_PI;\n            ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            ctx.closePath();\n            break;\n        case 'rectRounded':\n            // NOTE: the rounded rect implementation changed to use `arc` instead of\n            // `quadraticCurveTo` since it generates better results when rect is\n            // almost a circle. 0.516 (instead of 0.5) produces results with visually\n            // closer proportion to the previous impl and it is inscribed in the\n            // circle with `radius`. For more details, see the following PRs:\n            // https://github.com/chartjs/Chart.js/issues/5597\n            // https://github.com/chartjs/Chart.js/issues/5858\n            cornerRadius = radius * 0.516;\n            size = radius - cornerRadius;\n            xOffset = Math.cos(rad + QUARTER_PI) * size;\n            xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n            yOffset = Math.sin(rad + QUARTER_PI) * size;\n            yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n            ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n            ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n            ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n            ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n            ctx.closePath();\n            break;\n        case 'rect':\n            if (!rotation) {\n                size = Math.SQRT1_2 * radius;\n                width = w ? w / 2 : size;\n                ctx.rect(x - width, y - size, 2 * width, 2 * size);\n                break;\n            }\n            rad += QUARTER_PI;\n        /* falls through */ case 'rectRot':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            ctx.closePath();\n            break;\n        case 'crossRot':\n            rad += QUARTER_PI;\n        /* falls through */ case 'cross':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            break;\n        case 'star':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            rad += QUARTER_PI;\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            break;\n        case 'line':\n            xOffset = w ? w / 2 : Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            ctx.moveTo(x - xOffset, y - yOffset);\n            ctx.lineTo(x + xOffset, y + yOffset);\n            break;\n        case 'dash':\n            ctx.moveTo(x, y);\n            ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n            break;\n        case false:\n            ctx.closePath();\n            break;\n    }\n    ctx.fill();\n    if (options.borderWidth > 0) {\n        ctx.stroke();\n    }\n}\n/**\n * Returns true if the point is inside the rectangle\n * @param point - The point to test\n * @param area - The rectangle\n * @param margin - allowed margin\n * @private\n */ function _isPointInArea(point, area, margin) {\n    margin = margin || 0.5; // margin - default is to match rounded decimals\n    return !area || point && point.x > area.left - margin && point.x < area.right + margin && point.y > area.top - margin && point.y < area.bottom + margin;\n}\nfunction clipArea(ctx, area) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n    ctx.clip();\n}\nfunction unclipArea(ctx) {\n    ctx.restore();\n}\n/**\n * @private\n */ function _steppedLineTo(ctx, previous, target, flip, mode) {\n    if (!previous) {\n        return ctx.lineTo(target.x, target.y);\n    }\n    if (mode === 'middle') {\n        const midpoint = (previous.x + target.x) / 2.0;\n        ctx.lineTo(midpoint, previous.y);\n        ctx.lineTo(midpoint, target.y);\n    } else if (mode === 'after' !== !!flip) {\n        ctx.lineTo(previous.x, target.y);\n    } else {\n        ctx.lineTo(target.x, previous.y);\n    }\n    ctx.lineTo(target.x, target.y);\n}\n/**\n * @private\n */ function _bezierCurveTo(ctx, previous, target, flip) {\n    if (!previous) {\n        return ctx.lineTo(target.x, target.y);\n    }\n    ctx.bezierCurveTo(flip ? previous.cp1x : previous.cp2x, flip ? previous.cp1y : previous.cp2y, flip ? target.cp2x : target.cp1x, flip ? target.cp2y : target.cp1y, target.x, target.y);\n}\nfunction setRenderOpts(ctx, opts) {\n    if (opts.translation) {\n        ctx.translate(opts.translation[0], opts.translation[1]);\n    }\n    if (!isNullOrUndef(opts.rotation)) {\n        ctx.rotate(opts.rotation);\n    }\n    if (opts.color) {\n        ctx.fillStyle = opts.color;\n    }\n    if (opts.textAlign) {\n        ctx.textAlign = opts.textAlign;\n    }\n    if (opts.textBaseline) {\n        ctx.textBaseline = opts.textBaseline;\n    }\n}\nfunction decorateText(ctx, x, y, line, opts) {\n    if (opts.strikethrough || opts.underline) {\n        /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */ const metrics = ctx.measureText(line);\n        const left = x - metrics.actualBoundingBoxLeft;\n        const right = x + metrics.actualBoundingBoxRight;\n        const top = y - metrics.actualBoundingBoxAscent;\n        const bottom = y + metrics.actualBoundingBoxDescent;\n        const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n        ctx.strokeStyle = ctx.fillStyle;\n        ctx.beginPath();\n        ctx.lineWidth = opts.decorationWidth || 2;\n        ctx.moveTo(left, yDecoration);\n        ctx.lineTo(right, yDecoration);\n        ctx.stroke();\n    }\n}\nfunction drawBackdrop(ctx, opts) {\n    const oldColor = ctx.fillStyle;\n    ctx.fillStyle = opts.color;\n    ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n    ctx.fillStyle = oldColor;\n}\n/**\n * Render text onto the canvas\n */ function renderText(ctx, text, x, y, font, opts = {}) {\n    const lines = isArray(text) ? text : [\n        text\n    ];\n    const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n    let i, line;\n    ctx.save();\n    ctx.font = font.string;\n    setRenderOpts(ctx, opts);\n    for(i = 0; i < lines.length; ++i){\n        line = lines[i];\n        if (opts.backdrop) {\n            drawBackdrop(ctx, opts.backdrop);\n        }\n        if (stroke) {\n            if (opts.strokeColor) {\n                ctx.strokeStyle = opts.strokeColor;\n            }\n            if (!isNullOrUndef(opts.strokeWidth)) {\n                ctx.lineWidth = opts.strokeWidth;\n            }\n            ctx.strokeText(line, x, y, opts.maxWidth);\n        }\n        ctx.fillText(line, x, y, opts.maxWidth);\n        decorateText(ctx, x, y, line, opts);\n        y += Number(font.lineHeight);\n    }\n    ctx.restore();\n}\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param ctx - Context\n * @param rect - Bounding rect\n */ function addRoundedRectPath(ctx, rect) {\n    const { x , y , w , h , radius  } = rect;\n    // top left arc\n    ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true);\n    // line from top left to bottom left\n    ctx.lineTo(x, y + h - radius.bottomLeft);\n    // bottom left arc\n    ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n    // line from bottom left to bottom right\n    ctx.lineTo(x + w - radius.bottomRight, y + h);\n    // bottom right arc\n    ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n    // line from bottom right to top right\n    ctx.lineTo(x + w, y + radius.topRight);\n    // top right arc\n    ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n    // line from top right to top left\n    ctx.lineTo(x + radius.topLeft, y);\n}\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n/**\n * @alias Chart.helpers.options\n * @namespace\n */ /**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */ function toLineHeight(value, size) {\n    const matches = ('' + value).match(LINE_HEIGHT);\n    if (!matches || matches[1] === 'normal') {\n        return size * 1.2;\n    }\n    value = +matches[2];\n    switch(matches[3]){\n        case 'px':\n            return value;\n        case '%':\n            value /= 100;\n            break;\n    }\n    return size * value;\n}\nconst numberOrZero = (v)=>+v || 0;\nfunction _readValueToProps(value, props) {\n    const ret = {};\n    const objProps = isObject(props);\n    const keys = objProps ? Object.keys(props) : props;\n    const read = isObject(value) ? objProps ? (prop)=>valueOrDefault(value[prop], value[props[prop]]) : (prop)=>value[prop] : ()=>value;\n    for (const prop of keys){\n        ret[prop] = numberOrZero(read(prop));\n    }\n    return ret;\n}\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */ function toTRBL(value) {\n    return _readValueToProps(value, {\n        top: 'y',\n        right: 'x',\n        bottom: 'y',\n        left: 'x'\n    });\n}\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */ function toTRBLCorners(value) {\n    return _readValueToProps(value, [\n        'topLeft',\n        'topRight',\n        'bottomLeft',\n        'bottomRight'\n    ]);\n}\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */ function toPadding(value) {\n    const obj = toTRBL(value);\n    obj.width = obj.left + obj.right;\n    obj.height = obj.top + obj.bottom;\n    return obj;\n}\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */ function toFont(options, fallback) {\n    options = options || {};\n    fallback = fallback || defaults.font;\n    let size = valueOrDefault(options.size, fallback.size);\n    if (typeof size === 'string') {\n        size = parseInt(size, 10);\n    }\n    let style = valueOrDefault(options.style, fallback.style);\n    if (style && !('' + style).match(FONT_STYLE)) {\n        console.warn('Invalid font style specified: \"' + style + '\"');\n        style = undefined;\n    }\n    const font = {\n        family: valueOrDefault(options.family, fallback.family),\n        lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n        size,\n        style,\n        weight: valueOrDefault(options.weight, fallback.weight),\n        string: ''\n    };\n    font.string = toFontString(font);\n    return font;\n}\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */ function resolve(inputs, context, index, info) {\n    let cacheable = true;\n    let i, ilen, value;\n    for(i = 0, ilen = inputs.length; i < ilen; ++i){\n        value = inputs[i];\n        if (value === undefined) {\n            continue;\n        }\n        if (context !== undefined && typeof value === 'function') {\n            value = value(context);\n            cacheable = false;\n        }\n        if (index !== undefined && isArray(value)) {\n            value = value[index % value.length];\n            cacheable = false;\n        }\n        if (value !== undefined) {\n            if (info && !cacheable) {\n                info.cacheable = false;\n            }\n            return value;\n        }\n    }\n}\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */ function _addGrace(minmax, grace, beginAtZero) {\n    const { min , max  } = minmax;\n    const change = toDimension(grace, (max - min) / 2);\n    const keepZero = (value, add)=>beginAtZero && value === 0 ? 0 : value + add;\n    return {\n        min: keepZero(min, -Math.abs(change)),\n        max: keepZero(max, change)\n    };\n}\nfunction createContext(parentContext, context) {\n    return Object.assign(Object.create(parentContext), context);\n}\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param scopes - The option scopes to look for values, in resolution order\n * @param prefixes - The prefixes for values, in resolution order.\n * @param rootScopes - The root option scopes\n * @param fallback - Parent scopes fallback\n * @param getTarget - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */ function _createResolver(scopes, prefixes = [\n    ''\n], rootScopes, fallback, getTarget = ()=>scopes[0]) {\n    const finalRootScopes = rootScopes || scopes;\n    if (typeof fallback === 'undefined') {\n        fallback = _resolve('_fallback', scopes);\n    }\n    const cache = {\n        [Symbol.toStringTag]: 'Object',\n        _cacheable: true,\n        _scopes: scopes,\n        _rootScopes: finalRootScopes,\n        _fallback: fallback,\n        _getTarget: getTarget,\n        override: (scope)=>_createResolver([\n                scope,\n                ...scopes\n            ], prefixes, finalRootScopes, fallback)\n    };\n    return new Proxy(cache, {\n        /**\n     * A trap for the delete operator.\n     */ deleteProperty (target, prop) {\n            delete target[prop]; // remove from cache\n            delete target._keys; // remove cached keys\n            delete scopes[0][prop]; // remove from top level scope\n            return true;\n        },\n        /**\n     * A trap for getting property values.\n     */ get (target, prop) {\n            return _cached(target, prop, ()=>_resolveWithPrefixes(prop, prefixes, scopes, target));\n        },\n        /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */ getOwnPropertyDescriptor (target, prop) {\n            return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n        },\n        /**\n     * A trap for Object.getPrototypeOf.\n     */ getPrototypeOf () {\n            return Reflect.getPrototypeOf(scopes[0]);\n        },\n        /**\n     * A trap for the in operator.\n     */ has (target, prop) {\n            return getKeysFromAllScopes(target).includes(prop);\n        },\n        /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */ ownKeys (target) {\n            return getKeysFromAllScopes(target);\n        },\n        /**\n     * A trap for setting property values.\n     */ set (target, prop, value) {\n            const storage = target._storage || (target._storage = getTarget());\n            target[prop] = storage[prop] = value; // set to top level scope + cache\n            delete target._keys; // remove cached keys\n            return true;\n        }\n    });\n}\n/**\n * Returns an Proxy for resolving option values with context.\n * @param proxy - The Proxy returned by `_createResolver`\n * @param context - Context object for scriptable/indexable options\n * @param subProxy - The proxy provided for scriptable options\n * @param descriptorDefaults - Defaults for descriptors\n * @private\n */ function _attachContext(proxy, context, subProxy, descriptorDefaults) {\n    const cache = {\n        _cacheable: false,\n        _proxy: proxy,\n        _context: context,\n        _subProxy: subProxy,\n        _stack: new Set(),\n        _descriptors: _descriptors(proxy, descriptorDefaults),\n        setContext: (ctx)=>_attachContext(proxy, ctx, subProxy, descriptorDefaults),\n        override: (scope)=>_attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n    };\n    return new Proxy(cache, {\n        /**\n     * A trap for the delete operator.\n     */ deleteProperty (target, prop) {\n            delete target[prop]; // remove from cache\n            delete proxy[prop]; // remove from proxy\n            return true;\n        },\n        /**\n     * A trap for getting property values.\n     */ get (target, prop, receiver) {\n            return _cached(target, prop, ()=>_resolveWithContext(target, prop, receiver));\n        },\n        /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */ getOwnPropertyDescriptor (target, prop) {\n            return target._descriptors.allKeys ? Reflect.has(proxy, prop) ? {\n                enumerable: true,\n                configurable: true\n            } : undefined : Reflect.getOwnPropertyDescriptor(proxy, prop);\n        },\n        /**\n     * A trap for Object.getPrototypeOf.\n     */ getPrototypeOf () {\n            return Reflect.getPrototypeOf(proxy);\n        },\n        /**\n     * A trap for the in operator.\n     */ has (target, prop) {\n            return Reflect.has(proxy, prop);\n        },\n        /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */ ownKeys () {\n            return Reflect.ownKeys(proxy);\n        },\n        /**\n     * A trap for setting property values.\n     */ set (target, prop, value) {\n            proxy[prop] = value; // set to proxy\n            delete target[prop]; // remove from cache\n            return true;\n        }\n    });\n}\n/**\n * @private\n */ function _descriptors(proxy, defaults = {\n    scriptable: true,\n    indexable: true\n}) {\n    const { _scriptable =defaults.scriptable , _indexable =defaults.indexable , _allKeys =defaults.allKeys  } = proxy;\n    return {\n        allKeys: _allKeys,\n        scriptable: _scriptable,\n        indexable: _indexable,\n        isScriptable: isFunction(_scriptable) ? _scriptable : ()=>_scriptable,\n        isIndexable: isFunction(_indexable) ? _indexable : ()=>_indexable\n    };\n}\nconst readKey = (prefix, name)=>prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop, value)=>isObject(value) && prop !== 'adapters' && (Object.getPrototypeOf(value) === null || value.constructor === Object);\nfunction _cached(target, prop, resolve) {\n    if (Object.prototype.hasOwnProperty.call(target, prop) || prop === 'constructor') {\n        return target[prop];\n    }\n    const value = resolve();\n    // cache the resolved value\n    target[prop] = value;\n    return value;\n}\nfunction _resolveWithContext(target, prop, receiver) {\n    const { _proxy , _context , _subProxy , _descriptors: descriptors  } = target;\n    let value = _proxy[prop]; // resolve from proxy\n    // resolve with context\n    if (isFunction(value) && descriptors.isScriptable(prop)) {\n        value = _resolveScriptable(prop, value, target, receiver);\n    }\n    if (isArray(value) && value.length) {\n        value = _resolveArray(prop, value, target, descriptors.isIndexable);\n    }\n    if (needsSubResolver(prop, value)) {\n        // if the resolved value is an object, create a sub resolver for it\n        value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n    }\n    return value;\n}\nfunction _resolveScriptable(prop, getValue, target, receiver) {\n    const { _proxy , _context , _subProxy , _stack  } = target;\n    if (_stack.has(prop)) {\n        throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n    }\n    _stack.add(prop);\n    let value = getValue(_context, _subProxy || receiver);\n    _stack.delete(prop);\n    if (needsSubResolver(prop, value)) {\n        // When scriptable option returns an object, create a resolver on that.\n        value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n    }\n    return value;\n}\nfunction _resolveArray(prop, value, target, isIndexable) {\n    const { _proxy , _context , _subProxy , _descriptors: descriptors  } = target;\n    if (typeof _context.index !== 'undefined' && isIndexable(prop)) {\n        return value[_context.index % value.length];\n    } else if (isObject(value[0])) {\n        // Array of objects, return array or resolvers\n        const arr = value;\n        const scopes = _proxy._scopes.filter((s)=>s !== arr);\n        value = [];\n        for (const item of arr){\n            const resolver = createSubResolver(scopes, _proxy, prop, item);\n            value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n        }\n    }\n    return value;\n}\nfunction resolveFallback(fallback, prop, value) {\n    return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\nconst getScope = (key, parent)=>key === true ? parent : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n    for (const parent of parentScopes){\n        const scope = getScope(key, parent);\n        if (scope) {\n            set.add(scope);\n            const fallback = resolveFallback(scope._fallback, key, value);\n            if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {\n                // When we reach the descriptor that defines a new _fallback, return that.\n                // The fallback will resume to that new scope.\n                return fallback;\n            }\n        } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {\n            // Fallback to `false` results to `false`, when falling back to different key.\n            // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n            return null;\n        }\n    }\n    return false;\n}\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n    const rootScopes = resolver._rootScopes;\n    const fallback = resolveFallback(resolver._fallback, prop, value);\n    const allScopes = [\n        ...parentScopes,\n        ...rootScopes\n    ];\n    const set = new Set();\n    set.add(value);\n    let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n    if (key === null) {\n        return false;\n    }\n    if (typeof fallback !== 'undefined' && fallback !== prop) {\n        key = addScopesFromKey(set, allScopes, fallback, key, value);\n        if (key === null) {\n            return false;\n        }\n    }\n    return _createResolver(Array.from(set), [\n        ''\n    ], rootScopes, fallback, ()=>subGetTarget(resolver, prop, value));\n}\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n    while(key){\n        key = addScopes(set, allScopes, key, fallback, item);\n    }\n    return key;\n}\nfunction subGetTarget(resolver, prop, value) {\n    const parent = resolver._getTarget();\n    if (!(prop in parent)) {\n        parent[prop] = {};\n    }\n    const target = parent[prop];\n    if (isArray(target) && isObject(value)) {\n        // For array of objects, the object is used to store updated values\n        return value;\n    }\n    return target || {};\n}\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n    let value;\n    for (const prefix of prefixes){\n        value = _resolve(readKey(prefix, prop), scopes);\n        if (typeof value !== 'undefined') {\n            return needsSubResolver(prop, value) ? createSubResolver(scopes, proxy, prop, value) : value;\n        }\n    }\n}\nfunction _resolve(key, scopes) {\n    for (const scope of scopes){\n        if (!scope) {\n            continue;\n        }\n        const value = scope[key];\n        if (typeof value !== 'undefined') {\n            return value;\n        }\n    }\n}\nfunction getKeysFromAllScopes(target) {\n    let keys = target._keys;\n    if (!keys) {\n        keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n    }\n    return keys;\n}\nfunction resolveKeysFromAllScopes(scopes) {\n    const set = new Set();\n    for (const scope of scopes){\n        for (const key of Object.keys(scope).filter((k)=>!k.startsWith('_'))){\n            set.add(key);\n        }\n    }\n    return Array.from(set);\n}\nfunction _parseObjectDataRadialScale(meta, data, start, count) {\n    const { iScale  } = meta;\n    const { key ='r'  } = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n    for(i = 0, ilen = count; i < ilen; ++i){\n        index = i + start;\n        item = data[index];\n        parsed[i] = {\n            r: iScale.parse(resolveObjectKey(item, key), index)\n        };\n    }\n    return parsed;\n}\n\nconst EPSILON = Number.EPSILON || 1e-14;\nconst getPoint = (points, i)=>i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis)=>indexAxis === 'x' ? 'y' : 'x';\nfunction splineCurve(firstPoint, middlePoint, afterPoint, t) {\n    // Props to Rob Spencer at scaled innovation for his post on splining between points\n    // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n    // This function must also respect \"skipped\" points\n    const previous = firstPoint.skip ? middlePoint : firstPoint;\n    const current = middlePoint;\n    const next = afterPoint.skip ? middlePoint : afterPoint;\n    const d01 = distanceBetweenPoints(current, previous);\n    const d12 = distanceBetweenPoints(next, current);\n    let s01 = d01 / (d01 + d12);\n    let s12 = d12 / (d01 + d12);\n    // If all points are the same, s01 & s02 will be inf\n    s01 = isNaN(s01) ? 0 : s01;\n    s12 = isNaN(s12) ? 0 : s12;\n    const fa = t * s01; // scaling factor for triangle Ta\n    const fb = t * s12;\n    return {\n        previous: {\n            x: current.x - fa * (next.x - previous.x),\n            y: current.y - fa * (next.y - previous.y)\n        },\n        next: {\n            x: current.x + fb * (next.x - previous.x),\n            y: current.y + fb * (next.y - previous.y)\n        }\n    };\n}\n/**\n * Adjust tangents to ensure monotonic properties\n */ function monotoneAdjust(points, deltaK, mK) {\n    const pointsLen = points.length;\n    let alphaK, betaK, tauK, squaredMagnitude, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(let i = 0; i < pointsLen - 1; ++i){\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent || !pointAfter) {\n            continue;\n        }\n        if (almostEquals(deltaK[i], 0, EPSILON)) {\n            mK[i] = mK[i + 1] = 0;\n            continue;\n        }\n        alphaK = mK[i] / deltaK[i];\n        betaK = mK[i + 1] / deltaK[i];\n        squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n        if (squaredMagnitude <= 9) {\n            continue;\n        }\n        tauK = 3 / Math.sqrt(squaredMagnitude);\n        mK[i] = alphaK * tauK * deltaK[i];\n        mK[i + 1] = betaK * tauK * deltaK[i];\n    }\n}\nfunction monotoneCompute(points, mK, indexAxis = 'x') {\n    const valueAxis = getValueAxis(indexAxis);\n    const pointsLen = points.length;\n    let delta, pointBefore, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(let i = 0; i < pointsLen; ++i){\n        pointBefore = pointCurrent;\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent) {\n            continue;\n        }\n        const iPixel = pointCurrent[indexAxis];\n        const vPixel = pointCurrent[valueAxis];\n        if (pointBefore) {\n            delta = (iPixel - pointBefore[indexAxis]) / 3;\n            pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n            pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n        }\n        if (pointAfter) {\n            delta = (pointAfter[indexAxis] - iPixel) / 3;\n            pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n            pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n        }\n    }\n}\n/**\n * This function calculates Bzier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */ function splineCurveMonotone(points, indexAxis = 'x') {\n    const valueAxis = getValueAxis(indexAxis);\n    const pointsLen = points.length;\n    const deltaK = Array(pointsLen).fill(0);\n    const mK = Array(pointsLen);\n    // Calculate slopes (deltaK) and initialize tangents (mK)\n    let i, pointBefore, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(i = 0; i < pointsLen; ++i){\n        pointBefore = pointCurrent;\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent) {\n            continue;\n        }\n        if (pointAfter) {\n            const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n            // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n            deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n        }\n        mK[i] = !pointBefore ? deltaK[i] : !pointAfter ? deltaK[i - 1] : sign(deltaK[i - 1]) !== sign(deltaK[i]) ? 0 : (deltaK[i - 1] + deltaK[i]) / 2;\n    }\n    monotoneAdjust(points, deltaK, mK);\n    monotoneCompute(points, mK, indexAxis);\n}\nfunction capControlPoint(pt, min, max) {\n    return Math.max(Math.min(pt, max), min);\n}\nfunction capBezierPoints(points, area) {\n    let i, ilen, point, inArea, inAreaPrev;\n    let inAreaNext = _isPointInArea(points[0], area);\n    for(i = 0, ilen = points.length; i < ilen; ++i){\n        inAreaPrev = inArea;\n        inArea = inAreaNext;\n        inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n        if (!inArea) {\n            continue;\n        }\n        point = points[i];\n        if (inAreaPrev) {\n            point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n            point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n        }\n        if (inAreaNext) {\n            point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n            point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n        }\n    }\n}\n/**\n * @private\n */ function _updateBezierControlPoints(points, options, area, loop, indexAxis) {\n    let i, ilen, point, controlPoints;\n    // Only consider points that are drawn in case the spanGaps option is used\n    if (options.spanGaps) {\n        points = points.filter((pt)=>!pt.skip);\n    }\n    if (options.cubicInterpolationMode === 'monotone') {\n        splineCurveMonotone(points, indexAxis);\n    } else {\n        let prev = loop ? points[points.length - 1] : points[0];\n        for(i = 0, ilen = points.length; i < ilen; ++i){\n            point = points[i];\n            controlPoints = splineCurve(prev, point, points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen], options.tension);\n            point.cp1x = controlPoints.previous.x;\n            point.cp1y = controlPoints.previous.y;\n            point.cp2x = controlPoints.next.x;\n            point.cp2y = controlPoints.next.y;\n            prev = point;\n        }\n    }\n    if (options.capBezierPoints) {\n        capBezierPoints(points, area);\n    }\n}\n\n/**\n * @private\n */ function _isDomSupported() {\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n/**\n * @private\n */ function _getParentNode(domNode) {\n    let parent = domNode.parentNode;\n    if (parent && parent.toString() === '[object ShadowRoot]') {\n        parent = parent.host;\n    }\n    return parent;\n}\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */ function parseMaxStyle(styleValue, node, parentProperty) {\n    let valueInPixels;\n    if (typeof styleValue === 'string') {\n        valueInPixels = parseInt(styleValue, 10);\n        if (styleValue.indexOf('%') !== -1) {\n            // percentage * size in dimension\n            valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n        }\n    } else {\n        valueInPixels = styleValue;\n    }\n    return valueInPixels;\n}\nconst getComputedStyle = (element)=>element.ownerDocument.defaultView.getComputedStyle(element, null);\nfunction getStyle(el, property) {\n    return getComputedStyle(el).getPropertyValue(property);\n}\nconst positions = [\n    'top',\n    'right',\n    'bottom',\n    'left'\n];\nfunction getPositionedStyle(styles, style, suffix) {\n    const result = {};\n    suffix = suffix ? '-' + suffix : '';\n    for(let i = 0; i < 4; i++){\n        const pos = positions[i];\n        result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n    }\n    result.width = result.left + result.right;\n    result.height = result.top + result.bottom;\n    return result;\n}\nconst useOffsetPos = (x, y, target)=>(x > 0 || y > 0) && (!target || !target.shadowRoot);\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */ function getCanvasPosition(e, canvas) {\n    const touches = e.touches;\n    const source = touches && touches.length ? touches[0] : e;\n    const { offsetX , offsetY  } = source;\n    let box = false;\n    let x, y;\n    if (useOffsetPos(offsetX, offsetY, e.target)) {\n        x = offsetX;\n        y = offsetY;\n    } else {\n        const rect = canvas.getBoundingClientRect();\n        x = source.clientX - rect.left;\n        y = source.clientY - rect.top;\n        box = true;\n    }\n    return {\n        x,\n        y,\n        box\n    };\n}\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */ function getRelativePosition(event, chart) {\n    if ('native' in event) {\n        return event;\n    }\n    const { canvas , currentDevicePixelRatio  } = chart;\n    const style = getComputedStyle(canvas);\n    const borderBox = style.boxSizing === 'border-box';\n    const paddings = getPositionedStyle(style, 'padding');\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const { x , y , box  } = getCanvasPosition(event, canvas);\n    const xOffset = paddings.left + (box && borders.left);\n    const yOffset = paddings.top + (box && borders.top);\n    let { width , height  } = chart;\n    if (borderBox) {\n        width -= paddings.width + borders.width;\n        height -= paddings.height + borders.height;\n    }\n    return {\n        x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n        y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n    };\n}\nfunction getContainerSize(canvas, width, height) {\n    let maxWidth, maxHeight;\n    if (width === undefined || height === undefined) {\n        const container = canvas && _getParentNode(canvas);\n        if (!container) {\n            width = canvas.clientWidth;\n            height = canvas.clientHeight;\n        } else {\n            const rect = container.getBoundingClientRect(); // this is the border box of the container\n            const containerStyle = getComputedStyle(container);\n            const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n            const containerPadding = getPositionedStyle(containerStyle, 'padding');\n            width = rect.width - containerPadding.width - containerBorder.width;\n            height = rect.height - containerPadding.height - containerBorder.height;\n            maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n            maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n        }\n    }\n    return {\n        width,\n        height,\n        maxWidth: maxWidth || INFINITY,\n        maxHeight: maxHeight || INFINITY\n    };\n}\nconst round1 = (v)=>Math.round(v * 10) / 10;\n// eslint-disable-next-line complexity\nfunction getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {\n    const style = getComputedStyle(canvas);\n    const margins = getPositionedStyle(style, 'margin');\n    const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n    const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n    const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n    let { width , height  } = containerSize;\n    if (style.boxSizing === 'content-box') {\n        const borders = getPositionedStyle(style, 'border', 'width');\n        const paddings = getPositionedStyle(style, 'padding');\n        width -= paddings.width + borders.width;\n        height -= paddings.height + borders.height;\n    }\n    width = Math.max(0, width - margins.width);\n    height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n    width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n    height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n    if (width && !height) {\n        // https://github.com/chartjs/Chart.js/issues/4659\n        // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n        height = round1(width / 2);\n    }\n    const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n    if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n        height = containerSize.height;\n        width = round1(Math.floor(height * aspectRatio));\n    }\n    return {\n        width,\n        height\n    };\n}\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */ function retinaScale(chart, forceRatio, forceStyle) {\n    const pixelRatio = forceRatio || 1;\n    const deviceHeight = round1(chart.height * pixelRatio);\n    const deviceWidth = round1(chart.width * pixelRatio);\n    chart.height = round1(chart.height);\n    chart.width = round1(chart.width);\n    const canvas = chart.canvas;\n    // If no style has been set on the canvas, the render size is used as display size,\n    // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n    // See https://github.com/chartjs/Chart.js/issues/3575\n    if (canvas.style && (forceStyle || !canvas.style.height && !canvas.style.width)) {\n        canvas.style.height = `${chart.height}px`;\n        canvas.style.width = `${chart.width}px`;\n    }\n    if (chart.currentDevicePixelRatio !== pixelRatio || canvas.height !== deviceHeight || canvas.width !== deviceWidth) {\n        chart.currentDevicePixelRatio = pixelRatio;\n        canvas.height = deviceHeight;\n        canvas.width = deviceWidth;\n        chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        return true;\n    }\n    return false;\n}\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */ const supportsEventListenerOptions = function() {\n    let passiveSupported = false;\n    try {\n        const options = {\n            get passive () {\n                passiveSupported = true;\n                return false;\n            }\n        };\n        if (_isDomSupported()) {\n            window.addEventListener('test', null, options);\n            window.removeEventListener('test', null, options);\n        }\n    } catch (e) {\n    // continue regardless of error\n    }\n    return passiveSupported;\n}();\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */ function readUsedSize(element, property) {\n    const value = getStyle(element, property);\n    const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n    return matches ? +matches[1] : undefined;\n}\n\n/**\n * @private\n */ function _pointInLine(p1, p2, t, mode) {\n    return {\n        x: p1.x + t * (p2.x - p1.x),\n        y: p1.y + t * (p2.y - p1.y)\n    };\n}\n/**\n * @private\n */ function _steppedInterpolation(p1, p2, t, mode) {\n    return {\n        x: p1.x + t * (p2.x - p1.x),\n        y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y : mode === 'after' ? t < 1 ? p1.y : p2.y : t > 0 ? p2.y : p1.y\n    };\n}\n/**\n * @private\n */ function _bezierInterpolation(p1, p2, t, mode) {\n    const cp1 = {\n        x: p1.cp2x,\n        y: p1.cp2y\n    };\n    const cp2 = {\n        x: p2.cp1x,\n        y: p2.cp1y\n    };\n    const a = _pointInLine(p1, cp1, t);\n    const b = _pointInLine(cp1, cp2, t);\n    const c = _pointInLine(cp2, p2, t);\n    const d = _pointInLine(a, b, t);\n    const e = _pointInLine(b, c, t);\n    return _pointInLine(d, e, t);\n}\n\nconst getRightToLeftAdapter = function(rectX, width) {\n    return {\n        x (x) {\n            return rectX + rectX + width - x;\n        },\n        setWidth (w) {\n            width = w;\n        },\n        textAlign (align) {\n            if (align === 'center') {\n                return align;\n            }\n            return align === 'right' ? 'left' : 'right';\n        },\n        xPlus (x, value) {\n            return x - value;\n        },\n        leftForLtr (x, itemWidth) {\n            return x - itemWidth;\n        }\n    };\n};\nconst getLeftToRightAdapter = function() {\n    return {\n        x (x) {\n            return x;\n        },\n        setWidth (w) {},\n        textAlign (align) {\n            return align;\n        },\n        xPlus (x, value) {\n            return x + value;\n        },\n        leftForLtr (x, _itemWidth) {\n            return x;\n        }\n    };\n};\nfunction getRtlAdapter(rtl, rectX, width) {\n    return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\nfunction overrideTextDirection(ctx, direction) {\n    let style, original;\n    if (direction === 'ltr' || direction === 'rtl') {\n        style = ctx.canvas.style;\n        original = [\n            style.getPropertyValue('direction'),\n            style.getPropertyPriority('direction')\n        ];\n        style.setProperty('direction', direction, 'important');\n        ctx.prevTextDirection = original;\n    }\n}\nfunction restoreTextDirection(ctx, original) {\n    if (original !== undefined) {\n        delete ctx.prevTextDirection;\n        ctx.canvas.style.setProperty('direction', original[0], original[1]);\n    }\n}\n\nfunction propertyFn(property) {\n    if (property === 'angle') {\n        return {\n            between: _angleBetween,\n            compare: _angleDiff,\n            normalize: _normalizeAngle\n        };\n    }\n    return {\n        between: _isBetween,\n        compare: (a, b)=>a - b,\n        normalize: (x)=>x\n    };\n}\nfunction normalizeSegment({ start , end , count , loop , style  }) {\n    return {\n        start: start % count,\n        end: end % count,\n        loop: loop && (end - start + 1) % count === 0,\n        style\n    };\n}\nfunction getSegment(segment, points, bounds) {\n    const { property , start: startBound , end: endBound  } = bounds;\n    const { between , normalize  } = propertyFn(property);\n    const count = points.length;\n    let { start , end , loop  } = segment;\n    let i, ilen;\n    if (loop) {\n        start += count;\n        end += count;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n                break;\n            }\n            start--;\n            end--;\n        }\n        start %= count;\n        end %= count;\n    }\n    if (end < start) {\n        end += count;\n    }\n    return {\n        start,\n        end,\n        loop,\n        style: segment.style\n    };\n}\n function _boundSegment(segment, points, bounds) {\n    if (!bounds) {\n        return [\n            segment\n        ];\n    }\n    const { property , start: startBound , end: endBound  } = bounds;\n    const count = points.length;\n    const { compare , between , normalize  } = propertyFn(property);\n    const { start , end , loop , style  } = getSegment(segment, points, bounds);\n    const result = [];\n    let inside = false;\n    let subStart = null;\n    let value, point, prevValue;\n    const startIsBefore = ()=>between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n    const endIsBefore = ()=>compare(endBound, value) === 0 || between(endBound, prevValue, value);\n    const shouldStart = ()=>inside || startIsBefore();\n    const shouldStop = ()=>!inside || endIsBefore();\n    for(let i = start, prev = start; i <= end; ++i){\n        point = points[i % count];\n        if (point.skip) {\n            continue;\n        }\n        value = normalize(point[property]);\n        if (value === prevValue) {\n            continue;\n        }\n        inside = between(value, startBound, endBound);\n        if (subStart === null && shouldStart()) {\n            subStart = compare(value, startBound) === 0 ? i : prev;\n        }\n        if (subStart !== null && shouldStop()) {\n            result.push(normalizeSegment({\n                start: subStart,\n                end: i,\n                loop,\n                count,\n                style\n            }));\n            subStart = null;\n        }\n        prev = i;\n        prevValue = value;\n    }\n    if (subStart !== null) {\n        result.push(normalizeSegment({\n            start: subStart,\n            end,\n            loop,\n            count,\n            style\n        }));\n    }\n    return result;\n}\n function _boundSegments(line, bounds) {\n    const result = [];\n    const segments = line.segments;\n    for(let i = 0; i < segments.length; i++){\n        const sub = _boundSegment(segments[i], line.points, bounds);\n        if (sub.length) {\n            result.push(...sub);\n        }\n    }\n    return result;\n}\n function findStartAndEnd(points, count, loop, spanGaps) {\n    let start = 0;\n    let end = count - 1;\n    if (loop && !spanGaps) {\n        while(start < count && !points[start].skip){\n            start++;\n        }\n    }\n    while(start < count && points[start].skip){\n        start++;\n    }\n    start %= count;\n    if (loop) {\n        end += start;\n    }\n    while(end > start && points[end % count].skip){\n        end--;\n    }\n    end %= count;\n    return {\n        start,\n        end\n    };\n}\n function solidSegments(points, start, max, loop) {\n    const count = points.length;\n    const result = [];\n    let last = start;\n    let prev = points[start];\n    let end;\n    for(end = start + 1; end <= max; ++end){\n        const cur = points[end % count];\n        if (cur.skip || cur.stop) {\n            if (!prev.skip) {\n                loop = false;\n                result.push({\n                    start: start % count,\n                    end: (end - 1) % count,\n                    loop\n                });\n                start = last = cur.stop ? end : null;\n            }\n        } else {\n            last = end;\n            if (prev.skip) {\n                start = end;\n            }\n        }\n        prev = cur;\n    }\n    if (last !== null) {\n        result.push({\n            start: start % count,\n            end: last % count,\n            loop\n        });\n    }\n    return result;\n}\n function _computeSegments(line, segmentOptions) {\n    const points = line.points;\n    const spanGaps = line.options.spanGaps;\n    const count = points.length;\n    if (!count) {\n        return [];\n    }\n    const loop = !!line._loop;\n    const { start , end  } = findStartAndEnd(points, count, loop, spanGaps);\n    if (spanGaps === true) {\n        return splitByStyles(line, [\n            {\n                start,\n                end,\n                loop\n            }\n        ], points, segmentOptions);\n    }\n    const max = end < start ? end + count : end;\n    const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n    return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n function splitByStyles(line, segments, points, segmentOptions) {\n    if (!segmentOptions || !segmentOptions.setContext || !points) {\n        return segments;\n    }\n    return doSplitByStyles(line, segments, points, segmentOptions);\n}\n function doSplitByStyles(line, segments, points, segmentOptions) {\n    const chartContext = line._chart.getContext();\n    const baseStyle = readStyle(line.options);\n    const { _datasetIndex: datasetIndex , options: { spanGaps  }  } = line;\n    const count = points.length;\n    const result = [];\n    let prevStyle = baseStyle;\n    let start = segments[0].start;\n    let i = start;\n    function addStyle(s, e, l, st) {\n        const dir = spanGaps ? -1 : 1;\n        if (s === e) {\n            return;\n        }\n        s += count;\n        while(points[s % count].skip){\n            s -= dir;\n        }\n        while(points[e % count].skip){\n            e += dir;\n        }\n        if (s % count !== e % count) {\n            result.push({\n                start: s % count,\n                end: e % count,\n                loop: l,\n                style: st\n            });\n            prevStyle = st;\n            start = e % count;\n        }\n    }\n    for (const segment of segments){\n        start = spanGaps ? start : segment.start;\n        let prev = points[start % count];\n        let style;\n        for(i = start + 1; i <= segment.end; i++){\n            const pt = points[i % count];\n            style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n                type: 'segment',\n                p0: prev,\n                p1: pt,\n                p0DataIndex: (i - 1) % count,\n                p1DataIndex: i % count,\n                datasetIndex\n            })));\n            if (styleChanged(style, prevStyle)) {\n                addStyle(start, i - 1, segment.loop, prevStyle);\n            }\n            prev = pt;\n            prevStyle = style;\n        }\n        if (start < i - 1) {\n            addStyle(start, i - 1, segment.loop, prevStyle);\n        }\n    }\n    return result;\n}\nfunction readStyle(options) {\n    return {\n        backgroundColor: options.backgroundColor,\n        borderCapStyle: options.borderCapStyle,\n        borderDash: options.borderDash,\n        borderDashOffset: options.borderDashOffset,\n        borderJoinStyle: options.borderJoinStyle,\n        borderWidth: options.borderWidth,\n        borderColor: options.borderColor\n    };\n}\nfunction styleChanged(style, prevStyle) {\n    if (!prevStyle) {\n        return false;\n    }\n    const cache = [];\n    const replacer = function(key, value) {\n        if (!isPatternOrGradient(value)) {\n            return value;\n        }\n        if (!cache.includes(value)) {\n            cache.push(value);\n        }\n        return cache.indexOf(value);\n    };\n    return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);\n}\n\nfunction getSizeForArea(scale, chartArea, field) {\n    return scale.options.clip ? scale[field] : chartArea[field];\n}\nfunction getDatasetArea(meta, chartArea) {\n    const { xScale , yScale  } = meta;\n    if (xScale && yScale) {\n        return {\n            left: getSizeForArea(xScale, chartArea, 'left'),\n            right: getSizeForArea(xScale, chartArea, 'right'),\n            top: getSizeForArea(yScale, chartArea, 'top'),\n            bottom: getSizeForArea(yScale, chartArea, 'bottom')\n        };\n    }\n    return chartArea;\n}\nfunction getDatasetClipArea(chart, meta) {\n    const clip = meta._clip;\n    if (clip.disabled) {\n        return false;\n    }\n    const area = getDatasetArea(meta, chart.chartArea);\n    return {\n        left: clip.left === false ? 0 : area.left - (clip.left === true ? 0 : clip.left),\n        right: clip.right === false ? chart.width : area.right + (clip.right === true ? 0 : clip.right),\n        top: clip.top === false ? 0 : area.top - (clip.top === true ? 0 : clip.top),\n        bottom: clip.bottom === false ? chart.height : area.bottom + (clip.bottom === true ? 0 : clip.bottom)\n    };\n}\n\nexport { unclipArea as $, _rlookupByKey as A, _lookupByKey as B, _isPointInArea as C, getAngleFromPoint as D, toPadding as E, each as F, getMaximumSize as G, HALF_PI as H, _getParentNode as I, readUsedSize as J, supportsEventListenerOptions as K, throttled as L, _isDomSupported as M, _factorize as N, finiteOrDefault as O, PI as P, callback as Q, _addGrace as R, _limitValue as S, TAU as T, toDegrees as U, _measureText as V, _int16Range as W, _alignPixel as X, clipArea as Y, renderText as Z, _arrayUnique as _, resolve as a, getStyle as a$, toFont as a0, _toLeftRightCenter as a1, _alignStartEnd as a2, overrides as a3, merge as a4, _capitalize as a5, descriptors as a6, isFunction as a7, _attachContext as a8, _createResolver as a9, getRtlAdapter as aA, overrideTextDirection as aB, _textX as aC, restoreTextDirection as aD, drawPointLegend as aE, distanceBetweenPoints as aF, noop as aG, _setMinAndMaxByKey as aH, niceNum as aI, almostWhole as aJ, almostEquals as aK, _decimalPlaces as aL, Ticks as aM, log10 as aN, _longestText as aO, _filterBetween as aP, _lookup as aQ, isPatternOrGradient as aR, getHoverColor as aS, clone as aT, _merger as aU, _mergerIf as aV, _deprecated as aW, _splitKey as aX, toFontString as aY, splineCurve as aZ, splineCurveMonotone as a_, _descriptors as aa, mergeIf as ab, uid as ac, debounce as ad, retinaScale as ae, clearCanvas as af, setsEqual as ag, getDatasetClipArea as ah, _elementsEqual as ai, _isClickEvent as aj, _isBetween as ak, _normalizeAngle as al, _readValueToProps as am, _updateBezierControlPoints as an, _computeSegments as ao, _boundSegments as ap, _steppedInterpolation as aq, _bezierInterpolation as ar, _pointInLine as as, _steppedLineTo as at, _bezierCurveTo as au, drawPoint as av, addRoundedRectPath as aw, toTRBL as ax, toTRBLCorners as ay, _boundSegment as az, isArray as b, fontString as b0, toLineHeight as b1, PITAU as b2, INFINITY as b3, RAD_PER_DEG as b4, QUARTER_PI as b5, TWO_THIRDS_PI as b6, _angleDiff as b7, color as c, defaults as d, effects as e, resolveObjectKey as f, isNumberFinite as g, defined as h, isObject as i, createContext as j, isNullOrUndef as k, listenArrayEvents as l, toPercentage as m, toDimension as n, formatNumber as o, _angleBetween as p, _getStartAndCountOfVisiblePoints as q, requestAnimFrame as r, sign as s, toRadians as t, unlistenArrayEvents as u, valueOrDefault as v, _scaleRangesChanged as w, isNumber as x, _parseObjectDataRadialScale as y, getRelativePosition as z };\n//# sourceMappingURL=helpers.dataset.js.map\n","/*!\n * Chart.js v4.5.1\n * https://www.chartjs.org\n * (c) 2025 Chart.js Contributors\n * Released under the MIT License\n */\nimport { r as requestAnimFrame, a as resolve, e as effects, c as color, i as isObject, d as defaults, b as isArray, v as valueOrDefault, u as unlistenArrayEvents, l as listenArrayEvents, f as resolveObjectKey, g as isNumberFinite, h as defined, s as sign, j as createContext, k as isNullOrUndef, _ as _arrayUnique, t as toRadians, m as toPercentage, n as toDimension, T as TAU, o as formatNumber, p as _angleBetween, H as HALF_PI, P as PI, q as _getStartAndCountOfVisiblePoints, w as _scaleRangesChanged, x as isNumber, y as _parseObjectDataRadialScale, z as getRelativePosition, A as _rlookupByKey, B as _lookupByKey, C as _isPointInArea, D as getAngleFromPoint, E as toPadding, F as each, G as getMaximumSize, I as _getParentNode, J as readUsedSize, K as supportsEventListenerOptions, L as throttled, M as _isDomSupported, N as _factorize, O as finiteOrDefault, Q as callback, R as _addGrace, S as _limitValue, U as toDegrees, V as _measureText, W as _int16Range, X as _alignPixel, Y as clipArea, Z as renderText, $ as unclipArea, a0 as toFont, a1 as _toLeftRightCenter, a2 as _alignStartEnd, a3 as overrides, a4 as merge, a5 as _capitalize, a6 as descriptors, a7 as isFunction, a8 as _attachContext, a9 as _createResolver, aa as _descriptors, ab as mergeIf, ac as uid, ad as debounce, ae as retinaScale, af as clearCanvas, ag as setsEqual, ah as getDatasetClipArea, ai as _elementsEqual, aj as _isClickEvent, ak as _isBetween, al as _normalizeAngle, am as _readValueToProps, an as _updateBezierControlPoints, ao as _computeSegments, ap as _boundSegments, aq as _steppedInterpolation, ar as _bezierInterpolation, as as _pointInLine, at as _steppedLineTo, au as _bezierCurveTo, av as drawPoint, aw as addRoundedRectPath, ax as toTRBL, ay as toTRBLCorners, az as _boundSegment, aA as getRtlAdapter, aB as overrideTextDirection, aC as _textX, aD as restoreTextDirection, aE as drawPointLegend, aF as distanceBetweenPoints, aG as noop, aH as _setMinAndMaxByKey, aI as niceNum, aJ as almostWhole, aK as almostEquals, aL as _decimalPlaces, aM as Ticks, aN as log10, aO as _longestText, aP as _filterBetween, aQ as _lookup } from './chunks/helpers.dataset.js';\nimport '@kurkle/color';\n\nclass Animator {\n    constructor(){\n        this._request = null;\n        this._charts = new Map();\n        this._running = false;\n        this._lastDate = undefined;\n    }\n _notify(chart, anims, date, type) {\n        const callbacks = anims.listeners[type];\n        const numSteps = anims.duration;\n        callbacks.forEach((fn)=>fn({\n                chart,\n                initial: anims.initial,\n                numSteps,\n                currentStep: Math.min(date - anims.start, numSteps)\n            }));\n    }\n _refresh() {\n        if (this._request) {\n            return;\n        }\n        this._running = true;\n        this._request = requestAnimFrame.call(window, ()=>{\n            this._update();\n            this._request = null;\n            if (this._running) {\n                this._refresh();\n            }\n        });\n    }\n _update(date = Date.now()) {\n        let remaining = 0;\n        this._charts.forEach((anims, chart)=>{\n            if (!anims.running || !anims.items.length) {\n                return;\n            }\n            const items = anims.items;\n            let i = items.length - 1;\n            let draw = false;\n            let item;\n            for(; i >= 0; --i){\n                item = items[i];\n                if (item._active) {\n                    if (item._total > anims.duration) {\n                        anims.duration = item._total;\n                    }\n                    item.tick(date);\n                    draw = true;\n                } else {\n                    items[i] = items[items.length - 1];\n                    items.pop();\n                }\n            }\n            if (draw) {\n                chart.draw();\n                this._notify(chart, anims, date, 'progress');\n            }\n            if (!items.length) {\n                anims.running = false;\n                this._notify(chart, anims, date, 'complete');\n                anims.initial = false;\n            }\n            remaining += items.length;\n        });\n        this._lastDate = date;\n        if (remaining === 0) {\n            this._running = false;\n        }\n    }\n _getAnims(chart) {\n        const charts = this._charts;\n        let anims = charts.get(chart);\n        if (!anims) {\n            anims = {\n                running: false,\n                initial: true,\n                items: [],\n                listeners: {\n                    complete: [],\n                    progress: []\n                }\n            };\n            charts.set(chart, anims);\n        }\n        return anims;\n    }\n listen(chart, event, cb) {\n        this._getAnims(chart).listeners[event].push(cb);\n    }\n add(chart, items) {\n        if (!items || !items.length) {\n            return;\n        }\n        this._getAnims(chart).items.push(...items);\n    }\n has(chart) {\n        return this._getAnims(chart).items.length > 0;\n    }\n start(chart) {\n        const anims = this._charts.get(chart);\n        if (!anims) {\n            return;\n        }\n        anims.running = true;\n        anims.start = Date.now();\n        anims.duration = anims.items.reduce((acc, cur)=>Math.max(acc, cur._duration), 0);\n        this._refresh();\n    }\n    running(chart) {\n        if (!this._running) {\n            return false;\n        }\n        const anims = this._charts.get(chart);\n        if (!anims || !anims.running || !anims.items.length) {\n            return false;\n        }\n        return true;\n    }\n stop(chart) {\n        const anims = this._charts.get(chart);\n        if (!anims || !anims.items.length) {\n            return;\n        }\n        const items = anims.items;\n        let i = items.length - 1;\n        for(; i >= 0; --i){\n            items[i].cancel();\n        }\n        anims.items = [];\n        this._notify(chart, anims, Date.now(), 'complete');\n    }\n remove(chart) {\n        return this._charts.delete(chart);\n    }\n}\nvar animator = /* #__PURE__ */ new Animator();\n\nconst transparent = 'transparent';\nconst interpolators = {\n    boolean (from, to, factor) {\n        return factor > 0.5 ? to : from;\n    },\n color (from, to, factor) {\n        const c0 = color(from || transparent);\n        const c1 = c0.valid && color(to || transparent);\n        return c1 && c1.valid ? c1.mix(c0, factor).hexString() : to;\n    },\n    number (from, to, factor) {\n        return from + (to - from) * factor;\n    }\n};\nclass Animation {\n    constructor(cfg, target, prop, to){\n        const currentValue = target[prop];\n        to = resolve([\n            cfg.to,\n            to,\n            currentValue,\n            cfg.from\n        ]);\n        const from = resolve([\n            cfg.from,\n            currentValue,\n            to\n        ]);\n        this._active = true;\n        this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n        this._easing = effects[cfg.easing] || effects.linear;\n        this._start = Math.floor(Date.now() + (cfg.delay || 0));\n        this._duration = this._total = Math.floor(cfg.duration);\n        this._loop = !!cfg.loop;\n        this._target = target;\n        this._prop = prop;\n        this._from = from;\n        this._to = to;\n        this._promises = undefined;\n    }\n    active() {\n        return this._active;\n    }\n    update(cfg, to, date) {\n        if (this._active) {\n            this._notify(false);\n            const currentValue = this._target[this._prop];\n            const elapsed = date - this._start;\n            const remain = this._duration - elapsed;\n            this._start = date;\n            this._duration = Math.floor(Math.max(remain, cfg.duration));\n            this._total += elapsed;\n            this._loop = !!cfg.loop;\n            this._to = resolve([\n                cfg.to,\n                to,\n                currentValue,\n                cfg.from\n            ]);\n            this._from = resolve([\n                cfg.from,\n                currentValue,\n                to\n            ]);\n        }\n    }\n    cancel() {\n        if (this._active) {\n            this.tick(Date.now());\n            this._active = false;\n            this._notify(false);\n        }\n    }\n    tick(date) {\n        const elapsed = date - this._start;\n        const duration = this._duration;\n        const prop = this._prop;\n        const from = this._from;\n        const loop = this._loop;\n        const to = this._to;\n        let factor;\n        this._active = from !== to && (loop || elapsed < duration);\n        if (!this._active) {\n            this._target[prop] = to;\n            this._notify(true);\n            return;\n        }\n        if (elapsed < 0) {\n            this._target[prop] = from;\n            return;\n        }\n        factor = elapsed / duration % 2;\n        factor = loop && factor > 1 ? 2 - factor : factor;\n        factor = this._easing(Math.min(1, Math.max(0, factor)));\n        this._target[prop] = this._fn(from, to, factor);\n    }\n    wait() {\n        const promises = this._promises || (this._promises = []);\n        return new Promise((res, rej)=>{\n            promises.push({\n                res,\n                rej\n            });\n        });\n    }\n    _notify(resolved) {\n        const method = resolved ? 'res' : 'rej';\n        const promises = this._promises || [];\n        for(let i = 0; i < promises.length; i++){\n            promises[i][method]();\n        }\n    }\n}\n\nclass Animations {\n    constructor(chart, config){\n        this._chart = chart;\n        this._properties = new Map();\n        this.configure(config);\n    }\n    configure(config) {\n        if (!isObject(config)) {\n            return;\n        }\n        const animationOptions = Object.keys(defaults.animation);\n        const animatedProps = this._properties;\n        Object.getOwnPropertyNames(config).forEach((key)=>{\n            const cfg = config[key];\n            if (!isObject(cfg)) {\n                return;\n            }\n            const resolved = {};\n            for (const option of animationOptions){\n                resolved[option] = cfg[option];\n            }\n            (isArray(cfg.properties) && cfg.properties || [\n                key\n            ]).forEach((prop)=>{\n                if (prop === key || !animatedProps.has(prop)) {\n                    animatedProps.set(prop, resolved);\n                }\n            });\n        });\n    }\n _animateOptions(target, values) {\n        const newOptions = values.options;\n        const options = resolveTargetOptions(target, newOptions);\n        if (!options) {\n            return [];\n        }\n        const animations = this._createAnimations(options, newOptions);\n        if (newOptions.$shared) {\n            awaitAll(target.options.$animations, newOptions).then(()=>{\n                target.options = newOptions;\n            }, ()=>{\n            });\n        }\n        return animations;\n    }\n _createAnimations(target, values) {\n        const animatedProps = this._properties;\n        const animations = [];\n        const running = target.$animations || (target.$animations = {});\n        const props = Object.keys(values);\n        const date = Date.now();\n        let i;\n        for(i = props.length - 1; i >= 0; --i){\n            const prop = props[i];\n            if (prop.charAt(0) === '$') {\n                continue;\n            }\n            if (prop === 'options') {\n                animations.push(...this._animateOptions(target, values));\n                continue;\n            }\n            const value = values[prop];\n            let animation = running[prop];\n            const cfg = animatedProps.get(prop);\n            if (animation) {\n                if (cfg && animation.active()) {\n                    animation.update(cfg, value, date);\n                    continue;\n                } else {\n                    animation.cancel();\n                }\n            }\n            if (!cfg || !cfg.duration) {\n                target[prop] = value;\n                continue;\n            }\n            running[prop] = animation = new Animation(cfg, target, prop, value);\n            animations.push(animation);\n        }\n        return animations;\n    }\n update(target, values) {\n        if (this._properties.size === 0) {\n            Object.assign(target, values);\n            return;\n        }\n        const animations = this._createAnimations(target, values);\n        if (animations.length) {\n            animator.add(this._chart, animations);\n            return true;\n        }\n    }\n}\nfunction awaitAll(animations, properties) {\n    const running = [];\n    const keys = Object.keys(properties);\n    for(let i = 0; i < keys.length; i++){\n        const anim = animations[keys[i]];\n        if (anim && anim.active()) {\n            running.push(anim.wait());\n        }\n    }\n    return Promise.all(running);\n}\nfunction resolveTargetOptions(target, newOptions) {\n    if (!newOptions) {\n        return;\n    }\n    let options = target.options;\n    if (!options) {\n        target.options = newOptions;\n        return;\n    }\n    if (options.$shared) {\n        target.options = options = Object.assign({}, options, {\n            $shared: false,\n            $animations: {}\n        });\n    }\n    return options;\n}\n\nfunction scaleClip(scale, allowedOverflow) {\n    const opts = scale && scale.options || {};\n    const reverse = opts.reverse;\n    const min = opts.min === undefined ? allowedOverflow : 0;\n    const max = opts.max === undefined ? allowedOverflow : 0;\n    return {\n        start: reverse ? max : min,\n        end: reverse ? min : max\n    };\n}\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n    if (allowedOverflow === false) {\n        return false;\n    }\n    const x = scaleClip(xScale, allowedOverflow);\n    const y = scaleClip(yScale, allowedOverflow);\n    return {\n        top: y.end,\n        right: x.end,\n        bottom: y.start,\n        left: x.start\n    };\n}\nfunction toClip(value) {\n    let t, r, b, l;\n    if (isObject(value)) {\n        t = value.top;\n        r = value.right;\n        b = value.bottom;\n        l = value.left;\n    } else {\n        t = r = b = l = value;\n    }\n    return {\n        top: t,\n        right: r,\n        bottom: b,\n        left: l,\n        disabled: value === false\n    };\n}\nfunction getSortedDatasetIndices(chart, filterVisible) {\n    const keys = [];\n    const metasets = chart._getSortedDatasetMetas(filterVisible);\n    let i, ilen;\n    for(i = 0, ilen = metasets.length; i < ilen; ++i){\n        keys.push(metasets[i].index);\n    }\n    return keys;\n}\nfunction applyStack(stack, value, dsIndex, options = {}) {\n    const keys = stack.keys;\n    const singleMode = options.mode === 'single';\n    let i, ilen, datasetIndex, otherValue;\n    if (value === null) {\n        return;\n    }\n    let found = false;\n    for(i = 0, ilen = keys.length; i < ilen; ++i){\n        datasetIndex = +keys[i];\n        if (datasetIndex === dsIndex) {\n            found = true;\n            if (options.all) {\n                continue;\n            }\n            break;\n        }\n        otherValue = stack.values[datasetIndex];\n        if (isNumberFinite(otherValue) && (singleMode || value === 0 || sign(value) === sign(otherValue))) {\n            value += otherValue;\n        }\n    }\n    if (!found && !options.all) {\n        return 0;\n    }\n    return value;\n}\nfunction convertObjectDataToArray(data, meta) {\n    const { iScale , vScale  } = meta;\n    const iAxisKey = iScale.axis === 'x' ? 'x' : 'y';\n    const vAxisKey = vScale.axis === 'x' ? 'x' : 'y';\n    const keys = Object.keys(data);\n    const adata = new Array(keys.length);\n    let i, ilen, key;\n    for(i = 0, ilen = keys.length; i < ilen; ++i){\n        key = keys[i];\n        adata[i] = {\n            [iAxisKey]: key,\n            [vAxisKey]: data[key]\n        };\n    }\n    return adata;\n}\nfunction isStacked(scale, meta) {\n    const stacked = scale && scale.options.stacked;\n    return stacked || stacked === undefined && meta.stack !== undefined;\n}\nfunction getStackKey(indexScale, valueScale, meta) {\n    return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\nfunction getUserBounds(scale) {\n    const { min , max , minDefined , maxDefined  } = scale.getUserBounds();\n    return {\n        min: minDefined ? min : Number.NEGATIVE_INFINITY,\n        max: maxDefined ? max : Number.POSITIVE_INFINITY\n    };\n}\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n    const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n    return subStack[indexValue] || (subStack[indexValue] = {});\n}\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n    for (const meta of vScale.getMatchingVisibleMetas(type).reverse()){\n        const value = stack[meta.index];\n        if (positive && value > 0 || !positive && value < 0) {\n            return meta.index;\n        }\n    }\n    return null;\n}\nfunction updateStacks(controller, parsed) {\n    const { chart , _cachedMeta: meta  } = controller;\n    const stacks = chart._stacks || (chart._stacks = {});\n    const { iScale , vScale , index: datasetIndex  } = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const key = getStackKey(iScale, vScale, meta);\n    const ilen = parsed.length;\n    let stack;\n    for(let i = 0; i < ilen; ++i){\n        const item = parsed[i];\n        const { [iAxis]: index , [vAxis]: value  } = item;\n        const itemStacks = item._stacks || (item._stacks = {});\n        stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n        stack[datasetIndex] = value;\n        stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n        stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n        const visualValues = stack._visualValues || (stack._visualValues = {});\n        visualValues[datasetIndex] = value;\n    }\n}\nfunction getFirstScaleId(chart, axis) {\n    const scales = chart.scales;\n    return Object.keys(scales).filter((key)=>scales[key].axis === axis).shift();\n}\nfunction createDatasetContext(parent, index) {\n    return createContext(parent, {\n        active: false,\n        dataset: undefined,\n        datasetIndex: index,\n        index,\n        mode: 'default',\n        type: 'dataset'\n    });\n}\nfunction createDataContext(parent, index, element) {\n    return createContext(parent, {\n        active: false,\n        dataIndex: index,\n        parsed: undefined,\n        raw: undefined,\n        element,\n        index,\n        mode: 'default',\n        type: 'data'\n    });\n}\nfunction clearStacks(meta, items) {\n    const datasetIndex = meta.controller.index;\n    const axis = meta.vScale && meta.vScale.axis;\n    if (!axis) {\n        return;\n    }\n    items = items || meta._parsed;\n    for (const parsed of items){\n        const stacks = parsed._stacks;\n        if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n            return;\n        }\n        delete stacks[axis][datasetIndex];\n        if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {\n            delete stacks[axis]._visualValues[datasetIndex];\n        }\n    }\n}\nconst isDirectUpdateMode = (mode)=>mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared)=>shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart)=>canStack && !meta.hidden && meta._stacked && {\n        keys: getSortedDatasetIndices(chart, true),\n        values: null\n    };\nclass DatasetController {\n static defaults = {};\n static datasetElementType = null;\n static dataElementType = null;\n constructor(chart, datasetIndex){\n        this.chart = chart;\n        this._ctx = chart.ctx;\n        this.index = datasetIndex;\n        this._cachedDataOpts = {};\n        this._cachedMeta = this.getMeta();\n        this._type = this._cachedMeta.type;\n        this.options = undefined;\n         this._parsing = false;\n        this._data = undefined;\n        this._objectData = undefined;\n        this._sharedOptions = undefined;\n        this._drawStart = undefined;\n        this._drawCount = undefined;\n        this.enableOptionSharing = false;\n        this.supportsDecimation = false;\n        this.$context = undefined;\n        this._syncList = [];\n        this.datasetElementType = new.target.datasetElementType;\n        this.dataElementType = new.target.dataElementType;\n        this.initialize();\n    }\n    initialize() {\n        const meta = this._cachedMeta;\n        this.configure();\n        this.linkScales();\n        meta._stacked = isStacked(meta.vScale, meta);\n        this.addElements();\n        if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n            console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n        }\n    }\n    updateIndex(datasetIndex) {\n        if (this.index !== datasetIndex) {\n            clearStacks(this._cachedMeta);\n        }\n        this.index = datasetIndex;\n    }\n    linkScales() {\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const dataset = this.getDataset();\n        const chooseId = (axis, x, y, r)=>axis === 'x' ? x : axis === 'r' ? r : y;\n        const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n        const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n        const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n        const indexAxis = meta.indexAxis;\n        const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n        const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n        meta.xScale = this.getScaleForId(xid);\n        meta.yScale = this.getScaleForId(yid);\n        meta.rScale = this.getScaleForId(rid);\n        meta.iScale = this.getScaleForId(iid);\n        meta.vScale = this.getScaleForId(vid);\n    }\n    getDataset() {\n        return this.chart.data.datasets[this.index];\n    }\n    getMeta() {\n        return this.chart.getDatasetMeta(this.index);\n    }\n getScaleForId(scaleID) {\n        return this.chart.scales[scaleID];\n    }\n _getOtherScale(scale) {\n        const meta = this._cachedMeta;\n        return scale === meta.iScale ? meta.vScale : meta.iScale;\n    }\n    reset() {\n        this._update('reset');\n    }\n _destroy() {\n        const meta = this._cachedMeta;\n        if (this._data) {\n            unlistenArrayEvents(this._data, this);\n        }\n        if (meta._stacked) {\n            clearStacks(meta);\n        }\n    }\n _dataCheck() {\n        const dataset = this.getDataset();\n        const data = dataset.data || (dataset.data = []);\n        const _data = this._data;\n        if (isObject(data)) {\n            const meta = this._cachedMeta;\n            this._data = convertObjectDataToArray(data, meta);\n        } else if (_data !== data) {\n            if (_data) {\n                unlistenArrayEvents(_data, this);\n                const meta = this._cachedMeta;\n                clearStacks(meta);\n                meta._parsed = [];\n            }\n            if (data && Object.isExtensible(data)) {\n                listenArrayEvents(data, this);\n            }\n            this._syncList = [];\n            this._data = data;\n        }\n    }\n    addElements() {\n        const meta = this._cachedMeta;\n        this._dataCheck();\n        if (this.datasetElementType) {\n            meta.dataset = new this.datasetElementType();\n        }\n    }\n    buildOrUpdateElements(resetNewElements) {\n        const meta = this._cachedMeta;\n        const dataset = this.getDataset();\n        let stackChanged = false;\n        this._dataCheck();\n        const oldStacked = meta._stacked;\n        meta._stacked = isStacked(meta.vScale, meta);\n        if (meta.stack !== dataset.stack) {\n            stackChanged = true;\n            clearStacks(meta);\n            meta.stack = dataset.stack;\n        }\n        this._resyncElements(resetNewElements);\n        if (stackChanged || oldStacked !== meta._stacked) {\n            updateStacks(this, meta._parsed);\n            meta._stacked = isStacked(meta.vScale, meta);\n        }\n    }\n configure() {\n        const config = this.chart.config;\n        const scopeKeys = config.datasetScopeKeys(this._type);\n        const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n        this.options = config.createResolver(scopes, this.getContext());\n        this._parsing = this.options.parsing;\n        this._cachedDataOpts = {};\n    }\n parse(start, count) {\n        const { _cachedMeta: meta , _data: data  } = this;\n        const { iScale , _stacked  } = meta;\n        const iAxis = iScale.axis;\n        let sorted = start === 0 && count === data.length ? true : meta._sorted;\n        let prev = start > 0 && meta._parsed[start - 1];\n        let i, cur, parsed;\n        if (this._parsing === false) {\n            meta._parsed = data;\n            meta._sorted = true;\n            parsed = data;\n        } else {\n            if (isArray(data[start])) {\n                parsed = this.parseArrayData(meta, data, start, count);\n            } else if (isObject(data[start])) {\n                parsed = this.parseObjectData(meta, data, start, count);\n            } else {\n                parsed = this.parsePrimitiveData(meta, data, start, count);\n            }\n            const isNotInOrderComparedToPrev = ()=>cur[iAxis] === null || prev && cur[iAxis] < prev[iAxis];\n            for(i = 0; i < count; ++i){\n                meta._parsed[i + start] = cur = parsed[i];\n                if (sorted) {\n                    if (isNotInOrderComparedToPrev()) {\n                        sorted = false;\n                    }\n                    prev = cur;\n                }\n            }\n            meta._sorted = sorted;\n        }\n        if (_stacked) {\n            updateStacks(this, parsed);\n        }\n    }\n parsePrimitiveData(meta, data, start, count) {\n        const { iScale , vScale  } = meta;\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const labels = iScale.getLabels();\n        const singleScale = iScale === vScale;\n        const parsed = new Array(count);\n        let i, ilen, index;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            parsed[i] = {\n                [iAxis]: singleScale || iScale.parse(labels[index], index),\n                [vAxis]: vScale.parse(data[index], index)\n            };\n        }\n        return parsed;\n    }\n parseArrayData(meta, data, start, count) {\n        const { xScale , yScale  } = meta;\n        const parsed = new Array(count);\n        let i, ilen, index, item;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            item = data[index];\n            parsed[i] = {\n                x: xScale.parse(item[0], index),\n                y: yScale.parse(item[1], index)\n            };\n        }\n        return parsed;\n    }\n parseObjectData(meta, data, start, count) {\n        const { xScale , yScale  } = meta;\n        const { xAxisKey ='x' , yAxisKey ='y'  } = this._parsing;\n        const parsed = new Array(count);\n        let i, ilen, index, item;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            item = data[index];\n            parsed[i] = {\n                x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n                y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n            };\n        }\n        return parsed;\n    }\n getParsed(index) {\n        return this._cachedMeta._parsed[index];\n    }\n getDataElement(index) {\n        return this._cachedMeta.data[index];\n    }\n applyStack(scale, parsed, mode) {\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const value = parsed[scale.axis];\n        const stack = {\n            keys: getSortedDatasetIndices(chart, true),\n            values: parsed._stacks[scale.axis]._visualValues\n        };\n        return applyStack(stack, value, meta.index, {\n            mode\n        });\n    }\n updateRangeFromParsed(range, scale, parsed, stack) {\n        const parsedValue = parsed[scale.axis];\n        let value = parsedValue === null ? NaN : parsedValue;\n        const values = stack && parsed._stacks[scale.axis];\n        if (stack && values) {\n            stack.values = values;\n            value = applyStack(stack, parsedValue, this._cachedMeta.index);\n        }\n        range.min = Math.min(range.min, value);\n        range.max = Math.max(range.max, value);\n    }\n getMinMax(scale, canStack) {\n        const meta = this._cachedMeta;\n        const _parsed = meta._parsed;\n        const sorted = meta._sorted && scale === meta.iScale;\n        const ilen = _parsed.length;\n        const otherScale = this._getOtherScale(scale);\n        const stack = createStack(canStack, meta, this.chart);\n        const range = {\n            min: Number.POSITIVE_INFINITY,\n            max: Number.NEGATIVE_INFINITY\n        };\n        const { min: otherMin , max: otherMax  } = getUserBounds(otherScale);\n        let i, parsed;\n        function _skip() {\n            parsed = _parsed[i];\n            const otherValue = parsed[otherScale.axis];\n            return !isNumberFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n        }\n        for(i = 0; i < ilen; ++i){\n            if (_skip()) {\n                continue;\n            }\n            this.updateRangeFromParsed(range, scale, parsed, stack);\n            if (sorted) {\n                break;\n            }\n        }\n        if (sorted) {\n            for(i = ilen - 1; i >= 0; --i){\n                if (_skip()) {\n                    continue;\n                }\n                this.updateRangeFromParsed(range, scale, parsed, stack);\n                break;\n            }\n        }\n        return range;\n    }\n    getAllParsedValues(scale) {\n        const parsed = this._cachedMeta._parsed;\n        const values = [];\n        let i, ilen, value;\n        for(i = 0, ilen = parsed.length; i < ilen; ++i){\n            value = parsed[i][scale.axis];\n            if (isNumberFinite(value)) {\n                values.push(value);\n            }\n        }\n        return values;\n    }\n getMaxOverflow() {\n        return false;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const iScale = meta.iScale;\n        const vScale = meta.vScale;\n        const parsed = this.getParsed(index);\n        return {\n            label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n            value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n        };\n    }\n _update(mode) {\n        const meta = this._cachedMeta;\n        this.update(mode || 'default');\n        meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n    }\n update(mode) {}\n    draw() {\n        const ctx = this._ctx;\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const elements = meta.data || [];\n        const area = chart.chartArea;\n        const active = [];\n        const start = this._drawStart || 0;\n        const count = this._drawCount || elements.length - start;\n        const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n        let i;\n        if (meta.dataset) {\n            meta.dataset.draw(ctx, area, start, count);\n        }\n        for(i = start; i < start + count; ++i){\n            const element = elements[i];\n            if (element.hidden) {\n                continue;\n            }\n            if (element.active && drawActiveElementsOnTop) {\n                active.push(element);\n            } else {\n                element.draw(ctx, area);\n            }\n        }\n        for(i = 0; i < active.length; ++i){\n            active[i].draw(ctx, area);\n        }\n    }\n getStyle(index, active) {\n        const mode = active ? 'active' : 'default';\n        return index === undefined && this._cachedMeta.dataset ? this.resolveDatasetElementOptions(mode) : this.resolveDataElementOptions(index || 0, mode);\n    }\n getContext(index, active, mode) {\n        const dataset = this.getDataset();\n        let context;\n        if (index >= 0 && index < this._cachedMeta.data.length) {\n            const element = this._cachedMeta.data[index];\n            context = element.$context || (element.$context = createDataContext(this.getContext(), index, element));\n            context.parsed = this.getParsed(index);\n            context.raw = dataset.data[index];\n            context.index = context.dataIndex = index;\n        } else {\n            context = this.$context || (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n            context.dataset = dataset;\n            context.index = context.datasetIndex = this.index;\n        }\n        context.active = !!active;\n        context.mode = mode;\n        return context;\n    }\n resolveDatasetElementOptions(mode) {\n        return this._resolveElementOptions(this.datasetElementType.id, mode);\n    }\n resolveDataElementOptions(index, mode) {\n        return this._resolveElementOptions(this.dataElementType.id, mode, index);\n    }\n _resolveElementOptions(elementType, mode = 'default', index) {\n        const active = mode === 'active';\n        const cache = this._cachedDataOpts;\n        const cacheKey = elementType + '-' + mode;\n        const cached = cache[cacheKey];\n        const sharing = this.enableOptionSharing && defined(index);\n        if (cached) {\n            return cloneIfNotShared(cached, sharing);\n        }\n        const config = this.chart.config;\n        const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n        const prefixes = active ? [\n            `${elementType}Hover`,\n            'hover',\n            elementType,\n            ''\n        ] : [\n            elementType,\n            ''\n        ];\n        const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n        const names = Object.keys(defaults.elements[elementType]);\n        const context = ()=>this.getContext(index, active, mode);\n        const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n        if (values.$shared) {\n            values.$shared = sharing;\n            cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n        }\n        return values;\n    }\n _resolveAnimations(index, transition, active) {\n        const chart = this.chart;\n        const cache = this._cachedDataOpts;\n        const cacheKey = `animation-${transition}`;\n        const cached = cache[cacheKey];\n        if (cached) {\n            return cached;\n        }\n        let options;\n        if (chart.options.animation !== false) {\n            const config = this.chart.config;\n            const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n            const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n            options = config.createResolver(scopes, this.getContext(index, active, transition));\n        }\n        const animations = new Animations(chart, options && options.animations);\n        if (options && options._cacheable) {\n            cache[cacheKey] = Object.freeze(animations);\n        }\n        return animations;\n    }\n getSharedOptions(options) {\n        if (!options.$shared) {\n            return;\n        }\n        return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n    }\n includeOptions(mode, sharedOptions) {\n        return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n    }\n _getSharedOptions(start, mode) {\n        const firstOpts = this.resolveDataElementOptions(start, mode);\n        const previouslySharedOptions = this._sharedOptions;\n        const sharedOptions = this.getSharedOptions(firstOpts);\n        const includeOptions = this.includeOptions(mode, sharedOptions) || sharedOptions !== previouslySharedOptions;\n        this.updateSharedOptions(sharedOptions, mode, firstOpts);\n        return {\n            sharedOptions,\n            includeOptions\n        };\n    }\n updateElement(element, index, properties, mode) {\n        if (isDirectUpdateMode(mode)) {\n            Object.assign(element, properties);\n        } else {\n            this._resolveAnimations(index, mode).update(element, properties);\n        }\n    }\n updateSharedOptions(sharedOptions, mode, newOptions) {\n        if (sharedOptions && !isDirectUpdateMode(mode)) {\n            this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n        }\n    }\n _setStyle(element, index, mode, active) {\n        element.active = active;\n        const options = this.getStyle(index, active);\n        this._resolveAnimations(index, mode, active).update(element, {\n            options: !active && this.getSharedOptions(options) || options\n        });\n    }\n    removeHoverStyle(element, datasetIndex, index) {\n        this._setStyle(element, index, 'active', false);\n    }\n    setHoverStyle(element, datasetIndex, index) {\n        this._setStyle(element, index, 'active', true);\n    }\n _removeDatasetHoverStyle() {\n        const element = this._cachedMeta.dataset;\n        if (element) {\n            this._setStyle(element, undefined, 'active', false);\n        }\n    }\n _setDatasetHoverStyle() {\n        const element = this._cachedMeta.dataset;\n        if (element) {\n            this._setStyle(element, undefined, 'active', true);\n        }\n    }\n _resyncElements(resetNewElements) {\n        const data = this._data;\n        const elements = this._cachedMeta.data;\n        for (const [method, arg1, arg2] of this._syncList){\n            this[method](arg1, arg2);\n        }\n        this._syncList = [];\n        const numMeta = elements.length;\n        const numData = data.length;\n        const count = Math.min(numData, numMeta);\n        if (count) {\n            this.parse(0, count);\n        }\n        if (numData > numMeta) {\n            this._insertElements(numMeta, numData - numMeta, resetNewElements);\n        } else if (numData < numMeta) {\n            this._removeElements(numData, numMeta - numData);\n        }\n    }\n _insertElements(start, count, resetNewElements = true) {\n        const meta = this._cachedMeta;\n        const data = meta.data;\n        const end = start + count;\n        let i;\n        const move = (arr)=>{\n            arr.length += count;\n            for(i = arr.length - 1; i >= end; i--){\n                arr[i] = arr[i - count];\n            }\n        };\n        move(data);\n        for(i = start; i < end; ++i){\n            data[i] = new this.dataElementType();\n        }\n        if (this._parsing) {\n            move(meta._parsed);\n        }\n        this.parse(start, count);\n        if (resetNewElements) {\n            this.updateElements(data, start, count, 'reset');\n        }\n    }\n    updateElements(element, start, count, mode) {}\n _removeElements(start, count) {\n        const meta = this._cachedMeta;\n        if (this._parsing) {\n            const removed = meta._parsed.splice(start, count);\n            if (meta._stacked) {\n                clearStacks(meta, removed);\n            }\n        }\n        meta.data.splice(start, count);\n    }\n _sync(args) {\n        if (this._parsing) {\n            this._syncList.push(args);\n        } else {\n            const [method, arg1, arg2] = args;\n            this[method](arg1, arg2);\n        }\n        this.chart._dataChanges.push([\n            this.index,\n            ...args\n        ]);\n    }\n    _onDataPush() {\n        const count = arguments.length;\n        this._sync([\n            '_insertElements',\n            this.getDataset().data.length - count,\n            count\n        ]);\n    }\n    _onDataPop() {\n        this._sync([\n            '_removeElements',\n            this._cachedMeta.data.length - 1,\n            1\n        ]);\n    }\n    _onDataShift() {\n        this._sync([\n            '_removeElements',\n            0,\n            1\n        ]);\n    }\n    _onDataSplice(start, count) {\n        if (count) {\n            this._sync([\n                '_removeElements',\n                start,\n                count\n            ]);\n        }\n        const newCount = arguments.length - 2;\n        if (newCount) {\n            this._sync([\n                '_insertElements',\n                start,\n                newCount\n            ]);\n        }\n    }\n    _onDataUnshift() {\n        this._sync([\n            '_insertElements',\n            0,\n            arguments.length\n        ]);\n    }\n}\n\nfunction getAllScaleValues(scale, type) {\n    if (!scale._cache.$bar) {\n        const visibleMetas = scale.getMatchingVisibleMetas(type);\n        let values = [];\n        for(let i = 0, ilen = visibleMetas.length; i < ilen; i++){\n            values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n        }\n        scale._cache.$bar = _arrayUnique(values.sort((a, b)=>a - b));\n    }\n    return scale._cache.$bar;\n}\n function computeMinSampleSize(meta) {\n    const scale = meta.iScale;\n    const values = getAllScaleValues(scale, meta.type);\n    let min = scale._length;\n    let i, ilen, curr, prev;\n    const updateMinAndPrev = ()=>{\n        if (curr === 32767 || curr === -32768) {\n            return;\n        }\n        if (defined(prev)) {\n            min = Math.min(min, Math.abs(curr - prev) || min);\n        }\n        prev = curr;\n    };\n    for(i = 0, ilen = values.length; i < ilen; ++i){\n        curr = scale.getPixelForValue(values[i]);\n        updateMinAndPrev();\n    }\n    prev = undefined;\n    for(i = 0, ilen = scale.ticks.length; i < ilen; ++i){\n        curr = scale.getPixelForTick(i);\n        updateMinAndPrev();\n    }\n    return min;\n}\n function computeFitCategoryTraits(index, ruler, options, stackCount) {\n    const thickness = options.barThickness;\n    let size, ratio;\n    if (isNullOrUndef(thickness)) {\n        size = ruler.min * options.categoryPercentage;\n        ratio = options.barPercentage;\n    } else {\n        size = thickness * stackCount;\n        ratio = 1;\n    }\n    return {\n        chunk: size / stackCount,\n        ratio,\n        start: ruler.pixels[index] - size / 2\n    };\n}\n function computeFlexCategoryTraits(index, ruler, options, stackCount) {\n    const pixels = ruler.pixels;\n    const curr = pixels[index];\n    let prev = index > 0 ? pixels[index - 1] : null;\n    let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n    const percent = options.categoryPercentage;\n    if (prev === null) {\n        prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n    }\n    if (next === null) {\n        next = curr + curr - prev;\n    }\n    const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n    const size = Math.abs(next - prev) / 2 * percent;\n    return {\n        chunk: size / stackCount,\n        ratio: options.barPercentage,\n        start\n    };\n}\nfunction parseFloatBar(entry, item, vScale, i) {\n    const startValue = vScale.parse(entry[0], i);\n    const endValue = vScale.parse(entry[1], i);\n    const min = Math.min(startValue, endValue);\n    const max = Math.max(startValue, endValue);\n    let barStart = min;\n    let barEnd = max;\n    if (Math.abs(min) > Math.abs(max)) {\n        barStart = max;\n        barEnd = min;\n    }\n    item[vScale.axis] = barEnd;\n    item._custom = {\n        barStart,\n        barEnd,\n        start: startValue,\n        end: endValue,\n        min,\n        max\n    };\n}\nfunction parseValue(entry, item, vScale, i) {\n    if (isArray(entry)) {\n        parseFloatBar(entry, item, vScale, i);\n    } else {\n        item[vScale.axis] = vScale.parse(entry, i);\n    }\n    return item;\n}\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = [];\n    let i, ilen, item, entry;\n    for(i = start, ilen = start + count; i < ilen; ++i){\n        entry = data[i];\n        item = {};\n        item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n        parsed.push(parseValue(entry, item, vScale, i));\n    }\n    return parsed;\n}\nfunction isFloatBar(custom) {\n    return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\nfunction barSign(size, vScale, actualBase) {\n    if (size !== 0) {\n        return sign(size);\n    }\n    return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\nfunction borderProps(properties) {\n    let reverse, start, end, top, bottom;\n    if (properties.horizontal) {\n        reverse = properties.base > properties.x;\n        start = 'left';\n        end = 'right';\n    } else {\n        reverse = properties.base < properties.y;\n        start = 'bottom';\n        end = 'top';\n    }\n    if (reverse) {\n        top = 'end';\n        bottom = 'start';\n    } else {\n        top = 'start';\n        bottom = 'end';\n    }\n    return {\n        start,\n        end,\n        reverse,\n        top,\n        bottom\n    };\n}\nfunction setBorderSkipped(properties, options, stack, index) {\n    let edge = options.borderSkipped;\n    const res = {};\n    if (!edge) {\n        properties.borderSkipped = res;\n        return;\n    }\n    if (edge === true) {\n        properties.borderSkipped = {\n            top: true,\n            right: true,\n            bottom: true,\n            left: true\n        };\n        return;\n    }\n    const { start , end , reverse , top , bottom  } = borderProps(properties);\n    if (edge === 'middle' && stack) {\n        properties.enableBorderRadius = true;\n        if ((stack._top || 0) === index) {\n            edge = top;\n        } else if ((stack._bottom || 0) === index) {\n            edge = bottom;\n        } else {\n            res[parseEdge(bottom, start, end, reverse)] = true;\n            edge = top;\n        }\n    }\n    res[parseEdge(edge, start, end, reverse)] = true;\n    properties.borderSkipped = res;\n}\nfunction parseEdge(edge, a, b, reverse) {\n    if (reverse) {\n        edge = swap(edge, a, b);\n        edge = startEnd(edge, b, a);\n    } else {\n        edge = startEnd(edge, a, b);\n    }\n    return edge;\n}\nfunction swap(orig, v1, v2) {\n    return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\nfunction startEnd(v, start, end) {\n    return v === 'start' ? start : v === 'end' ? end : v;\n}\nfunction setInflateAmount(properties, { inflateAmount  }, ratio) {\n    properties.inflateAmount = inflateAmount === 'auto' ? ratio === 1 ? 0.33 : 0 : inflateAmount;\n}\nclass BarController extends DatasetController {\n    static id = 'bar';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'bar',\n        categoryPercentage: 0.8,\n        barPercentage: 0.9,\n        grouped: true,\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'base',\n                    'width',\n                    'height'\n                ]\n            }\n        }\n    };\n static overrides = {\n        scales: {\n            _index_: {\n                type: 'category',\n                offset: true,\n                grid: {\n                    offset: true\n                }\n            },\n            _value_: {\n                type: 'linear',\n                beginAtZero: true\n            }\n        }\n    };\n parsePrimitiveData(meta, data, start, count) {\n        return parseArrayOrPrimitive(meta, data, start, count);\n    }\n parseArrayData(meta, data, start, count) {\n        return parseArrayOrPrimitive(meta, data, start, count);\n    }\n parseObjectData(meta, data, start, count) {\n        const { iScale , vScale  } = meta;\n        const { xAxisKey ='x' , yAxisKey ='y'  } = this._parsing;\n        const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n        const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n        const parsed = [];\n        let i, ilen, item, obj;\n        for(i = start, ilen = start + count; i < ilen; ++i){\n            obj = data[i];\n            item = {};\n            item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n            parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n        }\n        return parsed;\n    }\n updateRangeFromParsed(range, scale, parsed, stack) {\n        super.updateRangeFromParsed(range, scale, parsed, stack);\n        const custom = parsed._custom;\n        if (custom && scale === this._cachedMeta.vScale) {\n            range.min = Math.min(range.min, custom.min);\n            range.max = Math.max(range.max, custom.max);\n        }\n    }\n getMaxOverflow() {\n        return 0;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const { iScale , vScale  } = meta;\n        const parsed = this.getParsed(index);\n        const custom = parsed._custom;\n        const value = isFloatBar(custom) ? '[' + custom.start + ', ' + custom.end + ']' : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n        return {\n            label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n            value\n        };\n    }\n    initialize() {\n        this.enableOptionSharing = true;\n        super.initialize();\n        const meta = this._cachedMeta;\n        meta.stack = this.getDataset().stack;\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        this.updateElements(meta.data, 0, meta.data.length, mode);\n    }\n    updateElements(bars, start, count, mode) {\n        const reset = mode === 'reset';\n        const { index , _cachedMeta: { vScale  }  } = this;\n        const base = vScale.getBasePixel();\n        const horizontal = vScale.isHorizontal();\n        const ruler = this._getRuler();\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        for(let i = start; i < start + count; i++){\n            const parsed = this.getParsed(i);\n            const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {\n                base,\n                head: base\n            } : this._calculateBarValuePixels(i);\n            const ipixels = this._calculateBarIndexPixels(i, ruler);\n            const stack = (parsed._stacks || {})[vScale.axis];\n            const properties = {\n                horizontal,\n                base: vpixels.base,\n                enableBorderRadius: !stack || isFloatBar(parsed._custom) || index === stack._top || index === stack._bottom,\n                x: horizontal ? vpixels.head : ipixels.center,\n                y: horizontal ? ipixels.center : vpixels.head,\n                height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n                width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n            };\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n            }\n            const options = properties.options || bars[i].options;\n            setBorderSkipped(properties, options, stack, index);\n            setInflateAmount(properties, options, ruler.ratio);\n            this.updateElement(bars[i], i, properties, mode);\n        }\n    }\n _getStacks(last, dataIndex) {\n        const { iScale  } = this._cachedMeta;\n        const metasets = iScale.getMatchingVisibleMetas(this._type).filter((meta)=>meta.controller.options.grouped);\n        const stacked = iScale.options.stacked;\n        const stacks = [];\n        const currentParsed = this._cachedMeta.controller.getParsed(dataIndex);\n        const iScaleValue = currentParsed && currentParsed[iScale.axis];\n        const skipNull = (meta)=>{\n            const parsed = meta._parsed.find((item)=>item[iScale.axis] === iScaleValue);\n            const val = parsed && parsed[meta.vScale.axis];\n            if (isNullOrUndef(val) || isNaN(val)) {\n                return true;\n            }\n        };\n        for (const meta of metasets){\n            if (dataIndex !== undefined && skipNull(meta)) {\n                continue;\n            }\n            if (stacked === false || stacks.indexOf(meta.stack) === -1 || stacked === undefined && meta.stack === undefined) {\n                stacks.push(meta.stack);\n            }\n            if (meta.index === last) {\n                break;\n            }\n        }\n        if (!stacks.length) {\n            stacks.push(undefined);\n        }\n        return stacks;\n    }\n _getStackCount(index) {\n        return this._getStacks(undefined, index).length;\n    }\n    _getAxisCount() {\n        return this._getAxis().length;\n    }\n    getFirstScaleIdForIndexAxis() {\n        const scales = this.chart.scales;\n        const indexScaleId = this.chart.options.indexAxis;\n        return Object.keys(scales).filter((key)=>scales[key].axis === indexScaleId).shift();\n    }\n    _getAxis() {\n        const axis = {};\n        const firstScaleAxisId = this.getFirstScaleIdForIndexAxis();\n        for (const dataset of this.chart.data.datasets){\n            axis[valueOrDefault(this.chart.options.indexAxis === 'x' ? dataset.xAxisID : dataset.yAxisID, firstScaleAxisId)] = true;\n        }\n        return Object.keys(axis);\n    }\n _getStackIndex(datasetIndex, name, dataIndex) {\n        const stacks = this._getStacks(datasetIndex, dataIndex);\n        const index = name !== undefined ? stacks.indexOf(name) : -1;\n        return index === -1 ? stacks.length - 1 : index;\n    }\n _getRuler() {\n        const opts = this.options;\n        const meta = this._cachedMeta;\n        const iScale = meta.iScale;\n        const pixels = [];\n        let i, ilen;\n        for(i = 0, ilen = meta.data.length; i < ilen; ++i){\n            pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n        }\n        const barThickness = opts.barThickness;\n        const min = barThickness || computeMinSampleSize(meta);\n        return {\n            min,\n            pixels,\n            start: iScale._startPixel,\n            end: iScale._endPixel,\n            stackCount: this._getStackCount(),\n            scale: iScale,\n            grouped: opts.grouped,\n            ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n        };\n    }\n _calculateBarValuePixels(index) {\n        const { _cachedMeta: { vScale , _stacked , index: datasetIndex  } , options: { base: baseValue , minBarLength  }  } = this;\n        const actualBase = baseValue || 0;\n        const parsed = this.getParsed(index);\n        const custom = parsed._custom;\n        const floating = isFloatBar(custom);\n        let value = parsed[vScale.axis];\n        let start = 0;\n        let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n        let head, size;\n        if (length !== value) {\n            start = length - value;\n            length = value;\n        }\n        if (floating) {\n            value = custom.barStart;\n            length = custom.barEnd - custom.barStart;\n            if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n                start = 0;\n            }\n            start += value;\n        }\n        const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n        let base = vScale.getPixelForValue(startValue);\n        if (this.chart.getDataVisibility(index)) {\n            head = vScale.getPixelForValue(start + length);\n        } else {\n            head = base;\n        }\n        size = head - base;\n        if (Math.abs(size) < minBarLength) {\n            size = barSign(size, vScale, actualBase) * minBarLength;\n            if (value === actualBase) {\n                base -= size / 2;\n            }\n            const startPixel = vScale.getPixelForDecimal(0);\n            const endPixel = vScale.getPixelForDecimal(1);\n            const min = Math.min(startPixel, endPixel);\n            const max = Math.max(startPixel, endPixel);\n            base = Math.max(Math.min(base, max), min);\n            head = base + size;\n            if (_stacked && !floating) {\n                parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);\n            }\n        }\n        if (base === vScale.getPixelForValue(actualBase)) {\n            const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n            base += halfGrid;\n            size -= halfGrid;\n        }\n        return {\n            size,\n            base,\n            head,\n            center: head + size / 2\n        };\n    }\n _calculateBarIndexPixels(index, ruler) {\n        const scale = ruler.scale;\n        const options = this.options;\n        const skipNull = options.skipNull;\n        const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n        let center, size;\n        const axisCount = this._getAxisCount();\n        if (ruler.grouped) {\n            const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n            const range = options.barThickness === 'flex' ? computeFlexCategoryTraits(index, ruler, options, stackCount * axisCount) : computeFitCategoryTraits(index, ruler, options, stackCount * axisCount);\n            const axisID = this.chart.options.indexAxis === 'x' ? this.getDataset().xAxisID : this.getDataset().yAxisID;\n            const axisNumber = this._getAxis().indexOf(valueOrDefault(axisID, this.getFirstScaleIdForIndexAxis()));\n            const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined) + axisNumber;\n            center = range.start + range.chunk * stackIndex + range.chunk / 2;\n            size = Math.min(maxBarThickness, range.chunk * range.ratio);\n        } else {\n            center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n            size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n        }\n        return {\n            base: center - size / 2,\n            head: center + size / 2,\n            center,\n            size\n        };\n    }\n    draw() {\n        const meta = this._cachedMeta;\n        const vScale = meta.vScale;\n        const rects = meta.data;\n        const ilen = rects.length;\n        let i = 0;\n        for(; i < ilen; ++i){\n            if (this.getParsed(i)[vScale.axis] !== null && !rects[i].hidden) {\n                rects[i].draw(this._ctx);\n            }\n        }\n    }\n}\n\nclass BubbleController extends DatasetController {\n    static id = 'bubble';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'point',\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'borderWidth',\n                    'radius'\n                ]\n            }\n        }\n    };\n static overrides = {\n        scales: {\n            x: {\n                type: 'linear'\n            },\n            y: {\n                type: 'linear'\n            }\n        }\n    };\n    initialize() {\n        this.enableOptionSharing = true;\n        super.initialize();\n    }\n parsePrimitiveData(meta, data, start, count) {\n        const parsed = super.parsePrimitiveData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n        }\n        return parsed;\n    }\n parseArrayData(meta, data, start, count) {\n        const parsed = super.parseArrayData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            const item = data[start + i];\n            parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n        }\n        return parsed;\n    }\n parseObjectData(meta, data, start, count) {\n        const parsed = super.parseObjectData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            const item = data[start + i];\n            parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n        }\n        return parsed;\n    }\n getMaxOverflow() {\n        const data = this._cachedMeta.data;\n        let max = 0;\n        for(let i = data.length - 1; i >= 0; --i){\n            max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n        }\n        return max > 0 && max;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const labels = this.chart.data.labels || [];\n        const { xScale , yScale  } = meta;\n        const parsed = this.getParsed(index);\n        const x = xScale.getLabelForValue(parsed.x);\n        const y = yScale.getLabelForValue(parsed.y);\n        const r = parsed._custom;\n        return {\n            label: labels[index] || '',\n            value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n        };\n    }\n    update(mode) {\n        const points = this._cachedMeta.data;\n        this.updateElements(points, 0, points.length, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale  } = this._cachedMeta;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        for(let i = start; i < start + count; i++){\n            const point = points[i];\n            const parsed = !reset && this.getParsed(i);\n            const properties = {};\n            const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n            const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel);\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n                if (reset) {\n                    properties.options.radius = 0;\n                }\n            }\n            this.updateElement(point, i, properties, mode);\n        }\n    }\n resolveDataElementOptions(index, mode) {\n        const parsed = this.getParsed(index);\n        let values = super.resolveDataElementOptions(index, mode);\n        if (values.$shared) {\n            values = Object.assign({}, values, {\n                $shared: false\n            });\n        }\n        const radius = values.radius;\n        if (mode !== 'active') {\n            values.radius = 0;\n        }\n        values.radius += valueOrDefault(parsed && parsed._custom, radius);\n        return values;\n    }\n}\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n    let ratioX = 1;\n    let ratioY = 1;\n    let offsetX = 0;\n    let offsetY = 0;\n    if (circumference < TAU) {\n        const startAngle = rotation;\n        const endAngle = startAngle + circumference;\n        const startX = Math.cos(startAngle);\n        const startY = Math.sin(startAngle);\n        const endX = Math.cos(endAngle);\n        const endY = Math.sin(endAngle);\n        const calcMax = (angle, a, b)=>_angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n        const calcMin = (angle, a, b)=>_angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n        const maxX = calcMax(0, startX, endX);\n        const maxY = calcMax(HALF_PI, startY, endY);\n        const minX = calcMin(PI, startX, endX);\n        const minY = calcMin(PI + HALF_PI, startY, endY);\n        ratioX = (maxX - minX) / 2;\n        ratioY = (maxY - minY) / 2;\n        offsetX = -(maxX + minX) / 2;\n        offsetY = -(maxY + minY) / 2;\n    }\n    return {\n        ratioX,\n        ratioY,\n        offsetX,\n        offsetY\n    };\n}\nclass DoughnutController extends DatasetController {\n    static id = 'doughnut';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'arc',\n        animation: {\n            animateRotate: true,\n            animateScale: false\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'circumference',\n                    'endAngle',\n                    'innerRadius',\n                    'outerRadius',\n                    'startAngle',\n                    'x',\n                    'y',\n                    'offset',\n                    'borderWidth',\n                    'spacing'\n                ]\n            }\n        },\n        cutout: '50%',\n        rotation: 0,\n        circumference: 360,\n        radius: '100%',\n        spacing: 0,\n        indexAxis: 'r'\n    };\n    static descriptors = {\n        _scriptable: (name)=>name !== 'spacing',\n        _indexable: (name)=>name !== 'spacing' && !name.startsWith('borderDash') && !name.startsWith('hoverBorderDash')\n    };\n static overrides = {\n        aspectRatio: 1,\n        plugins: {\n            legend: {\n                labels: {\n                    generateLabels (chart) {\n                        const data = chart.data;\n                        const { labels: { pointStyle , textAlign , color , useBorderRadius , borderRadius  }  } = chart.legend.options;\n                        if (data.labels.length && data.datasets.length) {\n                            return data.labels.map((label, i)=>{\n                                const meta = chart.getDatasetMeta(0);\n                                const style = meta.controller.getStyle(i);\n                                return {\n                                    text: label,\n                                    fillStyle: style.backgroundColor,\n                                    fontColor: color,\n                                    hidden: !chart.getDataVisibility(i),\n                                    lineDash: style.borderDash,\n                                    lineDashOffset: style.borderDashOffset,\n                                    lineJoin: style.borderJoinStyle,\n                                    lineWidth: style.borderWidth,\n                                    strokeStyle: style.borderColor,\n                                    textAlign: textAlign,\n                                    pointStyle: pointStyle,\n                                    borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n                                    index: i\n                                };\n                            });\n                        }\n                        return [];\n                    }\n                },\n                onClick (e, legendItem, legend) {\n                    legend.chart.toggleDataVisibility(legendItem.index);\n                    legend.chart.update();\n                }\n            }\n        }\n    };\n    constructor(chart, datasetIndex){\n        super(chart, datasetIndex);\n        this.enableOptionSharing = true;\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n        this.offsetX = undefined;\n        this.offsetY = undefined;\n    }\n    linkScales() {}\n parse(start, count) {\n        const data = this.getDataset().data;\n        const meta = this._cachedMeta;\n        if (this._parsing === false) {\n            meta._parsed = data;\n        } else {\n            let getter = (i)=>+data[i];\n            if (isObject(data[start])) {\n                const { key ='value'  } = this._parsing;\n                getter = (i)=>+resolveObjectKey(data[i], key);\n            }\n            let i, ilen;\n            for(i = start, ilen = start + count; i < ilen; ++i){\n                meta._parsed[i] = getter(i);\n            }\n        }\n    }\n _getRotation() {\n        return toRadians(this.options.rotation - 90);\n    }\n _getCircumference() {\n        return toRadians(this.options.circumference);\n    }\n _getRotationExtents() {\n        let min = TAU;\n        let max = -TAU;\n        for(let i = 0; i < this.chart.data.datasets.length; ++i){\n            if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n                const controller = this.chart.getDatasetMeta(i).controller;\n                const rotation = controller._getRotation();\n                const circumference = controller._getCircumference();\n                min = Math.min(min, rotation);\n                max = Math.max(max, rotation + circumference);\n            }\n        }\n        return {\n            rotation: min,\n            circumference: max - min\n        };\n    }\n update(mode) {\n        const chart = this.chart;\n        const { chartArea  } = chart;\n        const meta = this._cachedMeta;\n        const arcs = meta.data;\n        const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n        const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n        const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n        const chartWeight = this._getRingWeight(this.index);\n        const { circumference , rotation  } = this._getRotationExtents();\n        const { ratioX , ratioY , offsetX , offsetY  } = getRatioAndOffset(rotation, circumference, cutout);\n        const maxWidth = (chartArea.width - spacing) / ratioX;\n        const maxHeight = (chartArea.height - spacing) / ratioY;\n        const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n        const outerRadius = toDimension(this.options.radius, maxRadius);\n        const innerRadius = Math.max(outerRadius * cutout, 0);\n        const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n        this.offsetX = offsetX * outerRadius;\n        this.offsetY = offsetY * outerRadius;\n        meta.total = this.calculateTotal();\n        this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n        this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n        this.updateElements(arcs, 0, arcs.length, mode);\n    }\n _circumference(i, reset) {\n        const opts = this.options;\n        const meta = this._cachedMeta;\n        const circumference = this._getCircumference();\n        if (reset && opts.animation.animateRotate || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n            return 0;\n        }\n        return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n    }\n    updateElements(arcs, start, count, mode) {\n        const reset = mode === 'reset';\n        const chart = this.chart;\n        const chartArea = chart.chartArea;\n        const opts = chart.options;\n        const animationOpts = opts.animation;\n        const centerX = (chartArea.left + chartArea.right) / 2;\n        const centerY = (chartArea.top + chartArea.bottom) / 2;\n        const animateScale = reset && animationOpts.animateScale;\n        const innerRadius = animateScale ? 0 : this.innerRadius;\n        const outerRadius = animateScale ? 0 : this.outerRadius;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        let startAngle = this._getRotation();\n        let i;\n        for(i = 0; i < start; ++i){\n            startAngle += this._circumference(i, reset);\n        }\n        for(i = start; i < start + count; ++i){\n            const circumference = this._circumference(i, reset);\n            const arc = arcs[i];\n            const properties = {\n                x: centerX + this.offsetX,\n                y: centerY + this.offsetY,\n                startAngle,\n                endAngle: startAngle + circumference,\n                circumference,\n                outerRadius,\n                innerRadius\n            };\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n            }\n            startAngle += circumference;\n            this.updateElement(arc, i, properties, mode);\n        }\n    }\n    calculateTotal() {\n        const meta = this._cachedMeta;\n        const metaData = meta.data;\n        let total = 0;\n        let i;\n        for(i = 0; i < metaData.length; i++){\n            const value = meta._parsed[i];\n            if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n                total += Math.abs(value);\n            }\n        }\n        return total;\n    }\n    calculateCircumference(value) {\n        const total = this._cachedMeta.total;\n        if (total > 0 && !isNaN(value)) {\n            return TAU * (Math.abs(value) / total);\n        }\n        return 0;\n    }\n    getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const chart = this.chart;\n        const labels = chart.data.labels || [];\n        const value = formatNumber(meta._parsed[index], chart.options.locale);\n        return {\n            label: labels[index] || '',\n            value\n        };\n    }\n    getMaxBorderWidth(arcs) {\n        let max = 0;\n        const chart = this.chart;\n        let i, ilen, meta, controller, options;\n        if (!arcs) {\n            for(i = 0, ilen = chart.data.datasets.length; i < ilen; ++i){\n                if (chart.isDatasetVisible(i)) {\n                    meta = chart.getDatasetMeta(i);\n                    arcs = meta.data;\n                    controller = meta.controller;\n                    break;\n                }\n            }\n        }\n        if (!arcs) {\n            return 0;\n        }\n        for(i = 0, ilen = arcs.length; i < ilen; ++i){\n            options = controller.resolveDataElementOptions(i);\n            if (options.borderAlign !== 'inner') {\n                max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n            }\n        }\n        return max;\n    }\n    getMaxOffset(arcs) {\n        let max = 0;\n        for(let i = 0, ilen = arcs.length; i < ilen; ++i){\n            const options = this.resolveDataElementOptions(i);\n            max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n        }\n        return max;\n    }\n _getRingWeightOffset(datasetIndex) {\n        let ringWeightOffset = 0;\n        for(let i = 0; i < datasetIndex; ++i){\n            if (this.chart.isDatasetVisible(i)) {\n                ringWeightOffset += this._getRingWeight(i);\n            }\n        }\n        return ringWeightOffset;\n    }\n _getRingWeight(datasetIndex) {\n        return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n    }\n _getVisibleDatasetWeightTotal() {\n        return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n    }\n}\n\nclass LineController extends DatasetController {\n    static id = 'line';\n static defaults = {\n        datasetElementType: 'line',\n        dataElementType: 'point',\n        showLine: true,\n        spanGaps: false\n    };\n static overrides = {\n        scales: {\n            _index_: {\n                type: 'category'\n            },\n            _value_: {\n                type: 'linear'\n            }\n        }\n    };\n    initialize() {\n        this.enableOptionSharing = true;\n        this.supportsDecimation = true;\n        super.initialize();\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const { dataset: line , data: points = [] , _dataset  } = meta;\n        const animationsDisabled = this.chart._animationsDisabled;\n        let { start , count  } = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n        this._drawStart = start;\n        this._drawCount = count;\n        if (_scaleRangesChanged(meta)) {\n            start = 0;\n            count = points.length;\n        }\n        line._chart = this.chart;\n        line._datasetIndex = this.index;\n        line._decimated = !!_dataset._decimated;\n        line.points = points;\n        const options = this.resolveDatasetElementOptions(mode);\n        if (!this.options.showLine) {\n            options.borderWidth = 0;\n        }\n        options.segment = this.options.segment;\n        this.updateElement(line, undefined, {\n            animated: !animationsDisabled,\n            options\n        }, mode);\n        this.updateElements(points, start, count, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale , _stacked , _dataset  } = this._cachedMeta;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const { spanGaps , segment  } = this.options;\n        const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n        const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n        const end = start + count;\n        const pointsCount = points.length;\n        let prevParsed = start > 0 && this.getParsed(start - 1);\n        for(let i = 0; i < pointsCount; ++i){\n            const point = points[i];\n            const properties = directUpdate ? point : {};\n            if (i < start || i >= end) {\n                properties.skip = true;\n                continue;\n            }\n            const parsed = this.getParsed(i);\n            const nullData = isNullOrUndef(parsed[vAxis]);\n            const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n            const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n            properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;\n            if (segment) {\n                properties.parsed = parsed;\n                properties.raw = _dataset.data[i];\n            }\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            }\n            if (!directUpdate) {\n                this.updateElement(point, i, properties, mode);\n            }\n            prevParsed = parsed;\n        }\n    }\n getMaxOverflow() {\n        const meta = this._cachedMeta;\n        const dataset = meta.dataset;\n        const border = dataset.options && dataset.options.borderWidth || 0;\n        const data = meta.data || [];\n        if (!data.length) {\n            return border;\n        }\n        const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n        const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n        return Math.max(border, firstPoint, lastPoint) / 2;\n    }\n    draw() {\n        const meta = this._cachedMeta;\n        meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n        super.draw();\n    }\n}\n\nclass PolarAreaController extends DatasetController {\n    static id = 'polarArea';\n static defaults = {\n        dataElementType: 'arc',\n        animation: {\n            animateRotate: true,\n            animateScale: true\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'startAngle',\n                    'endAngle',\n                    'innerRadius',\n                    'outerRadius'\n                ]\n            }\n        },\n        indexAxis: 'r',\n        startAngle: 0\n    };\n static overrides = {\n        aspectRatio: 1,\n        plugins: {\n            legend: {\n                labels: {\n                    generateLabels (chart) {\n                        const data = chart.data;\n                        if (data.labels.length && data.datasets.length) {\n                            const { labels: { pointStyle , color  }  } = chart.legend.options;\n                            return data.labels.map((label, i)=>{\n                                const meta = chart.getDatasetMeta(0);\n                                const style = meta.controller.getStyle(i);\n                                return {\n                                    text: label,\n                                    fillStyle: style.backgroundColor,\n                                    strokeStyle: style.borderColor,\n                                    fontColor: color,\n                                    lineWidth: style.borderWidth,\n                                    pointStyle: pointStyle,\n                                    hidden: !chart.getDataVisibility(i),\n                                    index: i\n                                };\n                            });\n                        }\n                        return [];\n                    }\n                },\n                onClick (e, legendItem, legend) {\n                    legend.chart.toggleDataVisibility(legendItem.index);\n                    legend.chart.update();\n                }\n            }\n        },\n        scales: {\n            r: {\n                type: 'radialLinear',\n                angleLines: {\n                    display: false\n                },\n                beginAtZero: true,\n                grid: {\n                    circular: true\n                },\n                pointLabels: {\n                    display: false\n                },\n                startAngle: 0\n            }\n        }\n    };\n    constructor(chart, datasetIndex){\n        super(chart, datasetIndex);\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n    }\n    getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const chart = this.chart;\n        const labels = chart.data.labels || [];\n        const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n        return {\n            label: labels[index] || '',\n            value\n        };\n    }\n    parseObjectData(meta, data, start, count) {\n        return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n    }\n    update(mode) {\n        const arcs = this._cachedMeta.data;\n        this._updateRadius();\n        this.updateElements(arcs, 0, arcs.length, mode);\n    }\n getMinMax() {\n        const meta = this._cachedMeta;\n        const range = {\n            min: Number.POSITIVE_INFINITY,\n            max: Number.NEGATIVE_INFINITY\n        };\n        meta.data.forEach((element, index)=>{\n            const parsed = this.getParsed(index).r;\n            if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n                if (parsed < range.min) {\n                    range.min = parsed;\n                }\n                if (parsed > range.max) {\n                    range.max = parsed;\n                }\n            }\n        });\n        return range;\n    }\n _updateRadius() {\n        const chart = this.chart;\n        const chartArea = chart.chartArea;\n        const opts = chart.options;\n        const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n        const outerRadius = Math.max(minSize / 2, 0);\n        const innerRadius = Math.max(opts.cutoutPercentage ? outerRadius / 100 * opts.cutoutPercentage : 1, 0);\n        const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n        this.outerRadius = outerRadius - radiusLength * this.index;\n        this.innerRadius = this.outerRadius - radiusLength;\n    }\n    updateElements(arcs, start, count, mode) {\n        const reset = mode === 'reset';\n        const chart = this.chart;\n        const opts = chart.options;\n        const animationOpts = opts.animation;\n        const scale = this._cachedMeta.rScale;\n        const centerX = scale.xCenter;\n        const centerY = scale.yCenter;\n        const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n        let angle = datasetStartAngle;\n        let i;\n        const defaultAngle = 360 / this.countVisibleElements();\n        for(i = 0; i < start; ++i){\n            angle += this._computeAngle(i, mode, defaultAngle);\n        }\n        for(i = start; i < start + count; i++){\n            const arc = arcs[i];\n            let startAngle = angle;\n            let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n            let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n            angle = endAngle;\n            if (reset) {\n                if (animationOpts.animateScale) {\n                    outerRadius = 0;\n                }\n                if (animationOpts.animateRotate) {\n                    startAngle = endAngle = datasetStartAngle;\n                }\n            }\n            const properties = {\n                x: centerX,\n                y: centerY,\n                innerRadius: 0,\n                outerRadius,\n                startAngle,\n                endAngle,\n                options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n            };\n            this.updateElement(arc, i, properties, mode);\n        }\n    }\n    countVisibleElements() {\n        const meta = this._cachedMeta;\n        let count = 0;\n        meta.data.forEach((element, index)=>{\n            if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n                count++;\n            }\n        });\n        return count;\n    }\n _computeAngle(index, mode, defaultAngle) {\n        return this.chart.getDataVisibility(index) ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle) : 0;\n    }\n}\n\nclass PieController extends DoughnutController {\n    static id = 'pie';\n static defaults = {\n        cutout: 0,\n        rotation: 0,\n        circumference: 360,\n        radius: '100%'\n    };\n}\n\nclass RadarController extends DatasetController {\n    static id = 'radar';\n static defaults = {\n        datasetElementType: 'line',\n        dataElementType: 'point',\n        indexAxis: 'r',\n        showLine: true,\n        elements: {\n            line: {\n                fill: 'start'\n            }\n        }\n    };\n static overrides = {\n        aspectRatio: 1,\n        scales: {\n            r: {\n                type: 'radialLinear'\n            }\n        }\n    };\n getLabelAndValue(index) {\n        const vScale = this._cachedMeta.vScale;\n        const parsed = this.getParsed(index);\n        return {\n            label: vScale.getLabels()[index],\n            value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n        };\n    }\n    parseObjectData(meta, data, start, count) {\n        return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const line = meta.dataset;\n        const points = meta.data || [];\n        const labels = meta.iScale.getLabels();\n        line.points = points;\n        if (mode !== 'resize') {\n            const options = this.resolveDatasetElementOptions(mode);\n            if (!this.options.showLine) {\n                options.borderWidth = 0;\n            }\n            const properties = {\n                _loop: true,\n                _fullLoop: labels.length === points.length,\n                options\n            };\n            this.updateElement(line, undefined, properties, mode);\n        }\n        this.updateElements(points, 0, points.length, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const scale = this._cachedMeta.rScale;\n        const reset = mode === 'reset';\n        for(let i = start; i < start + count; i++){\n            const point = points[i];\n            const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n            const x = reset ? scale.xCenter : pointPosition.x;\n            const y = reset ? scale.yCenter : pointPosition.y;\n            const properties = {\n                x,\n                y,\n                angle: pointPosition.angle,\n                skip: isNaN(x) || isNaN(y),\n                options\n            };\n            this.updateElement(point, i, properties, mode);\n        }\n    }\n}\n\nclass ScatterController extends DatasetController {\n    static id = 'scatter';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'point',\n        showLine: false,\n        fill: false\n    };\n static overrides = {\n        interaction: {\n            mode: 'point'\n        },\n        scales: {\n            x: {\n                type: 'linear'\n            },\n            y: {\n                type: 'linear'\n            }\n        }\n    };\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const labels = this.chart.data.labels || [];\n        const { xScale , yScale  } = meta;\n        const parsed = this.getParsed(index);\n        const x = xScale.getLabelForValue(parsed.x);\n        const y = yScale.getLabelForValue(parsed.y);\n        return {\n            label: labels[index] || '',\n            value: '(' + x + ', ' + y + ')'\n        };\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const { data: points = []  } = meta;\n        const animationsDisabled = this.chart._animationsDisabled;\n        let { start , count  } = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n        this._drawStart = start;\n        this._drawCount = count;\n        if (_scaleRangesChanged(meta)) {\n            start = 0;\n            count = points.length;\n        }\n        if (this.options.showLine) {\n            if (!this.datasetElementType) {\n                this.addElements();\n            }\n            const { dataset: line , _dataset  } = meta;\n            line._chart = this.chart;\n            line._datasetIndex = this.index;\n            line._decimated = !!_dataset._decimated;\n            line.points = points;\n            const options = this.resolveDatasetElementOptions(mode);\n            options.segment = this.options.segment;\n            this.updateElement(line, undefined, {\n                animated: !animationsDisabled,\n                options\n            }, mode);\n        } else if (this.datasetElementType) {\n            delete meta.dataset;\n            this.datasetElementType = false;\n        }\n        this.updateElements(points, start, count, mode);\n    }\n    addElements() {\n        const { showLine  } = this.options;\n        if (!this.datasetElementType && showLine) {\n            this.datasetElementType = this.chart.registry.getElement('line');\n        }\n        super.addElements();\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale , _stacked , _dataset  } = this._cachedMeta;\n        const firstOpts = this.resolveDataElementOptions(start, mode);\n        const sharedOptions = this.getSharedOptions(firstOpts);\n        const includeOptions = this.includeOptions(mode, sharedOptions);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const { spanGaps , segment  } = this.options;\n        const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n        const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n        let prevParsed = start > 0 && this.getParsed(start - 1);\n        for(let i = start; i < start + count; ++i){\n            const point = points[i];\n            const parsed = this.getParsed(i);\n            const properties = directUpdate ? point : {};\n            const nullData = isNullOrUndef(parsed[vAxis]);\n            const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n            const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n            properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;\n            if (segment) {\n                properties.parsed = parsed;\n                properties.raw = _dataset.data[i];\n            }\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            }\n            if (!directUpdate) {\n                this.updateElement(point, i, properties, mode);\n            }\n            prevParsed = parsed;\n        }\n        this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    }\n getMaxOverflow() {\n        const meta = this._cachedMeta;\n        const data = meta.data || [];\n        if (!this.options.showLine) {\n            let max = 0;\n            for(let i = data.length - 1; i >= 0; --i){\n                max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n            }\n            return max > 0 && max;\n        }\n        const dataset = meta.dataset;\n        const border = dataset.options && dataset.options.borderWidth || 0;\n        if (!data.length) {\n            return border;\n        }\n        const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n        const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n        return Math.max(border, firstPoint, lastPoint) / 2;\n    }\n}\n\nvar controllers = /*#__PURE__*/Object.freeze({\n__proto__: null,\nBarController: BarController,\nBubbleController: BubbleController,\nDoughnutController: DoughnutController,\nLineController: LineController,\nPieController: PieController,\nPolarAreaController: PolarAreaController,\nRadarController: RadarController,\nScatterController: ScatterController\n});\n\n/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */ function abstract() {\n    throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */ class DateAdapterBase {\n    /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */ static override(members) {\n        Object.assign(DateAdapterBase.prototype, members);\n    }\n    options;\n    constructor(options){\n        this.options = options || {};\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    init() {}\n    formats() {\n        return abstract();\n    }\n    parse() {\n        return abstract();\n    }\n    format() {\n        return abstract();\n    }\n    add() {\n        return abstract();\n    }\n    diff() {\n        return abstract();\n    }\n    startOf() {\n        return abstract();\n    }\n    endOf() {\n        return abstract();\n    }\n}\nvar adapters = {\n    _date: DateAdapterBase\n};\n\nfunction binarySearch(metaset, axis, value, intersect) {\n    const { controller , data , _sorted  } = metaset;\n    const iScale = controller._cachedMeta.iScale;\n    const spanGaps = metaset.dataset ? metaset.dataset.options ? metaset.dataset.options.spanGaps : null : null;\n    if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n        const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n        if (!intersect) {\n            const result = lookupMethod(data, axis, value);\n            if (spanGaps) {\n                const { vScale  } = controller._cachedMeta;\n                const { _parsed  } = metaset;\n                const distanceToDefinedLo = _parsed.slice(0, result.lo + 1).reverse().findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                result.lo -= Math.max(0, distanceToDefinedLo);\n                const distanceToDefinedHi = _parsed.slice(result.hi).findIndex((point)=>!isNullOrUndef(point[vScale.axis]));\n                result.hi += Math.max(0, distanceToDefinedHi);\n            }\n            return result;\n        } else if (controller._sharedOptions) {\n            const el = data[0];\n            const range = typeof el.getRange === 'function' && el.getRange(axis);\n            if (range) {\n                const start = lookupMethod(data, axis, value - range);\n                const end = lookupMethod(data, axis, value + range);\n                return {\n                    lo: start.lo,\n                    hi: end.hi\n                };\n            }\n        }\n    }\n    return {\n        lo: 0,\n        hi: data.length - 1\n    };\n}\n function evaluateInteractionItems(chart, axis, position, handler, intersect) {\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const value = position[axis];\n    for(let i = 0, ilen = metasets.length; i < ilen; ++i){\n        const { index , data  } = metasets[i];\n        const { lo , hi  } = binarySearch(metasets[i], axis, value, intersect);\n        for(let j = lo; j <= hi; ++j){\n            const element = data[j];\n            if (!element.skip) {\n                handler(element, index, j);\n            }\n        }\n    }\n}\n function getDistanceMetricForAxis(axis) {\n    const useX = axis.indexOf('x') !== -1;\n    const useY = axis.indexOf('y') !== -1;\n    return function(pt1, pt2) {\n        const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n        const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n        return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n    };\n}\n function getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n    const items = [];\n    if (!includeInvisible && !chart.isPointInArea(position)) {\n        return items;\n    }\n    const evaluationFunc = function(element, datasetIndex, index) {\n        if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n            return;\n        }\n        if (element.inRange(position.x, position.y, useFinalPosition)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    };\n    evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n    return items;\n}\n function getNearestRadialItems(chart, position, axis, useFinalPosition) {\n    let items = [];\n    function evaluationFunc(element, datasetIndex, index) {\n        const { startAngle , endAngle  } = element.getProps([\n            'startAngle',\n            'endAngle'\n        ], useFinalPosition);\n        const { angle  } = getAngleFromPoint(element, {\n            x: position.x,\n            y: position.y\n        });\n        if (_angleBetween(angle, startAngle, endAngle)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    }\n    evaluateInteractionItems(chart, axis, position, evaluationFunc);\n    return items;\n}\n function getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n    let items = [];\n    const distanceMetric = getDistanceMetricForAxis(axis);\n    let minDistance = Number.POSITIVE_INFINITY;\n    function evaluationFunc(element, datasetIndex, index) {\n        const inRange = element.inRange(position.x, position.y, useFinalPosition);\n        if (intersect && !inRange) {\n            return;\n        }\n        const center = element.getCenterPoint(useFinalPosition);\n        const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n        if (!pointInArea && !inRange) {\n            return;\n        }\n        const distance = distanceMetric(position, center);\n        if (distance < minDistance) {\n            items = [\n                {\n                    element,\n                    datasetIndex,\n                    index\n                }\n            ];\n            minDistance = distance;\n        } else if (distance === minDistance) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    }\n    evaluateInteractionItems(chart, axis, position, evaluationFunc);\n    return items;\n}\n function getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n    if (!includeInvisible && !chart.isPointInArea(position)) {\n        return [];\n    }\n    return axis === 'r' && !intersect ? getNearestRadialItems(chart, position, axis, useFinalPosition) : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n function getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n    const items = [];\n    const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n    let intersectsItem = false;\n    evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index)=>{\n        if (element[rangeMethod] && element[rangeMethod](position[axis], useFinalPosition)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n            intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n        }\n    });\n    if (intersect && !intersectsItem) {\n        return [];\n    }\n    return items;\n}\n var Interaction = {\n    evaluateInteractionItems,\n    modes: {\n index (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'x';\n            const includeInvisible = options.includeInvisible || false;\n            const items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n            const elements = [];\n            if (!items.length) {\n                return [];\n            }\n            chart.getSortedVisibleDatasetMetas().forEach((meta)=>{\n                const index = items[0].index;\n                const element = meta.data[index];\n                if (element && !element.skip) {\n                    elements.push({\n                        element,\n                        datasetIndex: meta.index,\n                        index\n                    });\n                }\n            });\n            return elements;\n        },\n dataset (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            let items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n            if (items.length > 0) {\n                const datasetIndex = items[0].datasetIndex;\n                const data = chart.getDatasetMeta(datasetIndex).data;\n                items = [];\n                for(let i = 0; i < data.length; ++i){\n                    items.push({\n                        element: data[i],\n                        datasetIndex,\n                        index: i\n                    });\n                }\n            }\n            return items;\n        },\n point (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n        },\n nearest (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n        },\n x (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n        },\n y (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n        }\n    }\n};\n\nconst STATIC_POSITIONS = [\n    'left',\n    'top',\n    'right',\n    'bottom'\n];\nfunction filterByPosition(array, position) {\n    return array.filter((v)=>v.pos === position);\n}\nfunction filterDynamicPositionByAxis(array, axis) {\n    return array.filter((v)=>STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\nfunction sortByWeight(array, reverse) {\n    return array.sort((a, b)=>{\n        const v0 = reverse ? b : a;\n        const v1 = reverse ? a : b;\n        return v0.weight === v1.weight ? v0.index - v1.index : v0.weight - v1.weight;\n    });\n}\nfunction wrapBoxes(boxes) {\n    const layoutBoxes = [];\n    let i, ilen, box, pos, stack, stackWeight;\n    for(i = 0, ilen = (boxes || []).length; i < ilen; ++i){\n        box = boxes[i];\n        ({ position: pos , options: { stack , stackWeight =1  }  } = box);\n        layoutBoxes.push({\n            index: i,\n            box,\n            pos,\n            horizontal: box.isHorizontal(),\n            weight: box.weight,\n            stack: stack && pos + stack,\n            stackWeight\n        });\n    }\n    return layoutBoxes;\n}\nfunction buildStacks(layouts) {\n    const stacks = {};\n    for (const wrap of layouts){\n        const { stack , pos , stackWeight  } = wrap;\n        if (!stack || !STATIC_POSITIONS.includes(pos)) {\n            continue;\n        }\n        const _stack = stacks[stack] || (stacks[stack] = {\n            count: 0,\n            placed: 0,\n            weight: 0,\n            size: 0\n        });\n        _stack.count++;\n        _stack.weight += stackWeight;\n    }\n    return stacks;\n}\n function setLayoutDims(layouts, params) {\n    const stacks = buildStacks(layouts);\n    const { vBoxMaxWidth , hBoxMaxHeight  } = params;\n    let i, ilen, layout;\n    for(i = 0, ilen = layouts.length; i < ilen; ++i){\n        layout = layouts[i];\n        const { fullSize  } = layout.box;\n        const stack = stacks[layout.stack];\n        const factor = stack && layout.stackWeight / stack.weight;\n        if (layout.horizontal) {\n            layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n            layout.height = hBoxMaxHeight;\n        } else {\n            layout.width = vBoxMaxWidth;\n            layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n        }\n    }\n    return stacks;\n}\nfunction buildLayoutBoxes(boxes) {\n    const layoutBoxes = wrapBoxes(boxes);\n    const fullSize = sortByWeight(layoutBoxes.filter((wrap)=>wrap.box.fullSize), true);\n    const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n    const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n    const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n    const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n    const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n    const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n    return {\n        fullSize,\n        leftAndTop: left.concat(top),\n        rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n        chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n        vertical: left.concat(right).concat(centerVertical),\n        horizontal: top.concat(bottom).concat(centerHorizontal)\n    };\n}\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n    return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\nfunction updateMaxPadding(maxPadding, boxPadding) {\n    maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n    maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n    maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n    maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\nfunction updateDims(chartArea, params, layout, stacks) {\n    const { pos , box  } = layout;\n    const maxPadding = chartArea.maxPadding;\n    if (!isObject(pos)) {\n        if (layout.size) {\n            chartArea[pos] -= layout.size;\n        }\n        const stack = stacks[layout.stack] || {\n            size: 0,\n            count: 1\n        };\n        stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n        layout.size = stack.size / stack.count;\n        chartArea[pos] += layout.size;\n    }\n    if (box.getPadding) {\n        updateMaxPadding(maxPadding, box.getPadding());\n    }\n    const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n    const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n    const widthChanged = newWidth !== chartArea.w;\n    const heightChanged = newHeight !== chartArea.h;\n    chartArea.w = newWidth;\n    chartArea.h = newHeight;\n    return layout.horizontal ? {\n        same: widthChanged,\n        other: heightChanged\n    } : {\n        same: heightChanged,\n        other: widthChanged\n    };\n}\nfunction handleMaxPadding(chartArea) {\n    const maxPadding = chartArea.maxPadding;\n    function updatePos(pos) {\n        const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n        chartArea[pos] += change;\n        return change;\n    }\n    chartArea.y += updatePos('top');\n    chartArea.x += updatePos('left');\n    updatePos('right');\n    updatePos('bottom');\n}\nfunction getMargins(horizontal, chartArea) {\n    const maxPadding = chartArea.maxPadding;\n    function marginForPositions(positions) {\n        const margin = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0\n        };\n        positions.forEach((pos)=>{\n            margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n        });\n        return margin;\n    }\n    return horizontal ? marginForPositions([\n        'left',\n        'right'\n    ]) : marginForPositions([\n        'top',\n        'bottom'\n    ]);\n}\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n    const refitBoxes = [];\n    let i, ilen, layout, box, refit, changed;\n    for(i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i){\n        layout = boxes[i];\n        box = layout.box;\n        box.update(layout.width || chartArea.w, layout.height || chartArea.h, getMargins(layout.horizontal, chartArea));\n        const { same , other  } = updateDims(chartArea, params, layout, stacks);\n        refit |= same && refitBoxes.length;\n        changed = changed || other;\n        if (!box.fullSize) {\n            refitBoxes.push(layout);\n        }\n    }\n    return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\nfunction setBoxDims(box, left, top, width, height) {\n    box.top = top;\n    box.left = left;\n    box.right = left + width;\n    box.bottom = top + height;\n    box.width = width;\n    box.height = height;\n}\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n    const userPadding = params.padding;\n    let { x , y  } = chartArea;\n    for (const layout of boxes){\n        const box = layout.box;\n        const stack = stacks[layout.stack] || {\n            count: 1,\n            placed: 0,\n            weight: 1\n        };\n        const weight = layout.stackWeight / stack.weight || 1;\n        if (layout.horizontal) {\n            const width = chartArea.w * weight;\n            const height = stack.size || box.height;\n            if (defined(stack.start)) {\n                y = stack.start;\n            }\n            if (box.fullSize) {\n                setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n            } else {\n                setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n            }\n            stack.start = y;\n            stack.placed += width;\n            y = box.bottom;\n        } else {\n            const height = chartArea.h * weight;\n            const width = stack.size || box.width;\n            if (defined(stack.start)) {\n                x = stack.start;\n            }\n            if (box.fullSize) {\n                setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n            } else {\n                setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n            }\n            stack.start = x;\n            stack.placed += height;\n            x = box.right;\n        }\n    }\n    chartArea.x = x;\n    chartArea.y = y;\n}\nvar layouts = {\n addBox (chart, item) {\n        if (!chart.boxes) {\n            chart.boxes = [];\n        }\n        item.fullSize = item.fullSize || false;\n        item.position = item.position || 'top';\n        item.weight = item.weight || 0;\n        item._layers = item._layers || function() {\n            return [\n                {\n                    z: 0,\n                    draw (chartArea) {\n                        item.draw(chartArea);\n                    }\n                }\n            ];\n        };\n        chart.boxes.push(item);\n    },\n removeBox (chart, layoutItem) {\n        const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n        if (index !== -1) {\n            chart.boxes.splice(index, 1);\n        }\n    },\n configure (chart, item, options) {\n        item.fullSize = options.fullSize;\n        item.position = options.position;\n        item.weight = options.weight;\n    },\n update (chart, width, height, minPadding) {\n        if (!chart) {\n            return;\n        }\n        const padding = toPadding(chart.options.layout.padding);\n        const availableWidth = Math.max(width - padding.width, 0);\n        const availableHeight = Math.max(height - padding.height, 0);\n        const boxes = buildLayoutBoxes(chart.boxes);\n        const verticalBoxes = boxes.vertical;\n        const horizontalBoxes = boxes.horizontal;\n        each(chart.boxes, (box)=>{\n            if (typeof box.beforeLayout === 'function') {\n                box.beforeLayout();\n            }\n        });\n        const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap)=>wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n        const params = Object.freeze({\n            outerWidth: width,\n            outerHeight: height,\n            padding,\n            availableWidth,\n            availableHeight,\n            vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n            hBoxMaxHeight: availableHeight / 2\n        });\n        const maxPadding = Object.assign({}, padding);\n        updateMaxPadding(maxPadding, toPadding(minPadding));\n        const chartArea = Object.assign({\n            maxPadding,\n            w: availableWidth,\n            h: availableHeight,\n            x: padding.left,\n            y: padding.top\n        }, padding);\n        const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n        fitBoxes(boxes.fullSize, chartArea, params, stacks);\n        fitBoxes(verticalBoxes, chartArea, params, stacks);\n        if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n            fitBoxes(verticalBoxes, chartArea, params, stacks);\n        }\n        handleMaxPadding(chartArea);\n        placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n        chartArea.x += chartArea.w;\n        chartArea.y += chartArea.h;\n        placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n        chart.chartArea = {\n            left: chartArea.left,\n            top: chartArea.top,\n            right: chartArea.left + chartArea.w,\n            bottom: chartArea.top + chartArea.h,\n            height: chartArea.h,\n            width: chartArea.w\n        };\n        each(boxes.chartArea, (layout)=>{\n            const box = layout.box;\n            Object.assign(box, chart.chartArea);\n            box.update(chartArea.w, chartArea.h, {\n                left: 0,\n                top: 0,\n                right: 0,\n                bottom: 0\n            });\n        });\n    }\n};\n\nclass BasePlatform {\n acquireContext(canvas, aspectRatio) {}\n releaseContext(context) {\n        return false;\n    }\n addEventListener(chart, type, listener) {}\n removeEventListener(chart, type, listener) {}\n getDevicePixelRatio() {\n        return 1;\n    }\n getMaximumSize(element, width, height, aspectRatio) {\n        width = Math.max(0, width || element.width);\n        height = height || element.height;\n        return {\n            width,\n            height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n        };\n    }\n isAttached(canvas) {\n        return true;\n    }\n updateConfig(config) {\n    }\n}\n\nclass BasicPlatform extends BasePlatform {\n    acquireContext(item) {\n        return item && item.getContext && item.getContext('2d') || null;\n    }\n    updateConfig(config) {\n        config.options.animation = false;\n    }\n}\n\nconst EXPANDO_KEY = '$chartjs';\n const EVENT_TYPES = {\n    touchstart: 'mousedown',\n    touchmove: 'mousemove',\n    touchend: 'mouseup',\n    pointerenter: 'mouseenter',\n    pointerdown: 'mousedown',\n    pointermove: 'mousemove',\n    pointerup: 'mouseup',\n    pointerleave: 'mouseout',\n    pointerout: 'mouseout'\n};\nconst isNullOrEmpty = (value)=>value === null || value === '';\n function initCanvas(canvas, aspectRatio) {\n    const style = canvas.style;\n    const renderHeight = canvas.getAttribute('height');\n    const renderWidth = canvas.getAttribute('width');\n    canvas[EXPANDO_KEY] = {\n        initial: {\n            height: renderHeight,\n            width: renderWidth,\n            style: {\n                display: style.display,\n                height: style.height,\n                width: style.width\n            }\n        }\n    };\n    style.display = style.display || 'block';\n    style.boxSizing = style.boxSizing || 'border-box';\n    if (isNullOrEmpty(renderWidth)) {\n        const displayWidth = readUsedSize(canvas, 'width');\n        if (displayWidth !== undefined) {\n            canvas.width = displayWidth;\n        }\n    }\n    if (isNullOrEmpty(renderHeight)) {\n        if (canvas.style.height === '') {\n            canvas.height = canvas.width / (aspectRatio || 2);\n        } else {\n            const displayHeight = readUsedSize(canvas, 'height');\n            if (displayHeight !== undefined) {\n                canvas.height = displayHeight;\n            }\n        }\n    }\n    return canvas;\n}\nconst eventListenerOptions = supportsEventListenerOptions ? {\n    passive: true\n} : false;\nfunction addListener(node, type, listener) {\n    if (node) {\n        node.addEventListener(type, listener, eventListenerOptions);\n    }\n}\nfunction removeListener(chart, type, listener) {\n    if (chart && chart.canvas) {\n        chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n    }\n}\nfunction fromNativeEvent(event, chart) {\n    const type = EVENT_TYPES[event.type] || event.type;\n    const { x , y  } = getRelativePosition(event, chart);\n    return {\n        type,\n        chart,\n        native: event,\n        x: x !== undefined ? x : null,\n        y: y !== undefined ? y : null\n    };\n}\nfunction nodeListContains(nodeList, canvas) {\n    for (const node of nodeList){\n        if (node === canvas || node.contains(canvas)) {\n            return true;\n        }\n    }\n}\nfunction createAttachObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const observer = new MutationObserver((entries)=>{\n        let trigger = false;\n        for (const entry of entries){\n            trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n            trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n        }\n        if (trigger) {\n            listener();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true\n    });\n    return observer;\n}\nfunction createDetachObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const observer = new MutationObserver((entries)=>{\n        let trigger = false;\n        for (const entry of entries){\n            trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n            trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n        }\n        if (trigger) {\n            listener();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true\n    });\n    return observer;\n}\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\nfunction onWindowResize() {\n    const dpr = window.devicePixelRatio;\n    if (dpr === oldDevicePixelRatio) {\n        return;\n    }\n    oldDevicePixelRatio = dpr;\n    drpListeningCharts.forEach((resize, chart)=>{\n        if (chart.currentDevicePixelRatio !== dpr) {\n            resize();\n        }\n    });\n}\nfunction listenDevicePixelRatioChanges(chart, resize) {\n    if (!drpListeningCharts.size) {\n        window.addEventListener('resize', onWindowResize);\n    }\n    drpListeningCharts.set(chart, resize);\n}\nfunction unlistenDevicePixelRatioChanges(chart) {\n    drpListeningCharts.delete(chart);\n    if (!drpListeningCharts.size) {\n        window.removeEventListener('resize', onWindowResize);\n    }\n}\nfunction createResizeObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const container = canvas && _getParentNode(canvas);\n    if (!container) {\n        return;\n    }\n    const resize = throttled((width, height)=>{\n        const w = container.clientWidth;\n        listener(width, height);\n        if (w < container.clientWidth) {\n            listener();\n        }\n    }, window);\n    const observer = new ResizeObserver((entries)=>{\n        const entry = entries[0];\n        const width = entry.contentRect.width;\n        const height = entry.contentRect.height;\n        if (width === 0 && height === 0) {\n            return;\n        }\n        resize(width, height);\n    });\n    observer.observe(container);\n    listenDevicePixelRatioChanges(chart, resize);\n    return observer;\n}\nfunction releaseObserver(chart, type, observer) {\n    if (observer) {\n        observer.disconnect();\n    }\n    if (type === 'resize') {\n        unlistenDevicePixelRatioChanges(chart);\n    }\n}\nfunction createProxyAndListen(chart, type, listener) {\n    const canvas = chart.canvas;\n    const proxy = throttled((event)=>{\n        if (chart.ctx !== null) {\n            listener(fromNativeEvent(event, chart));\n        }\n    }, chart);\n    addListener(canvas, type, proxy);\n    return proxy;\n}\n class DomPlatform extends BasePlatform {\n acquireContext(canvas, aspectRatio) {\n        const context = canvas && canvas.getContext && canvas.getContext('2d');\n        if (context && context.canvas === canvas) {\n            initCanvas(canvas, aspectRatio);\n            return context;\n        }\n        return null;\n    }\n releaseContext(context) {\n        const canvas = context.canvas;\n        if (!canvas[EXPANDO_KEY]) {\n            return false;\n        }\n        const initial = canvas[EXPANDO_KEY].initial;\n        [\n            'height',\n            'width'\n        ].forEach((prop)=>{\n            const value = initial[prop];\n            if (isNullOrUndef(value)) {\n                canvas.removeAttribute(prop);\n            } else {\n                canvas.setAttribute(prop, value);\n            }\n        });\n        const style = initial.style || {};\n        Object.keys(style).forEach((key)=>{\n            canvas.style[key] = style[key];\n        });\n        canvas.width = canvas.width;\n        delete canvas[EXPANDO_KEY];\n        return true;\n    }\n addEventListener(chart, type, listener) {\n        this.removeEventListener(chart, type);\n        const proxies = chart.$proxies || (chart.$proxies = {});\n        const handlers = {\n            attach: createAttachObserver,\n            detach: createDetachObserver,\n            resize: createResizeObserver\n        };\n        const handler = handlers[type] || createProxyAndListen;\n        proxies[type] = handler(chart, type, listener);\n    }\n removeEventListener(chart, type) {\n        const proxies = chart.$proxies || (chart.$proxies = {});\n        const proxy = proxies[type];\n        if (!proxy) {\n            return;\n        }\n        const handlers = {\n            attach: releaseObserver,\n            detach: releaseObserver,\n            resize: releaseObserver\n        };\n        const handler = handlers[type] || removeListener;\n        handler(chart, type, proxy);\n        proxies[type] = undefined;\n    }\n    getDevicePixelRatio() {\n        return window.devicePixelRatio;\n    }\n getMaximumSize(canvas, width, height, aspectRatio) {\n        return getMaximumSize(canvas, width, height, aspectRatio);\n    }\n isAttached(canvas) {\n        const container = canvas && _getParentNode(canvas);\n        return !!(container && container.isConnected);\n    }\n}\n\nfunction _detectPlatform(canvas) {\n    if (!_isDomSupported() || typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas) {\n        return BasicPlatform;\n    }\n    return DomPlatform;\n}\n\nclass Element {\n    static defaults = {};\n    static defaultRoutes = undefined;\n    x;\n    y;\n    active = false;\n    options;\n    $animations;\n    tooltipPosition(useFinalPosition) {\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return {\n            x,\n            y\n        };\n    }\n    hasValue() {\n        return isNumber(this.x) && isNumber(this.y);\n    }\n    getProps(props, final) {\n        const anims = this.$animations;\n        if (!final || !anims) {\n            // let's not create an object, if not needed\n            return this;\n        }\n        const ret = {};\n        props.forEach((prop)=>{\n            ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop];\n        });\n        return ret;\n    }\n}\n\nfunction autoSkip(scale, ticks) {\n    const tickOpts = scale.options.ticks;\n    const determinedMaxTicks = determineMaxTicks(scale);\n    const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n    const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n    const numMajorIndices = majorIndices.length;\n    const first = majorIndices[0];\n    const last = majorIndices[numMajorIndices - 1];\n    const newTicks = [];\n    if (numMajorIndices > ticksLimit) {\n        skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n        return newTicks;\n    }\n    const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n    if (numMajorIndices > 0) {\n        let i, ilen;\n        const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n        skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n        for(i = 0, ilen = numMajorIndices - 1; i < ilen; i++){\n            skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n        }\n        skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n        return newTicks;\n    }\n    skip(ticks, newTicks, spacing);\n    return newTicks;\n}\nfunction determineMaxTicks(scale) {\n    const offset = scale.options.offset;\n    const tickLength = scale._tickSize();\n    const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n    const maxChart = scale._maxLength / tickLength;\n    return Math.floor(Math.min(maxScale, maxChart));\n}\n function calculateSpacing(majorIndices, ticks, ticksLimit) {\n    const evenMajorSpacing = getEvenSpacing(majorIndices);\n    const spacing = ticks.length / ticksLimit;\n    if (!evenMajorSpacing) {\n        return Math.max(spacing, 1);\n    }\n    const factors = _factorize(evenMajorSpacing);\n    for(let i = 0, ilen = factors.length - 1; i < ilen; i++){\n        const factor = factors[i];\n        if (factor > spacing) {\n            return factor;\n        }\n    }\n    return Math.max(spacing, 1);\n}\n function getMajorIndices(ticks) {\n    const result = [];\n    let i, ilen;\n    for(i = 0, ilen = ticks.length; i < ilen; i++){\n        if (ticks[i].major) {\n            result.push(i);\n        }\n    }\n    return result;\n}\n function skipMajors(ticks, newTicks, majorIndices, spacing) {\n    let count = 0;\n    let next = majorIndices[0];\n    let i;\n    spacing = Math.ceil(spacing);\n    for(i = 0; i < ticks.length; i++){\n        if (i === next) {\n            newTicks.push(ticks[i]);\n            count++;\n            next = majorIndices[count * spacing];\n        }\n    }\n}\n function skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n    const start = valueOrDefault(majorStart, 0);\n    const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n    let count = 0;\n    let length, i, next;\n    spacing = Math.ceil(spacing);\n    if (majorEnd) {\n        length = majorEnd - majorStart;\n        spacing = length / Math.floor(length / spacing);\n    }\n    next = start;\n    while(next < 0){\n        count++;\n        next = Math.round(start + count * spacing);\n    }\n    for(i = Math.max(start, 0); i < end; i++){\n        if (i === next) {\n            newTicks.push(ticks[i]);\n            count++;\n            next = Math.round(start + count * spacing);\n        }\n    }\n}\n function getEvenSpacing(arr) {\n    const len = arr.length;\n    let i, diff;\n    if (len < 2) {\n        return false;\n    }\n    for(diff = arr[0], i = 1; i < len; ++i){\n        if (arr[i] - arr[i - 1] !== diff) {\n            return false;\n        }\n    }\n    return diff;\n}\n\nconst reverseAlign = (align)=>align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset)=>edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nconst getTicksLimit = (ticksLength, maxTicksLimit)=>Math.min(maxTicksLimit || ticksLength, ticksLength);\n function sample(arr, numItems) {\n    const result = [];\n    const increment = arr.length / numItems;\n    const len = arr.length;\n    let i = 0;\n    for(; i < len; i += increment){\n        result.push(arr[Math.floor(i)]);\n    }\n    return result;\n}\n function getPixelForGridLine(scale, index, offsetGridLines) {\n    const length = scale.ticks.length;\n    const validIndex = Math.min(index, length - 1);\n    const start = scale._startPixel;\n    const end = scale._endPixel;\n    const epsilon = 1e-6;\n    let lineValue = scale.getPixelForTick(validIndex);\n    let offset;\n    if (offsetGridLines) {\n        if (length === 1) {\n            offset = Math.max(lineValue - start, end - lineValue);\n        } else if (index === 0) {\n            offset = (scale.getPixelForTick(1) - lineValue) / 2;\n        } else {\n            offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n        }\n        lineValue += validIndex < index ? offset : -offset;\n        if (lineValue < start - epsilon || lineValue > end + epsilon) {\n            return;\n        }\n    }\n    return lineValue;\n}\n function garbageCollect(caches, length) {\n    each(caches, (cache)=>{\n        const gc = cache.gc;\n        const gcLen = gc.length / 2;\n        let i;\n        if (gcLen > length) {\n            for(i = 0; i < gcLen; ++i){\n                delete cache.data[gc[i]];\n            }\n            gc.splice(0, gcLen);\n        }\n    });\n}\n function getTickMarkLength(options) {\n    return options.drawTicks ? options.tickLength : 0;\n}\n function getTitleHeight(options, fallback) {\n    if (!options.display) {\n        return 0;\n    }\n    const font = toFont(options.font, fallback);\n    const padding = toPadding(options.padding);\n    const lines = isArray(options.text) ? options.text.length : 1;\n    return lines * font.lineHeight + padding.height;\n}\nfunction createScaleContext(parent, scale) {\n    return createContext(parent, {\n        scale,\n        type: 'scale'\n    });\n}\nfunction createTickContext(parent, index, tick) {\n    return createContext(parent, {\n        tick,\n        index,\n        type: 'tick'\n    });\n}\nfunction titleAlign(align, position, reverse) {\n     let ret = _toLeftRightCenter(align);\n    if (reverse && position !== 'right' || !reverse && position === 'right') {\n        ret = reverseAlign(ret);\n    }\n    return ret;\n}\nfunction titleArgs(scale, offset, position, align) {\n    const { top , left , bottom , right , chart  } = scale;\n    const { chartArea , scales  } = chart;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n    const height = bottom - top;\n    const width = right - left;\n    if (scale.isHorizontal()) {\n        titleX = _alignStartEnd(align, left, right);\n        if (isObject(position)) {\n            const positionAxisID = Object.keys(position)[0];\n            const value = position[positionAxisID];\n            titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n        } else if (position === 'center') {\n            titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n        } else {\n            titleY = offsetFromEdge(scale, position, offset);\n        }\n        maxWidth = right - left;\n    } else {\n        if (isObject(position)) {\n            const positionAxisID = Object.keys(position)[0];\n            const value = position[positionAxisID];\n            titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n        } else if (position === 'center') {\n            titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n        } else {\n            titleX = offsetFromEdge(scale, position, offset);\n        }\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = position === 'left' ? -HALF_PI : HALF_PI;\n    }\n    return {\n        titleX,\n        titleY,\n        maxWidth,\n        rotation\n    };\n}\nclass Scale extends Element {\n    constructor(cfg){\n        super();\n         this.id = cfg.id;\n         this.type = cfg.type;\n         this.options = undefined;\n         this.ctx = cfg.ctx;\n         this.chart = cfg.chart;\n         this.top = undefined;\n         this.bottom = undefined;\n         this.left = undefined;\n         this.right = undefined;\n         this.width = undefined;\n         this.height = undefined;\n        this._margins = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n        };\n         this.maxWidth = undefined;\n         this.maxHeight = undefined;\n         this.paddingTop = undefined;\n         this.paddingBottom = undefined;\n         this.paddingLeft = undefined;\n         this.paddingRight = undefined;\n         this.axis = undefined;\n         this.labelRotation = undefined;\n        this.min = undefined;\n        this.max = undefined;\n        this._range = undefined;\n         this.ticks = [];\n         this._gridLineItems = null;\n         this._labelItems = null;\n         this._labelSizes = null;\n        this._length = 0;\n        this._maxLength = 0;\n        this._longestTextCache = {};\n         this._startPixel = undefined;\n         this._endPixel = undefined;\n        this._reversePixels = false;\n        this._userMax = undefined;\n        this._userMin = undefined;\n        this._suggestedMax = undefined;\n        this._suggestedMin = undefined;\n        this._ticksLength = 0;\n        this._borderValue = 0;\n        this._cache = {};\n        this._dataLimitsCached = false;\n        this.$context = undefined;\n    }\n init(options) {\n        this.options = options.setContext(this.getContext());\n        this.axis = options.axis;\n        this._userMin = this.parse(options.min);\n        this._userMax = this.parse(options.max);\n        this._suggestedMin = this.parse(options.suggestedMin);\n        this._suggestedMax = this.parse(options.suggestedMax);\n    }\n parse(raw, index) {\n        return raw;\n    }\n getUserBounds() {\n        let { _userMin , _userMax , _suggestedMin , _suggestedMax  } = this;\n        _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n        _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n        _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n        _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n        return {\n            min: finiteOrDefault(_userMin, _suggestedMin),\n            max: finiteOrDefault(_userMax, _suggestedMax),\n            minDefined: isNumberFinite(_userMin),\n            maxDefined: isNumberFinite(_userMax)\n        };\n    }\n getMinMax(canStack) {\n        let { min , max , minDefined , maxDefined  } = this.getUserBounds();\n        let range;\n        if (minDefined && maxDefined) {\n            return {\n                min,\n                max\n            };\n        }\n        const metas = this.getMatchingVisibleMetas();\n        for(let i = 0, ilen = metas.length; i < ilen; ++i){\n            range = metas[i].controller.getMinMax(this, canStack);\n            if (!minDefined) {\n                min = Math.min(min, range.min);\n            }\n            if (!maxDefined) {\n                max = Math.max(max, range.max);\n            }\n        }\n        min = maxDefined && min > max ? max : min;\n        max = minDefined && min > max ? min : max;\n        return {\n            min: finiteOrDefault(min, finiteOrDefault(max, min)),\n            max: finiteOrDefault(max, finiteOrDefault(min, max))\n        };\n    }\n getPadding() {\n        return {\n            left: this.paddingLeft || 0,\n            top: this.paddingTop || 0,\n            right: this.paddingRight || 0,\n            bottom: this.paddingBottom || 0\n        };\n    }\n getTicks() {\n        return this.ticks;\n    }\n getLabels() {\n        const data = this.chart.data;\n        return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n    }\n getLabelItems(chartArea = this.chart.chartArea) {\n        const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n        return items;\n    }\n    beforeLayout() {\n        this._cache = {};\n        this._dataLimitsCached = false;\n    }\n    beforeUpdate() {\n        callback(this.options.beforeUpdate, [\n            this\n        ]);\n    }\n update(maxWidth, maxHeight, margins) {\n        const { beginAtZero , grace , ticks: tickOpts  } = this.options;\n        const sampleSize = tickOpts.sampleSize;\n        this.beforeUpdate();\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n        this._margins = margins = Object.assign({\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n        }, margins);\n        this.ticks = null;\n        this._labelSizes = null;\n        this._gridLineItems = null;\n        this._labelItems = null;\n        this.beforeSetDimensions();\n        this.setDimensions();\n        this.afterSetDimensions();\n        this._maxLength = this.isHorizontal() ? this.width + margins.left + margins.right : this.height + margins.top + margins.bottom;\n        if (!this._dataLimitsCached) {\n            this.beforeDataLimits();\n            this.determineDataLimits();\n            this.afterDataLimits();\n            this._range = _addGrace(this, grace, beginAtZero);\n            this._dataLimitsCached = true;\n        }\n        this.beforeBuildTicks();\n        this.ticks = this.buildTicks() || [];\n        this.afterBuildTicks();\n        const samplingEnabled = sampleSize < this.ticks.length;\n        this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n        this.configure();\n        this.beforeCalculateLabelRotation();\n        this.calculateLabelRotation();\n        this.afterCalculateLabelRotation();\n        if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n            this.ticks = autoSkip(this, this.ticks);\n            this._labelSizes = null;\n            this.afterAutoSkip();\n        }\n        if (samplingEnabled) {\n            this._convertTicksToLabels(this.ticks);\n        }\n        this.beforeFit();\n        this.fit();\n        this.afterFit();\n        this.afterUpdate();\n    }\n configure() {\n        let reversePixels = this.options.reverse;\n        let startPixel, endPixel;\n        if (this.isHorizontal()) {\n            startPixel = this.left;\n            endPixel = this.right;\n        } else {\n            startPixel = this.top;\n            endPixel = this.bottom;\n            reversePixels = !reversePixels;\n        }\n        this._startPixel = startPixel;\n        this._endPixel = endPixel;\n        this._reversePixels = reversePixels;\n        this._length = endPixel - startPixel;\n        this._alignToPixels = this.options.alignToPixels;\n    }\n    afterUpdate() {\n        callback(this.options.afterUpdate, [\n            this\n        ]);\n    }\n    beforeSetDimensions() {\n        callback(this.options.beforeSetDimensions, [\n            this\n        ]);\n    }\n    setDimensions() {\n        if (this.isHorizontal()) {\n            this.width = this.maxWidth;\n            this.left = 0;\n            this.right = this.width;\n        } else {\n            this.height = this.maxHeight;\n            this.top = 0;\n            this.bottom = this.height;\n        }\n        this.paddingLeft = 0;\n        this.paddingTop = 0;\n        this.paddingRight = 0;\n        this.paddingBottom = 0;\n    }\n    afterSetDimensions() {\n        callback(this.options.afterSetDimensions, [\n            this\n        ]);\n    }\n    _callHooks(name) {\n        this.chart.notifyPlugins(name, this.getContext());\n        callback(this.options[name], [\n            this\n        ]);\n    }\n    beforeDataLimits() {\n        this._callHooks('beforeDataLimits');\n    }\n    determineDataLimits() {}\n    afterDataLimits() {\n        this._callHooks('afterDataLimits');\n    }\n    beforeBuildTicks() {\n        this._callHooks('beforeBuildTicks');\n    }\n buildTicks() {\n        return [];\n    }\n    afterBuildTicks() {\n        this._callHooks('afterBuildTicks');\n    }\n    beforeTickToLabelConversion() {\n        callback(this.options.beforeTickToLabelConversion, [\n            this\n        ]);\n    }\n generateTickLabels(ticks) {\n        const tickOpts = this.options.ticks;\n        let i, ilen, tick;\n        for(i = 0, ilen = ticks.length; i < ilen; i++){\n            tick = ticks[i];\n            tick.label = callback(tickOpts.callback, [\n                tick.value,\n                i,\n                ticks\n            ], this);\n        }\n    }\n    afterTickToLabelConversion() {\n        callback(this.options.afterTickToLabelConversion, [\n            this\n        ]);\n    }\n    beforeCalculateLabelRotation() {\n        callback(this.options.beforeCalculateLabelRotation, [\n            this\n        ]);\n    }\n    calculateLabelRotation() {\n        const options = this.options;\n        const tickOpts = options.ticks;\n        const numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);\n        const minRotation = tickOpts.minRotation || 0;\n        const maxRotation = tickOpts.maxRotation;\n        let labelRotation = minRotation;\n        let tickWidth, maxHeight, maxLabelDiagonal;\n        if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n            this.labelRotation = minRotation;\n            return;\n        }\n        const labelSizes = this._getLabelSizes();\n        const maxLabelWidth = labelSizes.widest.width;\n        const maxLabelHeight = labelSizes.highest.height;\n        const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n        tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n        if (maxLabelWidth + 6 > tickWidth) {\n            tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n            maxHeight = this.maxHeight - getTickMarkLength(options.grid) - tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n            maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n            labelRotation = toDegrees(Math.min(Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)), Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))));\n            labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n        }\n        this.labelRotation = labelRotation;\n    }\n    afterCalculateLabelRotation() {\n        callback(this.options.afterCalculateLabelRotation, [\n            this\n        ]);\n    }\n    afterAutoSkip() {}\n    beforeFit() {\n        callback(this.options.beforeFit, [\n            this\n        ]);\n    }\n    fit() {\n        const minSize = {\n            width: 0,\n            height: 0\n        };\n        const { chart , options: { ticks: tickOpts , title: titleOpts , grid: gridOpts  }  } = this;\n        const display = this._isVisible();\n        const isHorizontal = this.isHorizontal();\n        if (display) {\n            const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n            if (isHorizontal) {\n                minSize.width = this.maxWidth;\n                minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n            } else {\n                minSize.height = this.maxHeight;\n                minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n            }\n            if (tickOpts.display && this.ticks.length) {\n                const { first , last , widest , highest  } = this._getLabelSizes();\n                const tickPadding = tickOpts.padding * 2;\n                const angleRadians = toRadians(this.labelRotation);\n                const cos = Math.cos(angleRadians);\n                const sin = Math.sin(angleRadians);\n                if (isHorizontal) {\n                    const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n                    minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n                } else {\n                    const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n                    minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n                }\n                this._calculatePadding(first, last, sin, cos);\n            }\n        }\n        this._handleMargins();\n        if (isHorizontal) {\n            this.width = this._length = chart.width - this._margins.left - this._margins.right;\n            this.height = minSize.height;\n        } else {\n            this.width = minSize.width;\n            this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n        }\n    }\n    _calculatePadding(first, last, sin, cos) {\n        const { ticks: { align , padding  } , position  } = this.options;\n        const isRotated = this.labelRotation !== 0;\n        const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n        if (this.isHorizontal()) {\n            const offsetLeft = this.getPixelForTick(0) - this.left;\n            const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n            let paddingLeft = 0;\n            let paddingRight = 0;\n            if (isRotated) {\n                if (labelsBelowTicks) {\n                    paddingLeft = cos * first.width;\n                    paddingRight = sin * last.height;\n                } else {\n                    paddingLeft = sin * first.height;\n                    paddingRight = cos * last.width;\n                }\n            } else if (align === 'start') {\n                paddingRight = last.width;\n            } else if (align === 'end') {\n                paddingLeft = first.width;\n            } else if (align !== 'inner') {\n                paddingLeft = first.width / 2;\n                paddingRight = last.width / 2;\n            }\n            this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n            this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n        } else {\n            let paddingTop = last.height / 2;\n            let paddingBottom = first.height / 2;\n            if (align === 'start') {\n                paddingTop = 0;\n                paddingBottom = first.height;\n            } else if (align === 'end') {\n                paddingTop = last.height;\n                paddingBottom = 0;\n            }\n            this.paddingTop = paddingTop + padding;\n            this.paddingBottom = paddingBottom + padding;\n        }\n    }\n _handleMargins() {\n        if (this._margins) {\n            this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n            this._margins.top = Math.max(this.paddingTop, this._margins.top);\n            this._margins.right = Math.max(this.paddingRight, this._margins.right);\n            this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n        }\n    }\n    afterFit() {\n        callback(this.options.afterFit, [\n            this\n        ]);\n    }\n isHorizontal() {\n        const { axis , position  } = this.options;\n        return position === 'top' || position === 'bottom' || axis === 'x';\n    }\n isFullSize() {\n        return this.options.fullSize;\n    }\n _convertTicksToLabels(ticks) {\n        this.beforeTickToLabelConversion();\n        this.generateTickLabels(ticks);\n        let i, ilen;\n        for(i = 0, ilen = ticks.length; i < ilen; i++){\n            if (isNullOrUndef(ticks[i].label)) {\n                ticks.splice(i, 1);\n                ilen--;\n                i--;\n            }\n        }\n        this.afterTickToLabelConversion();\n    }\n _getLabelSizes() {\n        let labelSizes = this._labelSizes;\n        if (!labelSizes) {\n            const sampleSize = this.options.ticks.sampleSize;\n            let ticks = this.ticks;\n            if (sampleSize < ticks.length) {\n                ticks = sample(ticks, sampleSize);\n            }\n            this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);\n        }\n        return labelSizes;\n    }\n _computeLabelSizes(ticks, length, maxTicksLimit) {\n        const { ctx , _longestTextCache: caches  } = this;\n        const widths = [];\n        const heights = [];\n        const increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));\n        let widestLabelSize = 0;\n        let highestLabelSize = 0;\n        let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n        for(i = 0; i < length; i += increment){\n            label = ticks[i].label;\n            tickFont = this._resolveTickFontOptions(i);\n            ctx.font = fontString = tickFont.string;\n            cache = caches[fontString] = caches[fontString] || {\n                data: {},\n                gc: []\n            };\n            lineHeight = tickFont.lineHeight;\n            width = height = 0;\n            if (!isNullOrUndef(label) && !isArray(label)) {\n                width = _measureText(ctx, cache.data, cache.gc, width, label);\n                height = lineHeight;\n            } else if (isArray(label)) {\n                for(j = 0, jlen = label.length; j < jlen; ++j){\n                    nestedLabel =  label[j];\n                    if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n                        width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n                        height += lineHeight;\n                    }\n                }\n            }\n            widths.push(width);\n            heights.push(height);\n            widestLabelSize = Math.max(width, widestLabelSize);\n            highestLabelSize = Math.max(height, highestLabelSize);\n        }\n        garbageCollect(caches, length);\n        const widest = widths.indexOf(widestLabelSize);\n        const highest = heights.indexOf(highestLabelSize);\n        const valueAt = (idx)=>({\n                width: widths[idx] || 0,\n                height: heights[idx] || 0\n            });\n        return {\n            first: valueAt(0),\n            last: valueAt(length - 1),\n            widest: valueAt(widest),\n            highest: valueAt(highest),\n            widths,\n            heights\n        };\n    }\n getLabelForValue(value) {\n        return value;\n    }\n getPixelForValue(value, index) {\n        return NaN;\n    }\n getValueForPixel(pixel) {}\n getPixelForTick(index) {\n        const ticks = this.ticks;\n        if (index < 0 || index > ticks.length - 1) {\n            return null;\n        }\n        return this.getPixelForValue(ticks[index].value);\n    }\n getPixelForDecimal(decimal) {\n        if (this._reversePixels) {\n            decimal = 1 - decimal;\n        }\n        const pixel = this._startPixel + decimal * this._length;\n        return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n    }\n getDecimalForPixel(pixel) {\n        const decimal = (pixel - this._startPixel) / this._length;\n        return this._reversePixels ? 1 - decimal : decimal;\n    }\n getBasePixel() {\n        return this.getPixelForValue(this.getBaseValue());\n    }\n getBaseValue() {\n        const { min , max  } = this;\n        return min < 0 && max < 0 ? max : min > 0 && max > 0 ? min : 0;\n    }\n getContext(index) {\n        const ticks = this.ticks || [];\n        if (index >= 0 && index < ticks.length) {\n            const tick = ticks[index];\n            return tick.$context || (tick.$context = createTickContext(this.getContext(), index, tick));\n        }\n        return this.$context || (this.$context = createScaleContext(this.chart.getContext(), this));\n    }\n _tickSize() {\n        const optionTicks = this.options.ticks;\n        const rot = toRadians(this.labelRotation);\n        const cos = Math.abs(Math.cos(rot));\n        const sin = Math.abs(Math.sin(rot));\n        const labelSizes = this._getLabelSizes();\n        const padding = optionTicks.autoSkipPadding || 0;\n        const w = labelSizes ? labelSizes.widest.width + padding : 0;\n        const h = labelSizes ? labelSizes.highest.height + padding : 0;\n        return this.isHorizontal() ? h * cos > w * sin ? w / cos : h / sin : h * sin < w * cos ? h / cos : w / sin;\n    }\n _isVisible() {\n        const display = this.options.display;\n        if (display !== 'auto') {\n            return !!display;\n        }\n        return this.getMatchingVisibleMetas().length > 0;\n    }\n _computeGridLineItems(chartArea) {\n        const axis = this.axis;\n        const chart = this.chart;\n        const options = this.options;\n        const { grid , position , border  } = options;\n        const offset = grid.offset;\n        const isHorizontal = this.isHorizontal();\n        const ticks = this.ticks;\n        const ticksLength = ticks.length + (offset ? 1 : 0);\n        const tl = getTickMarkLength(grid);\n        const items = [];\n        const borderOpts = border.setContext(this.getContext());\n        const axisWidth = borderOpts.display ? borderOpts.width : 0;\n        const axisHalfWidth = axisWidth / 2;\n        const alignBorderValue = function(pixel) {\n            return _alignPixel(chart, pixel, axisWidth);\n        };\n        let borderValue, i, lineValue, alignedLineValue;\n        let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n        if (position === 'top') {\n            borderValue = alignBorderValue(this.bottom);\n            ty1 = this.bottom - tl;\n            ty2 = borderValue - axisHalfWidth;\n            y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n            y2 = chartArea.bottom;\n        } else if (position === 'bottom') {\n            borderValue = alignBorderValue(this.top);\n            y1 = chartArea.top;\n            y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n            ty1 = borderValue + axisHalfWidth;\n            ty2 = this.top + tl;\n        } else if (position === 'left') {\n            borderValue = alignBorderValue(this.right);\n            tx1 = this.right - tl;\n            tx2 = borderValue - axisHalfWidth;\n            x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n            x2 = chartArea.right;\n        } else if (position === 'right') {\n            borderValue = alignBorderValue(this.left);\n            x1 = chartArea.left;\n            x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n            tx1 = borderValue + axisHalfWidth;\n            tx2 = this.left + tl;\n        } else if (axis === 'x') {\n            if (position === 'center') {\n                borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n            }\n            y1 = chartArea.top;\n            y2 = chartArea.bottom;\n            ty1 = borderValue + axisHalfWidth;\n            ty2 = ty1 + tl;\n        } else if (axis === 'y') {\n            if (position === 'center') {\n                borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n            }\n            tx1 = borderValue - axisHalfWidth;\n            tx2 = tx1 - tl;\n            x1 = chartArea.left;\n            x2 = chartArea.right;\n        }\n        const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n        const step = Math.max(1, Math.ceil(ticksLength / limit));\n        for(i = 0; i < ticksLength; i += step){\n            const context = this.getContext(i);\n            const optsAtIndex = grid.setContext(context);\n            const optsAtIndexBorder = border.setContext(context);\n            const lineWidth = optsAtIndex.lineWidth;\n            const lineColor = optsAtIndex.color;\n            const borderDash = optsAtIndexBorder.dash || [];\n            const borderDashOffset = optsAtIndexBorder.dashOffset;\n            const tickWidth = optsAtIndex.tickWidth;\n            const tickColor = optsAtIndex.tickColor;\n            const tickBorderDash = optsAtIndex.tickBorderDash || [];\n            const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n            lineValue = getPixelForGridLine(this, i, offset);\n            if (lineValue === undefined) {\n                continue;\n            }\n            alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n            if (isHorizontal) {\n                tx1 = tx2 = x1 = x2 = alignedLineValue;\n            } else {\n                ty1 = ty2 = y1 = y2 = alignedLineValue;\n            }\n            items.push({\n                tx1,\n                ty1,\n                tx2,\n                ty2,\n                x1,\n                y1,\n                x2,\n                y2,\n                width: lineWidth,\n                color: lineColor,\n                borderDash,\n                borderDashOffset,\n                tickWidth,\n                tickColor,\n                tickBorderDash,\n                tickBorderDashOffset\n            });\n        }\n        this._ticksLength = ticksLength;\n        this._borderValue = borderValue;\n        return items;\n    }\n _computeLabelItems(chartArea) {\n        const axis = this.axis;\n        const options = this.options;\n        const { position , ticks: optionTicks  } = options;\n        const isHorizontal = this.isHorizontal();\n        const ticks = this.ticks;\n        const { align , crossAlign , padding , mirror  } = optionTicks;\n        const tl = getTickMarkLength(options.grid);\n        const tickAndPadding = tl + padding;\n        const hTickAndPadding = mirror ? -padding : tickAndPadding;\n        const rotation = -toRadians(this.labelRotation);\n        const items = [];\n        let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n        let textBaseline = 'middle';\n        if (position === 'top') {\n            y = this.bottom - hTickAndPadding;\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (position === 'bottom') {\n            y = this.top + hTickAndPadding;\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (position === 'left') {\n            const ret = this._getYAxisLabelAlignment(tl);\n            textAlign = ret.textAlign;\n            x = ret.x;\n        } else if (position === 'right') {\n            const ret = this._getYAxisLabelAlignment(tl);\n            textAlign = ret.textAlign;\n            x = ret.x;\n        } else if (axis === 'x') {\n            if (position === 'center') {\n                y = (chartArea.top + chartArea.bottom) / 2 + tickAndPadding;\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n            }\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (axis === 'y') {\n            if (position === 'center') {\n                x = (chartArea.left + chartArea.right) / 2 - tickAndPadding;\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                x = this.chart.scales[positionAxisID].getPixelForValue(value);\n            }\n            textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n        }\n        if (axis === 'y') {\n            if (align === 'start') {\n                textBaseline = 'top';\n            } else if (align === 'end') {\n                textBaseline = 'bottom';\n            }\n        }\n        const labelSizes = this._getLabelSizes();\n        for(i = 0, ilen = ticks.length; i < ilen; ++i){\n            tick = ticks[i];\n            label = tick.label;\n            const optsAtIndex = optionTicks.setContext(this.getContext(i));\n            pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n            font = this._resolveTickFontOptions(i);\n            lineHeight = font.lineHeight;\n            lineCount = isArray(label) ? label.length : 1;\n            const halfCount = lineCount / 2;\n            const color = optsAtIndex.color;\n            const strokeColor = optsAtIndex.textStrokeColor;\n            const strokeWidth = optsAtIndex.textStrokeWidth;\n            let tickTextAlign = textAlign;\n            if (isHorizontal) {\n                x = pixel;\n                if (textAlign === 'inner') {\n                    if (i === ilen - 1) {\n                        tickTextAlign = !this.options.reverse ? 'right' : 'left';\n                    } else if (i === 0) {\n                        tickTextAlign = !this.options.reverse ? 'left' : 'right';\n                    } else {\n                        tickTextAlign = 'center';\n                    }\n                }\n                if (position === 'top') {\n                    if (crossAlign === 'near' || rotation !== 0) {\n                        textOffset = -lineCount * lineHeight + lineHeight / 2;\n                    } else if (crossAlign === 'center') {\n                        textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n                    } else {\n                        textOffset = -labelSizes.highest.height + lineHeight / 2;\n                    }\n                } else {\n                    if (crossAlign === 'near' || rotation !== 0) {\n                        textOffset = lineHeight / 2;\n                    } else if (crossAlign === 'center') {\n                        textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n                    } else {\n                        textOffset = labelSizes.highest.height - lineCount * lineHeight;\n                    }\n                }\n                if (mirror) {\n                    textOffset *= -1;\n                }\n                if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n                    x += lineHeight / 2 * Math.sin(rotation);\n                }\n            } else {\n                y = pixel;\n                textOffset = (1 - lineCount) * lineHeight / 2;\n            }\n            let backdrop;\n            if (optsAtIndex.showLabelBackdrop) {\n                const labelPadding = toPadding(optsAtIndex.backdropPadding);\n                const height = labelSizes.heights[i];\n                const width = labelSizes.widths[i];\n                let top = textOffset - labelPadding.top;\n                let left = 0 - labelPadding.left;\n                switch(textBaseline){\n                    case 'middle':\n                        top -= height / 2;\n                        break;\n                    case 'bottom':\n                        top -= height;\n                        break;\n                }\n                switch(textAlign){\n                    case 'center':\n                        left -= width / 2;\n                        break;\n                    case 'right':\n                        left -= width;\n                        break;\n                    case 'inner':\n                        if (i === ilen - 1) {\n                            left -= width;\n                        } else if (i > 0) {\n                            left -= width / 2;\n                        }\n                        break;\n                }\n                backdrop = {\n                    left,\n                    top,\n                    width: width + labelPadding.width,\n                    height: height + labelPadding.height,\n                    color: optsAtIndex.backdropColor\n                };\n            }\n            items.push({\n                label,\n                font,\n                textOffset,\n                options: {\n                    rotation,\n                    color,\n                    strokeColor,\n                    strokeWidth,\n                    textAlign: tickTextAlign,\n                    textBaseline,\n                    translation: [\n                        x,\n                        y\n                    ],\n                    backdrop\n                }\n            });\n        }\n        return items;\n    }\n    _getXAxisLabelAlignment() {\n        const { position , ticks  } = this.options;\n        const rotation = -toRadians(this.labelRotation);\n        if (rotation) {\n            return position === 'top' ? 'left' : 'right';\n        }\n        let align = 'center';\n        if (ticks.align === 'start') {\n            align = 'left';\n        } else if (ticks.align === 'end') {\n            align = 'right';\n        } else if (ticks.align === 'inner') {\n            align = 'inner';\n        }\n        return align;\n    }\n    _getYAxisLabelAlignment(tl) {\n        const { position , ticks: { crossAlign , mirror , padding  }  } = this.options;\n        const labelSizes = this._getLabelSizes();\n        const tickAndPadding = tl + padding;\n        const widest = labelSizes.widest.width;\n        let textAlign;\n        let x;\n        if (position === 'left') {\n            if (mirror) {\n                x = this.right + padding;\n                if (crossAlign === 'near') {\n                    textAlign = 'left';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x += widest / 2;\n                } else {\n                    textAlign = 'right';\n                    x += widest;\n                }\n            } else {\n                x = this.right - tickAndPadding;\n                if (crossAlign === 'near') {\n                    textAlign = 'right';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x -= widest / 2;\n                } else {\n                    textAlign = 'left';\n                    x = this.left;\n                }\n            }\n        } else if (position === 'right') {\n            if (mirror) {\n                x = this.left + padding;\n                if (crossAlign === 'near') {\n                    textAlign = 'right';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x -= widest / 2;\n                } else {\n                    textAlign = 'left';\n                    x -= widest;\n                }\n            } else {\n                x = this.left + tickAndPadding;\n                if (crossAlign === 'near') {\n                    textAlign = 'left';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x += widest / 2;\n                } else {\n                    textAlign = 'right';\n                    x = this.right;\n                }\n            }\n        } else {\n            textAlign = 'right';\n        }\n        return {\n            textAlign,\n            x\n        };\n    }\n _computeLabelArea() {\n        if (this.options.ticks.mirror) {\n            return;\n        }\n        const chart = this.chart;\n        const position = this.options.position;\n        if (position === 'left' || position === 'right') {\n            return {\n                top: 0,\n                left: this.left,\n                bottom: chart.height,\n                right: this.right\n            };\n        }\n        if (position === 'top' || position === 'bottom') {\n            return {\n                top: this.top,\n                left: 0,\n                bottom: this.bottom,\n                right: chart.width\n            };\n        }\n    }\n drawBackground() {\n        const { ctx , options: { backgroundColor  } , left , top , width , height  } = this;\n        if (backgroundColor) {\n            ctx.save();\n            ctx.fillStyle = backgroundColor;\n            ctx.fillRect(left, top, width, height);\n            ctx.restore();\n        }\n    }\n    getLineWidthForValue(value) {\n        const grid = this.options.grid;\n        if (!this._isVisible() || !grid.display) {\n            return 0;\n        }\n        const ticks = this.ticks;\n        const index = ticks.findIndex((t)=>t.value === value);\n        if (index >= 0) {\n            const opts = grid.setContext(this.getContext(index));\n            return opts.lineWidth;\n        }\n        return 0;\n    }\n drawGrid(chartArea) {\n        const grid = this.options.grid;\n        const ctx = this.ctx;\n        const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n        let i, ilen;\n        const drawLine = (p1, p2, style)=>{\n            if (!style.width || !style.color) {\n                return;\n            }\n            ctx.save();\n            ctx.lineWidth = style.width;\n            ctx.strokeStyle = style.color;\n            ctx.setLineDash(style.borderDash || []);\n            ctx.lineDashOffset = style.borderDashOffset;\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.stroke();\n            ctx.restore();\n        };\n        if (grid.display) {\n            for(i = 0, ilen = items.length; i < ilen; ++i){\n                const item = items[i];\n                if (grid.drawOnChartArea) {\n                    drawLine({\n                        x: item.x1,\n                        y: item.y1\n                    }, {\n                        x: item.x2,\n                        y: item.y2\n                    }, item);\n                }\n                if (grid.drawTicks) {\n                    drawLine({\n                        x: item.tx1,\n                        y: item.ty1\n                    }, {\n                        x: item.tx2,\n                        y: item.ty2\n                    }, {\n                        color: item.tickColor,\n                        width: item.tickWidth,\n                        borderDash: item.tickBorderDash,\n                        borderDashOffset: item.tickBorderDashOffset\n                    });\n                }\n            }\n        }\n    }\n drawBorder() {\n        const { chart , ctx , options: { border , grid  }  } = this;\n        const borderOpts = border.setContext(this.getContext());\n        const axisWidth = border.display ? borderOpts.width : 0;\n        if (!axisWidth) {\n            return;\n        }\n        const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n        const borderValue = this._borderValue;\n        let x1, x2, y1, y2;\n        if (this.isHorizontal()) {\n            x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n            x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n            y1 = y2 = borderValue;\n        } else {\n            y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n            y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n            x1 = x2 = borderValue;\n        }\n        ctx.save();\n        ctx.lineWidth = borderOpts.width;\n        ctx.strokeStyle = borderOpts.color;\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n        ctx.restore();\n    }\n drawLabels(chartArea) {\n        const optionTicks = this.options.ticks;\n        if (!optionTicks.display) {\n            return;\n        }\n        const ctx = this.ctx;\n        const area = this._computeLabelArea();\n        if (area) {\n            clipArea(ctx, area);\n        }\n        const items = this.getLabelItems(chartArea);\n        for (const item of items){\n            const renderTextOptions = item.options;\n            const tickFont = item.font;\n            const label = item.label;\n            const y = item.textOffset;\n            renderText(ctx, label, 0, y, tickFont, renderTextOptions);\n        }\n        if (area) {\n            unclipArea(ctx);\n        }\n    }\n drawTitle() {\n        const { ctx , options: { position , title , reverse  }  } = this;\n        if (!title.display) {\n            return;\n        }\n        const font = toFont(title.font);\n        const padding = toPadding(title.padding);\n        const align = title.align;\n        let offset = font.lineHeight / 2;\n        if (position === 'bottom' || position === 'center' || isObject(position)) {\n            offset += padding.bottom;\n            if (isArray(title.text)) {\n                offset += font.lineHeight * (title.text.length - 1);\n            }\n        } else {\n            offset += padding.top;\n        }\n        const { titleX , titleY , maxWidth , rotation  } = titleArgs(this, offset, position, align);\n        renderText(ctx, title.text, 0, 0, font, {\n            color: title.color,\n            maxWidth,\n            rotation,\n            textAlign: titleAlign(align, position, reverse),\n            textBaseline: 'middle',\n            translation: [\n                titleX,\n                titleY\n            ]\n        });\n    }\n    draw(chartArea) {\n        if (!this._isVisible()) {\n            return;\n        }\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawBorder();\n        this.drawTitle();\n        this.drawLabels(chartArea);\n    }\n _layers() {\n        const opts = this.options;\n        const tz = opts.ticks && opts.ticks.z || 0;\n        const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n        const bz = valueOrDefault(opts.border && opts.border.z, 0);\n        if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n            return [\n                {\n                    z: tz,\n                    draw: (chartArea)=>{\n                        this.draw(chartArea);\n                    }\n                }\n            ];\n        }\n        return [\n            {\n                z: gz,\n                draw: (chartArea)=>{\n                    this.drawBackground();\n                    this.drawGrid(chartArea);\n                    this.drawTitle();\n                }\n            },\n            {\n                z: bz,\n                draw: ()=>{\n                    this.drawBorder();\n                }\n            },\n            {\n                z: tz,\n                draw: (chartArea)=>{\n                    this.drawLabels(chartArea);\n                }\n            }\n        ];\n    }\n getMatchingVisibleMetas(type) {\n        const metas = this.chart.getSortedVisibleDatasetMetas();\n        const axisID = this.axis + 'AxisID';\n        const result = [];\n        let i, ilen;\n        for(i = 0, ilen = metas.length; i < ilen; ++i){\n            const meta = metas[i];\n            if (meta[axisID] === this.id && (!type || meta.type === type)) {\n                result.push(meta);\n            }\n        }\n        return result;\n    }\n _resolveTickFontOptions(index) {\n        const opts = this.options.ticks.setContext(this.getContext(index));\n        return toFont(opts.font);\n    }\n _maxDigits() {\n        const fontSize = this._resolveTickFontOptions(0).lineHeight;\n        return (this.isHorizontal() ? this.width : this.height) / fontSize;\n    }\n}\n\nclass TypedRegistry {\n    constructor(type, scope, override){\n        this.type = type;\n        this.scope = scope;\n        this.override = override;\n        this.items = Object.create(null);\n    }\n    isForType(type) {\n        return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n    }\n register(item) {\n        const proto = Object.getPrototypeOf(item);\n        let parentScope;\n        if (isIChartComponent(proto)) {\n            parentScope = this.register(proto);\n        }\n        const items = this.items;\n        const id = item.id;\n        const scope = this.scope + '.' + id;\n        if (!id) {\n            throw new Error('class does not have id: ' + item);\n        }\n        if (id in items) {\n            return scope;\n        }\n        items[id] = item;\n        registerDefaults(item, scope, parentScope);\n        if (this.override) {\n            defaults.override(item.id, item.overrides);\n        }\n        return scope;\n    }\n get(id) {\n        return this.items[id];\n    }\n unregister(item) {\n        const items = this.items;\n        const id = item.id;\n        const scope = this.scope;\n        if (id in items) {\n            delete items[id];\n        }\n        if (scope && id in defaults[scope]) {\n            delete defaults[scope][id];\n            if (this.override) {\n                delete overrides[id];\n            }\n        }\n    }\n}\nfunction registerDefaults(item, scope, parentScope) {\n    const itemDefaults = merge(Object.create(null), [\n        parentScope ? defaults.get(parentScope) : {},\n        defaults.get(scope),\n        item.defaults\n    ]);\n    defaults.set(scope, itemDefaults);\n    if (item.defaultRoutes) {\n        routeDefaults(scope, item.defaultRoutes);\n    }\n    if (item.descriptors) {\n        defaults.describe(scope, item.descriptors);\n    }\n}\nfunction routeDefaults(scope, routes) {\n    Object.keys(routes).forEach((property)=>{\n        const propertyParts = property.split('.');\n        const sourceName = propertyParts.pop();\n        const sourceScope = [\n            scope\n        ].concat(propertyParts).join('.');\n        const parts = routes[property].split('.');\n        const targetName = parts.pop();\n        const targetScope = parts.join('.');\n        defaults.route(sourceScope, sourceName, targetScope, targetName);\n    });\n}\nfunction isIChartComponent(proto) {\n    return 'id' in proto && 'defaults' in proto;\n}\n\nclass Registry {\n    constructor(){\n        this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n        this.elements = new TypedRegistry(Element, 'elements');\n        this.plugins = new TypedRegistry(Object, 'plugins');\n        this.scales = new TypedRegistry(Scale, 'scales');\n        this._typedRegistries = [\n            this.controllers,\n            this.scales,\n            this.elements\n        ];\n    }\n add(...args) {\n        this._each('register', args);\n    }\n    remove(...args) {\n        this._each('unregister', args);\n    }\n addControllers(...args) {\n        this._each('register', args, this.controllers);\n    }\n addElements(...args) {\n        this._each('register', args, this.elements);\n    }\n addPlugins(...args) {\n        this._each('register', args, this.plugins);\n    }\n addScales(...args) {\n        this._each('register', args, this.scales);\n    }\n getController(id) {\n        return this._get(id, this.controllers, 'controller');\n    }\n getElement(id) {\n        return this._get(id, this.elements, 'element');\n    }\n getPlugin(id) {\n        return this._get(id, this.plugins, 'plugin');\n    }\n getScale(id) {\n        return this._get(id, this.scales, 'scale');\n    }\n removeControllers(...args) {\n        this._each('unregister', args, this.controllers);\n    }\n removeElements(...args) {\n        this._each('unregister', args, this.elements);\n    }\n removePlugins(...args) {\n        this._each('unregister', args, this.plugins);\n    }\n removeScales(...args) {\n        this._each('unregister', args, this.scales);\n    }\n _each(method, args, typedRegistry) {\n        [\n            ...args\n        ].forEach((arg)=>{\n            const reg = typedRegistry || this._getRegistryForType(arg);\n            if (typedRegistry || reg.isForType(arg) || reg === this.plugins && arg.id) {\n                this._exec(method, reg, arg);\n            } else {\n                each(arg, (item)=>{\n                    const itemReg = typedRegistry || this._getRegistryForType(item);\n                    this._exec(method, itemReg, item);\n                });\n            }\n        });\n    }\n _exec(method, registry, component) {\n        const camelMethod = _capitalize(method);\n        callback(component['before' + camelMethod], [], component);\n        registry[method](component);\n        callback(component['after' + camelMethod], [], component);\n    }\n _getRegistryForType(type) {\n        for(let i = 0; i < this._typedRegistries.length; i++){\n            const reg = this._typedRegistries[i];\n            if (reg.isForType(type)) {\n                return reg;\n            }\n        }\n        return this.plugins;\n    }\n _get(id, typedRegistry, type) {\n        const item = typedRegistry.get(id);\n        if (item === undefined) {\n            throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n        }\n        return item;\n    }\n}\nvar registry = /* #__PURE__ */ new Registry();\n\nclass PluginService {\n    constructor(){\n        this._init = undefined;\n    }\n notify(chart, hook, args, filter) {\n        if (hook === 'beforeInit') {\n            this._init = this._createDescriptors(chart, true);\n            this._notify(this._init, chart, 'install');\n        }\n        if (this._init === undefined) {\n            return;\n        }\n        const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n        const result = this._notify(descriptors, chart, hook, args);\n        if (hook === 'afterDestroy') {\n            this._notify(descriptors, chart, 'stop');\n            this._notify(this._init, chart, 'uninstall');\n            this._init = undefined;\n        }\n        return result;\n    }\n _notify(descriptors, chart, hook, args) {\n        args = args || {};\n        for (const descriptor of descriptors){\n            const plugin = descriptor.plugin;\n            const method = plugin[hook];\n            const params = [\n                chart,\n                args,\n                descriptor.options\n            ];\n            if (callback(method, params, plugin) === false && args.cancelable) {\n                return false;\n            }\n        }\n        return true;\n    }\n    invalidate() {\n        if (!isNullOrUndef(this._cache)) {\n            this._oldCache = this._cache;\n            this._cache = undefined;\n        }\n    }\n _descriptors(chart) {\n        if (this._cache) {\n            return this._cache;\n        }\n        const descriptors = this._cache = this._createDescriptors(chart);\n        this._notifyStateChanges(chart);\n        return descriptors;\n    }\n    _createDescriptors(chart, all) {\n        const config = chart && chart.config;\n        const options = valueOrDefault(config.options && config.options.plugins, {});\n        const plugins = allPlugins(config);\n        return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n    }\n _notifyStateChanges(chart) {\n        const previousDescriptors = this._oldCache || [];\n        const descriptors = this._cache;\n        const diff = (a, b)=>a.filter((x)=>!b.some((y)=>x.plugin.id === y.plugin.id));\n        this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n        this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n    }\n}\n function allPlugins(config) {\n    const localIds = {};\n    const plugins = [];\n    const keys = Object.keys(registry.plugins.items);\n    for(let i = 0; i < keys.length; i++){\n        plugins.push(registry.getPlugin(keys[i]));\n    }\n    const local = config.plugins || [];\n    for(let i = 0; i < local.length; i++){\n        const plugin = local[i];\n        if (plugins.indexOf(plugin) === -1) {\n            plugins.push(plugin);\n            localIds[plugin.id] = true;\n        }\n    }\n    return {\n        plugins,\n        localIds\n    };\n}\nfunction getOpts(options, all) {\n    if (!all && options === false) {\n        return null;\n    }\n    if (options === true) {\n        return {};\n    }\n    return options;\n}\nfunction createDescriptors(chart, { plugins , localIds  }, options, all) {\n    const result = [];\n    const context = chart.getContext();\n    for (const plugin of plugins){\n        const id = plugin.id;\n        const opts = getOpts(options[id], all);\n        if (opts === null) {\n            continue;\n        }\n        result.push({\n            plugin,\n            options: pluginOpts(chart.config, {\n                plugin,\n                local: localIds[id]\n            }, opts, context)\n        });\n    }\n    return result;\n}\nfunction pluginOpts(config, { plugin , local  }, opts, context) {\n    const keys = config.pluginScopeKeys(plugin);\n    const scopes = config.getOptionScopes(opts, keys);\n    if (local && plugin.defaults) {\n        scopes.push(plugin.defaults);\n    }\n    return config.createResolver(scopes, context, [\n        ''\n    ], {\n        scriptable: false,\n        indexable: false,\n        allKeys: true\n    });\n}\n\nfunction getIndexAxis(type, options) {\n    const datasetDefaults = defaults.datasets[type] || {};\n    const datasetOptions = (options.datasets || {})[type] || {};\n    return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n    let axis = id;\n    if (id === '_index_') {\n        axis = indexAxis;\n    } else if (id === '_value_') {\n        axis = indexAxis === 'x' ? 'y' : 'x';\n    }\n    return axis;\n}\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n    return axis === indexAxis ? '_index_' : '_value_';\n}\nfunction idMatchesAxis(id) {\n    if (id === 'x' || id === 'y' || id === 'r') {\n        return id;\n    }\n}\nfunction axisFromPosition(position) {\n    if (position === 'top' || position === 'bottom') {\n        return 'x';\n    }\n    if (position === 'left' || position === 'right') {\n        return 'y';\n    }\n}\nfunction determineAxis(id, ...scaleOptions) {\n    if (idMatchesAxis(id)) {\n        return id;\n    }\n    for (const opts of scaleOptions){\n        const axis = opts.axis || axisFromPosition(opts.position) || id.length > 1 && idMatchesAxis(id[0].toLowerCase());\n        if (axis) {\n            return axis;\n        }\n    }\n    throw new Error(`Cannot determine type of '${id}' axis. Please provide 'axis' or 'position' option.`);\n}\nfunction getAxisFromDataset(id, axis, dataset) {\n    if (dataset[axis + 'AxisID'] === id) {\n        return {\n            axis\n        };\n    }\n}\nfunction retrieveAxisFromDatasets(id, config) {\n    if (config.data && config.data.datasets) {\n        const boundDs = config.data.datasets.filter((d)=>d.xAxisID === id || d.yAxisID === id);\n        if (boundDs.length) {\n            return getAxisFromDataset(id, 'x', boundDs[0]) || getAxisFromDataset(id, 'y', boundDs[0]);\n        }\n    }\n    return {};\n}\nfunction mergeScaleConfig(config, options) {\n    const chartDefaults = overrides[config.type] || {\n        scales: {}\n    };\n    const configScales = options.scales || {};\n    const chartIndexAxis = getIndexAxis(config.type, options);\n    const scales = Object.create(null);\n    Object.keys(configScales).forEach((id)=>{\n        const scaleConf = configScales[id];\n        if (!isObject(scaleConf)) {\n            return console.error(`Invalid scale configuration for scale: ${id}`);\n        }\n        if (scaleConf._proxy) {\n            return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n        }\n        const axis = determineAxis(id, scaleConf, retrieveAxisFromDatasets(id, config), defaults.scales[scaleConf.type]);\n        const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n        const defaultScaleOptions = chartDefaults.scales || {};\n        scales[id] = mergeIf(Object.create(null), [\n            {\n                axis\n            },\n            scaleConf,\n            defaultScaleOptions[axis],\n            defaultScaleOptions[defaultId]\n        ]);\n    });\n    config.data.datasets.forEach((dataset)=>{\n        const type = dataset.type || config.type;\n        const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n        const datasetDefaults = overrides[type] || {};\n        const defaultScaleOptions = datasetDefaults.scales || {};\n        Object.keys(defaultScaleOptions).forEach((defaultID)=>{\n            const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n            const id = dataset[axis + 'AxisID'] || axis;\n            scales[id] = scales[id] || Object.create(null);\n            mergeIf(scales[id], [\n                {\n                    axis\n                },\n                configScales[id],\n                defaultScaleOptions[defaultID]\n            ]);\n        });\n    });\n    Object.keys(scales).forEach((key)=>{\n        const scale = scales[key];\n        mergeIf(scale, [\n            defaults.scales[scale.type],\n            defaults.scale\n        ]);\n    });\n    return scales;\n}\nfunction initOptions(config) {\n    const options = config.options || (config.options = {});\n    options.plugins = valueOrDefault(options.plugins, {});\n    options.scales = mergeScaleConfig(config, options);\n}\nfunction initData(data) {\n    data = data || {};\n    data.datasets = data.datasets || [];\n    data.labels = data.labels || [];\n    return data;\n}\nfunction initConfig(config) {\n    config = config || {};\n    config.data = initData(config.data);\n    initOptions(config);\n    return config;\n}\nconst keyCache = new Map();\nconst keysCached = new Set();\nfunction cachedKeys(cacheKey, generate) {\n    let keys = keyCache.get(cacheKey);\n    if (!keys) {\n        keys = generate();\n        keyCache.set(cacheKey, keys);\n        keysCached.add(keys);\n    }\n    return keys;\n}\nconst addIfFound = (set, obj, key)=>{\n    const opts = resolveObjectKey(obj, key);\n    if (opts !== undefined) {\n        set.add(opts);\n    }\n};\nclass Config {\n    constructor(config){\n        this._config = initConfig(config);\n        this._scopeCache = new Map();\n        this._resolverCache = new Map();\n    }\n    get platform() {\n        return this._config.platform;\n    }\n    get type() {\n        return this._config.type;\n    }\n    set type(type) {\n        this._config.type = type;\n    }\n    get data() {\n        return this._config.data;\n    }\n    set data(data) {\n        this._config.data = initData(data);\n    }\n    get options() {\n        return this._config.options;\n    }\n    set options(options) {\n        this._config.options = options;\n    }\n    get plugins() {\n        return this._config.plugins;\n    }\n    update() {\n        const config = this._config;\n        this.clearCache();\n        initOptions(config);\n    }\n    clearCache() {\n        this._scopeCache.clear();\n        this._resolverCache.clear();\n    }\n datasetScopeKeys(datasetType) {\n        return cachedKeys(datasetType, ()=>[\n                [\n                    `datasets.${datasetType}`,\n                    ''\n                ]\n            ]);\n    }\n datasetAnimationScopeKeys(datasetType, transition) {\n        return cachedKeys(`${datasetType}.transition.${transition}`, ()=>[\n                [\n                    `datasets.${datasetType}.transitions.${transition}`,\n                    `transitions.${transition}`\n                ],\n                [\n                    `datasets.${datasetType}`,\n                    ''\n                ]\n            ]);\n    }\n datasetElementScopeKeys(datasetType, elementType) {\n        return cachedKeys(`${datasetType}-${elementType}`, ()=>[\n                [\n                    `datasets.${datasetType}.elements.${elementType}`,\n                    `datasets.${datasetType}`,\n                    `elements.${elementType}`,\n                    ''\n                ]\n            ]);\n    }\n pluginScopeKeys(plugin) {\n        const id = plugin.id;\n        const type = this.type;\n        return cachedKeys(`${type}-plugin-${id}`, ()=>[\n                [\n                    `plugins.${id}`,\n                    ...plugin.additionalOptionScopes || []\n                ]\n            ]);\n    }\n _cachedScopes(mainScope, resetCache) {\n        const _scopeCache = this._scopeCache;\n        let cache = _scopeCache.get(mainScope);\n        if (!cache || resetCache) {\n            cache = new Map();\n            _scopeCache.set(mainScope, cache);\n        }\n        return cache;\n    }\n getOptionScopes(mainScope, keyLists, resetCache) {\n        const { options , type  } = this;\n        const cache = this._cachedScopes(mainScope, resetCache);\n        const cached = cache.get(keyLists);\n        if (cached) {\n            return cached;\n        }\n        const scopes = new Set();\n        keyLists.forEach((keys)=>{\n            if (mainScope) {\n                scopes.add(mainScope);\n                keys.forEach((key)=>addIfFound(scopes, mainScope, key));\n            }\n            keys.forEach((key)=>addIfFound(scopes, options, key));\n            keys.forEach((key)=>addIfFound(scopes, overrides[type] || {}, key));\n            keys.forEach((key)=>addIfFound(scopes, defaults, key));\n            keys.forEach((key)=>addIfFound(scopes, descriptors, key));\n        });\n        const array = Array.from(scopes);\n        if (array.length === 0) {\n            array.push(Object.create(null));\n        }\n        if (keysCached.has(keyLists)) {\n            cache.set(keyLists, array);\n        }\n        return array;\n    }\n chartOptionScopes() {\n        const { options , type  } = this;\n        return [\n            options,\n            overrides[type] || {},\n            defaults.datasets[type] || {},\n            {\n                type\n            },\n            defaults,\n            descriptors\n        ];\n    }\n resolveNamedOptions(scopes, names, context, prefixes = [\n        ''\n    ]) {\n        const result = {\n            $shared: true\n        };\n        const { resolver , subPrefixes  } = getResolver(this._resolverCache, scopes, prefixes);\n        let options = resolver;\n        if (needContext(resolver, names)) {\n            result.$shared = false;\n            context = isFunction(context) ? context() : context;\n            const subResolver = this.createResolver(scopes, context, subPrefixes);\n            options = _attachContext(resolver, context, subResolver);\n        }\n        for (const prop of names){\n            result[prop] = options[prop];\n        }\n        return result;\n    }\n createResolver(scopes, context, prefixes = [\n        ''\n    ], descriptorDefaults) {\n        const { resolver  } = getResolver(this._resolverCache, scopes, prefixes);\n        return isObject(context) ? _attachContext(resolver, context, undefined, descriptorDefaults) : resolver;\n    }\n}\nfunction getResolver(resolverCache, scopes, prefixes) {\n    let cache = resolverCache.get(scopes);\n    if (!cache) {\n        cache = new Map();\n        resolverCache.set(scopes, cache);\n    }\n    const cacheKey = prefixes.join();\n    let cached = cache.get(cacheKey);\n    if (!cached) {\n        const resolver = _createResolver(scopes, prefixes);\n        cached = {\n            resolver,\n            subPrefixes: prefixes.filter((p)=>!p.toLowerCase().includes('hover'))\n        };\n        cache.set(cacheKey, cached);\n    }\n    return cached;\n}\nconst hasFunction = (value)=>isObject(value) && Object.getOwnPropertyNames(value).some((key)=>isFunction(value[key]));\nfunction needContext(proxy, names) {\n    const { isScriptable , isIndexable  } = _descriptors(proxy);\n    for (const prop of names){\n        const scriptable = isScriptable(prop);\n        const indexable = isIndexable(prop);\n        const value = (indexable || scriptable) && proxy[prop];\n        if (scriptable && (isFunction(value) || hasFunction(value)) || indexable && isArray(value)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar version = \"4.5.1\";\n\nconst KNOWN_POSITIONS = [\n    'top',\n    'bottom',\n    'left',\n    'right',\n    'chartArea'\n];\nfunction positionIsHorizontal(position, axis) {\n    return position === 'top' || position === 'bottom' || KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x';\n}\nfunction compare2Level(l1, l2) {\n    return function(a, b) {\n        return a[l1] === b[l1] ? a[l2] - b[l2] : a[l1] - b[l1];\n    };\n}\nfunction onAnimationsComplete(context) {\n    const chart = context.chart;\n    const animationOptions = chart.options.animation;\n    chart.notifyPlugins('afterRender');\n    callback(animationOptions && animationOptions.onComplete, [\n        context\n    ], chart);\n}\nfunction onAnimationProgress(context) {\n    const chart = context.chart;\n    const animationOptions = chart.options.animation;\n    callback(animationOptions && animationOptions.onProgress, [\n        context\n    ], chart);\n}\n function getCanvas(item) {\n    if (_isDomSupported() && typeof item === 'string') {\n        item = document.getElementById(item);\n    } else if (item && item.length) {\n        item = item[0];\n    }\n    if (item && item.canvas) {\n        item = item.canvas;\n    }\n    return item;\n}\nconst instances = {};\nconst getChart = (key)=>{\n    const canvas = getCanvas(key);\n    return Object.values(instances).filter((c)=>c.canvas === canvas).pop();\n};\nfunction moveNumericKeys(obj, start, move) {\n    const keys = Object.keys(obj);\n    for (const key of keys){\n        const intKey = +key;\n        if (intKey >= start) {\n            const value = obj[key];\n            delete obj[key];\n            if (move > 0 || intKey > start) {\n                obj[intKey + move] = value;\n            }\n        }\n    }\n}\n function determineLastEvent(e, lastEvent, inChartArea, isClick) {\n    if (!inChartArea || e.type === 'mouseout') {\n        return null;\n    }\n    if (isClick) {\n        return lastEvent;\n    }\n    return e;\n}\nclass Chart {\n    static defaults = defaults;\n    static instances = instances;\n    static overrides = overrides;\n    static registry = registry;\n    static version = version;\n    static getChart = getChart;\n    static register(...items) {\n        registry.add(...items);\n        invalidatePlugins();\n    }\n    static unregister(...items) {\n        registry.remove(...items);\n        invalidatePlugins();\n    }\n    constructor(item, userConfig){\n        const config = this.config = new Config(userConfig);\n        const initialCanvas = getCanvas(item);\n        const existingChart = getChart(initialCanvas);\n        if (existingChart) {\n            throw new Error('Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' + ' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.');\n        }\n        const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n        this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n        this.platform.updateConfig(config);\n        const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n        const canvas = context && context.canvas;\n        const height = canvas && canvas.height;\n        const width = canvas && canvas.width;\n        this.id = uid();\n        this.ctx = context;\n        this.canvas = canvas;\n        this.width = width;\n        this.height = height;\n        this._options = options;\n        this._aspectRatio = this.aspectRatio;\n        this._layers = [];\n        this._metasets = [];\n        this._stacks = undefined;\n        this.boxes = [];\n        this.currentDevicePixelRatio = undefined;\n        this.chartArea = undefined;\n        this._active = [];\n        this._lastEvent = undefined;\n        this._listeners = {};\n         this._responsiveListeners = undefined;\n        this._sortedMetasets = [];\n        this.scales = {};\n        this._plugins = new PluginService();\n        this.$proxies = {};\n        this._hiddenIndices = {};\n        this.attached = false;\n        this._animationsDisabled = undefined;\n        this.$context = undefined;\n        this._doResize = debounce((mode)=>this.update(mode), options.resizeDelay || 0);\n        this._dataChanges = [];\n        instances[this.id] = this;\n        if (!context || !canvas) {\n            console.error(\"Failed to create chart: can't acquire context from the given item\");\n            return;\n        }\n        animator.listen(this, 'complete', onAnimationsComplete);\n        animator.listen(this, 'progress', onAnimationProgress);\n        this._initialize();\n        if (this.attached) {\n            this.update();\n        }\n    }\n    get aspectRatio() {\n        const { options: { aspectRatio , maintainAspectRatio  } , width , height , _aspectRatio  } = this;\n        if (!isNullOrUndef(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (maintainAspectRatio && _aspectRatio) {\n            return _aspectRatio;\n        }\n        return height ? width / height : null;\n    }\n    get data() {\n        return this.config.data;\n    }\n    set data(data) {\n        this.config.data = data;\n    }\n    get options() {\n        return this._options;\n    }\n    set options(options) {\n        this.config.options = options;\n    }\n    get registry() {\n        return registry;\n    }\n _initialize() {\n        this.notifyPlugins('beforeInit');\n        if (this.options.responsive) {\n            this.resize();\n        } else {\n            retinaScale(this, this.options.devicePixelRatio);\n        }\n        this.bindEvents();\n        this.notifyPlugins('afterInit');\n        return this;\n    }\n    clear() {\n        clearCanvas(this.canvas, this.ctx);\n        return this;\n    }\n    stop() {\n        animator.stop(this);\n        return this;\n    }\n resize(width, height) {\n        if (!animator.running(this)) {\n            this._resize(width, height);\n        } else {\n            this._resizeBeforeDraw = {\n                width,\n                height\n            };\n        }\n    }\n    _resize(width, height) {\n        const options = this.options;\n        const canvas = this.canvas;\n        const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n        const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n        const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n        const mode = this.width ? 'resize' : 'attach';\n        this.width = newSize.width;\n        this.height = newSize.height;\n        this._aspectRatio = this.aspectRatio;\n        if (!retinaScale(this, newRatio, true)) {\n            return;\n        }\n        this.notifyPlugins('resize', {\n            size: newSize\n        });\n        callback(options.onResize, [\n            this,\n            newSize\n        ], this);\n        if (this.attached) {\n            if (this._doResize(mode)) {\n                this.render();\n            }\n        }\n    }\n    ensureScalesHaveIDs() {\n        const options = this.options;\n        const scalesOptions = options.scales || {};\n        each(scalesOptions, (axisOptions, axisID)=>{\n            axisOptions.id = axisID;\n        });\n    }\n buildOrUpdateScales() {\n        const options = this.options;\n        const scaleOpts = options.scales;\n        const scales = this.scales;\n        const updated = Object.keys(scales).reduce((obj, id)=>{\n            obj[id] = false;\n            return obj;\n        }, {});\n        let items = [];\n        if (scaleOpts) {\n            items = items.concat(Object.keys(scaleOpts).map((id)=>{\n                const scaleOptions = scaleOpts[id];\n                const axis = determineAxis(id, scaleOptions);\n                const isRadial = axis === 'r';\n                const isHorizontal = axis === 'x';\n                return {\n                    options: scaleOptions,\n                    dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n                    dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n                };\n            }));\n        }\n        each(items, (item)=>{\n            const scaleOptions = item.options;\n            const id = scaleOptions.id;\n            const axis = determineAxis(id, scaleOptions);\n            const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n            if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n                scaleOptions.position = item.dposition;\n            }\n            updated[id] = true;\n            let scale = null;\n            if (id in scales && scales[id].type === scaleType) {\n                scale = scales[id];\n            } else {\n                const scaleClass = registry.getScale(scaleType);\n                scale = new scaleClass({\n                    id,\n                    type: scaleType,\n                    ctx: this.ctx,\n                    chart: this\n                });\n                scales[scale.id] = scale;\n            }\n            scale.init(scaleOptions, options);\n        });\n        each(updated, (hasUpdated, id)=>{\n            if (!hasUpdated) {\n                delete scales[id];\n            }\n        });\n        each(scales, (scale)=>{\n            layouts.configure(this, scale, scale.options);\n            layouts.addBox(this, scale);\n        });\n    }\n _updateMetasets() {\n        const metasets = this._metasets;\n        const numData = this.data.datasets.length;\n        const numMeta = metasets.length;\n        metasets.sort((a, b)=>a.index - b.index);\n        if (numMeta > numData) {\n            for(let i = numData; i < numMeta; ++i){\n                this._destroyDatasetMeta(i);\n            }\n            metasets.splice(numData, numMeta - numData);\n        }\n        this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n    }\n _removeUnreferencedMetasets() {\n        const { _metasets: metasets , data: { datasets  }  } = this;\n        if (metasets.length > datasets.length) {\n            delete this._stacks;\n        }\n        metasets.forEach((meta, index)=>{\n            if (datasets.filter((x)=>x === meta._dataset).length === 0) {\n                this._destroyDatasetMeta(index);\n            }\n        });\n    }\n    buildOrUpdateControllers() {\n        const newControllers = [];\n        const datasets = this.data.datasets;\n        let i, ilen;\n        this._removeUnreferencedMetasets();\n        for(i = 0, ilen = datasets.length; i < ilen; i++){\n            const dataset = datasets[i];\n            let meta = this.getDatasetMeta(i);\n            const type = dataset.type || this.config.type;\n            if (meta.type && meta.type !== type) {\n                this._destroyDatasetMeta(i);\n                meta = this.getDatasetMeta(i);\n            }\n            meta.type = type;\n            meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n            meta.order = dataset.order || 0;\n            meta.index = i;\n            meta.label = '' + dataset.label;\n            meta.visible = this.isDatasetVisible(i);\n            if (meta.controller) {\n                meta.controller.updateIndex(i);\n                meta.controller.linkScales();\n            } else {\n                const ControllerClass = registry.getController(type);\n                const { datasetElementType , dataElementType  } = defaults.datasets[type];\n                Object.assign(ControllerClass, {\n                    dataElementType: registry.getElement(dataElementType),\n                    datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n                });\n                meta.controller = new ControllerClass(this, i);\n                newControllers.push(meta.controller);\n            }\n        }\n        this._updateMetasets();\n        return newControllers;\n    }\n _resetElements() {\n        each(this.data.datasets, (dataset, datasetIndex)=>{\n            this.getDatasetMeta(datasetIndex).controller.reset();\n        }, this);\n    }\n reset() {\n        this._resetElements();\n        this.notifyPlugins('reset');\n    }\n    update(mode) {\n        const config = this.config;\n        config.update();\n        const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n        const animsDisabled = this._animationsDisabled = !options.animation;\n        this._updateScales();\n        this._checkEventBindings();\n        this._updateHiddenIndices();\n        this._plugins.invalidate();\n        if (this.notifyPlugins('beforeUpdate', {\n            mode,\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const newControllers = this.buildOrUpdateControllers();\n        this.notifyPlugins('beforeElementsUpdate');\n        let minPadding = 0;\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; i++){\n            const { controller  } = this.getDatasetMeta(i);\n            const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n            controller.buildOrUpdateElements(reset);\n            minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n        }\n        minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n        this._updateLayout(minPadding);\n        if (!animsDisabled) {\n            each(newControllers, (controller)=>{\n                controller.reset();\n            });\n        }\n        this._updateDatasets(mode);\n        this.notifyPlugins('afterUpdate', {\n            mode\n        });\n        this._layers.sort(compare2Level('z', '_idx'));\n        const { _active , _lastEvent  } = this;\n        if (_lastEvent) {\n            this._eventHandler(_lastEvent, true);\n        } else if (_active.length) {\n            this._updateHoverStyles(_active, _active, true);\n        }\n        this.render();\n    }\n _updateScales() {\n        each(this.scales, (scale)=>{\n            layouts.removeBox(this, scale);\n        });\n        this.ensureScalesHaveIDs();\n        this.buildOrUpdateScales();\n    }\n _checkEventBindings() {\n        const options = this.options;\n        const existingEvents = new Set(Object.keys(this._listeners));\n        const newEvents = new Set(options.events);\n        if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n            this.unbindEvents();\n            this.bindEvents();\n        }\n    }\n _updateHiddenIndices() {\n        const { _hiddenIndices  } = this;\n        const changes = this._getUniformDataChanges() || [];\n        for (const { method , start , count  } of changes){\n            const move = method === '_removeElements' ? -count : count;\n            moveNumericKeys(_hiddenIndices, start, move);\n        }\n    }\n _getUniformDataChanges() {\n        const _dataChanges = this._dataChanges;\n        if (!_dataChanges || !_dataChanges.length) {\n            return;\n        }\n        this._dataChanges = [];\n        const datasetCount = this.data.datasets.length;\n        const makeSet = (idx)=>new Set(_dataChanges.filter((c)=>c[0] === idx).map((c, i)=>i + ',' + c.splice(1).join(',')));\n        const changeSet = makeSet(0);\n        for(let i = 1; i < datasetCount; i++){\n            if (!setsEqual(changeSet, makeSet(i))) {\n                return;\n            }\n        }\n        return Array.from(changeSet).map((c)=>c.split(',')).map((a)=>({\n                method: a[1],\n                start: +a[2],\n                count: +a[3]\n            }));\n    }\n _updateLayout(minPadding) {\n        if (this.notifyPlugins('beforeLayout', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        layouts.update(this, this.width, this.height, minPadding);\n        const area = this.chartArea;\n        const noArea = area.width <= 0 || area.height <= 0;\n        this._layers = [];\n        each(this.boxes, (box)=>{\n            if (noArea && box.position === 'chartArea') {\n                return;\n            }\n            if (box.configure) {\n                box.configure();\n            }\n            this._layers.push(...box._layers());\n        }, this);\n        this._layers.forEach((item, index)=>{\n            item._idx = index;\n        });\n        this.notifyPlugins('afterLayout');\n    }\n _updateDatasets(mode) {\n        if (this.notifyPlugins('beforeDatasetsUpdate', {\n            mode,\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this.getDatasetMeta(i).controller.configure();\n        }\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this._updateDataset(i, isFunction(mode) ? mode({\n                datasetIndex: i\n            }) : mode);\n        }\n        this.notifyPlugins('afterDatasetsUpdate', {\n            mode\n        });\n    }\n _updateDataset(index, mode) {\n        const meta = this.getDatasetMeta(index);\n        const args = {\n            meta,\n            index,\n            mode,\n            cancelable: true\n        };\n        if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n            return;\n        }\n        meta.controller._update(mode);\n        args.cancelable = false;\n        this.notifyPlugins('afterDatasetUpdate', args);\n    }\n    render() {\n        if (this.notifyPlugins('beforeRender', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        if (animator.has(this)) {\n            if (this.attached && !animator.running(this)) {\n                animator.start(this);\n            }\n        } else {\n            this.draw();\n            onAnimationsComplete({\n                chart: this\n            });\n        }\n    }\n    draw() {\n        let i;\n        if (this._resizeBeforeDraw) {\n            const { width , height  } = this._resizeBeforeDraw;\n            this._resizeBeforeDraw = null;\n            this._resize(width, height);\n        }\n        this.clear();\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        if (this.notifyPlugins('beforeDraw', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const layers = this._layers;\n        for(i = 0; i < layers.length && layers[i].z <= 0; ++i){\n            layers[i].draw(this.chartArea);\n        }\n        this._drawDatasets();\n        for(; i < layers.length; ++i){\n            layers[i].draw(this.chartArea);\n        }\n        this.notifyPlugins('afterDraw');\n    }\n _getSortedDatasetMetas(filterVisible) {\n        const metasets = this._sortedMetasets;\n        const result = [];\n        let i, ilen;\n        for(i = 0, ilen = metasets.length; i < ilen; ++i){\n            const meta = metasets[i];\n            if (!filterVisible || meta.visible) {\n                result.push(meta);\n            }\n        }\n        return result;\n    }\n getSortedVisibleDatasetMetas() {\n        return this._getSortedDatasetMetas(true);\n    }\n _drawDatasets() {\n        if (this.notifyPlugins('beforeDatasetsDraw', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const metasets = this.getSortedVisibleDatasetMetas();\n        for(let i = metasets.length - 1; i >= 0; --i){\n            this._drawDataset(metasets[i]);\n        }\n        this.notifyPlugins('afterDatasetsDraw');\n    }\n _drawDataset(meta) {\n        const ctx = this.ctx;\n        const args = {\n            meta,\n            index: meta.index,\n            cancelable: true\n        };\n        const clip = getDatasetClipArea(this, meta);\n        if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n            return;\n        }\n        if (clip) {\n            clipArea(ctx, clip);\n        }\n        meta.controller.draw();\n        if (clip) {\n            unclipArea(ctx);\n        }\n        args.cancelable = false;\n        this.notifyPlugins('afterDatasetDraw', args);\n    }\n isPointInArea(point) {\n        return _isPointInArea(point, this.chartArea, this._minPadding);\n    }\n    getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n        const method = Interaction.modes[mode];\n        if (typeof method === 'function') {\n            return method(this, e, options, useFinalPosition);\n        }\n        return [];\n    }\n    getDatasetMeta(datasetIndex) {\n        const dataset = this.data.datasets[datasetIndex];\n        const metasets = this._metasets;\n        let meta = metasets.filter((x)=>x && x._dataset === dataset).pop();\n        if (!meta) {\n            meta = {\n                type: null,\n                data: [],\n                dataset: null,\n                controller: null,\n                hidden: null,\n                xAxisID: null,\n                yAxisID: null,\n                order: dataset && dataset.order || 0,\n                index: datasetIndex,\n                _dataset: dataset,\n                _parsed: [],\n                _sorted: false\n            };\n            metasets.push(meta);\n        }\n        return meta;\n    }\n    getContext() {\n        return this.$context || (this.$context = createContext(null, {\n            chart: this,\n            type: 'chart'\n        }));\n    }\n    getVisibleDatasetCount() {\n        return this.getSortedVisibleDatasetMetas().length;\n    }\n    isDatasetVisible(datasetIndex) {\n        const dataset = this.data.datasets[datasetIndex];\n        if (!dataset) {\n            return false;\n        }\n        const meta = this.getDatasetMeta(datasetIndex);\n        return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n    }\n    setDatasetVisibility(datasetIndex, visible) {\n        const meta = this.getDatasetMeta(datasetIndex);\n        meta.hidden = !visible;\n    }\n    toggleDataVisibility(index) {\n        this._hiddenIndices[index] = !this._hiddenIndices[index];\n    }\n    getDataVisibility(index) {\n        return !this._hiddenIndices[index];\n    }\n _updateVisibility(datasetIndex, dataIndex, visible) {\n        const mode = visible ? 'show' : 'hide';\n        const meta = this.getDatasetMeta(datasetIndex);\n        const anims = meta.controller._resolveAnimations(undefined, mode);\n        if (defined(dataIndex)) {\n            meta.data[dataIndex].hidden = !visible;\n            this.update();\n        } else {\n            this.setDatasetVisibility(datasetIndex, visible);\n            anims.update(meta, {\n                visible\n            });\n            this.update((ctx)=>ctx.datasetIndex === datasetIndex ? mode : undefined);\n        }\n    }\n    hide(datasetIndex, dataIndex) {\n        this._updateVisibility(datasetIndex, dataIndex, false);\n    }\n    show(datasetIndex, dataIndex) {\n        this._updateVisibility(datasetIndex, dataIndex, true);\n    }\n _destroyDatasetMeta(datasetIndex) {\n        const meta = this._metasets[datasetIndex];\n        if (meta && meta.controller) {\n            meta.controller._destroy();\n        }\n        delete this._metasets[datasetIndex];\n    }\n    _stop() {\n        let i, ilen;\n        this.stop();\n        animator.remove(this);\n        for(i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this._destroyDatasetMeta(i);\n        }\n    }\n    destroy() {\n        this.notifyPlugins('beforeDestroy');\n        const { canvas , ctx  } = this;\n        this._stop();\n        this.config.clearCache();\n        if (canvas) {\n            this.unbindEvents();\n            clearCanvas(canvas, ctx);\n            this.platform.releaseContext(ctx);\n            this.canvas = null;\n            this.ctx = null;\n        }\n        delete instances[this.id];\n        this.notifyPlugins('afterDestroy');\n    }\n    toBase64Image(...args) {\n        return this.canvas.toDataURL(...args);\n    }\n bindEvents() {\n        this.bindUserEvents();\n        if (this.options.responsive) {\n            this.bindResponsiveEvents();\n        } else {\n            this.attached = true;\n        }\n    }\n bindUserEvents() {\n        const listeners = this._listeners;\n        const platform = this.platform;\n        const _add = (type, listener)=>{\n            platform.addEventListener(this, type, listener);\n            listeners[type] = listener;\n        };\n        const listener = (e, x, y)=>{\n            e.offsetX = x;\n            e.offsetY = y;\n            this._eventHandler(e);\n        };\n        each(this.options.events, (type)=>_add(type, listener));\n    }\n bindResponsiveEvents() {\n        if (!this._responsiveListeners) {\n            this._responsiveListeners = {};\n        }\n        const listeners = this._responsiveListeners;\n        const platform = this.platform;\n        const _add = (type, listener)=>{\n            platform.addEventListener(this, type, listener);\n            listeners[type] = listener;\n        };\n        const _remove = (type, listener)=>{\n            if (listeners[type]) {\n                platform.removeEventListener(this, type, listener);\n                delete listeners[type];\n            }\n        };\n        const listener = (width, height)=>{\n            if (this.canvas) {\n                this.resize(width, height);\n            }\n        };\n        let detached;\n        const attached = ()=>{\n            _remove('attach', attached);\n            this.attached = true;\n            this.resize();\n            _add('resize', listener);\n            _add('detach', detached);\n        };\n        detached = ()=>{\n            this.attached = false;\n            _remove('resize', listener);\n            this._stop();\n            this._resize(0, 0);\n            _add('attach', attached);\n        };\n        if (platform.isAttached(this.canvas)) {\n            attached();\n        } else {\n            detached();\n        }\n    }\n unbindEvents() {\n        each(this._listeners, (listener, type)=>{\n            this.platform.removeEventListener(this, type, listener);\n        });\n        this._listeners = {};\n        each(this._responsiveListeners, (listener, type)=>{\n            this.platform.removeEventListener(this, type, listener);\n        });\n        this._responsiveListeners = undefined;\n    }\n    updateHoverStyle(items, mode, enabled) {\n        const prefix = enabled ? 'set' : 'remove';\n        let meta, item, i, ilen;\n        if (mode === 'dataset') {\n            meta = this.getDatasetMeta(items[0].datasetIndex);\n            meta.controller['_' + prefix + 'DatasetHoverStyle']();\n        }\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            item = items[i];\n            const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n            if (controller) {\n                controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n            }\n        }\n    }\n getActiveElements() {\n        return this._active || [];\n    }\n setActiveElements(activeElements) {\n        const lastActive = this._active || [];\n        const active = activeElements.map(({ datasetIndex , index  })=>{\n            const meta = this.getDatasetMeta(datasetIndex);\n            if (!meta) {\n                throw new Error('No dataset found at index ' + datasetIndex);\n            }\n            return {\n                datasetIndex,\n                element: meta.data[index],\n                index\n            };\n        });\n        const changed = !_elementsEqual(active, lastActive);\n        if (changed) {\n            this._active = active;\n            this._lastEvent = null;\n            this._updateHoverStyles(active, lastActive);\n        }\n    }\n notifyPlugins(hook, args, filter) {\n        return this._plugins.notify(this, hook, args, filter);\n    }\n isPluginEnabled(pluginId) {\n        return this._plugins._cache.filter((p)=>p.plugin.id === pluginId).length === 1;\n    }\n _updateHoverStyles(active, lastActive, replay) {\n        const hoverOptions = this.options.hover;\n        const diff = (a, b)=>a.filter((x)=>!b.some((y)=>x.datasetIndex === y.datasetIndex && x.index === y.index));\n        const deactivated = diff(lastActive, active);\n        const activated = replay ? active : diff(active, lastActive);\n        if (deactivated.length) {\n            this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n        }\n        if (activated.length && hoverOptions.mode) {\n            this.updateHoverStyle(activated, hoverOptions.mode, true);\n        }\n    }\n _eventHandler(e, replay) {\n        const args = {\n            event: e,\n            replay,\n            cancelable: true,\n            inChartArea: this.isPointInArea(e)\n        };\n        const eventFilter = (plugin)=>(plugin.options.events || this.options.events).includes(e.native.type);\n        if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n            return;\n        }\n        const changed = this._handleEvent(e, replay, args.inChartArea);\n        args.cancelable = false;\n        this.notifyPlugins('afterEvent', args, eventFilter);\n        if (changed || args.changed) {\n            this.render();\n        }\n        return this;\n    }\n _handleEvent(e, replay, inChartArea) {\n        const { _active: lastActive = [] , options  } = this;\n        const useFinalPosition = replay;\n        const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n        const isClick = _isClickEvent(e);\n        const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n        if (inChartArea) {\n            this._lastEvent = null;\n            callback(options.onHover, [\n                e,\n                active,\n                this\n            ], this);\n            if (isClick) {\n                callback(options.onClick, [\n                    e,\n                    active,\n                    this\n                ], this);\n            }\n        }\n        const changed = !_elementsEqual(active, lastActive);\n        if (changed || replay) {\n            this._active = active;\n            this._updateHoverStyles(active, lastActive, replay);\n        }\n        this._lastEvent = lastEvent;\n        return changed;\n    }\n _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n        if (e.type === 'mouseout') {\n            return [];\n        }\n        if (!inChartArea) {\n            return lastActive;\n        }\n        const hoverOptions = this.options.hover;\n        return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n    }\n}\nfunction invalidatePlugins() {\n    return each(Chart.instances, (chart)=>chart._plugins.invalidate());\n}\n\nfunction clipSelf(ctx, element, endAngle) {\n    const { startAngle , x , y , outerRadius , innerRadius , options  } = element;\n    const { borderWidth , borderJoinStyle  } = options;\n    const outerAngleClip = Math.min(borderWidth / outerRadius, _normalizeAngle(startAngle - endAngle));\n    ctx.beginPath();\n    ctx.arc(x, y, outerRadius - borderWidth / 2, startAngle + outerAngleClip / 2, endAngle - outerAngleClip / 2);\n    if (innerRadius > 0) {\n        const innerAngleClip = Math.min(borderWidth / innerRadius, _normalizeAngle(startAngle - endAngle));\n        ctx.arc(x, y, innerRadius + borderWidth / 2, endAngle - innerAngleClip / 2, startAngle + innerAngleClip / 2, true);\n    } else {\n        const clipWidth = Math.min(borderWidth / 2, outerRadius * _normalizeAngle(startAngle - endAngle));\n        if (borderJoinStyle === 'round') {\n            ctx.arc(x, y, clipWidth, endAngle - PI / 2, startAngle + PI / 2, true);\n        } else if (borderJoinStyle === 'bevel') {\n            const r = 2 * clipWidth * clipWidth;\n            const endX = -r * Math.cos(endAngle + PI / 2) + x;\n            const endY = -r * Math.sin(endAngle + PI / 2) + y;\n            const startX = r * Math.cos(startAngle + PI / 2) + x;\n            const startY = r * Math.sin(startAngle + PI / 2) + y;\n            ctx.lineTo(endX, endY);\n            ctx.lineTo(startX, startY);\n        }\n    }\n    ctx.closePath();\n    ctx.moveTo(0, 0);\n    ctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.clip('evenodd');\n}\nfunction clipArc(ctx, element, endAngle) {\n    const { startAngle , pixelMargin , x , y , outerRadius , innerRadius  } = element;\n    let angleMargin = pixelMargin / outerRadius;\n    // Draw an inner border by clipping the arc and drawing a double-width border\n    // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n    ctx.beginPath();\n    ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n    if (innerRadius > pixelMargin) {\n        angleMargin = pixelMargin / innerRadius;\n        ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n    } else {\n        ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n    }\n    ctx.closePath();\n    ctx.clip();\n}\nfunction toRadiusCorners(value) {\n    return _readValueToProps(value, [\n        'outerStart',\n        'outerEnd',\n        'innerStart',\n        'innerEnd'\n    ]);\n}\n/**\n * Parse border radius from the provided options\n */ function parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {\n    const o = toRadiusCorners(arc.options.borderRadius);\n    const halfThickness = (outerRadius - innerRadius) / 2;\n    const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n    // Outer limits are complicated. We want to compute the available angular distance at\n    // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n    // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n    //\n    // If the borderRadius is large, that value can become negative.\n    // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n    // we know that the thickness term will dominate and compute the limits at that point\n    const computeOuterLimit = (val)=>{\n        const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n        return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n    };\n    return {\n        outerStart: computeOuterLimit(o.outerStart),\n        outerEnd: computeOuterLimit(o.outerEnd),\n        innerStart: _limitValue(o.innerStart, 0, innerLimit),\n        innerEnd: _limitValue(o.innerEnd, 0, innerLimit)\n    };\n}\n/**\n * Convert (r, ) to (x, y)\n */ function rThetaToXY(r, theta, x, y) {\n    return {\n        x: x + r * Math.cos(theta),\n        y: y + r * Math.sin(theta)\n    };\n}\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */ function pathArc(ctx, element, offset, spacing, end, circular) {\n    const { x , y , startAngle: start , pixelMargin , innerRadius: innerR  } = element;\n    const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n    const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n    let spacingOffset = 0;\n    const alpha = end - start;\n    if (spacing) {\n        // When spacing is present, it is the same for all items\n        // So we adjust the start and end angle of the arc such that\n        // the distance is the same as it would be without the spacing\n        const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n        const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n        const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n        const adjustedAngle = avNogSpacingRadius !== 0 ? alpha * avNogSpacingRadius / (avNogSpacingRadius + spacing) : alpha;\n        spacingOffset = (alpha - adjustedAngle) / 2;\n    }\n    const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n    const angleOffset = (alpha - beta) / 2;\n    const startAngle = start + angleOffset + spacingOffset;\n    const endAngle = end - angleOffset - spacingOffset;\n    const { outerStart , outerEnd , innerStart , innerEnd  } = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle);\n    const outerStartAdjustedRadius = outerRadius - outerStart;\n    const outerEndAdjustedRadius = outerRadius - outerEnd;\n    const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n    const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n    const innerStartAdjustedRadius = innerRadius + innerStart;\n    const innerEndAdjustedRadius = innerRadius + innerEnd;\n    const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n    const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n    ctx.beginPath();\n    if (circular) {\n        // The first arc segments from point 1 to point a to point 2\n        const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n        ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n        ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n        // The corner segment from point 2 to point 3\n        if (outerEnd > 0) {\n            const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n        }\n        // The line from point 3 to point 4\n        const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n        ctx.lineTo(p4.x, p4.y);\n        // The corner segment from point 4 to point 5\n        if (innerEnd > 0) {\n            const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n        }\n        // The inner arc from point 5 to point b to point 6\n        const innerMidAdjustedAngle = (endAngle - innerEnd / innerRadius + (startAngle + innerStart / innerRadius)) / 2;\n        ctx.arc(x, y, innerRadius, endAngle - innerEnd / innerRadius, innerMidAdjustedAngle, true);\n        ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + innerStart / innerRadius, true);\n        // The corner segment from point 6 to point 7\n        if (innerStart > 0) {\n            const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n        }\n        // The line from point 7 to point 8\n        const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n        ctx.lineTo(p8.x, p8.y);\n        // The corner segment from point 8 to point 1\n        if (outerStart > 0) {\n            const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n        }\n    } else {\n        ctx.moveTo(x, y);\n        const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n        const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n        ctx.lineTo(outerStartX, outerStartY);\n        const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n        const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n        ctx.lineTo(outerEndX, outerEndY);\n    }\n    ctx.closePath();\n}\nfunction drawArc(ctx, element, offset, spacing, circular) {\n    const { fullCircles , startAngle , circumference  } = element;\n    let endAngle = element.endAngle;\n    if (fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        for(let i = 0; i < fullCircles; ++i){\n            ctx.fill();\n        }\n        if (!isNaN(circumference)) {\n            endAngle = startAngle + (circumference % TAU || TAU);\n        }\n    }\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.fill();\n    return endAngle;\n}\nfunction drawBorder(ctx, element, offset, spacing, circular) {\n    const { fullCircles , startAngle , circumference , options  } = element;\n    const { borderWidth , borderJoinStyle , borderDash , borderDashOffset , borderRadius  } = options;\n    const inner = options.borderAlign === 'inner';\n    if (!borderWidth) {\n        return;\n    }\n    ctx.setLineDash(borderDash || []);\n    ctx.lineDashOffset = borderDashOffset;\n    if (inner) {\n        ctx.lineWidth = borderWidth * 2;\n        ctx.lineJoin = borderJoinStyle || 'round';\n    } else {\n        ctx.lineWidth = borderWidth;\n        ctx.lineJoin = borderJoinStyle || 'bevel';\n    }\n    let endAngle = element.endAngle;\n    if (fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        for(let i = 0; i < fullCircles; ++i){\n            ctx.stroke();\n        }\n        if (!isNaN(circumference)) {\n            endAngle = startAngle + (circumference % TAU || TAU);\n        }\n    }\n    if (inner) {\n        clipArc(ctx, element, endAngle);\n    }\n    if (options.selfJoin && endAngle - startAngle >= PI && borderRadius === 0 && borderJoinStyle !== 'miter') {\n        clipSelf(ctx, element, endAngle);\n    }\n    if (!fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        ctx.stroke();\n    }\n}\nclass ArcElement extends Element {\n    static id = 'arc';\n    static defaults = {\n        borderAlign: 'center',\n        borderColor: '#fff',\n        borderDash: [],\n        borderDashOffset: 0,\n        borderJoinStyle: undefined,\n        borderRadius: 0,\n        borderWidth: 2,\n        offset: 0,\n        spacing: 0,\n        angle: undefined,\n        circular: true,\n        selfJoin: false\n    };\n    static defaultRoutes = {\n        backgroundColor: 'backgroundColor'\n    };\n    static descriptors = {\n        _scriptable: true,\n        _indexable: (name)=>name !== 'borderDash'\n    };\n    circumference;\n    endAngle;\n    fullCircles;\n    innerRadius;\n    outerRadius;\n    pixelMargin;\n    startAngle;\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.circumference = undefined;\n        this.startAngle = undefined;\n        this.endAngle = undefined;\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n        this.pixelMargin = 0;\n        this.fullCircles = 0;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    inRange(chartX, chartY, useFinalPosition) {\n        const point = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        const { angle , distance  } = getAngleFromPoint(point, {\n            x: chartX,\n            y: chartY\n        });\n        const { startAngle , endAngle , innerRadius , outerRadius , circumference  } = this.getProps([\n            'startAngle',\n            'endAngle',\n            'innerRadius',\n            'outerRadius',\n            'circumference'\n        ], useFinalPosition);\n        const rAdjust = (this.options.spacing + this.options.borderWidth) / 2;\n        const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n        const nonZeroBetween = _angleBetween(angle, startAngle, endAngle) && startAngle !== endAngle;\n        const betweenAngles = _circumference >= TAU || nonZeroBetween;\n        const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n        return betweenAngles && withinRadius;\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y , startAngle , endAngle , innerRadius , outerRadius  } = this.getProps([\n            'x',\n            'y',\n            'startAngle',\n            'endAngle',\n            'innerRadius',\n            'outerRadius'\n        ], useFinalPosition);\n        const { offset , spacing  } = this.options;\n        const halfAngle = (startAngle + endAngle) / 2;\n        const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n        return {\n            x: x + Math.cos(halfAngle) * halfRadius,\n            y: y + Math.sin(halfAngle) * halfRadius\n        };\n    }\n    tooltipPosition(useFinalPosition) {\n        return this.getCenterPoint(useFinalPosition);\n    }\n    draw(ctx) {\n        const { options , circumference  } = this;\n        const offset = (options.offset || 0) / 4;\n        const spacing = (options.spacing || 0) / 2;\n        const circular = options.circular;\n        this.pixelMargin = options.borderAlign === 'inner' ? 0.33 : 0;\n        this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n        if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n            return;\n        }\n        ctx.save();\n        const halfAngle = (this.startAngle + this.endAngle) / 2;\n        ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n        const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n        const radiusOffset = offset * fix;\n        ctx.fillStyle = options.backgroundColor;\n        ctx.strokeStyle = options.borderColor;\n        drawArc(ctx, this, radiusOffset, spacing, circular);\n        drawBorder(ctx, this, radiusOffset, spacing, circular);\n        ctx.restore();\n    }\n}\n\nfunction setStyle(ctx, options, style = options) {\n    ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n    ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n    ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n    ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n    ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n    ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\nfunction lineTo(ctx, previous, target) {\n    ctx.lineTo(target.x, target.y);\n}\n function getLineMethod(options) {\n    if (options.stepped) {\n        return _steppedLineTo;\n    }\n    if (options.tension || options.cubicInterpolationMode === 'monotone') {\n        return _bezierCurveTo;\n    }\n    return lineTo;\n}\nfunction pathVars(points, segment, params = {}) {\n    const count = points.length;\n    const { start: paramsStart = 0 , end: paramsEnd = count - 1  } = params;\n    const { start: segmentStart , end: segmentEnd  } = segment;\n    const start = Math.max(paramsStart, segmentStart);\n    const end = Math.min(paramsEnd, segmentEnd);\n    const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n    return {\n        count,\n        start,\n        loop: segment.loop,\n        ilen: end < start && !outside ? count + end - start : end - start\n    };\n}\n function pathSegment(ctx, line, segment, params) {\n    const { points , options  } = line;\n    const { count , start , loop , ilen  } = pathVars(points, segment, params);\n    const lineMethod = getLineMethod(options);\n    let { move =true , reverse  } = params || {};\n    let i, point, prev;\n    for(i = 0; i <= ilen; ++i){\n        point = points[(start + (reverse ? ilen - i : i)) % count];\n        if (point.skip) {\n            continue;\n        } else if (move) {\n            ctx.moveTo(point.x, point.y);\n            move = false;\n        } else {\n            lineMethod(ctx, prev, point, reverse, options.stepped);\n        }\n        prev = point;\n    }\n    if (loop) {\n        point = points[(start + (reverse ? ilen : 0)) % count];\n        lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n    return !!loop;\n}\n function fastPathSegment(ctx, line, segment, params) {\n    const points = line.points;\n    const { count , start , ilen  } = pathVars(points, segment, params);\n    const { move =true , reverse  } = params || {};\n    let avgX = 0;\n    let countX = 0;\n    let i, point, prevX, minY, maxY, lastY;\n    const pointIndex = (index)=>(start + (reverse ? ilen - index : index)) % count;\n    const drawX = ()=>{\n        if (minY !== maxY) {\n            ctx.lineTo(avgX, maxY);\n            ctx.lineTo(avgX, minY);\n            ctx.lineTo(avgX, lastY);\n        }\n    };\n    if (move) {\n        point = points[pointIndex(0)];\n        ctx.moveTo(point.x, point.y);\n    }\n    for(i = 0; i <= ilen; ++i){\n        point = points[pointIndex(i)];\n        if (point.skip) {\n            continue;\n        }\n        const x = point.x;\n        const y = point.y;\n        const truncX = x | 0;\n        if (truncX === prevX) {\n            if (y < minY) {\n                minY = y;\n            } else if (y > maxY) {\n                maxY = y;\n            }\n            avgX = (countX * avgX + x) / ++countX;\n        } else {\n            drawX();\n            ctx.lineTo(x, y);\n            prevX = truncX;\n            countX = 0;\n            minY = maxY = y;\n        }\n        lastY = y;\n    }\n    drawX();\n}\n function _getSegmentMethod(line) {\n    const opts = line.options;\n    const borderDash = opts.borderDash && opts.borderDash.length;\n    const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n    return useFastPath ? fastPathSegment : pathSegment;\n}\n function _getInterpolationMethod(options) {\n    if (options.stepped) {\n        return _steppedInterpolation;\n    }\n    if (options.tension || options.cubicInterpolationMode === 'monotone') {\n        return _bezierInterpolation;\n    }\n    return _pointInLine;\n}\nfunction strokePathWithCache(ctx, line, start, count) {\n    let path = line._path;\n    if (!path) {\n        path = line._path = new Path2D();\n        if (line.path(path, start, count)) {\n            path.closePath();\n        }\n    }\n    setStyle(ctx, line.options);\n    ctx.stroke(path);\n}\nfunction strokePathDirect(ctx, line, start, count) {\n    const { segments , options  } = line;\n    const segmentMethod = _getSegmentMethod(line);\n    for (const segment of segments){\n        setStyle(ctx, options, segment.style);\n        ctx.beginPath();\n        if (segmentMethod(ctx, line, segment, {\n            start,\n            end: start + count - 1\n        })) {\n            ctx.closePath();\n        }\n        ctx.stroke();\n    }\n}\nconst usePath2D = typeof Path2D === 'function';\nfunction draw(ctx, line, start, count) {\n    if (usePath2D && !line.options.segment) {\n        strokePathWithCache(ctx, line, start, count);\n    } else {\n        strokePathDirect(ctx, line, start, count);\n    }\n}\nclass LineElement extends Element {\n    static id = 'line';\n static defaults = {\n        borderCapStyle: 'butt',\n        borderDash: [],\n        borderDashOffset: 0,\n        borderJoinStyle: 'miter',\n        borderWidth: 3,\n        capBezierPoints: true,\n        cubicInterpolationMode: 'default',\n        fill: false,\n        spanGaps: false,\n        stepped: false,\n        tension: 0\n    };\n static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    static descriptors = {\n        _scriptable: true,\n        _indexable: (name)=>name !== 'borderDash' && name !== 'fill'\n    };\n    constructor(cfg){\n        super();\n        this.animated = true;\n        this.options = undefined;\n        this._chart = undefined;\n        this._loop = undefined;\n        this._fullLoop = undefined;\n        this._path = undefined;\n        this._points = undefined;\n        this._segments = undefined;\n        this._decimated = false;\n        this._pointsUpdated = false;\n        this._datasetIndex = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    updateControlPoints(chartArea, indexAxis) {\n        const options = this.options;\n        if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n            const loop = options.spanGaps ? this._loop : this._fullLoop;\n            _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n            this._pointsUpdated = true;\n        }\n    }\n    set points(points) {\n        this._points = points;\n        delete this._segments;\n        delete this._path;\n        this._pointsUpdated = false;\n    }\n    get points() {\n        return this._points;\n    }\n    get segments() {\n        return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n    }\n first() {\n        const segments = this.segments;\n        const points = this.points;\n        return segments.length && points[segments[0].start];\n    }\n last() {\n        const segments = this.segments;\n        const points = this.points;\n        const count = segments.length;\n        return count && points[segments[count - 1].end];\n    }\n interpolate(point, property) {\n        const options = this.options;\n        const value = point[property];\n        const points = this.points;\n        const segments = _boundSegments(this, {\n            property,\n            start: value,\n            end: value\n        });\n        if (!segments.length) {\n            return;\n        }\n        const result = [];\n        const _interpolate = _getInterpolationMethod(options);\n        let i, ilen;\n        for(i = 0, ilen = segments.length; i < ilen; ++i){\n            const { start , end  } = segments[i];\n            const p1 = points[start];\n            const p2 = points[end];\n            if (p1 === p2) {\n                result.push(p1);\n                continue;\n            }\n            const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n            const interpolated = _interpolate(p1, p2, t, options.stepped);\n            interpolated[property] = point[property];\n            result.push(interpolated);\n        }\n        return result.length === 1 ? result[0] : result;\n    }\n pathSegment(ctx, segment, params) {\n        const segmentMethod = _getSegmentMethod(this);\n        return segmentMethod(ctx, this, segment, params);\n    }\n path(ctx, start, count) {\n        const segments = this.segments;\n        const segmentMethod = _getSegmentMethod(this);\n        let loop = this._loop;\n        start = start || 0;\n        count = count || this.points.length - start;\n        for (const segment of segments){\n            loop &= segmentMethod(ctx, this, segment, {\n                start,\n                end: start + count - 1\n            });\n        }\n        return !!loop;\n    }\n draw(ctx, chartArea, start, count) {\n        const options = this.options || {};\n        const points = this.points || [];\n        if (points.length && options.borderWidth) {\n            ctx.save();\n            draw(ctx, this, start, count);\n            ctx.restore();\n        }\n        if (this.animated) {\n            this._pointsUpdated = false;\n            this._path = undefined;\n        }\n    }\n}\n\nfunction inRange$1(el, pos, axis, useFinalPosition) {\n    const options = el.options;\n    const { [axis]: value  } = el.getProps([\n        axis\n    ], useFinalPosition);\n    return Math.abs(pos - value) < options.radius + options.hitRadius;\n}\nclass PointElement extends Element {\n    static id = 'point';\n    parsed;\n    skip;\n    stop;\n    /**\n   * @type {any}\n   */ static defaults = {\n        borderWidth: 1,\n        hitRadius: 1,\n        hoverBorderWidth: 1,\n        hoverRadius: 4,\n        pointStyle: 'circle',\n        radius: 3,\n        rotation: 0\n    };\n    /**\n   * @type {any}\n   */ static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.parsed = undefined;\n        this.skip = undefined;\n        this.stop = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    inRange(mouseX, mouseY, useFinalPosition) {\n        const options = this.options;\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2) < Math.pow(options.hitRadius + options.radius, 2);\n    }\n    inXRange(mouseX, useFinalPosition) {\n        return inRange$1(this, mouseX, 'x', useFinalPosition);\n    }\n    inYRange(mouseY, useFinalPosition) {\n        return inRange$1(this, mouseY, 'y', useFinalPosition);\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return {\n            x,\n            y\n        };\n    }\n    size(options) {\n        options = options || this.options || {};\n        let radius = options.radius || 0;\n        radius = Math.max(radius, radius && options.hoverRadius || 0);\n        const borderWidth = radius && options.borderWidth || 0;\n        return (radius + borderWidth) * 2;\n    }\n    draw(ctx, area) {\n        const options = this.options;\n        if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n            return;\n        }\n        ctx.strokeStyle = options.borderColor;\n        ctx.lineWidth = options.borderWidth;\n        ctx.fillStyle = options.backgroundColor;\n        drawPoint(ctx, options, this.x, this.y);\n    }\n    getRange() {\n        const options = this.options || {};\n        // @ts-expect-error Fallbacks should never be hit in practice\n        return options.radius + options.hitRadius;\n    }\n}\n\nfunction getBarBounds(bar, useFinalPosition) {\n    const { x , y , base , width , height  } =  bar.getProps([\n        'x',\n        'y',\n        'base',\n        'width',\n        'height'\n    ], useFinalPosition);\n    let left, right, top, bottom, half;\n    if (bar.horizontal) {\n        half = height / 2;\n        left = Math.min(x, base);\n        right = Math.max(x, base);\n        top = y - half;\n        bottom = y + half;\n    } else {\n        half = width / 2;\n        left = x - half;\n        right = x + half;\n        top = Math.min(y, base);\n        bottom = Math.max(y, base);\n    }\n    return {\n        left,\n        top,\n        right,\n        bottom\n    };\n}\nfunction skipOrLimit(skip, value, min, max) {\n    return skip ? 0 : _limitValue(value, min, max);\n}\nfunction parseBorderWidth(bar, maxW, maxH) {\n    const value = bar.options.borderWidth;\n    const skip = bar.borderSkipped;\n    const o = toTRBL(value);\n    return {\n        t: skipOrLimit(skip.top, o.top, 0, maxH),\n        r: skipOrLimit(skip.right, o.right, 0, maxW),\n        b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n        l: skipOrLimit(skip.left, o.left, 0, maxW)\n    };\n}\nfunction parseBorderRadius(bar, maxW, maxH) {\n    const { enableBorderRadius  } = bar.getProps([\n        'enableBorderRadius'\n    ]);\n    const value = bar.options.borderRadius;\n    const o = toTRBLCorners(value);\n    const maxR = Math.min(maxW, maxH);\n    const skip = bar.borderSkipped;\n    const enableBorder = enableBorderRadius || isObject(value);\n    return {\n        topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n        topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n        bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n        bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n    };\n}\nfunction boundingRects(bar) {\n    const bounds = getBarBounds(bar);\n    const width = bounds.right - bounds.left;\n    const height = bounds.bottom - bounds.top;\n    const border = parseBorderWidth(bar, width / 2, height / 2);\n    const radius = parseBorderRadius(bar, width / 2, height / 2);\n    return {\n        outer: {\n            x: bounds.left,\n            y: bounds.top,\n            w: width,\n            h: height,\n            radius\n        },\n        inner: {\n            x: bounds.left + border.l,\n            y: bounds.top + border.t,\n            w: width - border.l - border.r,\n            h: height - border.t - border.b,\n            radius: {\n                topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n                topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n                bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n                bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r))\n            }\n        }\n    };\n}\nfunction inRange(bar, x, y, useFinalPosition) {\n    const skipX = x === null;\n    const skipY = y === null;\n    const skipBoth = skipX && skipY;\n    const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n    return bounds && (skipX || _isBetween(x, bounds.left, bounds.right)) && (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\nfunction hasRadius(radius) {\n    return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n function addNormalRectPath(ctx, rect) {\n    ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\nfunction inflateRect(rect, amount, refRect = {}) {\n    const x = rect.x !== refRect.x ? -amount : 0;\n    const y = rect.y !== refRect.y ? -amount : 0;\n    const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n    const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n    return {\n        x: rect.x + x,\n        y: rect.y + y,\n        w: rect.w + w,\n        h: rect.h + h,\n        radius: rect.radius\n    };\n}\nclass BarElement extends Element {\n    static id = 'bar';\n static defaults = {\n        borderSkipped: 'start',\n        borderWidth: 0,\n        borderRadius: 0,\n        inflateAmount: 'auto',\n        pointStyle: undefined\n    };\n static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.horizontal = undefined;\n        this.base = undefined;\n        this.width = undefined;\n        this.height = undefined;\n        this.inflateAmount = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    draw(ctx) {\n        const { inflateAmount , options: { borderColor , backgroundColor  }  } = this;\n        const { inner , outer  } = boundingRects(this);\n        const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n        ctx.save();\n        if (outer.w !== inner.w || outer.h !== inner.h) {\n            ctx.beginPath();\n            addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n            ctx.clip();\n            addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n            ctx.fillStyle = borderColor;\n            ctx.fill('evenodd');\n        }\n        ctx.beginPath();\n        addRectPath(ctx, inflateRect(inner, inflateAmount));\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n        ctx.restore();\n    }\n    inRange(mouseX, mouseY, useFinalPosition) {\n        return inRange(this, mouseX, mouseY, useFinalPosition);\n    }\n    inXRange(mouseX, useFinalPosition) {\n        return inRange(this, mouseX, null, useFinalPosition);\n    }\n    inYRange(mouseY, useFinalPosition) {\n        return inRange(this, null, mouseY, useFinalPosition);\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y , base , horizontal  } =  this.getProps([\n            'x',\n            'y',\n            'base',\n            'horizontal'\n        ], useFinalPosition);\n        return {\n            x: horizontal ? (x + base) / 2 : x,\n            y: horizontal ? y : (y + base) / 2\n        };\n    }\n    getRange(axis) {\n        return axis === 'x' ? this.width / 2 : this.height / 2;\n    }\n}\n\nvar elements = /*#__PURE__*/Object.freeze({\n__proto__: null,\nArcElement: ArcElement,\nBarElement: BarElement,\nLineElement: LineElement,\nPointElement: PointElement\n});\n\nconst BORDER_COLORS = [\n    'rgb(54, 162, 235)',\n    'rgb(255, 99, 132)',\n    'rgb(255, 159, 64)',\n    'rgb(255, 205, 86)',\n    'rgb(75, 192, 192)',\n    'rgb(153, 102, 255)',\n    'rgb(201, 203, 207)' // grey\n];\n// Border colors with 50% transparency\nconst BACKGROUND_COLORS = /* #__PURE__ */ BORDER_COLORS.map((color)=>color.replace('rgb(', 'rgba(').replace(')', ', 0.5)'));\nfunction getBorderColor(i) {\n    return BORDER_COLORS[i % BORDER_COLORS.length];\n}\nfunction getBackgroundColor(i) {\n    return BACKGROUND_COLORS[i % BACKGROUND_COLORS.length];\n}\nfunction colorizeDefaultDataset(dataset, i) {\n    dataset.borderColor = getBorderColor(i);\n    dataset.backgroundColor = getBackgroundColor(i);\n    return ++i;\n}\nfunction colorizeDoughnutDataset(dataset, i) {\n    dataset.backgroundColor = dataset.data.map(()=>getBorderColor(i++));\n    return i;\n}\nfunction colorizePolarAreaDataset(dataset, i) {\n    dataset.backgroundColor = dataset.data.map(()=>getBackgroundColor(i++));\n    return i;\n}\nfunction getColorizer(chart) {\n    let i = 0;\n    return (dataset, datasetIndex)=>{\n        const controller = chart.getDatasetMeta(datasetIndex).controller;\n        if (controller instanceof DoughnutController) {\n            i = colorizeDoughnutDataset(dataset, i);\n        } else if (controller instanceof PolarAreaController) {\n            i = colorizePolarAreaDataset(dataset, i);\n        } else if (controller) {\n            i = colorizeDefaultDataset(dataset, i);\n        }\n    };\n}\nfunction containsColorsDefinitions(descriptors) {\n    let k;\n    for(k in descriptors){\n        if (descriptors[k].borderColor || descriptors[k].backgroundColor) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction containsColorsDefinition(descriptor) {\n    return descriptor && (descriptor.borderColor || descriptor.backgroundColor);\n}\nfunction containsDefaultColorsDefenitions() {\n    return defaults.borderColor !== 'rgba(0,0,0,0.1)' || defaults.backgroundColor !== 'rgba(0,0,0,0.1)';\n}\nvar plugin_colors = {\n    id: 'colors',\n    defaults: {\n        enabled: true,\n        forceOverride: false\n    },\n    beforeLayout (chart, _args, options) {\n        if (!options.enabled) {\n            return;\n        }\n        const { data: { datasets  } , options: chartOptions  } = chart.config;\n        const { elements  } = chartOptions;\n        const containsColorDefenition = containsColorsDefinitions(datasets) || containsColorsDefinition(chartOptions) || elements && containsColorsDefinitions(elements) || containsDefaultColorsDefenitions();\n        if (!options.forceOverride && containsColorDefenition) {\n            return;\n        }\n        const colorizer = getColorizer(chart);\n        datasets.forEach(colorizer);\n    }\n};\n\nfunction lttbDecimation(data, start, count, availableWidth, options) {\n const samples = options.samples || availableWidth;\n    if (samples >= count) {\n        return data.slice(start, start + count);\n    }\n    const decimated = [];\n    const bucketWidth = (count - 2) / (samples - 2);\n    let sampledIndex = 0;\n    const endIndex = start + count - 1;\n    let a = start;\n    let i, maxAreaPoint, maxArea, area, nextA;\n    decimated[sampledIndex++] = data[a];\n    for(i = 0; i < samples - 2; i++){\n        let avgX = 0;\n        let avgY = 0;\n        let j;\n        const avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;\n        const avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;\n        const avgRangeLength = avgRangeEnd - avgRangeStart;\n        for(j = avgRangeStart; j < avgRangeEnd; j++){\n            avgX += data[j].x;\n            avgY += data[j].y;\n        }\n        avgX /= avgRangeLength;\n        avgY /= avgRangeLength;\n        const rangeOffs = Math.floor(i * bucketWidth) + 1 + start;\n        const rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;\n        const { x: pointAx , y: pointAy  } = data[a];\n        maxArea = area = -1;\n        for(j = rangeOffs; j < rangeTo; j++){\n            area = 0.5 * Math.abs((pointAx - avgX) * (data[j].y - pointAy) - (pointAx - data[j].x) * (avgY - pointAy));\n            if (area > maxArea) {\n                maxArea = area;\n                maxAreaPoint = data[j];\n                nextA = j;\n            }\n        }\n        decimated[sampledIndex++] = maxAreaPoint;\n        a = nextA;\n    }\n    decimated[sampledIndex++] = data[endIndex];\n    return decimated;\n}\nfunction minMaxDecimation(data, start, count, availableWidth) {\n    let avgX = 0;\n    let countX = 0;\n    let i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;\n    const decimated = [];\n    const endIndex = start + count - 1;\n    const xMin = data[start].x;\n    const xMax = data[endIndex].x;\n    const dx = xMax - xMin;\n    for(i = start; i < start + count; ++i){\n        point = data[i];\n        x = (point.x - xMin) / dx * availableWidth;\n        y = point.y;\n        const truncX = x | 0;\n        if (truncX === prevX) {\n            if (y < minY) {\n                minY = y;\n                minIndex = i;\n            } else if (y > maxY) {\n                maxY = y;\n                maxIndex = i;\n            }\n            avgX = (countX * avgX + point.x) / ++countX;\n        } else {\n            const lastIndex = i - 1;\n            if (!isNullOrUndef(minIndex) && !isNullOrUndef(maxIndex)) {\n                const intermediateIndex1 = Math.min(minIndex, maxIndex);\n                const intermediateIndex2 = Math.max(minIndex, maxIndex);\n                if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {\n                    decimated.push({\n                        ...data[intermediateIndex1],\n                        x: avgX\n                    });\n                }\n                if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {\n                    decimated.push({\n                        ...data[intermediateIndex2],\n                        x: avgX\n                    });\n                }\n            }\n            if (i > 0 && lastIndex !== startIndex) {\n                decimated.push(data[lastIndex]);\n            }\n            decimated.push(point);\n            prevX = truncX;\n            countX = 0;\n            minY = maxY = y;\n            minIndex = maxIndex = startIndex = i;\n        }\n    }\n    return decimated;\n}\nfunction cleanDecimatedDataset(dataset) {\n    if (dataset._decimated) {\n        const data = dataset._data;\n        delete dataset._decimated;\n        delete dataset._data;\n        Object.defineProperty(dataset, 'data', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: data\n        });\n    }\n}\nfunction cleanDecimatedData(chart) {\n    chart.data.datasets.forEach((dataset)=>{\n        cleanDecimatedDataset(dataset);\n    });\n}\nfunction getStartAndCountOfVisiblePointsSimplified(meta, points) {\n    const pointCount = points.length;\n    let start = 0;\n    let count;\n    const { iScale  } = meta;\n    const { min , max , minDefined , maxDefined  } = iScale.getUserBounds();\n    if (minDefined) {\n        start = _limitValue(_lookupByKey(points, iScale.axis, min).lo, 0, pointCount - 1);\n    }\n    if (maxDefined) {\n        count = _limitValue(_lookupByKey(points, iScale.axis, max).hi + 1, start, pointCount) - start;\n    } else {\n        count = pointCount - start;\n    }\n    return {\n        start,\n        count\n    };\n}\nvar plugin_decimation = {\n    id: 'decimation',\n    defaults: {\n        algorithm: 'min-max',\n        enabled: false\n    },\n    beforeElementsUpdate: (chart, args, options)=>{\n        if (!options.enabled) {\n            cleanDecimatedData(chart);\n            return;\n        }\n        const availableWidth = chart.width;\n        chart.data.datasets.forEach((dataset, datasetIndex)=>{\n            const { _data , indexAxis  } = dataset;\n            const meta = chart.getDatasetMeta(datasetIndex);\n            const data = _data || dataset.data;\n            if (resolve([\n                indexAxis,\n                chart.options.indexAxis\n            ]) === 'y') {\n                return;\n            }\n            if (!meta.controller.supportsDecimation) {\n                return;\n            }\n            const xAxis = chart.scales[meta.xAxisID];\n            if (xAxis.type !== 'linear' && xAxis.type !== 'time') {\n                return;\n            }\n            if (chart.options.parsing) {\n                return;\n            }\n            let { start , count  } = getStartAndCountOfVisiblePointsSimplified(meta, data);\n            const threshold = options.threshold || 4 * availableWidth;\n            if (count <= threshold) {\n                cleanDecimatedDataset(dataset);\n                return;\n            }\n            if (isNullOrUndef(_data)) {\n                dataset._data = data;\n                delete dataset.data;\n                Object.defineProperty(dataset, 'data', {\n                    configurable: true,\n                    enumerable: true,\n                    get: function() {\n                        return this._decimated;\n                    },\n                    set: function(d) {\n                        this._data = d;\n                    }\n                });\n            }\n            let decimated;\n            switch(options.algorithm){\n                case 'lttb':\n                    decimated = lttbDecimation(data, start, count, availableWidth, options);\n                    break;\n                case 'min-max':\n                    decimated = minMaxDecimation(data, start, count, availableWidth);\n                    break;\n                default:\n                    throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`);\n            }\n            dataset._decimated = decimated;\n        });\n    },\n    destroy (chart) {\n        cleanDecimatedData(chart);\n    }\n};\n\nfunction _segments(line, target, property) {\n    const segments = line.segments;\n    const points = line.points;\n    const tpoints = target.points;\n    const parts = [];\n    for (const segment of segments){\n        let { start , end  } = segment;\n        end = _findSegmentEnd(start, end, points);\n        const bounds = _getBounds(property, points[start], points[end], segment.loop);\n        if (!target.segments) {\n            parts.push({\n                source: segment,\n                target: bounds,\n                start: points[start],\n                end: points[end]\n            });\n            continue;\n        }\n        const targetSegments = _boundSegments(target, bounds);\n        for (const tgt of targetSegments){\n            const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\n            const fillSources = _boundSegment(segment, points, subBounds);\n            for (const fillSource of fillSources){\n                parts.push({\n                    source: fillSource,\n                    target: tgt,\n                    start: {\n                        [property]: _getEdge(bounds, subBounds, 'start', Math.max)\n                    },\n                    end: {\n                        [property]: _getEdge(bounds, subBounds, 'end', Math.min)\n                    }\n                });\n            }\n        }\n    }\n    return parts;\n}\nfunction _getBounds(property, first, last, loop) {\n    if (loop) {\n        return;\n    }\n    let start = first[property];\n    let end = last[property];\n    if (property === 'angle') {\n        start = _normalizeAngle(start);\n        end = _normalizeAngle(end);\n    }\n    return {\n        property,\n        start,\n        end\n    };\n}\nfunction _pointsFromSegments(boundary, line) {\n    const { x =null , y =null  } = boundary || {};\n    const linePoints = line.points;\n    const points = [];\n    line.segments.forEach(({ start , end  })=>{\n        end = _findSegmentEnd(start, end, linePoints);\n        const first = linePoints[start];\n        const last = linePoints[end];\n        if (y !== null) {\n            points.push({\n                x: first.x,\n                y\n            });\n            points.push({\n                x: last.x,\n                y\n            });\n        } else if (x !== null) {\n            points.push({\n                x,\n                y: first.y\n            });\n            points.push({\n                x,\n                y: last.y\n            });\n        }\n    });\n    return points;\n}\nfunction _findSegmentEnd(start, end, points) {\n    for(; end > start; end--){\n        const point = points[end];\n        if (!isNaN(point.x) && !isNaN(point.y)) {\n            break;\n        }\n    }\n    return end;\n}\nfunction _getEdge(a, b, prop, fn) {\n    if (a && b) {\n        return fn(a[prop], b[prop]);\n    }\n    return a ? a[prop] : b ? b[prop] : 0;\n}\n\nfunction _createBoundaryLine(boundary, line) {\n    let points = [];\n    let _loop = false;\n    if (isArray(boundary)) {\n        _loop = true;\n        points = boundary;\n    } else {\n        points = _pointsFromSegments(boundary, line);\n    }\n    return points.length ? new LineElement({\n        points,\n        options: {\n            tension: 0\n        },\n        _loop,\n        _fullLoop: _loop\n    }) : null;\n}\nfunction _shouldApplyFill(source) {\n    return source && source.fill !== false;\n}\n\nfunction _resolveTarget(sources, index, propagate) {\n    const source = sources[index];\n    let fill = source.fill;\n    const visited = [\n        index\n    ];\n    let target;\n    if (!propagate) {\n        return fill;\n    }\n    while(fill !== false && visited.indexOf(fill) === -1){\n        if (!isNumberFinite(fill)) {\n            return fill;\n        }\n        target = sources[fill];\n        if (!target) {\n            return false;\n        }\n        if (target.visible) {\n            return fill;\n        }\n        visited.push(fill);\n        fill = target.fill;\n    }\n    return false;\n}\n function _decodeFill(line, index, count) {\n     const fill = parseFillOption(line);\n    if (isObject(fill)) {\n        return isNaN(fill.value) ? false : fill;\n    }\n    let target = parseFloat(fill);\n    if (isNumberFinite(target) && Math.floor(target) === target) {\n        return decodeTargetIndex(fill[0], index, target, count);\n    }\n    return [\n        'origin',\n        'start',\n        'end',\n        'stack',\n        'shape'\n    ].indexOf(fill) >= 0 && fill;\n}\nfunction decodeTargetIndex(firstCh, index, target, count) {\n    if (firstCh === '-' || firstCh === '+') {\n        target = index + target;\n    }\n    if (target === index || target < 0 || target >= count) {\n        return false;\n    }\n    return target;\n}\n function _getTargetPixel(fill, scale) {\n    let pixel = null;\n    if (fill === 'start') {\n        pixel = scale.bottom;\n    } else if (fill === 'end') {\n        pixel = scale.top;\n    } else if (isObject(fill)) {\n        pixel = scale.getPixelForValue(fill.value);\n    } else if (scale.getBasePixel) {\n        pixel = scale.getBasePixel();\n    }\n    return pixel;\n}\n function _getTargetValue(fill, scale, startValue) {\n    let value;\n    if (fill === 'start') {\n        value = startValue;\n    } else if (fill === 'end') {\n        value = scale.options.reverse ? scale.min : scale.max;\n    } else if (isObject(fill)) {\n        value = fill.value;\n    } else {\n        value = scale.getBaseValue();\n    }\n    return value;\n}\n function parseFillOption(line) {\n    const options = line.options;\n    const fillOption = options.fill;\n    let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\n    if (fill === undefined) {\n        fill = !!options.backgroundColor;\n    }\n    if (fill === false || fill === null) {\n        return false;\n    }\n    if (fill === true) {\n        return 'origin';\n    }\n    return fill;\n}\n\nfunction _buildStackLine(source) {\n    const { scale , index , line  } = source;\n    const points = [];\n    const segments = line.segments;\n    const sourcePoints = line.points;\n    const linesBelow = getLinesBelow(scale, index);\n    linesBelow.push(_createBoundaryLine({\n        x: null,\n        y: scale.bottom\n    }, line));\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        for(let j = segment.start; j <= segment.end; j++){\n            addPointsBelow(points, sourcePoints[j], linesBelow);\n        }\n    }\n    return new LineElement({\n        points,\n        options: {}\n    });\n}\n function getLinesBelow(scale, index) {\n    const below = [];\n    const metas = scale.getMatchingVisibleMetas('line');\n    for(let i = 0; i < metas.length; i++){\n        const meta = metas[i];\n        if (meta.index === index) {\n            break;\n        }\n        if (!meta.hidden) {\n            below.unshift(meta.dataset);\n        }\n    }\n    return below;\n}\n function addPointsBelow(points, sourcePoint, linesBelow) {\n    const postponed = [];\n    for(let j = 0; j < linesBelow.length; j++){\n        const line = linesBelow[j];\n        const { first , last , point  } = findPoint(line, sourcePoint, 'x');\n        if (!point || first && last) {\n            continue;\n        }\n        if (first) {\n            postponed.unshift(point);\n        } else {\n            points.push(point);\n            if (!last) {\n                break;\n            }\n        }\n    }\n    points.push(...postponed);\n}\n function findPoint(line, sourcePoint, property) {\n    const point = line.interpolate(sourcePoint, property);\n    if (!point) {\n        return {};\n    }\n    const pointValue = point[property];\n    const segments = line.segments;\n    const linePoints = line.points;\n    let first = false;\n    let last = false;\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        const firstValue = linePoints[segment.start][property];\n        const lastValue = linePoints[segment.end][property];\n        if (_isBetween(pointValue, firstValue, lastValue)) {\n            first = pointValue === firstValue;\n            last = pointValue === lastValue;\n            break;\n        }\n    }\n    return {\n        first,\n        last,\n        point\n    };\n}\n\nclass simpleArc {\n    constructor(opts){\n        this.x = opts.x;\n        this.y = opts.y;\n        this.radius = opts.radius;\n    }\n    pathSegment(ctx, bounds, opts) {\n        const { x , y , radius  } = this;\n        bounds = bounds || {\n            start: 0,\n            end: TAU\n        };\n        ctx.arc(x, y, radius, bounds.end, bounds.start, true);\n        return !opts.bounds;\n    }\n    interpolate(point) {\n        const { x , y , radius  } = this;\n        const angle = point.angle;\n        return {\n            x: x + Math.cos(angle) * radius,\n            y: y + Math.sin(angle) * radius,\n            angle\n        };\n    }\n}\n\nfunction _getTarget(source) {\n    const { chart , fill , line  } = source;\n    if (isNumberFinite(fill)) {\n        return getLineByIndex(chart, fill);\n    }\n    if (fill === 'stack') {\n        return _buildStackLine(source);\n    }\n    if (fill === 'shape') {\n        return true;\n    }\n    const boundary = computeBoundary(source);\n    if (boundary instanceof simpleArc) {\n        return boundary;\n    }\n    return _createBoundaryLine(boundary, line);\n}\n function getLineByIndex(chart, index) {\n    const meta = chart.getDatasetMeta(index);\n    const visible = meta && chart.isDatasetVisible(index);\n    return visible ? meta.dataset : null;\n}\nfunction computeBoundary(source) {\n    const scale = source.scale || {};\n    if (scale.getPointPositionForValue) {\n        return computeCircularBoundary(source);\n    }\n    return computeLinearBoundary(source);\n}\nfunction computeLinearBoundary(source) {\n    const { scale ={} , fill  } = source;\n    const pixel = _getTargetPixel(fill, scale);\n    if (isNumberFinite(pixel)) {\n        const horizontal = scale.isHorizontal();\n        return {\n            x: horizontal ? pixel : null,\n            y: horizontal ? null : pixel\n        };\n    }\n    return null;\n}\nfunction computeCircularBoundary(source) {\n    const { scale , fill  } = source;\n    const options = scale.options;\n    const length = scale.getLabels().length;\n    const start = options.reverse ? scale.max : scale.min;\n    const value = _getTargetValue(fill, scale, start);\n    const target = [];\n    if (options.grid.circular) {\n        const center = scale.getPointPositionForValue(0, start);\n        return new simpleArc({\n            x: center.x,\n            y: center.y,\n            radius: scale.getDistanceFromCenterForValue(value)\n        });\n    }\n    for(let i = 0; i < length; ++i){\n        target.push(scale.getPointPositionForValue(i, value));\n    }\n    return target;\n}\n\nfunction _drawfill(ctx, source, area) {\n    const target = _getTarget(source);\n    const { chart , index , line , scale , axis  } = source;\n    const lineOpts = line.options;\n    const fillOption = lineOpts.fill;\n    const color = lineOpts.backgroundColor;\n    const { above =color , below =color  } = fillOption || {};\n    const meta = chart.getDatasetMeta(index);\n    const clip = getDatasetClipArea(chart, meta);\n    if (target && line.points.length) {\n        clipArea(ctx, area);\n        doFill(ctx, {\n            line,\n            target,\n            above,\n            below,\n            area,\n            scale,\n            axis,\n            clip\n        });\n        unclipArea(ctx);\n    }\n}\nfunction doFill(ctx, cfg) {\n    const { line , target , above , below , area , scale , clip  } = cfg;\n    const property = line._loop ? 'angle' : cfg.axis;\n    ctx.save();\n    let fillColor = below;\n    if (below !== above) {\n        if (property === 'x') {\n            clipVertical(ctx, target, area.top);\n            fill(ctx, {\n                line,\n                target,\n                color: above,\n                scale,\n                property,\n                clip\n            });\n            ctx.restore();\n            ctx.save();\n            clipVertical(ctx, target, area.bottom);\n        } else if (property === 'y') {\n            clipHorizontal(ctx, target, area.left);\n            fill(ctx, {\n                line,\n                target,\n                color: below,\n                scale,\n                property,\n                clip\n            });\n            ctx.restore();\n            ctx.save();\n            clipHorizontal(ctx, target, area.right);\n            fillColor = above;\n        }\n    }\n    fill(ctx, {\n        line,\n        target,\n        color: fillColor,\n        scale,\n        property,\n        clip\n    });\n    ctx.restore();\n}\nfunction clipVertical(ctx, target, clipY) {\n    const { segments , points  } = target;\n    let first = true;\n    let lineLoop = false;\n    ctx.beginPath();\n    for (const segment of segments){\n        const { start , end  } = segment;\n        const firstPoint = points[start];\n        const lastPoint = points[_findSegmentEnd(start, end, points)];\n        if (first) {\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            first = false;\n        } else {\n            ctx.lineTo(firstPoint.x, clipY);\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n        }\n        lineLoop = !!target.pathSegment(ctx, segment, {\n            move: lineLoop\n        });\n        if (lineLoop) {\n            ctx.closePath();\n        } else {\n            ctx.lineTo(lastPoint.x, clipY);\n        }\n    }\n    ctx.lineTo(target.first().x, clipY);\n    ctx.closePath();\n    ctx.clip();\n}\nfunction clipHorizontal(ctx, target, clipX) {\n    const { segments , points  } = target;\n    let first = true;\n    let lineLoop = false;\n    ctx.beginPath();\n    for (const segment of segments){\n        const { start , end  } = segment;\n        const firstPoint = points[start];\n        const lastPoint = points[_findSegmentEnd(start, end, points)];\n        if (first) {\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            first = false;\n        } else {\n            ctx.lineTo(clipX, firstPoint.y);\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n        }\n        lineLoop = !!target.pathSegment(ctx, segment, {\n            move: lineLoop\n        });\n        if (lineLoop) {\n            ctx.closePath();\n        } else {\n            ctx.lineTo(clipX, lastPoint.y);\n        }\n    }\n    ctx.lineTo(clipX, target.first().y);\n    ctx.closePath();\n    ctx.clip();\n}\nfunction fill(ctx, cfg) {\n    const { line , target , property , color , scale , clip  } = cfg;\n    const segments = _segments(line, target, property);\n    for (const { source: src , target: tgt , start , end  } of segments){\n        const { style: { backgroundColor =color  } = {}  } = src;\n        const notShape = target !== true;\n        ctx.save();\n        ctx.fillStyle = backgroundColor;\n        clipBounds(ctx, scale, clip, notShape && _getBounds(property, start, end));\n        ctx.beginPath();\n        const lineLoop = !!line.pathSegment(ctx, src);\n        let loop;\n        if (notShape) {\n            if (lineLoop) {\n                ctx.closePath();\n            } else {\n                interpolatedLineTo(ctx, target, end, property);\n            }\n            const targetLoop = !!target.pathSegment(ctx, tgt, {\n                move: lineLoop,\n                reverse: true\n            });\n            loop = lineLoop && targetLoop;\n            if (!loop) {\n                interpolatedLineTo(ctx, target, start, property);\n            }\n        }\n        ctx.closePath();\n        ctx.fill(loop ? 'evenodd' : 'nonzero');\n        ctx.restore();\n    }\n}\nfunction clipBounds(ctx, scale, clip, bounds) {\n    const chartArea = scale.chart.chartArea;\n    const { property , start , end  } = bounds || {};\n    if (property === 'x' || property === 'y') {\n        let left, top, right, bottom;\n        if (property === 'x') {\n            left = start;\n            top = chartArea.top;\n            right = end;\n            bottom = chartArea.bottom;\n        } else {\n            left = chartArea.left;\n            top = start;\n            right = chartArea.right;\n            bottom = end;\n        }\n        ctx.beginPath();\n        if (clip) {\n            left = Math.max(left, clip.left);\n            right = Math.min(right, clip.right);\n            top = Math.max(top, clip.top);\n            bottom = Math.min(bottom, clip.bottom);\n        }\n        ctx.rect(left, top, right - left, bottom - top);\n        ctx.clip();\n    }\n}\nfunction interpolatedLineTo(ctx, target, point, property) {\n    const interpolatedPoint = target.interpolate(point, property);\n    if (interpolatedPoint) {\n        ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\n    }\n}\n\nvar index = {\n    id: 'filler',\n    afterDatasetsUpdate (chart, _args, options) {\n        const count = (chart.data.datasets || []).length;\n        const sources = [];\n        let meta, i, line, source;\n        for(i = 0; i < count; ++i){\n            meta = chart.getDatasetMeta(i);\n            line = meta.dataset;\n            source = null;\n            if (line && line.options && line instanceof LineElement) {\n                source = {\n                    visible: chart.isDatasetVisible(i),\n                    index: i,\n                    fill: _decodeFill(line, i, count),\n                    chart,\n                    axis: meta.controller.options.indexAxis,\n                    scale: meta.vScale,\n                    line\n                };\n            }\n            meta.$filler = source;\n            sources.push(source);\n        }\n        for(i = 0; i < count; ++i){\n            source = sources[i];\n            if (!source || source.fill === false) {\n                continue;\n            }\n            source.fill = _resolveTarget(sources, i, options.propagate);\n        }\n    },\n    beforeDraw (chart, _args, options) {\n        const draw = options.drawTime === 'beforeDraw';\n        const metasets = chart.getSortedVisibleDatasetMetas();\n        const area = chart.chartArea;\n        for(let i = metasets.length - 1; i >= 0; --i){\n            const source = metasets[i].$filler;\n            if (!source) {\n                continue;\n            }\n            source.line.updateControlPoints(area, source.axis);\n            if (draw && source.fill) {\n                _drawfill(chart.ctx, source, area);\n            }\n        }\n    },\n    beforeDatasetsDraw (chart, _args, options) {\n        if (options.drawTime !== 'beforeDatasetsDraw') {\n            return;\n        }\n        const metasets = chart.getSortedVisibleDatasetMetas();\n        for(let i = metasets.length - 1; i >= 0; --i){\n            const source = metasets[i].$filler;\n            if (_shouldApplyFill(source)) {\n                _drawfill(chart.ctx, source, chart.chartArea);\n            }\n        }\n    },\n    beforeDatasetDraw (chart, args, options) {\n        const source = args.meta.$filler;\n        if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n            return;\n        }\n        _drawfill(chart.ctx, source, chart.chartArea);\n    },\n    defaults: {\n        propagate: true,\n        drawTime: 'beforeDatasetDraw'\n    }\n};\n\nconst getBoxSize = (labelOpts, fontSize)=>{\n    let { boxHeight =fontSize , boxWidth =fontSize  } = labelOpts;\n    if (labelOpts.usePointStyle) {\n        boxHeight = Math.min(boxHeight, fontSize);\n        boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n    }\n    return {\n        boxWidth,\n        boxHeight,\n        itemHeight: Math.max(fontSize, boxHeight)\n    };\n};\nconst itemsEqual = (a, b)=>a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\nclass Legend extends Element {\n constructor(config){\n        super();\n        this._added = false;\n        this.legendHitBoxes = [];\n this._hoveredItem = null;\n        this.doughnutMode = false;\n        this.chart = config.chart;\n        this.options = config.options;\n        this.ctx = config.ctx;\n        this.legendItems = undefined;\n        this.columnSizes = undefined;\n        this.lineWidths = undefined;\n        this.maxHeight = undefined;\n        this.maxWidth = undefined;\n        this.top = undefined;\n        this.bottom = undefined;\n        this.left = undefined;\n        this.right = undefined;\n        this.height = undefined;\n        this.width = undefined;\n        this._margins = undefined;\n        this.position = undefined;\n        this.weight = undefined;\n        this.fullSize = undefined;\n    }\n    update(maxWidth, maxHeight, margins) {\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n        this._margins = margins;\n        this.setDimensions();\n        this.buildLabels();\n        this.fit();\n    }\n    setDimensions() {\n        if (this.isHorizontal()) {\n            this.width = this.maxWidth;\n            this.left = this._margins.left;\n            this.right = this.width;\n        } else {\n            this.height = this.maxHeight;\n            this.top = this._margins.top;\n            this.bottom = this.height;\n        }\n    }\n    buildLabels() {\n        const labelOpts = this.options.labels || {};\n        let legendItems = callback(labelOpts.generateLabels, [\n            this.chart\n        ], this) || [];\n        if (labelOpts.filter) {\n            legendItems = legendItems.filter((item)=>labelOpts.filter(item, this.chart.data));\n        }\n        if (labelOpts.sort) {\n            legendItems = legendItems.sort((a, b)=>labelOpts.sort(a, b, this.chart.data));\n        }\n        if (this.options.reverse) {\n            legendItems.reverse();\n        }\n        this.legendItems = legendItems;\n    }\n    fit() {\n        const { options , ctx  } = this;\n        if (!options.display) {\n            this.width = this.height = 0;\n            return;\n        }\n        const labelOpts = options.labels;\n        const labelFont = toFont(labelOpts.font);\n        const fontSize = labelFont.size;\n        const titleHeight = this._computeTitleHeight();\n        const { boxWidth , itemHeight  } = getBoxSize(labelOpts, fontSize);\n        let width, height;\n        ctx.font = labelFont.string;\n        if (this.isHorizontal()) {\n            width = this.maxWidth;\n            height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n        } else {\n            height = this.maxHeight;\n            width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;\n        }\n        this.width = Math.min(width, options.maxWidth || this.maxWidth);\n        this.height = Math.min(height, options.maxHeight || this.maxHeight);\n    }\n _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n        const { ctx , maxWidth , options: { labels: { padding  }  }  } = this;\n        const hitboxes = this.legendHitBoxes = [];\n        const lineWidths = this.lineWidths = [\n            0\n        ];\n        const lineHeight = itemHeight + padding;\n        let totalHeight = titleHeight;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        let row = -1;\n        let top = -lineHeight;\n        this.legendItems.forEach((legendItem, i)=>{\n            const itemWidth = boxWidth + fontSize / 2 + ctx.measureText(legendItem.text).width;\n            if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n                totalHeight += lineHeight;\n                lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n                top += lineHeight;\n                row++;\n            }\n            hitboxes[i] = {\n                left: 0,\n                top,\n                row,\n                width: itemWidth,\n                height: itemHeight\n            };\n            lineWidths[lineWidths.length - 1] += itemWidth + padding;\n        });\n        return totalHeight;\n    }\n    _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {\n        const { ctx , maxHeight , options: { labels: { padding  }  }  } = this;\n        const hitboxes = this.legendHitBoxes = [];\n        const columnSizes = this.columnSizes = [];\n        const heightLimit = maxHeight - titleHeight;\n        let totalWidth = padding;\n        let currentColWidth = 0;\n        let currentColHeight = 0;\n        let left = 0;\n        let col = 0;\n        this.legendItems.forEach((legendItem, i)=>{\n            const { itemWidth , itemHeight  } = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);\n            if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n                totalWidth += currentColWidth + padding;\n                columnSizes.push({\n                    width: currentColWidth,\n                    height: currentColHeight\n                });\n                left += currentColWidth + padding;\n                col++;\n                currentColWidth = currentColHeight = 0;\n            }\n            hitboxes[i] = {\n                left,\n                top: currentColHeight,\n                col,\n                width: itemWidth,\n                height: itemHeight\n            };\n            currentColWidth = Math.max(currentColWidth, itemWidth);\n            currentColHeight += itemHeight + padding;\n        });\n        totalWidth += currentColWidth;\n        columnSizes.push({\n            width: currentColWidth,\n            height: currentColHeight\n        });\n        return totalWidth;\n    }\n    adjustHitBoxes() {\n        if (!this.options.display) {\n            return;\n        }\n        const titleHeight = this._computeTitleHeight();\n        const { legendHitBoxes: hitboxes , options: { align , labels: { padding  } , rtl  }  } = this;\n        const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n        if (this.isHorizontal()) {\n            let row = 0;\n            let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n            for (const hitbox of hitboxes){\n                if (row !== hitbox.row) {\n                    row = hitbox.row;\n                    left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n                }\n                hitbox.top += this.top + titleHeight + padding;\n                hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n                left += hitbox.width + padding;\n            }\n        } else {\n            let col = 0;\n            let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n            for (const hitbox of hitboxes){\n                if (hitbox.col !== col) {\n                    col = hitbox.col;\n                    top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n                }\n                hitbox.top = top;\n                hitbox.left += this.left + padding;\n                hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\n                top += hitbox.height + padding;\n            }\n        }\n    }\n    isHorizontal() {\n        return this.options.position === 'top' || this.options.position === 'bottom';\n    }\n    draw() {\n        if (this.options.display) {\n            const ctx = this.ctx;\n            clipArea(ctx, this);\n            this._draw();\n            unclipArea(ctx);\n        }\n    }\n _draw() {\n        const { options: opts , columnSizes , lineWidths , ctx  } = this;\n        const { align , labels: labelOpts  } = opts;\n        const defaultColor = defaults.color;\n        const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n        const labelFont = toFont(labelOpts.font);\n        const { padding  } = labelOpts;\n        const fontSize = labelFont.size;\n        const halfFontSize = fontSize / 2;\n        let cursor;\n        this.drawTitle();\n        ctx.textAlign = rtlHelper.textAlign('left');\n        ctx.textBaseline = 'middle';\n        ctx.lineWidth = 0.5;\n        ctx.font = labelFont.string;\n        const { boxWidth , boxHeight , itemHeight  } = getBoxSize(labelOpts, fontSize);\n        const drawLegendBox = function(x, y, legendItem) {\n            if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n                return;\n            }\n            ctx.save();\n            const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n            ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n            ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n            ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n            ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n            ctx.lineWidth = lineWidth;\n            ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n            ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n            if (labelOpts.usePointStyle) {\n                const drawOptions = {\n                    radius: boxHeight * Math.SQRT2 / 2,\n                    pointStyle: legendItem.pointStyle,\n                    rotation: legendItem.rotation,\n                    borderWidth: lineWidth\n                };\n                const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n                const centerY = y + halfFontSize;\n                drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n            } else {\n                const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n                const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n                const borderRadius = toTRBLCorners(legendItem.borderRadius);\n                ctx.beginPath();\n                if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                    addRoundedRectPath(ctx, {\n                        x: xBoxLeft,\n                        y: yBoxTop,\n                        w: boxWidth,\n                        h: boxHeight,\n                        radius: borderRadius\n                    });\n                } else {\n                    ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n                }\n                ctx.fill();\n                if (lineWidth !== 0) {\n                    ctx.stroke();\n                }\n            }\n            ctx.restore();\n        };\n        const fillText = function(x, y, legendItem) {\n            renderText(ctx, legendItem.text, x, y + itemHeight / 2, labelFont, {\n                strikethrough: legendItem.hidden,\n                textAlign: rtlHelper.textAlign(legendItem.textAlign)\n            });\n        };\n        const isHorizontal = this.isHorizontal();\n        const titleHeight = this._computeTitleHeight();\n        if (isHorizontal) {\n            cursor = {\n                x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n                y: this.top + padding + titleHeight,\n                line: 0\n            };\n        } else {\n            cursor = {\n                x: this.left + padding,\n                y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n                line: 0\n            };\n        }\n        overrideTextDirection(this.ctx, opts.textDirection);\n        const lineHeight = itemHeight + padding;\n        this.legendItems.forEach((legendItem, i)=>{\n            ctx.strokeStyle = legendItem.fontColor;\n            ctx.fillStyle = legendItem.fontColor;\n            const textWidth = ctx.measureText(legendItem.text).width;\n            const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n            const width = boxWidth + halfFontSize + textWidth;\n            let x = cursor.x;\n            let y = cursor.y;\n            rtlHelper.setWidth(this.width);\n            if (isHorizontal) {\n                if (i > 0 && x + width + padding > this.right) {\n                    y = cursor.y += lineHeight;\n                    cursor.line++;\n                    x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n                }\n            } else if (i > 0 && y + lineHeight > this.bottom) {\n                x = cursor.x = x + columnSizes[cursor.line].width + padding;\n                cursor.line++;\n                y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n            }\n            const realX = rtlHelper.x(x);\n            drawLegendBox(realX, y, legendItem);\n            x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n            fillText(rtlHelper.x(x), y, legendItem);\n            if (isHorizontal) {\n                cursor.x += width + padding;\n            } else if (typeof legendItem.text !== 'string') {\n                const fontLineHeight = labelFont.lineHeight;\n                cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight) + padding;\n            } else {\n                cursor.y += lineHeight;\n            }\n        });\n        restoreTextDirection(this.ctx, opts.textDirection);\n    }\n drawTitle() {\n        const opts = this.options;\n        const titleOpts = opts.title;\n        const titleFont = toFont(titleOpts.font);\n        const titlePadding = toPadding(titleOpts.padding);\n        if (!titleOpts.display) {\n            return;\n        }\n        const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n        const ctx = this.ctx;\n        const position = titleOpts.position;\n        const halfFontSize = titleFont.size / 2;\n        const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n        let y;\n        let left = this.left;\n        let maxWidth = this.width;\n        if (this.isHorizontal()) {\n            maxWidth = Math.max(...this.lineWidths);\n            y = this.top + topPaddingPlusHalfFontSize;\n            left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n        } else {\n            const maxHeight = this.columnSizes.reduce((acc, size)=>Math.max(acc, size.height), 0);\n            y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n        }\n        const x = _alignStartEnd(position, left, left + maxWidth);\n        ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n        ctx.textBaseline = 'middle';\n        ctx.strokeStyle = titleOpts.color;\n        ctx.fillStyle = titleOpts.color;\n        ctx.font = titleFont.string;\n        renderText(ctx, titleOpts.text, x, y, titleFont);\n    }\n _computeTitleHeight() {\n        const titleOpts = this.options.title;\n        const titleFont = toFont(titleOpts.font);\n        const titlePadding = toPadding(titleOpts.padding);\n        return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n    }\n _getLegendItemAt(x, y) {\n        let i, hitBox, lh;\n        if (_isBetween(x, this.left, this.right) && _isBetween(y, this.top, this.bottom)) {\n            lh = this.legendHitBoxes;\n            for(i = 0; i < lh.length; ++i){\n                hitBox = lh[i];\n                if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width) && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n                    return this.legendItems[i];\n                }\n            }\n        }\n        return null;\n    }\n handleEvent(e) {\n        const opts = this.options;\n        if (!isListened(e.type, opts)) {\n            return;\n        }\n        const hoveredItem = this._getLegendItemAt(e.x, e.y);\n        if (e.type === 'mousemove' || e.type === 'mouseout') {\n            const previous = this._hoveredItem;\n            const sameItem = itemsEqual(previous, hoveredItem);\n            if (previous && !sameItem) {\n                callback(opts.onLeave, [\n                    e,\n                    previous,\n                    this\n                ], this);\n            }\n            this._hoveredItem = hoveredItem;\n            if (hoveredItem && !sameItem) {\n                callback(opts.onHover, [\n                    e,\n                    hoveredItem,\n                    this\n                ], this);\n            }\n        } else if (hoveredItem) {\n            callback(opts.onClick, [\n                e,\n                hoveredItem,\n                this\n            ], this);\n        }\n    }\n}\nfunction calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {\n    const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);\n    const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);\n    return {\n        itemWidth,\n        itemHeight\n    };\n}\nfunction calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {\n    let legendItemText = legendItem.text;\n    if (legendItemText && typeof legendItemText !== 'string') {\n        legendItemText = legendItemText.reduce((a, b)=>a.length > b.length ? a : b);\n    }\n    return boxWidth + labelFont.size / 2 + ctx.measureText(legendItemText).width;\n}\nfunction calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {\n    let itemHeight = _itemHeight;\n    if (typeof legendItem.text !== 'string') {\n        itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);\n    }\n    return itemHeight;\n}\nfunction calculateLegendItemHeight(legendItem, fontLineHeight) {\n    const labelHeight = legendItem.text ? legendItem.text.length : 0;\n    return fontLineHeight * labelHeight;\n}\nfunction isListened(type, opts) {\n    if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n        return true;\n    }\n    if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n        return true;\n    }\n    return false;\n}\nvar plugin_legend = {\n    id: 'legend',\n _element: Legend,\n    start (chart, _args, options) {\n        const legend = chart.legend = new Legend({\n            ctx: chart.ctx,\n            options,\n            chart\n        });\n        layouts.configure(chart, legend, options);\n        layouts.addBox(chart, legend);\n    },\n    stop (chart) {\n        layouts.removeBox(chart, chart.legend);\n        delete chart.legend;\n    },\n    beforeUpdate (chart, _args, options) {\n        const legend = chart.legend;\n        layouts.configure(chart, legend, options);\n        legend.options = options;\n    },\n    afterUpdate (chart) {\n        const legend = chart.legend;\n        legend.buildLabels();\n        legend.adjustHitBoxes();\n    },\n    afterEvent (chart, args) {\n        if (!args.replay) {\n            chart.legend.handleEvent(args.event);\n        }\n    },\n    defaults: {\n        display: true,\n        position: 'top',\n        align: 'center',\n        fullSize: true,\n        reverse: false,\n        weight: 1000,\n        onClick (e, legendItem, legend) {\n            const index = legendItem.datasetIndex;\n            const ci = legend.chart;\n            if (ci.isDatasetVisible(index)) {\n                ci.hide(index);\n                legendItem.hidden = true;\n            } else {\n                ci.show(index);\n                legendItem.hidden = false;\n            }\n        },\n        onHover: null,\n        onLeave: null,\n        labels: {\n            color: (ctx)=>ctx.chart.options.color,\n            boxWidth: 40,\n            padding: 10,\n            generateLabels (chart) {\n                const datasets = chart.data.datasets;\n                const { labels: { usePointStyle , pointStyle , textAlign , color , useBorderRadius , borderRadius  }  } = chart.legend.options;\n                return chart._getSortedDatasetMetas().map((meta)=>{\n                    const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n                    const borderWidth = toPadding(style.borderWidth);\n                    return {\n                        text: datasets[meta.index].label,\n                        fillStyle: style.backgroundColor,\n                        fontColor: color,\n                        hidden: !meta.visible,\n                        lineCap: style.borderCapStyle,\n                        lineDash: style.borderDash,\n                        lineDashOffset: style.borderDashOffset,\n                        lineJoin: style.borderJoinStyle,\n                        lineWidth: (borderWidth.width + borderWidth.height) / 4,\n                        strokeStyle: style.borderColor,\n                        pointStyle: pointStyle || style.pointStyle,\n                        rotation: style.rotation,\n                        textAlign: textAlign || style.textAlign,\n                        borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n                        datasetIndex: meta.index\n                    };\n                }, this);\n            }\n        },\n        title: {\n            color: (ctx)=>ctx.chart.options.color,\n            display: false,\n            position: 'center',\n            text: ''\n        }\n    },\n    descriptors: {\n        _scriptable: (name)=>!name.startsWith('on'),\n        labels: {\n            _scriptable: (name)=>![\n                    'generateLabels',\n                    'filter',\n                    'sort'\n                ].includes(name)\n        }\n    }\n};\n\nclass Title extends Element {\n constructor(config){\n        super();\n        this.chart = config.chart;\n        this.options = config.options;\n        this.ctx = config.ctx;\n        this._padding = undefined;\n        this.top = undefined;\n        this.bottom = undefined;\n        this.left = undefined;\n        this.right = undefined;\n        this.width = undefined;\n        this.height = undefined;\n        this.position = undefined;\n        this.weight = undefined;\n        this.fullSize = undefined;\n    }\n    update(maxWidth, maxHeight) {\n        const opts = this.options;\n        this.left = 0;\n        this.top = 0;\n        if (!opts.display) {\n            this.width = this.height = this.right = this.bottom = 0;\n            return;\n        }\n        this.width = this.right = maxWidth;\n        this.height = this.bottom = maxHeight;\n        const lineCount = isArray(opts.text) ? opts.text.length : 1;\n        this._padding = toPadding(opts.padding);\n        const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n        if (this.isHorizontal()) {\n            this.height = textSize;\n        } else {\n            this.width = textSize;\n        }\n    }\n    isHorizontal() {\n        const pos = this.options.position;\n        return pos === 'top' || pos === 'bottom';\n    }\n    _drawArgs(offset) {\n        const { top , left , bottom , right , options  } = this;\n        const align = options.align;\n        let rotation = 0;\n        let maxWidth, titleX, titleY;\n        if (this.isHorizontal()) {\n            titleX = _alignStartEnd(align, left, right);\n            titleY = top + offset;\n            maxWidth = right - left;\n        } else {\n            if (options.position === 'left') {\n                titleX = left + offset;\n                titleY = _alignStartEnd(align, bottom, top);\n                rotation = PI * -0.5;\n            } else {\n                titleX = right - offset;\n                titleY = _alignStartEnd(align, top, bottom);\n                rotation = PI * 0.5;\n            }\n            maxWidth = bottom - top;\n        }\n        return {\n            titleX,\n            titleY,\n            maxWidth,\n            rotation\n        };\n    }\n    draw() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        if (!opts.display) {\n            return;\n        }\n        const fontOpts = toFont(opts.font);\n        const lineHeight = fontOpts.lineHeight;\n        const offset = lineHeight / 2 + this._padding.top;\n        const { titleX , titleY , maxWidth , rotation  } = this._drawArgs(offset);\n        renderText(ctx, opts.text, 0, 0, fontOpts, {\n            color: opts.color,\n            maxWidth,\n            rotation,\n            textAlign: _toLeftRightCenter(opts.align),\n            textBaseline: 'middle',\n            translation: [\n                titleX,\n                titleY\n            ]\n        });\n    }\n}\nfunction createTitle(chart, titleOpts) {\n    const title = new Title({\n        ctx: chart.ctx,\n        options: titleOpts,\n        chart\n    });\n    layouts.configure(chart, title, titleOpts);\n    layouts.addBox(chart, title);\n    chart.titleBlock = title;\n}\nvar plugin_title = {\n    id: 'title',\n _element: Title,\n    start (chart, _args, options) {\n        createTitle(chart, options);\n    },\n    stop (chart) {\n        const titleBlock = chart.titleBlock;\n        layouts.removeBox(chart, titleBlock);\n        delete chart.titleBlock;\n    },\n    beforeUpdate (chart, _args, options) {\n        const title = chart.titleBlock;\n        layouts.configure(chart, title, options);\n        title.options = options;\n    },\n    defaults: {\n        align: 'center',\n        display: false,\n        font: {\n            weight: 'bold'\n        },\n        fullSize: true,\n        padding: 10,\n        position: 'top',\n        text: '',\n        weight: 2000\n    },\n    defaultRoutes: {\n        color: 'color'\n    },\n    descriptors: {\n        _scriptable: true,\n        _indexable: false\n    }\n};\n\nconst map = new WeakMap();\nvar plugin_subtitle = {\n    id: 'subtitle',\n    start (chart, _args, options) {\n        const title = new Title({\n            ctx: chart.ctx,\n            options,\n            chart\n        });\n        layouts.configure(chart, title, options);\n        layouts.addBox(chart, title);\n        map.set(chart, title);\n    },\n    stop (chart) {\n        layouts.removeBox(chart, map.get(chart));\n        map.delete(chart);\n    },\n    beforeUpdate (chart, _args, options) {\n        const title = map.get(chart);\n        layouts.configure(chart, title, options);\n        title.options = options;\n    },\n    defaults: {\n        align: 'center',\n        display: false,\n        font: {\n            weight: 'normal'\n        },\n        fullSize: true,\n        padding: 0,\n        position: 'top',\n        text: '',\n        weight: 1500\n    },\n    defaultRoutes: {\n        color: 'color'\n    },\n    descriptors: {\n        _scriptable: true,\n        _indexable: false\n    }\n};\n\nconst positioners = {\n average (items) {\n        if (!items.length) {\n            return false;\n        }\n        let i, len;\n        let xSet = new Set();\n        let y = 0;\n        let count = 0;\n        for(i = 0, len = items.length; i < len; ++i){\n            const el = items[i].element;\n            if (el && el.hasValue()) {\n                const pos = el.tooltipPosition();\n                xSet.add(pos.x);\n                y += pos.y;\n                ++count;\n            }\n        }\n        if (count === 0 || xSet.size === 0) {\n            return false;\n        }\n        const xAverage = [\n            ...xSet\n        ].reduce((a, b)=>a + b) / xSet.size;\n        return {\n            x: xAverage,\n            y: y / count\n        };\n    },\n nearest (items, eventPosition) {\n        if (!items.length) {\n            return false;\n        }\n        let x = eventPosition.x;\n        let y = eventPosition.y;\n        let minDistance = Number.POSITIVE_INFINITY;\n        let i, len, nearestElement;\n        for(i = 0, len = items.length; i < len; ++i){\n            const el = items[i].element;\n            if (el && el.hasValue()) {\n                const center = el.getCenterPoint();\n                const d = distanceBetweenPoints(eventPosition, center);\n                if (d < minDistance) {\n                    minDistance = d;\n                    nearestElement = el;\n                }\n            }\n        }\n        if (nearestElement) {\n            const tp = nearestElement.tooltipPosition();\n            x = tp.x;\n            y = tp.y;\n        }\n        return {\n            x,\n            y\n        };\n    }\n};\nfunction pushOrConcat(base, toPush) {\n    if (toPush) {\n        if (isArray(toPush)) {\n            Array.prototype.push.apply(base, toPush);\n        } else {\n            base.push(toPush);\n        }\n    }\n    return base;\n}\n function splitNewlines(str) {\n    if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n        return str.split('\\n');\n    }\n    return str;\n}\n function createTooltipItem(chart, item) {\n    const { element , datasetIndex , index  } = item;\n    const controller = chart.getDatasetMeta(datasetIndex).controller;\n    const { label , value  } = controller.getLabelAndValue(index);\n    return {\n        chart,\n        label,\n        parsed: controller.getParsed(index),\n        raw: chart.data.datasets[datasetIndex].data[index],\n        formattedValue: value,\n        dataset: controller.getDataset(),\n        dataIndex: index,\n        datasetIndex,\n        element\n    };\n}\n function getTooltipSize(tooltip, options) {\n    const ctx = tooltip.chart.ctx;\n    const { body , footer , title  } = tooltip;\n    const { boxWidth , boxHeight  } = options;\n    const bodyFont = toFont(options.bodyFont);\n    const titleFont = toFont(options.titleFont);\n    const footerFont = toFont(options.footerFont);\n    const titleLineCount = title.length;\n    const footerLineCount = footer.length;\n    const bodyLineItemCount = body.length;\n    const padding = toPadding(options.padding);\n    let height = padding.height;\n    let width = 0;\n    let combinedBodyLength = body.reduce((count, bodyItem)=>count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n    combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n    if (titleLineCount) {\n        height += titleLineCount * titleFont.lineHeight + (titleLineCount - 1) * options.titleSpacing + options.titleMarginBottom;\n    }\n    if (combinedBodyLength) {\n        const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n        height += bodyLineItemCount * bodyLineHeight + (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight + (combinedBodyLength - 1) * options.bodySpacing;\n    }\n    if (footerLineCount) {\n        height += options.footerMarginTop + footerLineCount * footerFont.lineHeight + (footerLineCount - 1) * options.footerSpacing;\n    }\n    let widthPadding = 0;\n    const maxLineWidth = function(line) {\n        width = Math.max(width, ctx.measureText(line).width + widthPadding);\n    };\n    ctx.save();\n    ctx.font = titleFont.string;\n    each(tooltip.title, maxLineWidth);\n    ctx.font = bodyFont.string;\n    each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n    widthPadding = options.displayColors ? boxWidth + 2 + options.boxPadding : 0;\n    each(body, (bodyItem)=>{\n        each(bodyItem.before, maxLineWidth);\n        each(bodyItem.lines, maxLineWidth);\n        each(bodyItem.after, maxLineWidth);\n    });\n    widthPadding = 0;\n    ctx.font = footerFont.string;\n    each(tooltip.footer, maxLineWidth);\n    ctx.restore();\n    width += padding.width;\n    return {\n        width,\n        height\n    };\n}\nfunction determineYAlign(chart, size) {\n    const { y , height  } = size;\n    if (y < height / 2) {\n        return 'top';\n    } else if (y > chart.height - height / 2) {\n        return 'bottom';\n    }\n    return 'center';\n}\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n    const { x , width  } = size;\n    const caret = options.caretSize + options.caretPadding;\n    if (xAlign === 'left' && x + width + caret > chart.width) {\n        return true;\n    }\n    if (xAlign === 'right' && x - width - caret < 0) {\n        return true;\n    }\n}\nfunction determineXAlign(chart, options, size, yAlign) {\n    const { x , width  } = size;\n    const { width: chartWidth , chartArea: { left , right  }  } = chart;\n    let xAlign = 'center';\n    if (yAlign === 'center') {\n        xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n    } else if (x <= width / 2) {\n        xAlign = 'left';\n    } else if (x >= chartWidth - width / 2) {\n        xAlign = 'right';\n    }\n    if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n        xAlign = 'center';\n    }\n    return xAlign;\n}\n function determineAlignment(chart, options, size) {\n    const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n    return {\n        xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n        yAlign\n    };\n}\nfunction alignX(size, xAlign) {\n    let { x , width  } = size;\n    if (xAlign === 'right') {\n        x -= width;\n    } else if (xAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nfunction alignY(size, yAlign, paddingAndSize) {\n    let { y , height  } = size;\n    if (yAlign === 'top') {\n        y += paddingAndSize;\n    } else if (yAlign === 'bottom') {\n        y -= height + paddingAndSize;\n    } else {\n        y -= height / 2;\n    }\n    return y;\n}\n function getBackgroundPoint(options, size, alignment, chart) {\n    const { caretSize , caretPadding , cornerRadius  } = options;\n    const { xAlign , yAlign  } = alignment;\n    const paddingAndSize = caretSize + caretPadding;\n    const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(cornerRadius);\n    let x = alignX(size, xAlign);\n    const y = alignY(size, yAlign, paddingAndSize);\n    if (yAlign === 'center') {\n        if (xAlign === 'left') {\n            x += paddingAndSize;\n        } else if (xAlign === 'right') {\n            x -= paddingAndSize;\n        }\n    } else if (xAlign === 'left') {\n        x -= Math.max(topLeft, bottomLeft) + caretSize;\n    } else if (xAlign === 'right') {\n        x += Math.max(topRight, bottomRight) + caretSize;\n    }\n    return {\n        x: _limitValue(x, 0, chart.width - size.width),\n        y: _limitValue(y, 0, chart.height - size.height)\n    };\n}\nfunction getAlignedX(tooltip, align, options) {\n    const padding = toPadding(options.padding);\n    return align === 'center' ? tooltip.x + tooltip.width / 2 : align === 'right' ? tooltip.x + tooltip.width - padding.right : tooltip.x + padding.left;\n}\n function getBeforeAfterBodyLines(callback) {\n    return pushOrConcat([], splitNewlines(callback));\n}\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n    return createContext(parent, {\n        tooltip,\n        tooltipItems,\n        type: 'tooltip'\n    });\n}\nfunction overrideCallbacks(callbacks, context) {\n    const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n    return override ? callbacks.override(override) : callbacks;\n}\nconst defaultCallbacks = {\n    beforeTitle: noop,\n    title (tooltipItems) {\n        if (tooltipItems.length > 0) {\n            const item = tooltipItems[0];\n            const labels = item.chart.data.labels;\n            const labelCount = labels ? labels.length : 0;\n            if (this && this.options && this.options.mode === 'dataset') {\n                return item.dataset.label || '';\n            } else if (item.label) {\n                return item.label;\n            } else if (labelCount > 0 && item.dataIndex < labelCount) {\n                return labels[item.dataIndex];\n            }\n        }\n        return '';\n    },\n    afterTitle: noop,\n    beforeBody: noop,\n    beforeLabel: noop,\n    label (tooltipItem) {\n        if (this && this.options && this.options.mode === 'dataset') {\n            return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n        }\n        let label = tooltipItem.dataset.label || '';\n        if (label) {\n            label += ': ';\n        }\n        const value = tooltipItem.formattedValue;\n        if (!isNullOrUndef(value)) {\n            label += value;\n        }\n        return label;\n    },\n    labelColor (tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n            borderColor: options.borderColor,\n            backgroundColor: options.backgroundColor,\n            borderWidth: options.borderWidth,\n            borderDash: options.borderDash,\n            borderDashOffset: options.borderDashOffset,\n            borderRadius: 0\n        };\n    },\n    labelTextColor () {\n        return this.options.bodyColor;\n    },\n    labelPointStyle (tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n            pointStyle: options.pointStyle,\n            rotation: options.rotation\n        };\n    },\n    afterLabel: noop,\n    afterBody: noop,\n    beforeFooter: noop,\n    footer: noop,\n    afterFooter: noop\n};\n function invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n    const result = callbacks[name].call(ctx, arg);\n    if (typeof result === 'undefined') {\n        return defaultCallbacks[name].call(ctx, arg);\n    }\n    return result;\n}\nclass Tooltip extends Element {\n static positioners = positioners;\n    constructor(config){\n        super();\n        this.opacity = 0;\n        this._active = [];\n        this._eventPosition = undefined;\n        this._size = undefined;\n        this._cachedAnimations = undefined;\n        this._tooltipItems = [];\n        this.$animations = undefined;\n        this.$context = undefined;\n        this.chart = config.chart;\n        this.options = config.options;\n        this.dataPoints = undefined;\n        this.title = undefined;\n        this.beforeBody = undefined;\n        this.body = undefined;\n        this.afterBody = undefined;\n        this.footer = undefined;\n        this.xAlign = undefined;\n        this.yAlign = undefined;\n        this.x = undefined;\n        this.y = undefined;\n        this.height = undefined;\n        this.width = undefined;\n        this.caretX = undefined;\n        this.caretY = undefined;\n        this.labelColors = undefined;\n        this.labelPointStyles = undefined;\n        this.labelTextColors = undefined;\n    }\n    initialize(options) {\n        this.options = options;\n        this._cachedAnimations = undefined;\n        this.$context = undefined;\n    }\n _resolveAnimations() {\n        const cached = this._cachedAnimations;\n        if (cached) {\n            return cached;\n        }\n        const chart = this.chart;\n        const options = this.options.setContext(this.getContext());\n        const opts = options.enabled && chart.options.animation && options.animations;\n        const animations = new Animations(this.chart, opts);\n        if (opts._cacheable) {\n            this._cachedAnimations = Object.freeze(animations);\n        }\n        return animations;\n    }\n getContext() {\n        return this.$context || (this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n    }\n    getTitle(context, options) {\n        const { callbacks  } = options;\n        const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n        const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n        const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n        let lines = [];\n        lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n        lines = pushOrConcat(lines, splitNewlines(title));\n        lines = pushOrConcat(lines, splitNewlines(afterTitle));\n        return lines;\n    }\n    getBeforeBody(tooltipItems, options) {\n        return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems));\n    }\n    getBody(tooltipItems, options) {\n        const { callbacks  } = options;\n        const bodyItems = [];\n        each(tooltipItems, (context)=>{\n            const bodyItem = {\n                before: [],\n                lines: [],\n                after: []\n            };\n            const scoped = overrideCallbacks(callbacks, context);\n            pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n            pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n            pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n            bodyItems.push(bodyItem);\n        });\n        return bodyItems;\n    }\n    getAfterBody(tooltipItems, options) {\n        return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems));\n    }\n    getFooter(tooltipItems, options) {\n        const { callbacks  } = options;\n        const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n        const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n        const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n        let lines = [];\n        lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n        lines = pushOrConcat(lines, splitNewlines(footer));\n        lines = pushOrConcat(lines, splitNewlines(afterFooter));\n        return lines;\n    }\n _createItems(options) {\n        const active = this._active;\n        const data = this.chart.data;\n        const labelColors = [];\n        const labelPointStyles = [];\n        const labelTextColors = [];\n        let tooltipItems = [];\n        let i, len;\n        for(i = 0, len = active.length; i < len; ++i){\n            tooltipItems.push(createTooltipItem(this.chart, active[i]));\n        }\n        if (options.filter) {\n            tooltipItems = tooltipItems.filter((element, index, array)=>options.filter(element, index, array, data));\n        }\n        if (options.itemSort) {\n            tooltipItems = tooltipItems.sort((a, b)=>options.itemSort(a, b, data));\n        }\n        each(tooltipItems, (context)=>{\n            const scoped = overrideCallbacks(options.callbacks, context);\n            labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n            labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n            labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n        });\n        this.labelColors = labelColors;\n        this.labelPointStyles = labelPointStyles;\n        this.labelTextColors = labelTextColors;\n        this.dataPoints = tooltipItems;\n        return tooltipItems;\n    }\n    update(changed, replay) {\n        const options = this.options.setContext(this.getContext());\n        const active = this._active;\n        let properties;\n        let tooltipItems = [];\n        if (!active.length) {\n            if (this.opacity !== 0) {\n                properties = {\n                    opacity: 0\n                };\n            }\n        } else {\n            const position = positioners[options.position].call(this, active, this._eventPosition);\n            tooltipItems = this._createItems(options);\n            this.title = this.getTitle(tooltipItems, options);\n            this.beforeBody = this.getBeforeBody(tooltipItems, options);\n            this.body = this.getBody(tooltipItems, options);\n            this.afterBody = this.getAfterBody(tooltipItems, options);\n            this.footer = this.getFooter(tooltipItems, options);\n            const size = this._size = getTooltipSize(this, options);\n            const positionAndSize = Object.assign({}, position, size);\n            const alignment = determineAlignment(this.chart, options, positionAndSize);\n            const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n            this.xAlign = alignment.xAlign;\n            this.yAlign = alignment.yAlign;\n            properties = {\n                opacity: 1,\n                x: backgroundPoint.x,\n                y: backgroundPoint.y,\n                width: size.width,\n                height: size.height,\n                caretX: position.x,\n                caretY: position.y\n            };\n        }\n        this._tooltipItems = tooltipItems;\n        this.$context = undefined;\n        if (properties) {\n            this._resolveAnimations().update(this, properties);\n        }\n        if (changed && options.external) {\n            options.external.call(this, {\n                chart: this.chart,\n                tooltip: this,\n                replay\n            });\n        }\n    }\n    drawCaret(tooltipPoint, ctx, size, options) {\n        const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n        ctx.lineTo(caretPosition.x1, caretPosition.y1);\n        ctx.lineTo(caretPosition.x2, caretPosition.y2);\n        ctx.lineTo(caretPosition.x3, caretPosition.y3);\n    }\n    getCaretPosition(tooltipPoint, size, options) {\n        const { xAlign , yAlign  } = this;\n        const { caretSize , cornerRadius  } = options;\n        const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(cornerRadius);\n        const { x: ptX , y: ptY  } = tooltipPoint;\n        const { width , height  } = size;\n        let x1, x2, x3, y1, y2, y3;\n        if (yAlign === 'center') {\n            y2 = ptY + height / 2;\n            if (xAlign === 'left') {\n                x1 = ptX;\n                x2 = x1 - caretSize;\n                y1 = y2 + caretSize;\n                y3 = y2 - caretSize;\n            } else {\n                x1 = ptX + width;\n                x2 = x1 + caretSize;\n                y1 = y2 - caretSize;\n                y3 = y2 + caretSize;\n            }\n            x3 = x1;\n        } else {\n            if (xAlign === 'left') {\n                x2 = ptX + Math.max(topLeft, bottomLeft) + caretSize;\n            } else if (xAlign === 'right') {\n                x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n            } else {\n                x2 = this.caretX;\n            }\n            if (yAlign === 'top') {\n                y1 = ptY;\n                y2 = y1 - caretSize;\n                x1 = x2 - caretSize;\n                x3 = x2 + caretSize;\n            } else {\n                y1 = ptY + height;\n                y2 = y1 + caretSize;\n                x1 = x2 + caretSize;\n                x3 = x2 - caretSize;\n            }\n            y3 = y1;\n        }\n        return {\n            x1,\n            x2,\n            x3,\n            y1,\n            y2,\n            y3\n        };\n    }\n    drawTitle(pt, ctx, options) {\n        const title = this.title;\n        const length = title.length;\n        let titleFont, titleSpacing, i;\n        if (length) {\n            const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n            pt.x = getAlignedX(this, options.titleAlign, options);\n            ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n            ctx.textBaseline = 'middle';\n            titleFont = toFont(options.titleFont);\n            titleSpacing = options.titleSpacing;\n            ctx.fillStyle = options.titleColor;\n            ctx.font = titleFont.string;\n            for(i = 0; i < length; ++i){\n                ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n                pt.y += titleFont.lineHeight + titleSpacing;\n                if (i + 1 === length) {\n                    pt.y += options.titleMarginBottom - titleSpacing;\n                }\n            }\n        }\n    }\n _drawColorBox(ctx, pt, i, rtlHelper, options) {\n        const labelColor = this.labelColors[i];\n        const labelPointStyle = this.labelPointStyles[i];\n        const { boxHeight , boxWidth  } = options;\n        const bodyFont = toFont(options.bodyFont);\n        const colorX = getAlignedX(this, 'left', options);\n        const rtlColorX = rtlHelper.x(colorX);\n        const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n        const colorY = pt.y + yOffSet;\n        if (options.usePointStyle) {\n            const drawOptions = {\n                radius: Math.min(boxWidth, boxHeight) / 2,\n                pointStyle: labelPointStyle.pointStyle,\n                rotation: labelPointStyle.rotation,\n                borderWidth: 1\n            };\n            const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n            const centerY = colorY + boxHeight / 2;\n            ctx.strokeStyle = options.multiKeyBackground;\n            ctx.fillStyle = options.multiKeyBackground;\n            drawPoint(ctx, drawOptions, centerX, centerY);\n            ctx.strokeStyle = labelColor.borderColor;\n            ctx.fillStyle = labelColor.backgroundColor;\n            drawPoint(ctx, drawOptions, centerX, centerY);\n        } else {\n            ctx.lineWidth = isObject(labelColor.borderWidth) ? Math.max(...Object.values(labelColor.borderWidth)) : labelColor.borderWidth || 1;\n            ctx.strokeStyle = labelColor.borderColor;\n            ctx.setLineDash(labelColor.borderDash || []);\n            ctx.lineDashOffset = labelColor.borderDashOffset || 0;\n            const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth);\n            const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - 2);\n            const borderRadius = toTRBLCorners(labelColor.borderRadius);\n            if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                ctx.beginPath();\n                ctx.fillStyle = options.multiKeyBackground;\n                addRoundedRectPath(ctx, {\n                    x: outerX,\n                    y: colorY,\n                    w: boxWidth,\n                    h: boxHeight,\n                    radius: borderRadius\n                });\n                ctx.fill();\n                ctx.stroke();\n                ctx.fillStyle = labelColor.backgroundColor;\n                ctx.beginPath();\n                addRoundedRectPath(ctx, {\n                    x: innerX,\n                    y: colorY + 1,\n                    w: boxWidth - 2,\n                    h: boxHeight - 2,\n                    radius: borderRadius\n                });\n                ctx.fill();\n            } else {\n                ctx.fillStyle = options.multiKeyBackground;\n                ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n                ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n                ctx.fillStyle = labelColor.backgroundColor;\n                ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n            }\n        }\n        ctx.fillStyle = this.labelTextColors[i];\n    }\n    drawBody(pt, ctx, options) {\n        const { body  } = this;\n        const { bodySpacing , bodyAlign , displayColors , boxHeight , boxWidth , boxPadding  } = options;\n        const bodyFont = toFont(options.bodyFont);\n        let bodyLineHeight = bodyFont.lineHeight;\n        let xLinePadding = 0;\n        const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n        const fillLineOfText = function(line) {\n            ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n            pt.y += bodyLineHeight + bodySpacing;\n        };\n        const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n        let bodyItem, textColor, lines, i, j, ilen, jlen;\n        ctx.textAlign = bodyAlign;\n        ctx.textBaseline = 'middle';\n        ctx.font = bodyFont.string;\n        pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n        ctx.fillStyle = options.bodyColor;\n        each(this.beforeBody, fillLineOfText);\n        xLinePadding = displayColors && bodyAlignForCalculation !== 'right' ? bodyAlign === 'center' ? boxWidth / 2 + boxPadding : boxWidth + 2 + boxPadding : 0;\n        for(i = 0, ilen = body.length; i < ilen; ++i){\n            bodyItem = body[i];\n            textColor = this.labelTextColors[i];\n            ctx.fillStyle = textColor;\n            each(bodyItem.before, fillLineOfText);\n            lines = bodyItem.lines;\n            if (displayColors && lines.length) {\n                this._drawColorBox(ctx, pt, i, rtlHelper, options);\n                bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n            }\n            for(j = 0, jlen = lines.length; j < jlen; ++j){\n                fillLineOfText(lines[j]);\n                bodyLineHeight = bodyFont.lineHeight;\n            }\n            each(bodyItem.after, fillLineOfText);\n        }\n        xLinePadding = 0;\n        bodyLineHeight = bodyFont.lineHeight;\n        each(this.afterBody, fillLineOfText);\n        pt.y -= bodySpacing;\n    }\n    drawFooter(pt, ctx, options) {\n        const footer = this.footer;\n        const length = footer.length;\n        let footerFont, i;\n        if (length) {\n            const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n            pt.x = getAlignedX(this, options.footerAlign, options);\n            pt.y += options.footerMarginTop;\n            ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n            ctx.textBaseline = 'middle';\n            footerFont = toFont(options.footerFont);\n            ctx.fillStyle = options.footerColor;\n            ctx.font = footerFont.string;\n            for(i = 0; i < length; ++i){\n                ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n                pt.y += footerFont.lineHeight + options.footerSpacing;\n            }\n        }\n    }\n    drawBackground(pt, ctx, tooltipSize, options) {\n        const { xAlign , yAlign  } = this;\n        const { x , y  } = pt;\n        const { width , height  } = tooltipSize;\n        const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(options.cornerRadius);\n        ctx.fillStyle = options.backgroundColor;\n        ctx.strokeStyle = options.borderColor;\n        ctx.lineWidth = options.borderWidth;\n        ctx.beginPath();\n        ctx.moveTo(x + topLeft, y);\n        if (yAlign === 'top') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + width - topRight, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n        if (yAlign === 'center' && xAlign === 'right') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + width, y + height - bottomRight);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n        if (yAlign === 'bottom') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + bottomLeft, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n        if (yAlign === 'center' && xAlign === 'left') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x, y + topLeft);\n        ctx.quadraticCurveTo(x, y, x + topLeft, y);\n        ctx.closePath();\n        ctx.fill();\n        if (options.borderWidth > 0) {\n            ctx.stroke();\n        }\n    }\n _updateAnimationTarget(options) {\n        const chart = this.chart;\n        const anims = this.$animations;\n        const animX = anims && anims.x;\n        const animY = anims && anims.y;\n        if (animX || animY) {\n            const position = positioners[options.position].call(this, this._active, this._eventPosition);\n            if (!position) {\n                return;\n            }\n            const size = this._size = getTooltipSize(this, options);\n            const positionAndSize = Object.assign({}, position, this._size);\n            const alignment = determineAlignment(chart, options, positionAndSize);\n            const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n            if (animX._to !== point.x || animY._to !== point.y) {\n                this.xAlign = alignment.xAlign;\n                this.yAlign = alignment.yAlign;\n                this.width = size.width;\n                this.height = size.height;\n                this.caretX = position.x;\n                this.caretY = position.y;\n                this._resolveAnimations().update(this, point);\n            }\n        }\n    }\n _willRender() {\n        return !!this.opacity;\n    }\n    draw(ctx) {\n        const options = this.options.setContext(this.getContext());\n        let opacity = this.opacity;\n        if (!opacity) {\n            return;\n        }\n        this._updateAnimationTarget(options);\n        const tooltipSize = {\n            width: this.width,\n            height: this.height\n        };\n        const pt = {\n            x: this.x,\n            y: this.y\n        };\n        opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n        const padding = toPadding(options.padding);\n        const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n        if (options.enabled && hasTooltipContent) {\n            ctx.save();\n            ctx.globalAlpha = opacity;\n            this.drawBackground(pt, ctx, tooltipSize, options);\n            overrideTextDirection(ctx, options.textDirection);\n            pt.y += padding.top;\n            this.drawTitle(pt, ctx, options);\n            this.drawBody(pt, ctx, options);\n            this.drawFooter(pt, ctx, options);\n            restoreTextDirection(ctx, options.textDirection);\n            ctx.restore();\n        }\n    }\n getActiveElements() {\n        return this._active || [];\n    }\n setActiveElements(activeElements, eventPosition) {\n        const lastActive = this._active;\n        const active = activeElements.map(({ datasetIndex , index  })=>{\n            const meta = this.chart.getDatasetMeta(datasetIndex);\n            if (!meta) {\n                throw new Error('Cannot find a dataset at index ' + datasetIndex);\n            }\n            return {\n                datasetIndex,\n                element: meta.data[index],\n                index\n            };\n        });\n        const changed = !_elementsEqual(lastActive, active);\n        const positionChanged = this._positionChanged(active, eventPosition);\n        if (changed || positionChanged) {\n            this._active = active;\n            this._eventPosition = eventPosition;\n            this._ignoreReplayEvents = true;\n            this.update(true);\n        }\n    }\n handleEvent(e, replay, inChartArea = true) {\n        if (replay && this._ignoreReplayEvents) {\n            return false;\n        }\n        this._ignoreReplayEvents = false;\n        const options = this.options;\n        const lastActive = this._active || [];\n        const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n        const positionChanged = this._positionChanged(active, e);\n        const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n        if (changed) {\n            this._active = active;\n            if (options.enabled || options.external) {\n                this._eventPosition = {\n                    x: e.x,\n                    y: e.y\n                };\n                this.update(true, replay);\n            }\n        }\n        return changed;\n    }\n _getActiveElements(e, lastActive, replay, inChartArea) {\n        const options = this.options;\n        if (e.type === 'mouseout') {\n            return [];\n        }\n        if (!inChartArea) {\n            return lastActive.filter((i)=>this.chart.data.datasets[i.datasetIndex] && this.chart.getDatasetMeta(i.datasetIndex).controller.getParsed(i.index) !== undefined);\n        }\n        const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n        if (options.reverse) {\n            active.reverse();\n        }\n        return active;\n    }\n _positionChanged(active, e) {\n        const { caretX , caretY , options  } = this;\n        const position = positioners[options.position].call(this, active, e);\n        return position !== false && (caretX !== position.x || caretY !== position.y);\n    }\n}\nvar plugin_tooltip = {\n    id: 'tooltip',\n    _element: Tooltip,\n    positioners,\n    afterInit (chart, _args, options) {\n        if (options) {\n            chart.tooltip = new Tooltip({\n                chart,\n                options\n            });\n        }\n    },\n    beforeUpdate (chart, _args, options) {\n        if (chart.tooltip) {\n            chart.tooltip.initialize(options);\n        }\n    },\n    reset (chart, _args, options) {\n        if (chart.tooltip) {\n            chart.tooltip.initialize(options);\n        }\n    },\n    afterDraw (chart) {\n        const tooltip = chart.tooltip;\n        if (tooltip && tooltip._willRender()) {\n            const args = {\n                tooltip\n            };\n            if (chart.notifyPlugins('beforeTooltipDraw', {\n                ...args,\n                cancelable: true\n            }) === false) {\n                return;\n            }\n            tooltip.draw(chart.ctx);\n            chart.notifyPlugins('afterTooltipDraw', args);\n        }\n    },\n    afterEvent (chart, args) {\n        if (chart.tooltip) {\n            const useFinalPosition = args.replay;\n            if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n                args.changed = true;\n            }\n        }\n    },\n    defaults: {\n        enabled: true,\n        external: null,\n        position: 'average',\n        backgroundColor: 'rgba(0,0,0,0.8)',\n        titleColor: '#fff',\n        titleFont: {\n            weight: 'bold'\n        },\n        titleSpacing: 2,\n        titleMarginBottom: 6,\n        titleAlign: 'left',\n        bodyColor: '#fff',\n        bodySpacing: 2,\n        bodyFont: {},\n        bodyAlign: 'left',\n        footerColor: '#fff',\n        footerSpacing: 2,\n        footerMarginTop: 6,\n        footerFont: {\n            weight: 'bold'\n        },\n        footerAlign: 'left',\n        padding: 6,\n        caretPadding: 2,\n        caretSize: 5,\n        cornerRadius: 6,\n        boxHeight: (ctx, opts)=>opts.bodyFont.size,\n        boxWidth: (ctx, opts)=>opts.bodyFont.size,\n        multiKeyBackground: '#fff',\n        displayColors: true,\n        boxPadding: 0,\n        borderColor: 'rgba(0,0,0,0)',\n        borderWidth: 0,\n        animation: {\n            duration: 400,\n            easing: 'easeOutQuart'\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'width',\n                    'height',\n                    'caretX',\n                    'caretY'\n                ]\n            },\n            opacity: {\n                easing: 'linear',\n                duration: 200\n            }\n        },\n        callbacks: defaultCallbacks\n    },\n    defaultRoutes: {\n        bodyFont: 'font',\n        footerFont: 'font',\n        titleFont: 'font'\n    },\n    descriptors: {\n        _scriptable: (name)=>name !== 'filter' && name !== 'itemSort' && name !== 'external',\n        _indexable: false,\n        callbacks: {\n            _scriptable: false,\n            _indexable: false\n        },\n        animation: {\n            _fallback: false\n        },\n        animations: {\n            _fallback: 'animation'\n        }\n    },\n    additionalOptionScopes: [\n        'interaction'\n    ]\n};\n\nvar plugins = /*#__PURE__*/Object.freeze({\n__proto__: null,\nColors: plugin_colors,\nDecimation: plugin_decimation,\nFiller: index,\nLegend: plugin_legend,\nSubTitle: plugin_subtitle,\nTitle: plugin_title,\nTooltip: plugin_tooltip\n});\n\nconst addIfString = (labels, raw, index, addedLabels)=>{\n    if (typeof raw === 'string') {\n        index = labels.push(raw) - 1;\n        addedLabels.unshift({\n            index,\n            label: raw\n        });\n    } else if (isNaN(raw)) {\n        index = null;\n    }\n    return index;\n};\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n    const first = labels.indexOf(raw);\n    if (first === -1) {\n        return addIfString(labels, raw, index, addedLabels);\n    }\n    const last = labels.lastIndexOf(raw);\n    return first !== last ? index : first;\n}\nconst validIndex = (index, max)=>index === null ? null : _limitValue(Math.round(index), 0, max);\nfunction _getLabelForValue(value) {\n    const labels = this.getLabels();\n    if (value >= 0 && value < labels.length) {\n        return labels[value];\n    }\n    return value;\n}\nclass CategoryScale extends Scale {\n    static id = 'category';\n static defaults = {\n        ticks: {\n            callback: _getLabelForValue\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this._startValue = undefined;\n        this._valueRange = 0;\n        this._addedLabels = [];\n    }\n    init(scaleOptions) {\n        const added = this._addedLabels;\n        if (added.length) {\n            const labels = this.getLabels();\n            for (const { index , label  } of added){\n                if (labels[index] === label) {\n                    labels.splice(index, 1);\n                }\n            }\n            this._addedLabels = [];\n        }\n        super.init(scaleOptions);\n    }\n    parse(raw, index) {\n        if (isNullOrUndef(raw)) {\n            return null;\n        }\n        const labels = this.getLabels();\n        index = isFinite(index) && labels[index] === raw ? index : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n        return validIndex(index, labels.length - 1);\n    }\n    determineDataLimits() {\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let { min , max  } = this.getMinMax(true);\n        if (this.options.bounds === 'ticks') {\n            if (!minDefined) {\n                min = 0;\n            }\n            if (!maxDefined) {\n                max = this.getLabels().length - 1;\n            }\n        }\n        this.min = min;\n        this.max = max;\n    }\n    buildTicks() {\n        const min = this.min;\n        const max = this.max;\n        const offset = this.options.offset;\n        const ticks = [];\n        let labels = this.getLabels();\n        labels = min === 0 && max === labels.length - 1 ? labels : labels.slice(min, max + 1);\n        this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n        this._startValue = this.min - (offset ? 0.5 : 0);\n        for(let value = min; value <= max; value++){\n            ticks.push({\n                value\n            });\n        }\n        return ticks;\n    }\n    getLabelForValue(value) {\n        return _getLabelForValue.call(this, value);\n    }\n configure() {\n        super.configure();\n        if (!this.isHorizontal()) {\n            this._reversePixels = !this._reversePixels;\n        }\n    }\n    getPixelForValue(value) {\n        if (typeof value !== 'number') {\n            value = this.parse(value);\n        }\n        return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n    }\n    getPixelForTick(index) {\n        const ticks = this.ticks;\n        if (index < 0 || index > ticks.length - 1) {\n            return null;\n        }\n        return this.getPixelForValue(ticks[index].value);\n    }\n    getValueForPixel(pixel) {\n        return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n    }\n    getBasePixel() {\n        return this.bottom;\n    }\n}\n\nfunction generateTicks$1(generationOptions, dataRange) {\n    const ticks = [];\n    const MIN_SPACING = 1e-14;\n    const { bounds , step , min , max , precision , count , maxTicks , maxDigits , includeBounds  } = generationOptions;\n    const unit = step || 1;\n    const maxSpaces = maxTicks - 1;\n    const { min: rmin , max: rmax  } = dataRange;\n    const minDefined = !isNullOrUndef(min);\n    const maxDefined = !isNullOrUndef(max);\n    const countDefined = !isNullOrUndef(count);\n    const minSpacing = (rmax - rmin) / (maxDigits + 1);\n    let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n    let factor, niceMin, niceMax, numSpaces;\n    if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n        return [\n            {\n                value: rmin\n            },\n            {\n                value: rmax\n            }\n        ];\n    }\n    numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n    if (numSpaces > maxSpaces) {\n        spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n    }\n    if (!isNullOrUndef(precision)) {\n        factor = Math.pow(10, precision);\n        spacing = Math.ceil(spacing * factor) / factor;\n    }\n    if (bounds === 'ticks') {\n        niceMin = Math.floor(rmin / spacing) * spacing;\n        niceMax = Math.ceil(rmax / spacing) * spacing;\n    } else {\n        niceMin = rmin;\n        niceMax = rmax;\n    }\n    if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n        numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n        spacing = (max - min) / numSpaces;\n        niceMin = min;\n        niceMax = max;\n    } else if (countDefined) {\n        niceMin = minDefined ? min : niceMin;\n        niceMax = maxDefined ? max : niceMax;\n        numSpaces = count - 1;\n        spacing = (niceMax - niceMin) / numSpaces;\n    } else {\n        numSpaces = (niceMax - niceMin) / spacing;\n        if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n            numSpaces = Math.round(numSpaces);\n        } else {\n            numSpaces = Math.ceil(numSpaces);\n        }\n    }\n    const decimalPlaces = Math.max(_decimalPlaces(spacing), _decimalPlaces(niceMin));\n    factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n    niceMin = Math.round(niceMin * factor) / factor;\n    niceMax = Math.round(niceMax * factor) / factor;\n    let j = 0;\n    if (minDefined) {\n        if (includeBounds && niceMin !== min) {\n            ticks.push({\n                value: min\n            });\n            if (niceMin < min) {\n                j++;\n            }\n            if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n                j++;\n            }\n        } else if (niceMin < min) {\n            j++;\n        }\n    }\n    for(; j < numSpaces; ++j){\n        const tickValue = Math.round((niceMin + j * spacing) * factor) / factor;\n        if (maxDefined && tickValue > max) {\n            break;\n        }\n        ticks.push({\n            value: tickValue\n        });\n    }\n    if (maxDefined && includeBounds && niceMax !== max) {\n        if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n            ticks[ticks.length - 1].value = max;\n        } else {\n            ticks.push({\n                value: max\n            });\n        }\n    } else if (!maxDefined || niceMax === max) {\n        ticks.push({\n            value: niceMax\n        });\n    }\n    return ticks;\n}\nfunction relativeLabelSize(value, minSpacing, { horizontal , minRotation  }) {\n    const rad = toRadians(minRotation);\n    const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n    const length = 0.75 * minSpacing * ('' + value).length;\n    return Math.min(minSpacing / ratio, length);\n}\nclass LinearScaleBase extends Scale {\n    constructor(cfg){\n        super(cfg);\n         this.start = undefined;\n         this.end = undefined;\n         this._startValue = undefined;\n         this._endValue = undefined;\n        this._valueRange = 0;\n    }\n    parse(raw, index) {\n        if (isNullOrUndef(raw)) {\n            return null;\n        }\n        if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n            return null;\n        }\n        return +raw;\n    }\n    handleTickRangeOptions() {\n        const { beginAtZero  } = this.options;\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let { min , max  } = this;\n        const setMin = (v)=>min = minDefined ? min : v;\n        const setMax = (v)=>max = maxDefined ? max : v;\n        if (beginAtZero) {\n            const minSign = sign(min);\n            const maxSign = sign(max);\n            if (minSign < 0 && maxSign < 0) {\n                setMax(0);\n            } else if (minSign > 0 && maxSign > 0) {\n                setMin(0);\n            }\n        }\n        if (min === max) {\n            let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n            setMax(max + offset);\n            if (!beginAtZero) {\n                setMin(min - offset);\n            }\n        }\n        this.min = min;\n        this.max = max;\n    }\n    getTickLimit() {\n        const tickOpts = this.options.ticks;\n        let { maxTicksLimit , stepSize  } = tickOpts;\n        let maxTicks;\n        if (stepSize) {\n            maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n            if (maxTicks > 1000) {\n                console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n                maxTicks = 1000;\n            }\n        } else {\n            maxTicks = this.computeTickLimit();\n            maxTicksLimit = maxTicksLimit || 11;\n        }\n        if (maxTicksLimit) {\n            maxTicks = Math.min(maxTicksLimit, maxTicks);\n        }\n        return maxTicks;\n    }\n computeTickLimit() {\n        return Number.POSITIVE_INFINITY;\n    }\n    buildTicks() {\n        const opts = this.options;\n        const tickOpts = opts.ticks;\n        let maxTicks = this.getTickLimit();\n        maxTicks = Math.max(2, maxTicks);\n        const numericGeneratorOptions = {\n            maxTicks,\n            bounds: opts.bounds,\n            min: opts.min,\n            max: opts.max,\n            precision: tickOpts.precision,\n            step: tickOpts.stepSize,\n            count: tickOpts.count,\n            maxDigits: this._maxDigits(),\n            horizontal: this.isHorizontal(),\n            minRotation: tickOpts.minRotation || 0,\n            includeBounds: tickOpts.includeBounds !== false\n        };\n        const dataRange = this._range || this;\n        const ticks = generateTicks$1(numericGeneratorOptions, dataRange);\n        if (opts.bounds === 'ticks') {\n            _setMinAndMaxByKey(ticks, this, 'value');\n        }\n        if (opts.reverse) {\n            ticks.reverse();\n            this.start = this.max;\n            this.end = this.min;\n        } else {\n            this.start = this.min;\n            this.end = this.max;\n        }\n        return ticks;\n    }\n configure() {\n        const ticks = this.ticks;\n        let start = this.min;\n        let end = this.max;\n        super.configure();\n        if (this.options.offset && ticks.length) {\n            const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n            start -= offset;\n            end += offset;\n        }\n        this._startValue = start;\n        this._endValue = end;\n        this._valueRange = end - start;\n    }\n    getLabelForValue(value) {\n        return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n    }\n}\n\nclass LinearScale extends LinearScaleBase {\n    static id = 'linear';\n static defaults = {\n        ticks: {\n            callback: Ticks.formatters.numeric\n        }\n    };\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(true);\n        this.min = isNumberFinite(min) ? min : 0;\n        this.max = isNumberFinite(max) ? max : 1;\n        this.handleTickRangeOptions();\n    }\n computeTickLimit() {\n        const horizontal = this.isHorizontal();\n        const length = horizontal ? this.width : this.height;\n        const minRotation = toRadians(this.options.ticks.minRotation);\n        const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n        const tickFont = this._resolveTickFontOptions(0);\n        return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n    }\n    getPixelForValue(value) {\n        return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n    }\n    getValueForPixel(pixel) {\n        return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n    }\n}\n\nconst log10Floor = (v)=>Math.floor(log10(v));\nconst changeExponent = (v, m)=>Math.pow(10, log10Floor(v) + m);\nfunction isMajor(tickVal) {\n    const remain = tickVal / Math.pow(10, log10Floor(tickVal));\n    return remain === 1;\n}\nfunction steps(min, max, rangeExp) {\n    const rangeStep = Math.pow(10, rangeExp);\n    const start = Math.floor(min / rangeStep);\n    const end = Math.ceil(max / rangeStep);\n    return end - start;\n}\nfunction startExp(min, max) {\n    const range = max - min;\n    let rangeExp = log10Floor(range);\n    while(steps(min, max, rangeExp) > 10){\n        rangeExp++;\n    }\n    while(steps(min, max, rangeExp) < 10){\n        rangeExp--;\n    }\n    return Math.min(rangeExp, log10Floor(min));\n}\n function generateTicks(generationOptions, { min , max  }) {\n    min = finiteOrDefault(generationOptions.min, min);\n    const ticks = [];\n    const minExp = log10Floor(min);\n    let exp = startExp(min, max);\n    let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n    const stepSize = Math.pow(10, exp);\n    const base = minExp > exp ? Math.pow(10, minExp) : 0;\n    const start = Math.round((min - base) * precision) / precision;\n    const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n    let significand = Math.floor((start - offset) / Math.pow(10, exp));\n    let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n    while(value < max){\n        ticks.push({\n            value,\n            major: isMajor(value),\n            significand\n        });\n        if (significand >= 10) {\n            significand = significand < 15 ? 15 : 20;\n        } else {\n            significand++;\n        }\n        if (significand >= 20) {\n            exp++;\n            significand = 2;\n            precision = exp >= 0 ? 1 : precision;\n        }\n        value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n    }\n    const lastTick = finiteOrDefault(generationOptions.max, value);\n    ticks.push({\n        value: lastTick,\n        major: isMajor(lastTick),\n        significand\n    });\n    return ticks;\n}\nclass LogarithmicScale extends Scale {\n    static id = 'logarithmic';\n static defaults = {\n        ticks: {\n            callback: Ticks.formatters.logarithmic,\n            major: {\n                enabled: true\n            }\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this.start = undefined;\n         this.end = undefined;\n         this._startValue = undefined;\n        this._valueRange = 0;\n    }\n    parse(raw, index) {\n        const value = LinearScaleBase.prototype.parse.apply(this, [\n            raw,\n            index\n        ]);\n        if (value === 0) {\n            this._zero = true;\n            return undefined;\n        }\n        return isNumberFinite(value) && value > 0 ? value : null;\n    }\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(true);\n        this.min = isNumberFinite(min) ? Math.max(0, min) : null;\n        this.max = isNumberFinite(max) ? Math.max(0, max) : null;\n        if (this.options.beginAtZero) {\n            this._zero = true;\n        }\n        if (this._zero && this.min !== this._suggestedMin && !isNumberFinite(this._userMin)) {\n            this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n        }\n        this.handleTickRangeOptions();\n    }\n    handleTickRangeOptions() {\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let min = this.min;\n        let max = this.max;\n        const setMin = (v)=>min = minDefined ? min : v;\n        const setMax = (v)=>max = maxDefined ? max : v;\n        if (min === max) {\n            if (min <= 0) {\n                setMin(1);\n                setMax(10);\n            } else {\n                setMin(changeExponent(min, -1));\n                setMax(changeExponent(max, +1));\n            }\n        }\n        if (min <= 0) {\n            setMin(changeExponent(max, -1));\n        }\n        if (max <= 0) {\n            setMax(changeExponent(min, +1));\n        }\n        this.min = min;\n        this.max = max;\n    }\n    buildTicks() {\n        const opts = this.options;\n        const generationOptions = {\n            min: this._userMin,\n            max: this._userMax\n        };\n        const ticks = generateTicks(generationOptions, this);\n        if (opts.bounds === 'ticks') {\n            _setMinAndMaxByKey(ticks, this, 'value');\n        }\n        if (opts.reverse) {\n            ticks.reverse();\n            this.start = this.max;\n            this.end = this.min;\n        } else {\n            this.start = this.min;\n            this.end = this.max;\n        }\n        return ticks;\n    }\n getLabelForValue(value) {\n        return value === undefined ? '0' : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n    }\n configure() {\n        const start = this.min;\n        super.configure();\n        this._startValue = log10(start);\n        this._valueRange = log10(this.max) - log10(start);\n    }\n    getPixelForValue(value) {\n        if (value === undefined || value === 0) {\n            value = this.min;\n        }\n        if (value === null || isNaN(value)) {\n            return NaN;\n        }\n        return this.getPixelForDecimal(value === this.min ? 0 : (log10(value) - this._startValue) / this._valueRange);\n    }\n    getValueForPixel(pixel) {\n        const decimal = this.getDecimalForPixel(pixel);\n        return Math.pow(10, this._startValue + decimal * this._valueRange);\n    }\n}\n\nfunction getTickBackdropHeight(opts) {\n    const tickOpts = opts.ticks;\n    if (tickOpts.display && opts.display) {\n        const padding = toPadding(tickOpts.backdropPadding);\n        return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n    }\n    return 0;\n}\nfunction measureLabelSize(ctx, font, label) {\n    label = isArray(label) ? label : [\n        label\n    ];\n    return {\n        w: _longestText(ctx, font.string, label),\n        h: label.length * font.lineHeight\n    };\n}\nfunction determineLimits(angle, pos, size, min, max) {\n    if (angle === min || angle === max) {\n        return {\n            start: pos - size / 2,\n            end: pos + size / 2\n        };\n    } else if (angle < min || angle > max) {\n        return {\n            start: pos - size,\n            end: pos\n        };\n    }\n    return {\n        start: pos,\n        end: pos + size\n    };\n}\n function fitWithPointLabels(scale) {\n    const orig = {\n        l: scale.left + scale._padding.left,\n        r: scale.right - scale._padding.right,\n        t: scale.top + scale._padding.top,\n        b: scale.bottom - scale._padding.bottom\n    };\n    const limits = Object.assign({}, orig);\n    const labelSizes = [];\n    const padding = [];\n    const valueCount = scale._pointLabels.length;\n    const pointLabelOpts = scale.options.pointLabels;\n    const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n    for(let i = 0; i < valueCount; i++){\n        const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n        padding[i] = opts.padding;\n        const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n        const plFont = toFont(opts.font);\n        const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n        labelSizes[i] = textSize;\n        const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n        const angle = Math.round(toDegrees(angleRadians));\n        const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n        const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n        updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n    }\n    scale.setCenterPoint(orig.l - limits.l, limits.r - orig.r, orig.t - limits.t, limits.b - orig.b);\n    scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n    const sin = Math.abs(Math.sin(angle));\n    const cos = Math.abs(Math.cos(angle));\n    let x = 0;\n    let y = 0;\n    if (hLimits.start < orig.l) {\n        x = (orig.l - hLimits.start) / sin;\n        limits.l = Math.min(limits.l, orig.l - x);\n    } else if (hLimits.end > orig.r) {\n        x = (hLimits.end - orig.r) / sin;\n        limits.r = Math.max(limits.r, orig.r + x);\n    }\n    if (vLimits.start < orig.t) {\n        y = (orig.t - vLimits.start) / cos;\n        limits.t = Math.min(limits.t, orig.t - y);\n    } else if (vLimits.end > orig.b) {\n        y = (vLimits.end - orig.b) / cos;\n        limits.b = Math.max(limits.b, orig.b + y);\n    }\n}\nfunction createPointLabelItem(scale, index, itemOpts) {\n    const outerDistance = scale.drawingArea;\n    const { extra , additionalAngle , padding , size  } = itemOpts;\n    const pointLabelPosition = scale.getPointPosition(index, outerDistance + extra + padding, additionalAngle);\n    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n    const y = yForAngle(pointLabelPosition.y, size.h, angle);\n    const textAlign = getTextAlignForAngle(angle);\n    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n    return {\n        visible: true,\n        x: pointLabelPosition.x,\n        y,\n        textAlign,\n        left,\n        top: y,\n        right: left + size.w,\n        bottom: y + size.h\n    };\n}\nfunction isNotOverlapped(item, area) {\n    if (!area) {\n        return true;\n    }\n    const { left , top , right , bottom  } = item;\n    const apexesInArea = _isPointInArea({\n        x: left,\n        y: top\n    }, area) || _isPointInArea({\n        x: left,\n        y: bottom\n    }, area) || _isPointInArea({\n        x: right,\n        y: top\n    }, area) || _isPointInArea({\n        x: right,\n        y: bottom\n    }, area);\n    return !apexesInArea;\n}\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n    const items = [];\n    const valueCount = scale._pointLabels.length;\n    const opts = scale.options;\n    const { centerPointLabels , display  } = opts.pointLabels;\n    const itemOpts = {\n        extra: getTickBackdropHeight(opts) / 2,\n        additionalAngle: centerPointLabels ? PI / valueCount : 0\n    };\n    let area;\n    for(let i = 0; i < valueCount; i++){\n        itemOpts.padding = padding[i];\n        itemOpts.size = labelSizes[i];\n        const item = createPointLabelItem(scale, i, itemOpts);\n        items.push(item);\n        if (display === 'auto') {\n            item.visible = isNotOverlapped(item, area);\n            if (item.visible) {\n                area = item;\n            }\n        }\n    }\n    return items;\n}\nfunction getTextAlignForAngle(angle) {\n    if (angle === 0 || angle === 180) {\n        return 'center';\n    } else if (angle < 180) {\n        return 'left';\n    }\n    return 'right';\n}\nfunction leftForTextAlign(x, w, align) {\n    if (align === 'right') {\n        x -= w;\n    } else if (align === 'center') {\n        x -= w / 2;\n    }\n    return x;\n}\nfunction yForAngle(y, h, angle) {\n    if (angle === 90 || angle === 270) {\n        y -= h / 2;\n    } else if (angle > 270 || angle < 90) {\n        y -= h;\n    }\n    return y;\n}\nfunction drawPointLabelBox(ctx, opts, item) {\n    const { left , top , right , bottom  } = item;\n    const { backdropColor  } = opts;\n    if (!isNullOrUndef(backdropColor)) {\n        const borderRadius = toTRBLCorners(opts.borderRadius);\n        const padding = toPadding(opts.backdropPadding);\n        ctx.fillStyle = backdropColor;\n        const backdropLeft = left - padding.left;\n        const backdropTop = top - padding.top;\n        const backdropWidth = right - left + padding.width;\n        const backdropHeight = bottom - top + padding.height;\n        if (Object.values(borderRadius).some((v)=>v !== 0)) {\n            ctx.beginPath();\n            addRoundedRectPath(ctx, {\n                x: backdropLeft,\n                y: backdropTop,\n                w: backdropWidth,\n                h: backdropHeight,\n                radius: borderRadius\n            });\n            ctx.fill();\n        } else {\n            ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n        }\n    }\n}\nfunction drawPointLabels(scale, labelCount) {\n    const { ctx , options: { pointLabels  }  } = scale;\n    for(let i = labelCount - 1; i >= 0; i--){\n        const item = scale._pointLabelItems[i];\n        if (!item.visible) {\n            continue;\n        }\n        const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n        drawPointLabelBox(ctx, optsAtIndex, item);\n        const plFont = toFont(optsAtIndex.font);\n        const { x , y , textAlign  } = item;\n        renderText(ctx, scale._pointLabels[i], x, y + plFont.lineHeight / 2, plFont, {\n            color: optsAtIndex.color,\n            textAlign: textAlign,\n            textBaseline: 'middle'\n        });\n    }\n}\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n    const { ctx  } = scale;\n    if (circular) {\n        ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n    } else {\n        let pointPosition = scale.getPointPosition(0, radius);\n        ctx.moveTo(pointPosition.x, pointPosition.y);\n        for(let i = 1; i < labelCount; i++){\n            pointPosition = scale.getPointPosition(i, radius);\n            ctx.lineTo(pointPosition.x, pointPosition.y);\n        }\n    }\n}\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n    const ctx = scale.ctx;\n    const circular = gridLineOpts.circular;\n    const { color , lineWidth  } = gridLineOpts;\n    if (!circular && !labelCount || !color || !lineWidth || radius < 0) {\n        return;\n    }\n    ctx.save();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.setLineDash(borderOpts.dash || []);\n    ctx.lineDashOffset = borderOpts.dashOffset;\n    ctx.beginPath();\n    pathRadiusLine(scale, radius, circular, labelCount);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.restore();\n}\nfunction createPointLabelContext(parent, index, label) {\n    return createContext(parent, {\n        label,\n        index,\n        type: 'pointLabel'\n    });\n}\nclass RadialLinearScale extends LinearScaleBase {\n    static id = 'radialLinear';\n static defaults = {\n        display: true,\n        animate: true,\n        position: 'chartArea',\n        angleLines: {\n            display: true,\n            lineWidth: 1,\n            borderDash: [],\n            borderDashOffset: 0.0\n        },\n        grid: {\n            circular: false\n        },\n        startAngle: 0,\n        ticks: {\n            showLabelBackdrop: true,\n            callback: Ticks.formatters.numeric\n        },\n        pointLabels: {\n            backdropColor: undefined,\n            backdropPadding: 2,\n            display: true,\n            font: {\n                size: 10\n            },\n            callback (label) {\n                return label;\n            },\n            padding: 5,\n            centerPointLabels: false\n        }\n    };\n    static defaultRoutes = {\n        'angleLines.color': 'borderColor',\n        'pointLabels.color': 'color',\n        'ticks.color': 'color'\n    };\n    static descriptors = {\n        angleLines: {\n            _fallback: 'grid'\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this.xCenter = undefined;\n         this.yCenter = undefined;\n         this.drawingArea = undefined;\n         this._pointLabels = [];\n        this._pointLabelItems = [];\n    }\n    setDimensions() {\n        const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n        const w = this.width = this.maxWidth - padding.width;\n        const h = this.height = this.maxHeight - padding.height;\n        this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n        this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n        this.drawingArea = Math.floor(Math.min(w, h) / 2);\n    }\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(false);\n        this.min = isNumberFinite(min) && !isNaN(min) ? min : 0;\n        this.max = isNumberFinite(max) && !isNaN(max) ? max : 0;\n        this.handleTickRangeOptions();\n    }\n computeTickLimit() {\n        return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n    }\n    generateTickLabels(ticks) {\n        LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n        this._pointLabels = this.getLabels().map((value, index)=>{\n            const label = callback(this.options.pointLabels.callback, [\n                value,\n                index\n            ], this);\n            return label || label === 0 ? label : '';\n        }).filter((v, i)=>this.chart.getDataVisibility(i));\n    }\n    fit() {\n        const opts = this.options;\n        if (opts.display && opts.pointLabels.display) {\n            fitWithPointLabels(this);\n        } else {\n            this.setCenterPoint(0, 0, 0, 0);\n        }\n    }\n    setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n        this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n        this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n        this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n    }\n    getIndexAngle(index) {\n        const angleMultiplier = TAU / (this._pointLabels.length || 1);\n        const startAngle = this.options.startAngle || 0;\n        return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n    }\n    getDistanceFromCenterForValue(value) {\n        if (isNullOrUndef(value)) {\n            return NaN;\n        }\n        const scalingFactor = this.drawingArea / (this.max - this.min);\n        if (this.options.reverse) {\n            return (this.max - value) * scalingFactor;\n        }\n        return (value - this.min) * scalingFactor;\n    }\n    getValueForDistanceFromCenter(distance) {\n        if (isNullOrUndef(distance)) {\n            return NaN;\n        }\n        const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n        return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n    }\n    getPointLabelContext(index) {\n        const pointLabels = this._pointLabels || [];\n        if (index >= 0 && index < pointLabels.length) {\n            const pointLabel = pointLabels[index];\n            return createPointLabelContext(this.getContext(), index, pointLabel);\n        }\n    }\n    getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n        const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n        return {\n            x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n            y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n            angle\n        };\n    }\n    getPointPositionForValue(index, value) {\n        return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n    }\n    getBasePosition(index) {\n        return this.getPointPositionForValue(index || 0, this.getBaseValue());\n    }\n    getPointLabelPosition(index) {\n        const { left , top , right , bottom  } = this._pointLabelItems[index];\n        return {\n            left,\n            top,\n            right,\n            bottom\n        };\n    }\n drawBackground() {\n        const { backgroundColor , grid: { circular  }  } = this.options;\n        if (backgroundColor) {\n            const ctx = this.ctx;\n            ctx.save();\n            ctx.beginPath();\n            pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n            ctx.closePath();\n            ctx.fillStyle = backgroundColor;\n            ctx.fill();\n            ctx.restore();\n        }\n    }\n drawGrid() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        const { angleLines , grid , border  } = opts;\n        const labelCount = this._pointLabels.length;\n        let i, offset, position;\n        if (opts.pointLabels.display) {\n            drawPointLabels(this, labelCount);\n        }\n        if (grid.display) {\n            this.ticks.forEach((tick, index)=>{\n                if (index !== 0 || index === 0 && this.min < 0) {\n                    offset = this.getDistanceFromCenterForValue(tick.value);\n                    const context = this.getContext(index);\n                    const optsAtIndex = grid.setContext(context);\n                    const optsAtIndexBorder = border.setContext(context);\n                    drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n                }\n            });\n        }\n        if (angleLines.display) {\n            ctx.save();\n            for(i = labelCount - 1; i >= 0; i--){\n                const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n                const { color , lineWidth  } = optsAtIndex;\n                if (!lineWidth || !color) {\n                    continue;\n                }\n                ctx.lineWidth = lineWidth;\n                ctx.strokeStyle = color;\n                ctx.setLineDash(optsAtIndex.borderDash);\n                ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n                offset = this.getDistanceFromCenterForValue(opts.reverse ? this.min : this.max);\n                position = this.getPointPosition(i, offset);\n                ctx.beginPath();\n                ctx.moveTo(this.xCenter, this.yCenter);\n                ctx.lineTo(position.x, position.y);\n                ctx.stroke();\n            }\n            ctx.restore();\n        }\n    }\n drawBorder() {}\n drawLabels() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        const tickOpts = opts.ticks;\n        if (!tickOpts.display) {\n            return;\n        }\n        const startAngle = this.getIndexAngle(0);\n        let offset, width;\n        ctx.save();\n        ctx.translate(this.xCenter, this.yCenter);\n        ctx.rotate(startAngle);\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        this.ticks.forEach((tick, index)=>{\n            if (index === 0 && this.min >= 0 && !opts.reverse) {\n                return;\n            }\n            const optsAtIndex = tickOpts.setContext(this.getContext(index));\n            const tickFont = toFont(optsAtIndex.font);\n            offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n            if (optsAtIndex.showLabelBackdrop) {\n                ctx.font = tickFont.string;\n                width = ctx.measureText(tick.label).width;\n                ctx.fillStyle = optsAtIndex.backdropColor;\n                const padding = toPadding(optsAtIndex.backdropPadding);\n                ctx.fillRect(-width / 2 - padding.left, -offset - tickFont.size / 2 - padding.top, width + padding.width, tickFont.size + padding.height);\n            }\n            renderText(ctx, tick.label, 0, -offset, tickFont, {\n                color: optsAtIndex.color,\n                strokeColor: optsAtIndex.textStrokeColor,\n                strokeWidth: optsAtIndex.textStrokeWidth\n            });\n        });\n        ctx.restore();\n    }\n drawTitle() {}\n}\n\nconst INTERVALS = {\n    millisecond: {\n        common: true,\n        size: 1,\n        steps: 1000\n    },\n    second: {\n        common: true,\n        size: 1000,\n        steps: 60\n    },\n    minute: {\n        common: true,\n        size: 60000,\n        steps: 60\n    },\n    hour: {\n        common: true,\n        size: 3600000,\n        steps: 24\n    },\n    day: {\n        common: true,\n        size: 86400000,\n        steps: 30\n    },\n    week: {\n        common: false,\n        size: 604800000,\n        steps: 4\n    },\n    month: {\n        common: true,\n        size: 2.628e9,\n        steps: 12\n    },\n    quarter: {\n        common: false,\n        size: 7.884e9,\n        steps: 4\n    },\n    year: {\n        common: true,\n        size: 3.154e10\n    }\n};\n const UNITS =  /* #__PURE__ */ Object.keys(INTERVALS);\n function sorter(a, b) {\n    return a - b;\n}\n function parse(scale, input) {\n    if (isNullOrUndef(input)) {\n        return null;\n    }\n    const adapter = scale._adapter;\n    const { parser , round , isoWeekday  } = scale._parseOpts;\n    let value = input;\n    if (typeof parser === 'function') {\n        value = parser(value);\n    }\n    if (!isNumberFinite(value)) {\n        value = typeof parser === 'string' ? adapter.parse(value, parser) : adapter.parse(value);\n    }\n    if (value === null) {\n        return null;\n    }\n    if (round) {\n        value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true) ? adapter.startOf(value, 'isoWeek', isoWeekday) : adapter.startOf(value, round);\n    }\n    return +value;\n}\n function determineUnitForAutoTicks(minUnit, min, max, capacity) {\n    const ilen = UNITS.length;\n    for(let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i){\n        const interval = INTERVALS[UNITS[i]];\n        const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n        if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n            return UNITS[i];\n        }\n    }\n    return UNITS[ilen - 1];\n}\n function determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n    for(let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--){\n        const unit = UNITS[i];\n        if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n            return unit;\n        }\n    }\n    return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n function determineMajorUnit(unit) {\n    for(let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i){\n        if (INTERVALS[UNITS[i]].common) {\n            return UNITS[i];\n        }\n    }\n}\n function addTick(ticks, time, timestamps) {\n    if (!timestamps) {\n        ticks[time] = true;\n    } else if (timestamps.length) {\n        const { lo , hi  } = _lookup(timestamps, time);\n        const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n        ticks[timestamp] = true;\n    }\n}\n function setMajorTicks(scale, ticks, map, majorUnit) {\n    const adapter = scale._adapter;\n    const first = +adapter.startOf(ticks[0].value, majorUnit);\n    const last = ticks[ticks.length - 1].value;\n    let major, index;\n    for(major = first; major <= last; major = +adapter.add(major, 1, majorUnit)){\n        index = map[major];\n        if (index >= 0) {\n            ticks[index].major = true;\n        }\n    }\n    return ticks;\n}\n function ticksFromTimestamps(scale, values, majorUnit) {\n    const ticks = [];\n     const map = {};\n    const ilen = values.length;\n    let i, value;\n    for(i = 0; i < ilen; ++i){\n        value = values[i];\n        map[value] = i;\n        ticks.push({\n            value,\n            major: false\n        });\n    }\n    return ilen === 0 || !majorUnit ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\nclass TimeScale extends Scale {\n    static id = 'time';\n static defaults = {\n bounds: 'data',\n        adapters: {},\n        time: {\n            parser: false,\n            unit: false,\n            round: false,\n            isoWeekday: false,\n            minUnit: 'millisecond',\n            displayFormats: {}\n        },\n        ticks: {\n source: 'auto',\n            callback: false,\n            major: {\n                enabled: false\n            }\n        }\n    };\n constructor(props){\n        super(props);\n         this._cache = {\n            data: [],\n            labels: [],\n            all: []\n        };\n         this._unit = 'day';\n         this._majorUnit = undefined;\n        this._offsets = {};\n        this._normalized = false;\n        this._parseOpts = undefined;\n    }\n    init(scaleOpts, opts = {}) {\n        const time = scaleOpts.time || (scaleOpts.time = {});\n         const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n        adapter.init(opts);\n        mergeIf(time.displayFormats, adapter.formats());\n        this._parseOpts = {\n            parser: time.parser,\n            round: time.round,\n            isoWeekday: time.isoWeekday\n        };\n        super.init(scaleOpts);\n        this._normalized = opts.normalized;\n    }\n parse(raw, index) {\n        if (raw === undefined) {\n            return null;\n        }\n        return parse(this, raw);\n    }\n    beforeLayout() {\n        super.beforeLayout();\n        this._cache = {\n            data: [],\n            labels: [],\n            all: []\n        };\n    }\n    determineDataLimits() {\n        const options = this.options;\n        const adapter = this._adapter;\n        const unit = options.time.unit || 'day';\n        let { min , max , minDefined , maxDefined  } = this.getUserBounds();\n function _applyBounds(bounds) {\n            if (!minDefined && !isNaN(bounds.min)) {\n                min = Math.min(min, bounds.min);\n            }\n            if (!maxDefined && !isNaN(bounds.max)) {\n                max = Math.max(max, bounds.max);\n            }\n        }\n        if (!minDefined || !maxDefined) {\n            _applyBounds(this._getLabelBounds());\n            if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n                _applyBounds(this.getMinMax(false));\n            }\n        }\n        min = isNumberFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n        max = isNumberFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n        this.min = Math.min(min, max - 1);\n        this.max = Math.max(min + 1, max);\n    }\n _getLabelBounds() {\n        const arr = this.getLabelTimestamps();\n        let min = Number.POSITIVE_INFINITY;\n        let max = Number.NEGATIVE_INFINITY;\n        if (arr.length) {\n            min = arr[0];\n            max = arr[arr.length - 1];\n        }\n        return {\n            min,\n            max\n        };\n    }\n buildTicks() {\n        const options = this.options;\n        const timeOpts = options.time;\n        const tickOpts = options.ticks;\n        const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n        if (options.bounds === 'ticks' && timestamps.length) {\n            this.min = this._userMin || timestamps[0];\n            this.max = this._userMax || timestamps[timestamps.length - 1];\n        }\n        const min = this.min;\n        const max = this.max;\n        const ticks = _filterBetween(timestamps, min, max);\n        this._unit = timeOpts.unit || (tickOpts.autoSkip ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min)) : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n        this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined : determineMajorUnit(this._unit);\n        this.initOffsets(timestamps);\n        if (options.reverse) {\n            ticks.reverse();\n        }\n        return ticksFromTimestamps(this, ticks, this._majorUnit);\n    }\n    afterAutoSkip() {\n        if (this.options.offsetAfterAutoskip) {\n            this.initOffsets(this.ticks.map((tick)=>+tick.value));\n        }\n    }\n initOffsets(timestamps = []) {\n        let start = 0;\n        let end = 0;\n        let first, last;\n        if (this.options.offset && timestamps.length) {\n            first = this.getDecimalForValue(timestamps[0]);\n            if (timestamps.length === 1) {\n                start = 1 - first;\n            } else {\n                start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n            }\n            last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n            if (timestamps.length === 1) {\n                end = last;\n            } else {\n                end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n            }\n        }\n        const limit = timestamps.length < 3 ? 0.5 : 0.25;\n        start = _limitValue(start, 0, limit);\n        end = _limitValue(end, 0, limit);\n        this._offsets = {\n            start,\n            end,\n            factor: 1 / (start + 1 + end)\n        };\n    }\n _generate() {\n        const adapter = this._adapter;\n        const min = this.min;\n        const max = this.max;\n        const options = this.options;\n        const timeOpts = options.time;\n        const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n        const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n        const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n        const hasWeekday = isNumber(weekday) || weekday === true;\n        const ticks = {};\n        let first = min;\n        let time, count;\n        if (hasWeekday) {\n            first = +adapter.startOf(first, 'isoWeek', weekday);\n        }\n        first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n        if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n            throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n        }\n        const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n        for(time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++){\n            addTick(ticks, time, timestamps);\n        }\n        if (time === max || options.bounds === 'ticks' || count === 1) {\n            addTick(ticks, time, timestamps);\n        }\n        return Object.keys(ticks).sort(sorter).map((x)=>+x);\n    }\n getLabelForValue(value) {\n        const adapter = this._adapter;\n        const timeOpts = this.options.time;\n        if (timeOpts.tooltipFormat) {\n            return adapter.format(value, timeOpts.tooltipFormat);\n        }\n        return adapter.format(value, timeOpts.displayFormats.datetime);\n    }\n format(value, format) {\n        const options = this.options;\n        const formats = options.time.displayFormats;\n        const unit = this._unit;\n        const fmt = format || formats[unit];\n        return this._adapter.format(value, fmt);\n    }\n _tickFormatFunction(time, index, ticks, format) {\n        const options = this.options;\n        const formatter = options.ticks.callback;\n        if (formatter) {\n            return callback(formatter, [\n                time,\n                index,\n                ticks\n            ], this);\n        }\n        const formats = options.time.displayFormats;\n        const unit = this._unit;\n        const majorUnit = this._majorUnit;\n        const minorFormat = unit && formats[unit];\n        const majorFormat = majorUnit && formats[majorUnit];\n        const tick = ticks[index];\n        const major = majorUnit && majorFormat && tick && tick.major;\n        return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n    }\n generateTickLabels(ticks) {\n        let i, ilen, tick;\n        for(i = 0, ilen = ticks.length; i < ilen; ++i){\n            tick = ticks[i];\n            tick.label = this._tickFormatFunction(tick.value, i, ticks);\n        }\n    }\n getDecimalForValue(value) {\n        return value === null ? NaN : (value - this.min) / (this.max - this.min);\n    }\n getPixelForValue(value) {\n        const offsets = this._offsets;\n        const pos = this.getDecimalForValue(value);\n        return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n    }\n getValueForPixel(pixel) {\n        const offsets = this._offsets;\n        const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n        return this.min + pos * (this.max - this.min);\n    }\n _getLabelSize(label) {\n        const ticksOpts = this.options.ticks;\n        const tickLabelWidth = this.ctx.measureText(label).width;\n        const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n        const cosRotation = Math.cos(angle);\n        const sinRotation = Math.sin(angle);\n        const tickFontSize = this._resolveTickFontOptions(0).size;\n        return {\n            w: tickLabelWidth * cosRotation + tickFontSize * sinRotation,\n            h: tickLabelWidth * sinRotation + tickFontSize * cosRotation\n        };\n    }\n _getLabelCapacity(exampleTime) {\n        const timeOpts = this.options.time;\n        const displayFormats = timeOpts.displayFormats;\n        const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n        const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [\n            exampleTime\n        ], this._majorUnit), format);\n        const size = this._getLabelSize(exampleLabel);\n        const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n        return capacity > 0 ? capacity : 1;\n    }\n getDataTimestamps() {\n        let timestamps = this._cache.data || [];\n        let i, ilen;\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const metas = this.getMatchingVisibleMetas();\n        if (this._normalized && metas.length) {\n            return this._cache.data = metas[0].controller.getAllParsedValues(this);\n        }\n        for(i = 0, ilen = metas.length; i < ilen; ++i){\n            timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n        }\n        return this._cache.data = this.normalize(timestamps);\n    }\n getLabelTimestamps() {\n        const timestamps = this._cache.labels || [];\n        let i, ilen;\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const labels = this.getLabels();\n        for(i = 0, ilen = labels.length; i < ilen; ++i){\n            timestamps.push(parse(this, labels[i]));\n        }\n        return this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps);\n    }\n normalize(values) {\n        return _arrayUnique(values.sort(sorter));\n    }\n}\n\nfunction interpolate(table, val, reverse) {\n    let lo = 0;\n    let hi = table.length - 1;\n    let prevSource, nextSource, prevTarget, nextTarget;\n    if (reverse) {\n        if (val >= table[lo].pos && val <= table[hi].pos) {\n            ({ lo , hi  } = _lookupByKey(table, 'pos', val));\n        }\n        ({ pos: prevSource , time: prevTarget  } = table[lo]);\n        ({ pos: nextSource , time: nextTarget  } = table[hi]);\n    } else {\n        if (val >= table[lo].time && val <= table[hi].time) {\n            ({ lo , hi  } = _lookupByKey(table, 'time', val));\n        }\n        ({ time: prevSource , pos: prevTarget  } = table[lo]);\n        ({ time: nextSource , pos: nextTarget  } = table[hi]);\n    }\n    const span = nextSource - prevSource;\n    return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\nclass TimeSeriesScale extends TimeScale {\n    static id = 'timeseries';\n static defaults = TimeScale.defaults;\n constructor(props){\n        super(props);\n         this._table = [];\n         this._minPos = undefined;\n         this._tableRange = undefined;\n    }\n initOffsets() {\n        const timestamps = this._getTimestampsForTable();\n        const table = this._table = this.buildLookupTable(timestamps);\n        this._minPos = interpolate(table, this.min);\n        this._tableRange = interpolate(table, this.max) - this._minPos;\n        super.initOffsets(timestamps);\n    }\n buildLookupTable(timestamps) {\n        const { min , max  } = this;\n        const items = [];\n        const table = [];\n        let i, ilen, prev, curr, next;\n        for(i = 0, ilen = timestamps.length; i < ilen; ++i){\n            curr = timestamps[i];\n            if (curr >= min && curr <= max) {\n                items.push(curr);\n            }\n        }\n        if (items.length < 2) {\n            return [\n                {\n                    time: min,\n                    pos: 0\n                },\n                {\n                    time: max,\n                    pos: 1\n                }\n            ];\n        }\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            next = items[i + 1];\n            prev = items[i - 1];\n            curr = items[i];\n            if (Math.round((next + prev) / 2) !== curr) {\n                table.push({\n                    time: curr,\n                    pos: i / (ilen - 1)\n                });\n            }\n        }\n        return table;\n    }\n _generate() {\n        const min = this.min;\n        const max = this.max;\n        let timestamps = super.getDataTimestamps();\n        if (!timestamps.includes(min) || !timestamps.length) {\n            timestamps.splice(0, 0, min);\n        }\n        if (!timestamps.includes(max) || timestamps.length === 1) {\n            timestamps.push(max);\n        }\n        return timestamps.sort((a, b)=>a - b);\n    }\n _getTimestampsForTable() {\n        let timestamps = this._cache.all || [];\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const data = this.getDataTimestamps();\n        const label = this.getLabelTimestamps();\n        if (data.length && label.length) {\n            timestamps = this.normalize(data.concat(label));\n        } else {\n            timestamps = data.length ? data : label;\n        }\n        timestamps = this._cache.all = timestamps;\n        return timestamps;\n    }\n getDecimalForValue(value) {\n        return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n    }\n getValueForPixel(pixel) {\n        const offsets = this._offsets;\n        const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n        return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n    }\n}\n\nvar scales = /*#__PURE__*/Object.freeze({\n__proto__: null,\nCategoryScale: CategoryScale,\nLinearScale: LinearScale,\nLogarithmicScale: LogarithmicScale,\nRadialLinearScale: RadialLinearScale,\nTimeScale: TimeScale,\nTimeSeriesScale: TimeSeriesScale\n});\n\nconst registerables = [\n    controllers,\n    elements,\n    plugins,\n    scales\n];\n\nexport { Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart, plugin_colors as Colors, DatasetController, plugin_decimation as Decimation, DomPlatform, DoughnutController, Element, index as Filler, Interaction, plugin_legend as Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, plugin_subtitle as SubTitle, Ticks, TimeScale, TimeSeriesScale, plugin_title as Title, plugin_tooltip as Tooltip, adapters as _adapters, _detectPlatform, animator, controllers, defaults, elements, layouts, plugins, registerables, registry, scales };\n//# sourceMappingURL=chart.js.map\n","import {Chart, registerables} from '../dist/chart.js';\n\nChart.register(...registerables);\n\nexport * from '../dist/chart.js';\nexport default Chart;\n","/**\n * Economic Data Integration Module\n * Fetches and manages data from BLS, FRED, and other government sources\n */\n\nclass EconomicDataService {\n    constructor() {\n        this.cache = new Map();\n        this.cacheExpiry = 3600000; // 1 hour\n        this.baselineData = null;\n        this.liveData = null;\n\n        // API endpoints\n        this.endpoints = {\n            bls: 'https://api.bls.gov/publicAPI/v2/timeseries/data/',\n            fred: 'https://api.stlouisfed.org/fred/series/observations'\n        };\n\n        // BLS Series IDs for key indicators\n        this.blsSeries = {\n            unemployment_rate: 'LNS14000000',\n            total_employment: 'CES0000000001',\n            labor_force_participation: 'LNS11300000',\n            average_hourly_earnings: 'CES0500000003',\n            job_openings: 'JTS000000000000000JOL',\n            quits_rate: 'JTS000000000000000QUR',\n            productivity: 'PRS85006092',\n            // Sector employment\n            manufacturing_employment: 'CES3000000001',\n            retail_employment: 'CES4200000001',\n            healthcare_employment: 'CES6562000001',\n            technology_employment: 'CES5051200001',\n            finance_employment: 'CES5500000001',\n            transportation_employment: 'CES4300000001',\n            construction_employment: 'CES2000000001'\n        };\n\n        // FRED Series IDs\n        this.fredSeries = {\n            gdp: 'GDP',\n            real_gdp_growth: 'A191RL1Q225SBEA',\n            labor_share: 'LABSHPUSA156NRUG',\n            corporate_profits: 'CP',\n            business_investment: 'PNFI',\n            median_income: 'MEHOINUSA672N',\n            gini_coefficient: 'SIPOVGINIUSA'\n        };\n    }\n\n    /**\n     * Load baseline data from JSON file\n     */\n    async loadBaselineData() {\n        if (this.baselineData) return this.baselineData;\n\n        try {\n            const response = await fetch('./data/baseline-data.json');\n            this.baselineData = await response.json();\n\n            // Also try to load live data\n            await this.loadLiveData();\n\n            return this.baselineData;\n        } catch (error) {\n            console.error('Failed to load baseline data:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Load live data from GitHub Actions-updated JSON file\n     */\n    async loadLiveData() {\n        if (this.liveData) return this.liveData;\n\n        try {\n            const response = await fetch('./data/live-data.json');\n            if (response.ok) {\n                this.liveData = await response.json();\n                console.log('Live data loaded, last updated:', this.liveData.lastUpdated);\n                return this.liveData;\n            }\n        } catch (error) {\n            console.log('No live data available, using baseline data');\n        }\n        return null;\n    }\n\n    /**\n     * Get live data status\n     */\n    getLiveDataStatus() {\n        if (!this.liveData) {\n            return {\n                available: false,\n                lastUpdated: null,\n                sources: { bls: 'unavailable', fred: 'unavailable' }\n            };\n        }\n\n        return {\n            available: true,\n            lastUpdated: this.liveData.lastUpdated,\n            sources: this.liveData.sources || {},\n            summary: this.liveData.summary || {}\n        };\n    }\n\n    /**\n     * Get current economic snapshot\n     * Uses live data from GitHub Actions when available, falls back to baseline\n     */\n    async getCurrentSnapshot() {\n        const baseline = await this.loadBaselineData();\n        const live = this.liveData;\n\n        // Use live data if available and valid, otherwise use baseline\n        const useLive = live && live.summary && live.sources?.bls === 'success';\n\n        // Get values, preferring live data\n        const unemployment_rate = useLive && live.summary.unemployment_rate\n            ? live.summary.unemployment_rate\n            : baseline.labor_market.unemployment_rate.value;\n\n        const total_employment = useLive && live.summary.total_employment\n            ? live.summary.total_employment\n            : baseline.labor_market.total_employment.value;\n\n        const labor_force_participation = useLive && live.summary.labor_force_participation\n            ? live.summary.labor_force_participation\n            : baseline.labor_market.labor_force_participation.value;\n\n        const job_openings = useLive && live.summary.job_openings\n            ? live.summary.job_openings\n            : baseline.labor_market.job_openings.value;\n\n        const average_hourly = useLive && live.summary.average_hourly_earnings\n            ? live.summary.average_hourly_earnings\n            : baseline.wages.average_hourly_earnings.value;\n\n        return {\n            timestamp: new Date().toISOString(),\n            dataSource: useLive ? 'live' : 'baseline',\n            dataDate: useLive ? live.summary.data_date : 'Oct 2024',\n            lastUpdated: useLive ? live.lastUpdated : null,\n            labor_market: {\n                total_employment: total_employment,\n                unemployment_rate: unemployment_rate,\n                labor_force_participation: labor_force_participation,\n                job_openings: job_openings,\n                unemployed_count: Math.round(\n                    total_employment *\n                    (unemployment_rate / 100) /\n                    (1 - unemployment_rate / 100)\n                )\n            },\n            wages: {\n                median_weekly: baseline.wages.median_weekly_earnings.value,\n                average_hourly: average_hourly,\n                real_wage_growth: baseline.wages.real_wage_growth.value\n            },\n            productivity: {\n                growth_rate: baseline.productivity.labor_productivity_growth.value,\n                output_per_hour: baseline.productivity.output_per_hour.value\n            },\n            sectors: baseline.sectors,\n            ai_indicators: baseline.ai_indicators.real || baseline.ai_indicators,\n            demographics: baseline.demographics\n        };\n    }\n\n    /**\n     * Fetch data from BLS API\n     * @param {string[]} seriesIds - BLS series IDs to fetch\n     * @param {number} startYear - Start year\n     * @param {number} endYear - End year\n     * @param {string} apiKey - BLS API key (optional)\n     */\n    async fetchBLSData(seriesIds, startYear, endYear, apiKey = null) {\n        const cacheKey = `bls_${seriesIds.join('_')}_${startYear}_${endYear}`;\n\n        if (this.cache.has(cacheKey)) {\n            const cached = this.cache.get(cacheKey);\n            if (Date.now() - cached.timestamp < this.cacheExpiry) {\n                return cached.data;\n            }\n        }\n\n        const payload = {\n            seriesid: seriesIds,\n            startyear: startYear.toString(),\n            endyear: endYear.toString()\n        };\n\n        if (apiKey) {\n            payload.registrationkey = apiKey;\n        }\n\n        try {\n            const response = await fetch(this.endpoints.bls, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n\n            const data = await response.json();\n\n            if (data.status === 'REQUEST_SUCCEEDED') {\n                this.cache.set(cacheKey, {\n                    timestamp: Date.now(),\n                    data: data.Results.series\n                });\n                return data.Results.series;\n            }\n\n            throw new Error(`BLS API error: ${data.message}`);\n        } catch (error) {\n            console.warn('BLS API fetch failed, using baseline data:', error);\n            return this.getHistoricalFromBaseline(seriesIds);\n        }\n    }\n\n    /**\n     * Fetch data from FRED API\n     * @param {string} seriesId - FRED series ID\n     * @param {string} apiKey - FRED API key\n     * @param {string} startDate - Start date (YYYY-MM-DD)\n     * @param {string} endDate - End date (YYYY-MM-DD)\n     */\n    async fetchFREDData(seriesId, apiKey, startDate = null, endDate = null) {\n        const cacheKey = `fred_${seriesId}_${startDate}_${endDate}`;\n\n        if (this.cache.has(cacheKey)) {\n            const cached = this.cache.get(cacheKey);\n            if (Date.now() - cached.timestamp < this.cacheExpiry) {\n                return cached.data;\n            }\n        }\n\n        let url = `${this.endpoints.fred}?series_id=${seriesId}&api_key=${apiKey}&file_type=json`;\n        if (startDate) url += `&observation_start=${startDate}`;\n        if (endDate) url += `&observation_end=${endDate}`;\n\n        try {\n            const response = await fetch(url);\n            const data = await response.json();\n\n            this.cache.set(cacheKey, {\n                timestamp: Date.now(),\n                data: data.observations\n            });\n\n            return data.observations;\n        } catch (error) {\n            console.warn('FRED API fetch failed:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Get historical data from baseline when API unavailable\n     */\n    getHistoricalFromBaseline(indicators) {\n        if (!this.baselineData) return null;\n\n        const historical = this.baselineData.historical_trends;\n        const result = {};\n\n        indicators.forEach(indicator => {\n            if (historical[indicator]) {\n                result[indicator] = historical[indicator];\n            }\n        });\n\n        return result;\n    }\n\n    /**\n     * Get sector-specific data\n     */\n    async getSectorData() {\n        const baseline = await this.loadBaselineData();\n        return baseline.sectors;\n    }\n\n    /**\n     * Get demographic breakdown\n     */\n    async getDemographicData() {\n        const baseline = await this.loadBaselineData();\n        return baseline.demographics;\n    }\n\n    /**\n     * Get AI-specific indicators\n     */\n    async getAIIndicators() {\n        const baseline = await this.loadBaselineData();\n        return baseline.ai_indicators;\n    }\n\n    /**\n     * Get historical trends\n     */\n    async getHistoricalTrends() {\n        const baseline = await this.loadBaselineData();\n        return baseline.historical_trends;\n    }\n\n    /**\n     * Calculate derived metrics\n     */\n    calculateDerivedMetrics(snapshot) {\n        const { labor_market, wages, productivity } = snapshot;\n\n        return {\n            // Employment-to-population ratio\n            employment_ratio: (labor_market.total_employment / 210000000) * 100,\n\n            // Beveridge curve point (vacancy rate vs unemployment)\n            vacancy_rate: (labor_market.job_openings /\n                (labor_market.total_employment + labor_market.job_openings)) * 100,\n\n            // Labor market tightness\n            market_tightness: labor_market.job_openings / labor_market.unemployed_count,\n\n            // Productivity-wage gap (indexed)\n            productivity_wage_gap: productivity.output_per_hour -\n                (wages.average_hourly / 0.30), // Rough indexing\n\n            // Annual wages estimate\n            annual_median_wage: wages.median_weekly * 52\n        };\n    }\n\n    /**\n     * Export data for analysis\n     */\n    async exportData(format = 'json') {\n        const snapshot = await this.getCurrentSnapshot();\n        const derived = this.calculateDerivedMetrics(snapshot);\n\n        const exportData = {\n            snapshot,\n            derived,\n            historical: await this.getHistoricalTrends(),\n            exported_at: new Date().toISOString()\n        };\n\n        if (format === 'json') {\n            return JSON.stringify(exportData, null, 2);\n        }\n\n        // CSV format for key metrics\n        if (format === 'csv') {\n            const rows = [\n                ['Metric', 'Value', 'Unit'],\n                ['Unemployment Rate', snapshot.labor_market.unemployment_rate, '%'],\n                ['Total Employment', snapshot.labor_market.total_employment, 'persons'],\n                ['Labor Force Participation', snapshot.labor_market.labor_force_participation, '%'],\n                ['Job Openings', snapshot.labor_market.job_openings, 'positions'],\n                ['Median Weekly Earnings', snapshot.wages.median_weekly, 'USD'],\n                ['Productivity Growth', snapshot.productivity.growth_rate, '%'],\n                ['Market Tightness', derived.market_tightness.toFixed(2), 'ratio']\n            ];\n\n            return rows.map(row => row.join(',')).join('\\n');\n        }\n\n        return exportData;\n    }\n}\n\n// Export for ES modules\nexport { EconomicDataService };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.EconomicDataService = EconomicDataService;\n}\n","/**\n * Economic Indicators Module\n * Defines and tracks key indicators for AI labor market impact\n */\n\nclass EconomicIndicators {\n    constructor() {\n        this.indicators = this.defineIndicators();\n        this.weights = this.defineWeights();\n    }\n\n    /**\n     * Define all tracked indicators with metadata\n     */\n    defineIndicators() {\n        return {\n            // Core Labor Market Indicators\n            labor_market: {\n                unemployment_rate: {\n                    name: 'Unemployment Rate',\n                    description: 'Percentage of labor force unemployed',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'monthly',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                },\n                underemployment_rate: {\n                    name: 'U-6 Underemployment Rate',\n                    description: 'Includes marginally attached and part-time for economic reasons',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'monthly',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                },\n                labor_force_participation: {\n                    name: 'Labor Force Participation Rate',\n                    description: 'Percentage of working-age population in labor force',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'monthly',\n                    ai_relevance: 'medium',\n                    direction: 'context_dependent'\n                },\n                job_openings: {\n                    name: 'Job Openings (JOLTS)',\n                    description: 'Number of unfilled job positions',\n                    unit: 'millions',\n                    source: 'BLS JOLTS',\n                    frequency: 'monthly',\n                    ai_relevance: 'high',\n                    direction: 'context_dependent'\n                },\n                hires_rate: {\n                    name: 'Hires Rate',\n                    description: 'Rate of new hires as percentage of employment',\n                    unit: '%',\n                    source: 'BLS JOLTS',\n                    frequency: 'monthly',\n                    ai_relevance: 'medium',\n                    direction: 'higher_better'\n                },\n                separations_rate: {\n                    name: 'Separations Rate',\n                    description: 'Rate of job separations (quits + layoffs)',\n                    unit: '%',\n                    source: 'BLS JOLTS',\n                    frequency: 'monthly',\n                    ai_relevance: 'medium',\n                    direction: 'context_dependent'\n                },\n                unemployment_duration: {\n                    name: 'Average Unemployment Duration',\n                    description: 'Average weeks unemployed',\n                    unit: 'weeks',\n                    source: 'BLS',\n                    frequency: 'monthly',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                }\n            },\n\n            // Wage & Income Indicators\n            wages: {\n                real_wage_growth: {\n                    name: 'Real Wage Growth',\n                    description: 'Year-over-year growth in inflation-adjusted wages',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'monthly',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                wage_percentile_10: {\n                    name: '10th Percentile Wage',\n                    description: 'Hourly wage at 10th percentile',\n                    unit: 'USD/hr',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                wage_percentile_50: {\n                    name: 'Median Wage',\n                    description: 'Hourly wage at 50th percentile',\n                    unit: 'USD/hr',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'medium',\n                    direction: 'higher_better'\n                },\n                wage_percentile_90: {\n                    name: '90th Percentile Wage',\n                    description: 'Hourly wage at 90th percentile',\n                    unit: 'USD/hr',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'medium',\n                    direction: 'context_dependent'\n                },\n                wage_polarization: {\n                    name: 'Wage Polarization Index',\n                    description: 'Ratio of 90th to 10th percentile wages',\n                    unit: 'ratio',\n                    source: 'calculated',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                },\n                labor_share: {\n                    name: 'Labor Share of Income',\n                    description: 'Percentage of national income going to workers',\n                    unit: '%',\n                    source: 'BLS/FRED',\n                    frequency: 'quarterly',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                gini_coefficient: {\n                    name: 'Gini Coefficient',\n                    description: 'Income inequality measure (0=equal, 1=unequal)',\n                    unit: 'index',\n                    source: 'Census',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                }\n            },\n\n            // Productivity Indicators\n            productivity: {\n                labor_productivity: {\n                    name: 'Labor Productivity Growth',\n                    description: 'Output per hour worked, year-over-year growth',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'quarterly',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                multifactor_productivity: {\n                    name: 'Multifactor Productivity',\n                    description: 'Output growth not explained by labor/capital inputs',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                productivity_wage_gap: {\n                    name: 'Productivity-Wage Gap',\n                    description: 'Difference between productivity and wage growth',\n                    unit: '%',\n                    source: 'calculated',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                }\n            },\n\n            // AI-Specific Indicators\n            ai_impact: {\n                automation_exposure_index: {\n                    name: 'Automation Exposure Index',\n                    description: 'Weighted average of job automation risk',\n                    unit: 'index 0-100',\n                    source: 'calculated',\n                    frequency: 'calculated',\n                    ai_relevance: 'critical',\n                    direction: 'context_dependent'\n                },\n                ai_job_postings_share: {\n                    name: 'AI Job Postings Share',\n                    description: 'Percentage of job postings requiring AI skills',\n                    unit: '%',\n                    source: 'Indeed/LinkedIn',\n                    frequency: 'monthly',\n                    ai_relevance: 'critical',\n                    direction: 'context_dependent'\n                },\n                ai_adoption_rate: {\n                    name: 'AI Adoption Rate',\n                    description: 'Percentage of firms using AI technologies',\n                    unit: '%',\n                    source: 'Census/Surveys',\n                    frequency: 'quarterly',\n                    ai_relevance: 'critical',\n                    direction: 'context_dependent'\n                },\n                displaced_worker_ratio: {\n                    name: 'Displaced Worker Ratio',\n                    description: 'Workers displaced by technology as share of separations',\n                    unit: '%',\n                    source: 'calculated',\n                    frequency: 'monthly',\n                    ai_relevance: 'critical',\n                    direction: 'lower_better'\n                },\n                skill_premium: {\n                    name: 'AI Skill Premium',\n                    description: 'Wage premium for AI-complementary skills',\n                    unit: '%',\n                    source: 'calculated',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'context_dependent'\n                },\n                task_automation_rate: {\n                    name: 'Task Automation Rate',\n                    description: 'Percentage of tasks automated by AI/ML',\n                    unit: '%',\n                    source: 'estimated',\n                    frequency: 'annual',\n                    ai_relevance: 'critical',\n                    direction: 'context_dependent'\n                },\n                new_job_creation_rate: {\n                    name: 'AI-Related Job Creation',\n                    description: 'New jobs created in AI-related fields',\n                    unit: 'thousands/month',\n                    source: 'BLS/Indeed',\n                    frequency: 'monthly',\n                    ai_relevance: 'critical',\n                    direction: 'higher_better'\n                }\n            },\n\n            // Sector-Specific Indicators\n            sector: {\n                sector_employment_change: {\n                    name: 'Sector Employment Change',\n                    description: 'Year-over-year employment change by sector',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'monthly',\n                    ai_relevance: 'high',\n                    direction: 'context_dependent'\n                },\n                sector_productivity: {\n                    name: 'Sector Productivity',\n                    description: 'Labor productivity by sector',\n                    unit: 'index',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                sector_automation_exposure: {\n                    name: 'Sector Automation Exposure',\n                    description: 'Automation risk score by sector',\n                    unit: 'index 0-1',\n                    source: 'calculated',\n                    frequency: 'annual',\n                    ai_relevance: 'critical',\n                    direction: 'context_dependent'\n                }\n            },\n\n            // Skills & Education\n            skills: {\n                skill_mismatch_index: {\n                    name: 'Skill Mismatch Index',\n                    description: 'Gap between job requirements and worker skills',\n                    unit: 'index',\n                    source: 'calculated',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'lower_better'\n                },\n                retraining_participation: {\n                    name: 'Retraining Participation Rate',\n                    description: 'Workers enrolled in retraining programs',\n                    unit: '%',\n                    source: 'DOL',\n                    frequency: 'annual',\n                    ai_relevance: 'high',\n                    direction: 'higher_better'\n                },\n                education_wage_premium: {\n                    name: 'Education Wage Premium',\n                    description: 'Wage difference by education level',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'medium',\n                    direction: 'context_dependent'\n                },\n                stem_employment_share: {\n                    name: 'STEM Employment Share',\n                    description: 'Percentage of employment in STEM fields',\n                    unit: '%',\n                    source: 'BLS',\n                    frequency: 'annual',\n                    ai_relevance: 'medium',\n                    direction: 'context_dependent'\n                }\n            }\n        };\n    }\n\n    /**\n     * Define weights for composite index calculation\n     */\n    defineWeights() {\n        return {\n            ai_impact_composite: {\n                automation_exposure_index: 0.25,\n                displaced_worker_ratio: 0.20,\n                productivity_wage_gap: 0.15,\n                ai_adoption_rate: 0.15,\n                new_job_creation_rate: 0.10,\n                skill_mismatch_index: 0.10,\n                wage_polarization: 0.05\n            },\n            labor_market_health: {\n                unemployment_rate: 0.30,\n                labor_force_participation: 0.15,\n                real_wage_growth: 0.20,\n                job_openings: 0.15,\n                underemployment_rate: 0.10,\n                unemployment_duration: 0.10\n            }\n        };\n    }\n\n    /**\n     * Calculate AI Impact Composite Score\n     */\n    calculateAIImpactScore(values) {\n        const weights = this.weights.ai_impact_composite;\n        let score = 0;\n        let totalWeight = 0;\n\n        for (const [indicator, weight] of Object.entries(weights)) {\n            if (values[indicator] !== undefined) {\n                // Normalize values to 0-100 scale\n                let normalizedValue = this.normalizeValue(indicator, values[indicator]);\n                score += normalizedValue * weight;\n                totalWeight += weight;\n            }\n        }\n\n        return totalWeight > 0 ? score / totalWeight : null;\n    }\n\n    /**\n     * Calculate Labor Market Health Score\n     */\n    calculateLaborMarketHealth(values) {\n        const weights = this.weights.labor_market_health;\n        let score = 100; // Start at 100, subtract for problems\n\n        // Lower unemployment is better\n        if (values.unemployment_rate !== undefined) {\n            score -= (values.unemployment_rate - 4) * 5 * weights.unemployment_rate;\n        }\n\n        // Higher LFPR is generally better\n        if (values.labor_force_participation !== undefined) {\n            score += (values.labor_force_participation - 62) * 2 * weights.labor_force_participation;\n        }\n\n        // Positive wage growth is better\n        if (values.real_wage_growth !== undefined) {\n            score += values.real_wage_growth * 5 * weights.real_wage_growth;\n        }\n\n        return Math.max(0, Math.min(100, score));\n    }\n\n    /**\n     * Normalize indicator value to 0-100 scale\n     */\n    normalizeValue(indicator, value) {\n        const ranges = {\n            automation_exposure_index: { min: 0, max: 100 },\n            displaced_worker_ratio: { min: 0, max: 20 },\n            productivity_wage_gap: { min: -5, max: 10 },\n            ai_adoption_rate: { min: 0, max: 100 },\n            new_job_creation_rate: { min: -100, max: 500 },\n            skill_mismatch_index: { min: 0, max: 100 },\n            wage_polarization: { min: 2, max: 8 },\n            unemployment_rate: { min: 2, max: 15 }\n        };\n\n        const range = ranges[indicator] || { min: 0, max: 100 };\n        return ((value - range.min) / (range.max - range.min)) * 100;\n    }\n\n    /**\n     * Get indicator metadata\n     */\n    getIndicatorInfo(category, indicator) {\n        if (this.indicators[category] && this.indicators[category][indicator]) {\n            return this.indicators[category][indicator];\n        }\n        return null;\n    }\n\n    /**\n     * Get all indicators for a category\n     */\n    getCategoryIndicators(category) {\n        return this.indicators[category] || {};\n    }\n\n    /**\n     * Get list of all indicator categories\n     */\n    getCategories() {\n        return Object.keys(this.indicators);\n    }\n\n    /**\n     * Calculate sector automation exposure\n     */\n    calculateSectorExposure(sectorData) {\n        const exposures = {};\n\n        for (const [sector, data] of Object.entries(sectorData)) {\n            exposures[sector] = {\n                name: sector.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n                exposure: data.automation_exposure,\n                employment: data.employment,\n                at_risk_jobs: Math.round(data.employment * data.automation_exposure),\n                risk_level: this.getRiskLevel(data.automation_exposure)\n            };\n        }\n\n        return exposures;\n    }\n\n    /**\n     * Get risk level category\n     */\n    getRiskLevel(exposure) {\n        if (exposure >= 0.7) return 'high';\n        if (exposure >= 0.5) return 'medium-high';\n        if (exposure >= 0.3) return 'medium';\n        return 'low';\n    }\n\n    /**\n     * Calculate jobs at risk summary\n     */\n    calculateJobsAtRisk(sectorData) {\n        let totalEmployment = 0;\n        let totalAtRisk = 0;\n        const byRiskLevel = { high: 0, 'medium-high': 0, medium: 0, low: 0 };\n\n        for (const data of Object.values(sectorData)) {\n            totalEmployment += data.employment;\n            const atRisk = data.employment * data.automation_exposure;\n            totalAtRisk += atRisk;\n\n            const level = this.getRiskLevel(data.automation_exposure);\n            byRiskLevel[level] += data.employment;\n        }\n\n        return {\n            total_employment: totalEmployment,\n            total_at_risk: Math.round(totalAtRisk),\n            percentage_at_risk: ((totalAtRisk / totalEmployment) * 100).toFixed(1),\n            by_risk_level: byRiskLevel\n        };\n    }\n\n    /**\n     * Project indicator values based on scenario\n     */\n    projectIndicator(currentValue, targetYear, scenario) {\n        const years = targetYear - new Date().getFullYear();\n        const growth = scenario.annual_growth || 0;\n        const shock = scenario.shock || 0;\n\n        return currentValue * Math.pow(1 + growth, years) + shock;\n    }\n\n    /**\n     * Export indicator definitions\n     */\n    exportDefinitions() {\n        return JSON.stringify(this.indicators, null, 2);\n    }\n}\n\n// Export for ES modules\nexport { EconomicIndicators };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.EconomicIndicators = EconomicIndicators;\n}\n","/**\n * Real Economic Metrics Module\n * Manages and displays real economic indicators with adjustment capabilities\n */\n\nclass RealMetricsSystem {\n    constructor() {\n        this.STORAGE_KEY = 'ai_labor_sim_real_metrics_adjustments';\n        this.metrics = null;\n        this.adjustments = this.loadAdjustments();\n    }\n\n    /**\n     * Initialize metrics from baseline data\n     */\n    async initialize(dataService) {\n        const baseline = await dataService.loadBaselineData();\n        this.metrics = this.buildMetricsStructure(baseline);\n        this.applyAdjustments();\n        return this.metrics;\n    }\n\n    /**\n     * Build structured metrics from baseline data\n     */\n    buildMetricsStructure(baseline) {\n        return {\n            labor_market: {\n                category: 'Labor Market',\n                icon: '',\n                metrics: {\n                    unemployment_rate: {\n                        id: 'unemployment_rate',\n                        name: 'Unemployment Rate',\n                        shortName: 'UR',\n                        description: 'Percentage of labor force that is unemployed and actively seeking work',\n                        value: baseline.labor_market.unemployment_rate.value,\n                        baseValue: baseline.labor_market.unemployment_rate.value,\n                        unit: 'percent',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/cps/',\n                        seriesId: 'LNS14000000',\n                        date: baseline.labor_market.unemployment_rate.date,\n                        range: { min: 0, max: 25 },\n                        methodology: 'Current Population Survey (CPS) - monthly household survey of ~60,000 households',\n                        trend: 'stable',\n                        manuallyAdjusted: false\n                    },\n                    total_employment: {\n                        id: 'total_employment',\n                        name: 'Total Nonfarm Employment',\n                        shortName: 'EMP',\n                        description: 'Total number of persons employed in nonfarm industries',\n                        value: baseline.labor_market.total_employment.value,\n                        baseValue: baseline.labor_market.total_employment.value,\n                        unit: 'millions',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/ces/',\n                        seriesId: 'CES0000000001',\n                        date: baseline.labor_market.total_employment.date,\n                        range: { min: 100000000, max: 200000000 },\n                        methodology: 'Current Employment Statistics (CES) - monthly survey of ~131,000 businesses',\n                        trend: 'increasing',\n                        manuallyAdjusted: false\n                    },\n                    labor_force_participation: {\n                        id: 'labor_force_participation',\n                        name: 'Labor Force Participation Rate',\n                        shortName: 'LFPR',\n                        description: 'Percentage of working-age population in the labor force',\n                        value: baseline.labor_market.labor_force_participation.value,\n                        baseValue: baseline.labor_market.labor_force_participation.value,\n                        unit: 'percent',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/cps/',\n                        seriesId: 'LNS11300000',\n                        date: baseline.labor_market.labor_force_participation.date,\n                        range: { min: 50, max: 75 },\n                        methodology: 'Current Population Survey (CPS) - labor force / civilian noninstitutional population',\n                        trend: 'stable',\n                        manuallyAdjusted: false\n                    },\n                    job_openings: {\n                        id: 'job_openings',\n                        name: 'Job Openings',\n                        shortName: 'JO',\n                        description: 'Total number of job openings on the last business day of the month',\n                        value: baseline.labor_market.job_openings.value,\n                        baseValue: baseline.labor_market.job_openings.value,\n                        unit: 'millions',\n                        source: 'Job Openings and Labor Turnover Survey (JOLTS)',\n                        sourceUrl: 'https://www.bls.gov/jlt/',\n                        seriesId: 'JTS000000000000000JOL',\n                        date: baseline.labor_market.job_openings.date,\n                        range: { min: 3000000, max: 15000000 },\n                        methodology: 'JOLTS survey of ~21,000 establishments',\n                        trend: 'decreasing',\n                        manuallyAdjusted: false\n                    },\n                    quits_rate: {\n                        id: 'quits_rate',\n                        name: 'Quits Rate',\n                        shortName: 'QR',\n                        description: 'Voluntary separations as a percent of total employment',\n                        value: baseline.labor_market.quits_rate.value,\n                        baseValue: baseline.labor_market.quits_rate.value,\n                        unit: 'percent',\n                        source: 'Job Openings and Labor Turnover Survey (JOLTS)',\n                        sourceUrl: 'https://www.bls.gov/jlt/',\n                        seriesId: 'JTS000000000000000QUR',\n                        date: baseline.labor_market.quits_rate.date,\n                        range: { min: 1, max: 4 },\n                        methodology: 'JOLTS - quits / total employment  100',\n                        trend: 'stable',\n                        manuallyAdjusted: false\n                    }\n                }\n            },\n            wages: {\n                category: 'Wages & Earnings',\n                icon: '',\n                metrics: {\n                    average_hourly_earnings: {\n                        id: 'average_hourly_earnings',\n                        name: 'Average Hourly Earnings',\n                        shortName: 'AHE',\n                        description: 'Average hourly earnings of all employees on private nonfarm payrolls',\n                        value: baseline.wages.average_hourly_earnings.value,\n                        baseValue: baseline.wages.average_hourly_earnings.value,\n                        unit: 'currency',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/ces/',\n                        seriesId: 'CES0500000003',\n                        date: baseline.wages.average_hourly_earnings.date,\n                        range: { min: 20, max: 60 },\n                        methodology: 'Current Employment Statistics - total earnings / total hours',\n                        trend: 'increasing',\n                        manuallyAdjusted: false\n                    },\n                    median_weekly_earnings: {\n                        id: 'median_weekly_earnings',\n                        name: 'Median Weekly Earnings',\n                        shortName: 'MWE',\n                        description: 'Median usual weekly earnings of full-time wage and salary workers',\n                        value: baseline.wages.median_weekly_earnings.value,\n                        baseValue: baseline.wages.median_weekly_earnings.value,\n                        unit: 'currency',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/cps/',\n                        seriesId: 'LEU0252881500',\n                        date: baseline.wages.median_weekly_earnings.date,\n                        range: { min: 500, max: 2000 },\n                        methodology: 'Current Population Survey - median of all full-time workers',\n                        trend: 'increasing',\n                        manuallyAdjusted: false\n                    },\n                    real_wage_growth: {\n                        id: 'real_wage_growth',\n                        name: 'Real Wage Growth',\n                        shortName: 'RWG',\n                        description: 'Year-over-year change in inflation-adjusted wages',\n                        value: baseline.wages.real_wage_growth.value,\n                        baseValue: baseline.wages.real_wage_growth.value,\n                        unit: 'percent',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/',\n                        date: baseline.wages.real_wage_growth.date,\n                        range: { min: -5, max: 10 },\n                        methodology: 'Nominal wage growth minus CPI inflation rate',\n                        trend: 'stable',\n                        manuallyAdjusted: false\n                    }\n                }\n            },\n            productivity: {\n                category: 'Productivity',\n                icon: '',\n                metrics: {\n                    labor_productivity_growth: {\n                        id: 'labor_productivity_growth',\n                        name: 'Labor Productivity Growth',\n                        shortName: 'LPG',\n                        description: 'Year-over-year change in output per hour worked',\n                        value: baseline.productivity.labor_productivity_growth.value,\n                        baseValue: baseline.productivity.labor_productivity_growth.value,\n                        unit: 'percent',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/lpc/',\n                        seriesId: 'PRS85006092',\n                        date: baseline.productivity.labor_productivity_growth.date,\n                        range: { min: -3, max: 8 },\n                        methodology: 'Major Sector Productivity Program - real output / hours worked',\n                        trend: 'increasing',\n                        manuallyAdjusted: false\n                    },\n                    output_per_hour: {\n                        id: 'output_per_hour',\n                        name: 'Output Per Hour Index',\n                        shortName: 'OPH',\n                        description: 'Index of output per hour of all persons (2017=100)',\n                        value: baseline.productivity.output_per_hour.value,\n                        baseValue: baseline.productivity.output_per_hour.value,\n                        unit: 'index',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/lpc/',\n                        seriesId: 'PRS85006093',\n                        date: baseline.productivity.output_per_hour.date,\n                        range: { min: 90, max: 150 },\n                        methodology: 'Major Sector Productivity Program - indexed to 2017 base year',\n                        trend: 'increasing',\n                        manuallyAdjusted: false\n                    },\n                    unit_labor_costs: {\n                        id: 'unit_labor_costs',\n                        name: 'Unit Labor Costs Growth',\n                        shortName: 'ULC',\n                        description: 'Year-over-year change in labor costs per unit of output',\n                        value: baseline.productivity.unit_labor_costs.value,\n                        baseValue: baseline.productivity.unit_labor_costs.value,\n                        unit: 'percent',\n                        source: 'Bureau of Labor Statistics (BLS)',\n                        sourceUrl: 'https://www.bls.gov/lpc/',\n                        seriesId: 'PRS85006112',\n                        date: baseline.productivity.unit_labor_costs.date,\n                        range: { min: -3, max: 8 },\n                        methodology: 'Major Sector Productivity - compensation / productivity',\n                        trend: 'stable',\n                        manuallyAdjusted: false\n                    }\n                }\n            },\n            demographics: {\n                category: 'Demographics',\n                icon: '',\n                metrics: {\n                    working_age_population: {\n                        id: 'working_age_population',\n                        name: 'Working Age Population',\n                        shortName: 'WAP',\n                        description: 'Civilian noninstitutional population 16 years and older',\n                        value: baseline.demographics.working_age_population.value,\n                        baseValue: baseline.demographics.working_age_population.value,\n                        unit: 'millions',\n                        source: 'U.S. Census Bureau',\n                        sourceUrl: 'https://www.census.gov/',\n                        date: '2024',\n                        range: { min: 180000000, max: 250000000 },\n                        methodology: 'Census population estimates and American Community Survey',\n                        trend: 'increasing',\n                        manuallyAdjusted: false\n                    }\n                }\n            }\n        };\n    }\n\n    /**\n     * Get all metrics in flat format\n     */\n    getAllMetrics() {\n        const allMetrics = {};\n        if (!this.metrics) return allMetrics;\n\n        Object.values(this.metrics).forEach(category => {\n            Object.entries(category.metrics).forEach(([id, metric]) => {\n                allMetrics[id] = {\n                    ...metric,\n                    category: category.category,\n                    categoryIcon: category.icon\n                };\n            });\n        });\n        return allMetrics;\n    }\n\n    /**\n     * Get metrics grouped by category\n     */\n    getMetricsByCategory() {\n        return this.metrics;\n    }\n\n    /**\n     * Get a single metric\n     */\n    getMetric(id) {\n        const all = this.getAllMetrics();\n        return all[id] || null;\n    }\n\n    /**\n     * Set metric value (manual adjustment)\n     */\n    setMetricValue(id, value) {\n        const metric = this.findMetricById(id);\n        if (metric) {\n            metric.value = parseFloat(value);\n            metric.manuallyAdjusted = true;\n            this.saveAdjustments();\n        }\n    }\n\n    /**\n     * Find metric by ID across all categories\n     */\n    findMetricById(id) {\n        if (!this.metrics) return null;\n\n        for (const category of Object.values(this.metrics)) {\n            if (category.metrics[id]) {\n                return category.metrics[id];\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Reset a single metric to base value\n     */\n    resetMetric(id) {\n        const metric = this.findMetricById(id);\n        if (metric) {\n            metric.value = metric.baseValue;\n            metric.manuallyAdjusted = false;\n            this.saveAdjustments();\n        }\n    }\n\n    /**\n     * Reset all metrics to base values\n     */\n    resetAllMetrics() {\n        if (!this.metrics) return;\n\n        Object.values(this.metrics).forEach(category => {\n            Object.values(category.metrics).forEach(metric => {\n                metric.value = metric.baseValue;\n                metric.manuallyAdjusted = false;\n            });\n        });\n        localStorage.removeItem(this.STORAGE_KEY);\n    }\n\n    /**\n     * Save adjustments to localStorage\n     */\n    saveAdjustments() {\n        if (!this.metrics) return;\n\n        const adjustments = {};\n        Object.values(this.metrics).forEach(category => {\n            Object.entries(category.metrics).forEach(([id, metric]) => {\n                if (metric.manuallyAdjusted) {\n                    adjustments[id] = metric.value;\n                }\n            });\n        });\n        localStorage.setItem(this.STORAGE_KEY, JSON.stringify(adjustments));\n    }\n\n    /**\n     * Load adjustments from localStorage\n     */\n    loadAdjustments() {\n        try {\n            const saved = localStorage.getItem(this.STORAGE_KEY);\n            return saved ? JSON.parse(saved) : {};\n        } catch (error) {\n            console.error('Error loading metric adjustments:', error);\n            return {};\n        }\n    }\n\n    /**\n     * Apply saved adjustments to metrics\n     */\n    applyAdjustments() {\n        if (!this.metrics || !this.adjustments) return;\n\n        Object.entries(this.adjustments).forEach(([id, value]) => {\n            const metric = this.findMetricById(id);\n            if (metric) {\n                metric.value = value;\n                metric.manuallyAdjusted = true;\n            }\n        });\n    }\n\n    /**\n     * Get current values as object (for simulation)\n     */\n    getCurrentValues() {\n        const values = {};\n        const all = this.getAllMetrics();\n        Object.entries(all).forEach(([id, metric]) => {\n            values[id] = metric.value;\n        });\n        return values;\n    }\n\n    /**\n     * Get data sources info\n     */\n    getDataSources() {\n        return [\n            {\n                id: 'bls',\n                name: 'Bureau of Labor Statistics (BLS)',\n                type: 'Government',\n                url: 'https://www.bls.gov/',\n                description: 'Primary source for employment, unemployment, wages, and productivity data',\n                metrics: ['Unemployment Rate', 'Employment', 'Wages', 'Productivity', 'JOLTS'],\n                updateFrequency: 'Monthly/Quarterly'\n            },\n            {\n                id: 'fred',\n                name: 'Federal Reserve Economic Data (FRED)',\n                type: 'Government',\n                url: 'https://fred.stlouisfed.org/',\n                description: 'Comprehensive database of economic time series from various sources',\n                metrics: ['GDP', 'Interest Rates', 'Labor Share', 'Corporate Profits'],\n                updateFrequency: 'Varies by series'\n            },\n            {\n                id: 'census',\n                name: 'U.S. Census Bureau',\n                type: 'Government',\n                url: 'https://www.census.gov/',\n                description: 'Population estimates, demographic data, and economic surveys',\n                metrics: ['Population', 'Demographics', 'Income Distribution'],\n                updateFrequency: 'Annual/Decennial'\n            },\n            {\n                id: 'jolts',\n                name: 'Job Openings and Labor Turnover Survey (JOLTS)',\n                type: 'Government',\n                url: 'https://www.bls.gov/jlt/',\n                description: 'Data on job openings, hires, and separations',\n                metrics: ['Job Openings', 'Hires Rate', 'Quits Rate', 'Layoffs'],\n                updateFrequency: 'Monthly'\n            },\n            {\n                id: 'onet',\n                name: 'O*NET (Occupational Information Network)',\n                type: 'Government',\n                url: 'https://www.onetonline.org/',\n                description: 'Comprehensive database of occupational characteristics',\n                metrics: ['Occupation Skills', 'Task Requirements', 'Work Activities'],\n                updateFrequency: 'Annual'\n            }\n        ];\n    }\n}\n\n// Global instance\nconst realMetricsSystem = new RealMetricsSystem();\n\n// Export for ES modules\nexport { RealMetricsSystem, realMetricsSystem };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.RealMetricsSystem = RealMetricsSystem;\n    window.realMetricsSystem = realMetricsSystem;\n}\n","/**\n * Hypothetical AI Labor Market Indicators\n *\n * Based on research from:\n * - Anthropic Economic Index (https://www.anthropic.com/economic-index)\n * - MIT Iceberg Index (https://iceberg.mit.edu)\n * - IMF Labor Market Impact Research\n * - Yale Budget Lab Analysis\n * - Stanford Digital Economy Lab\n * - ILO Generative AI Reports\n * - BLS O*NET Task Framework\n */\n\nclass HypotheticalIndicatorsSystem {\n    constructor() {\n        // Storage key for custom indicators\n        this.STORAGE_KEY = 'ai_labor_sim_hypothetical_indicators';\n        this.CUSTOM_STORAGE_KEY = 'ai_labor_sim_custom_indicators';\n\n        // Initialize built-in indicators\n        this.indicators = this.getDefaultIndicators();\n\n        // Load any saved adjustments\n        this.loadSavedAdjustments();\n\n        // Load custom indicators\n        this.customIndicators = this.loadCustomIndicators();\n    }\n\n    /**\n     * Get the top 10 research-based hypothetical indicators\n     */\n    getDefaultIndicators() {\n        return {\n            task_automation_rate: {\n                id: 'task_automation_rate',\n                name: 'Task Automation Rate',\n                shortName: 'TAR',\n                value: 43,\n                baseValue: 43,\n                unit: 'percent',\n                description: 'Percentage of economic tasks performed via AI automation (vs. augmentation)',\n                methodology: 'Measures the share of AI interactions that involve task delegation rather than human-AI collaboration',\n                source: 'Anthropic Economic Index',\n                sourceUrl: 'https://www.anthropic.com/economic-index',\n                confidence: 'medium',\n                category: 'automation',\n                linkedMetrics: ['ai_adoption', 'productivity_growth'],\n                linkageFormula: {\n                    ai_adoption: 0.5,      // 1% AI adoption increase = 0.5% TAR increase\n                    productivity_growth: 0.3\n                },\n                range: { min: 0, max: 100 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            ai_occupational_exposure: {\n                id: 'ai_occupational_exposure',\n                name: 'AI Occupational Exposure Index',\n                shortName: 'AIOE',\n                value: 36,\n                baseValue: 36,\n                unit: 'percent_jobs_exposed',\n                description: 'Percentage of jobs with significant AI exposure (25%+ of tasks)',\n                methodology: 'Maps AI capabilities to O*NET occupational tasks to calculate exposure scores',\n                source: 'Felten, Raj, Seamans (2023) / Anthropic Economic Index',\n                sourceUrl: 'https://www.anthropic.com/news/the-anthropic-economic-index',\n                confidence: 'high',\n                category: 'exposure',\n                linkedMetrics: ['unemployment_rate', 'ai_adoption'],\n                linkageFormula: {\n                    unemployment_rate: -0.8,  // Higher unemployment = lower exposure (paradox - layoffs reduce AI-exposed workforce)\n                    ai_adoption: 0.4\n                },\n                range: { min: 0, max: 100 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            genai_workforce_adoption: {\n                id: 'genai_workforce_adoption',\n                name: 'GenAI Workforce Adoption Rate',\n                shortName: 'GWAR',\n                value: 23,\n                baseValue: 23,\n                unit: 'percent_workers',\n                description: 'Percentage of workers using generative AI weekly for work tasks',\n                methodology: 'Based on Real-Time Population Survey measuring actual workplace AI usage',\n                source: 'Stanford Digital Economy Lab / Census surveys',\n                sourceUrl: 'https://digitaleconomy.stanford.edu/',\n                confidence: 'high',\n                category: 'adoption',\n                linkedMetrics: ['ai_adoption', 'productivity_growth'],\n                linkageFormula: {\n                    ai_adoption: 0.3,\n                    productivity_growth: 0.2\n                },\n                range: { min: 0, max: 100 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            skills_transformation_score: {\n                id: 'skills_transformation_score',\n                name: 'Skills-Based Transformation Score',\n                shortName: 'STS',\n                value: 28,\n                baseValue: 28,\n                unit: 'index_0_100',\n                description: 'Measures skills disruption invisible to traditional employment metrics',\n                methodology: 'Models individual workers as agents with skills mapped across 32,000 skill categories',\n                source: 'MIT Iceberg Index',\n                sourceUrl: 'https://iceberg.mit.edu',\n                confidence: 'medium',\n                category: 'skills',\n                linkedMetrics: ['ai_adoption', 'unemployment_rate', 'wage_growth'],\n                linkageFormula: {\n                    ai_adoption: 0.35,\n                    unemployment_rate: 0.2,\n                    wage_growth: -0.15\n                },\n                range: { min: 0, max: 100 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            job_displacement_velocity: {\n                id: 'job_displacement_velocity',\n                name: 'AI Job Displacement Velocity',\n                shortName: 'JDV',\n                value: 0.8,\n                baseValue: 0.8,\n                unit: 'percent_monthly',\n                description: 'Monthly rate of job displacement attributable to AI/automation',\n                methodology: 'Isolates AI-related employment changes from cyclical and other structural factors',\n                source: 'Yale Budget Lab / IMF Research',\n                sourceUrl: 'https://budgetlab.yale.edu/',\n                confidence: 'low',\n                category: 'displacement',\n                linkedMetrics: ['unemployment_rate', 'ai_adoption', 'automation_pace'],\n                linkageFormula: {\n                    unemployment_rate: 0.15,\n                    ai_adoption: 0.08,\n                    automation_pace: 0.25\n                },\n                range: { min: 0, max: 5 },\n                trend: 'uncertain',\n                icon: ''\n            },\n\n            human_ai_collaboration_index: {\n                id: 'human_ai_collaboration_index',\n                name: 'Human-AI Collaboration Index',\n                shortName: 'HACI',\n                value: 57,\n                baseValue: 57,\n                unit: 'percent_augmented',\n                description: 'Percentage of AI usage that augments (vs. replaces) human work',\n                methodology: 'Classifies AI interactions as automation vs. augmentation based on human involvement',\n                source: 'Anthropic Economic Index / ILO',\n                sourceUrl: 'https://www.ilo.org/publications/generative-ai-and-jobs-2025-update',\n                confidence: 'medium',\n                category: 'collaboration',\n                linkedMetrics: ['productivity_growth', 'wage_growth'],\n                linkageFormula: {\n                    productivity_growth: 0.25,\n                    wage_growth: 0.15\n                },\n                range: { min: 0, max: 100 },\n                trend: 'decreasing',  // Automation gaining on augmentation per latest data\n                icon: ''\n            },\n\n            ai_wage_premium: {\n                id: 'ai_wage_premium',\n                name: 'AI Skills Wage Premium',\n                shortName: 'AIWP',\n                value: 18,\n                baseValue: 18,\n                unit: 'percent_premium',\n                description: 'Wage premium for workers with AI-complementary skills',\n                methodology: 'Compares wages for similar roles with/without AI skill requirements',\n                source: 'Research synthesis / Job posting analysis',\n                sourceUrl: 'https://eig.org/ai-and-jobs-the-final-word/',\n                confidence: 'medium',\n                category: 'wages',\n                linkedMetrics: ['wage_growth', 'ai_adoption', 'unemployment_rate'],\n                linkageFormula: {\n                    wage_growth: 0.5,\n                    ai_adoption: 0.2,\n                    unemployment_rate: -0.3\n                },\n                range: { min: -20, max: 50 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            emerging_role_creation: {\n                id: 'emerging_role_creation',\n                name: 'Emerging Role Creation Rate',\n                shortName: 'ERCR',\n                value: 2.1,\n                baseValue: 2.1,\n                unit: 'percent_new_roles',\n                description: 'Annual rate of new job categories created by AI advancement',\n                methodology: 'Tracks job postings for roles not in standard BLS occupation codes',\n                source: 'BLS methodology gap / Indeed analysis',\n                sourceUrl: 'https://www.bls.gov/opub/mlr/2025/article/incorporating-ai-impacts-in-bls-employment-projections.htm',\n                confidence: 'low',\n                category: 'creation',\n                linkedMetrics: ['ai_adoption', 'productivity_growth', 'job_openings'],\n                linkageFormula: {\n                    ai_adoption: 0.05,\n                    productivity_growth: 0.03,\n                    job_openings: 0.02\n                },\n                range: { min: 0, max: 10 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            regional_ai_vulnerability: {\n                id: 'regional_ai_vulnerability',\n                name: 'Regional AI Vulnerability Score',\n                shortName: 'RAVS',\n                value: 34,\n                baseValue: 34,\n                unit: 'index_0_100',\n                description: 'Geographic concentration of AI displacement risk',\n                methodology: 'Combines regional industry mix with occupation-level AI exposure',\n                source: 'Anthropic Economic Index Geography / IMF',\n                sourceUrl: 'https://www.anthropic.com/research/economic-index-geography',\n                confidence: 'medium',\n                category: 'geographic',\n                linkedMetrics: ['unemployment_rate', 'ai_adoption'],\n                linkageFormula: {\n                    unemployment_rate: 0.4,\n                    ai_adoption: 0.25\n                },\n                range: { min: 0, max: 100 },\n                trend: 'increasing',\n                icon: ''\n            },\n\n            labor_share_ai_impact: {\n                id: 'labor_share_ai_impact',\n                name: 'Labor Share AI Impact',\n                shortName: 'LSAI',\n                value: -0.8,\n                baseValue: -0.8,\n                unit: 'percent_annual_change',\n                description: 'Annual change in labor share of income attributable to AI',\n                methodology: 'Isolates AI contribution to labor-capital income shift',\n                source: 'IMF Research / FRED data analysis',\n                sourceUrl: 'https://www.imf.org/en/Publications/WP/Issues/2024/09/13/The-Labor-Market-Impact-of-Artificial-Intelligence-Evidence-from-US-Regions-554845',\n                confidence: 'low',\n                category: 'distribution',\n                linkedMetrics: ['productivity_growth', 'wage_growth', 'ai_adoption'],\n                linkageFormula: {\n                    productivity_growth: -0.2,  // Higher productivity = more capital gains\n                    wage_growth: 0.15,\n                    ai_adoption: -0.1\n                },\n                range: { min: -5, max: 5 },\n                trend: 'decreasing',\n                icon: ''\n            }\n        };\n    }\n\n    /**\n     * Get all indicators (built-in + custom)\n     */\n    getAllIndicators() {\n        return { ...this.indicators, ...this.customIndicators };\n    }\n\n    /**\n     * Get indicator by ID\n     */\n    getIndicator(id) {\n        return this.indicators[id] || this.customIndicators[id];\n    }\n\n    /**\n     * Update indicator value manually\n     */\n    setIndicatorValue(id, value) {\n        const indicator = this.getIndicator(id);\n        if (indicator) {\n            indicator.value = Math.max(indicator.range.min, Math.min(indicator.range.max, value));\n            indicator.manuallyAdjusted = true;\n            this.saveAdjustments();\n            return indicator;\n        }\n        return null;\n    }\n\n    /**\n     * Reset indicator to base value\n     */\n    resetIndicator(id) {\n        const indicator = this.getIndicator(id);\n        if (indicator) {\n            indicator.value = indicator.baseValue;\n            indicator.manuallyAdjusted = false;\n            this.saveAdjustments();\n            return indicator;\n        }\n        return null;\n    }\n\n    /**\n     * Reset all indicators to base values\n     */\n    resetAllIndicators() {\n        Object.values(this.indicators).forEach(ind => {\n            ind.value = ind.baseValue;\n            ind.manuallyAdjusted = false;\n        });\n        this.saveAdjustments();\n    }\n\n    /**\n     * Calculate indicator values based on real metrics\n     * @param {Object} realMetrics - Current real metric values\n     * @param {Object} baselineMetrics - Baseline real metric values for comparison\n     */\n    calculateFromRealMetrics(realMetrics, baselineMetrics) {\n        const results = {};\n\n        Object.entries(this.indicators).forEach(([id, indicator]) => {\n            // Skip if manually adjusted\n            if (indicator.manuallyAdjusted) {\n                results[id] = indicator.value;\n                return;\n            }\n\n            let newValue = indicator.baseValue;\n\n            // Apply linkage formulas\n            Object.entries(indicator.linkageFormula).forEach(([metric, coefficient]) => {\n                const currentValue = realMetrics[metric];\n                const baselineValue = baselineMetrics[metric];\n\n                if (currentValue !== undefined && baselineValue !== undefined) {\n                    const change = currentValue - baselineValue;\n                    newValue += change * coefficient;\n                }\n            });\n\n            // Clamp to range\n            newValue = Math.max(indicator.range.min, Math.min(indicator.range.max, newValue));\n            indicator.value = newValue;\n            results[id] = newValue;\n        });\n\n        return results;\n    }\n\n    /**\n     * Get projected indicator values for a simulation scenario\n     */\n    projectIndicators(scenarioParams) {\n        const projections = {};\n        const { ai_adoption, unemployment_rate, productivity_growth, wage_growth, automation_pace } = scenarioParams;\n\n        // Map automation pace to numeric multiplier\n        const paceMultiplier = {\n            'slow': 0.7,\n            'moderate': 1.0,\n            'fast': 1.4,\n            'accelerating': 1.8\n        }[automation_pace] || 1.0;\n\n        Object.entries(this.indicators).forEach(([id, indicator]) => {\n            let projectedValue = indicator.baseValue;\n\n            // Apply linkage with scenario parameters\n            if (indicator.linkageFormula.ai_adoption && ai_adoption !== undefined) {\n                const aiChange = ai_adoption - 35; // Baseline ~35%\n                projectedValue += aiChange * indicator.linkageFormula.ai_adoption;\n            }\n\n            if (indicator.linkageFormula.unemployment_rate && unemployment_rate !== undefined) {\n                const urChange = unemployment_rate - 4.1; // Baseline 4.1%\n                projectedValue += urChange * indicator.linkageFormula.unemployment_rate;\n            }\n\n            if (indicator.linkageFormula.productivity_growth && productivity_growth !== undefined) {\n                const prodChange = productivity_growth - 2.2; // Baseline 2.2%\n                projectedValue += prodChange * indicator.linkageFormula.productivity_growth;\n            }\n\n            if (indicator.linkageFormula.wage_growth && wage_growth !== undefined) {\n                const wageChange = wage_growth - 1.4; // Baseline 1.4%\n                projectedValue += wageChange * indicator.linkageFormula.wage_growth;\n            }\n\n            if (indicator.linkageFormula.automation_pace) {\n                projectedValue *= paceMultiplier;\n            }\n\n            // Clamp and store\n            projectedValue = Math.max(indicator.range.min, Math.min(indicator.range.max, projectedValue));\n\n            projections[id] = {\n                ...indicator,\n                projectedValue,\n                change: projectedValue - indicator.baseValue,\n                percentChange: ((projectedValue - indicator.baseValue) / Math.abs(indicator.baseValue || 1)) * 100\n            };\n        });\n\n        return projections;\n    }\n\n    /**\n     * Add a custom indicator\n     */\n    addCustomIndicator(config) {\n        const id = config.id || `custom_${Date.now()}`;\n\n        const newIndicator = {\n            id,\n            name: config.name,\n            shortName: config.shortName || config.name.substring(0, 4).toUpperCase(),\n            value: config.value || 0,\n            baseValue: config.value || 0,\n            unit: config.unit || 'index',\n            description: config.description || '',\n            methodology: config.methodology || 'User-defined metric',\n            source: 'Custom',\n            sourceUrl: '',\n            confidence: 'user_defined',\n            category: config.category || 'custom',\n            linkedMetrics: config.linkedMetrics || [],\n            linkageFormula: config.linkageFormula || {},\n            range: config.range || { min: 0, max: 100 },\n            trend: config.trend || 'unknown',\n            icon: config.icon || '',\n            isCustom: true\n        };\n\n        this.customIndicators[id] = newIndicator;\n        this.saveCustomIndicators();\n        return newIndicator;\n    }\n\n    /**\n     * Remove a custom indicator\n     */\n    removeCustomIndicator(id) {\n        if (this.customIndicators[id]) {\n            delete this.customIndicators[id];\n            this.saveCustomIndicators();\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Update a custom indicator\n     */\n    updateCustomIndicator(id, updates) {\n        if (this.customIndicators[id]) {\n            Object.assign(this.customIndicators[id], updates);\n            this.saveCustomIndicators();\n            return this.customIndicators[id];\n        }\n        return null;\n    }\n\n    /**\n     * Save adjustments to localStorage\n     */\n    saveAdjustments() {\n        try {\n            const adjustments = {};\n            Object.entries(this.indicators).forEach(([id, ind]) => {\n                if (ind.manuallyAdjusted) {\n                    adjustments[id] = { value: ind.value, manuallyAdjusted: true };\n                }\n            });\n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(adjustments));\n        } catch (e) {\n            console.error('Failed to save indicator adjustments:', e);\n        }\n    }\n\n    /**\n     * Load saved adjustments\n     */\n    loadSavedAdjustments() {\n        try {\n            const saved = localStorage.getItem(this.STORAGE_KEY);\n            if (saved) {\n                const adjustments = JSON.parse(saved);\n                Object.entries(adjustments).forEach(([id, data]) => {\n                    if (this.indicators[id]) {\n                        this.indicators[id].value = data.value;\n                        this.indicators[id].manuallyAdjusted = data.manuallyAdjusted;\n                    }\n                });\n            }\n        } catch (e) {\n            console.error('Failed to load indicator adjustments:', e);\n        }\n    }\n\n    /**\n     * Save custom indicators\n     */\n    saveCustomIndicators() {\n        try {\n            localStorage.setItem(this.CUSTOM_STORAGE_KEY, JSON.stringify(this.customIndicators));\n        } catch (e) {\n            console.error('Failed to save custom indicators:', e);\n        }\n    }\n\n    /**\n     * Load custom indicators\n     */\n    loadCustomIndicators() {\n        try {\n            const saved = localStorage.getItem(this.CUSTOM_STORAGE_KEY);\n            return saved ? JSON.parse(saved) : {};\n        } catch (e) {\n            console.error('Failed to load custom indicators:', e);\n            return {};\n        }\n    }\n\n    /**\n     * Get indicators grouped by category\n     */\n    getIndicatorsByCategory() {\n        const allIndicators = this.getAllIndicators();\n        const categories = {};\n\n        Object.values(allIndicators).forEach(ind => {\n            const cat = ind.category || 'other';\n            if (!categories[cat]) {\n                categories[cat] = [];\n            }\n            categories[cat].push(ind);\n        });\n\n        return categories;\n    }\n\n    /**\n     * Get category display names\n     */\n    getCategoryDisplayNames() {\n        return {\n            automation: 'Task Automation',\n            exposure: 'AI Exposure',\n            adoption: 'Adoption Metrics',\n            skills: 'Skills & Training',\n            displacement: 'Job Displacement',\n            collaboration: 'Human-AI Collaboration',\n            wages: 'Wage Impacts',\n            creation: 'Job Creation',\n            geographic: 'Geographic Impact',\n            distribution: 'Income Distribution',\n            custom: 'Custom Indicators'\n        };\n    }\n\n    /**\n     * Export all indicators for saving\n     */\n    exportIndicators() {\n        return {\n            builtIn: this.indicators,\n            custom: this.customIndicators,\n            exportDate: new Date().toISOString()\n        };\n    }\n\n    /**\n     * Import indicators from saved data\n     */\n    importIndicators(data) {\n        if (data.builtIn) {\n            Object.entries(data.builtIn).forEach(([id, ind]) => {\n                if (this.indicators[id]) {\n                    this.indicators[id].value = ind.value;\n                    this.indicators[id].manuallyAdjusted = ind.manuallyAdjusted;\n                }\n            });\n        }\n        if (data.custom) {\n            this.customIndicators = { ...this.customIndicators, ...data.custom };\n        }\n        this.saveAdjustments();\n        this.saveCustomIndicators();\n    }\n}\n\n// Global instance\nconst hypotheticalIndicators = new HypotheticalIndicatorsSystem();\n\n// Export for ES modules\nexport { HypotheticalIndicatorsSystem, hypotheticalIndicators };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.HypotheticalIndicatorsSystem = HypotheticalIndicatorsSystem;\n    window.hypotheticalIndicators = hypotheticalIndicators;\n}\n","/**\n * Labor Market Simulation Engine\n * Models AI impact scenarios on employment and economic indicators\n */\n\nclass SimulationEngine {\n    constructor(economicData, indicators) {\n        this.dataService = economicData;\n        this.indicators = indicators;\n        this.baselineSnapshot = null;\n        this.currentScenario = null;\n        this.results = [];\n    }\n\n    /**\n     * Initialize engine with baseline data\n     */\n    async initialize() {\n        this.baselineSnapshot = await this.dataService.getCurrentSnapshot();\n        return this.baselineSnapshot;\n    }\n\n    /**\n     * Create a simulation scenario\n     */\n    createScenario(config) {\n        const scenario = {\n            id: Date.now(),\n            name: config.name || 'Unnamed Scenario',\n            description: config.description || '',\n            created: new Date().toISOString(),\n\n            // Time parameters\n            timeframe: {\n                start_year: new Date().getFullYear(),\n                end_year: config.end_year || new Date().getFullYear() + 5,\n                steps_per_year: config.steps_per_year || 12\n            },\n\n            // Target conditions\n            targets: {\n                unemployment_rate: config.target_unemployment,\n                ai_adoption_rate: config.ai_adoption_rate || 50,\n                productivity_growth: config.productivity_growth || 3,\n                automation_pace: config.automation_pace || 'moderate' // slow, moderate, fast, accelerating\n            },\n\n            // AI adoption curve parameters\n            ai_parameters: {\n                adoption_curve: config.adoption_curve || 's_curve', // linear, exponential, s_curve\n                sector_variation: config.sector_variation !== false,\n                displacement_lag: config.displacement_lag || 6, // months\n                new_job_multiplier: config.new_job_multiplier || 0.3\n            },\n\n            // Economic parameters\n            economic_parameters: {\n                gdp_growth: config.gdp_growth || 2.0,\n                inflation: config.inflation || 2.5,\n                interest_rate: config.interest_rate || 4.0,\n                labor_elasticity: config.labor_elasticity || -0.5\n            },\n\n            // Interventions (to be added later)\n            interventions: []\n        };\n\n        this.currentScenario = scenario;\n        return scenario;\n    }\n\n    /**\n     * Run simulation for current scenario\n     */\n    async runSimulation() {\n        if (!this.currentScenario) {\n            throw new Error('No scenario configured');\n        }\n\n        if (!this.baselineSnapshot) {\n            await this.initialize();\n        }\n\n        const scenario = this.currentScenario;\n        const results = [];\n        const years = scenario.timeframe.end_year - scenario.timeframe.start_year;\n        const totalSteps = years * scenario.timeframe.steps_per_year;\n\n        // Initialize state from baseline\n        let state = this.initializeState();\n\n        // Run simulation steps\n        for (let step = 0; step <= totalSteps; step++) {\n            const year = scenario.timeframe.start_year + (step / scenario.timeframe.steps_per_year);\n            const progress = step / totalSteps;\n\n            // Calculate AI adoption for this step\n            const aiAdoption = this.calculateAIAdoption(progress, scenario);\n\n            // Calculate labor market impacts\n            const laborImpact = this.calculateLaborImpact(state, aiAdoption, scenario);\n\n            // Apply interventions\n            const interventionEffects = this.applyInterventions(state, laborImpact, scenario.interventions);\n\n            // Update state\n            state = this.updateState(state, laborImpact, interventionEffects);\n\n            // Record result\n            results.push({\n                step,\n                year: parseFloat(year.toFixed(2)),\n                progress: parseFloat((progress * 100).toFixed(1)),\n                ai_adoption: aiAdoption,\n                labor_market: { ...state.labor_market },\n                wages: { ...state.wages },\n                productivity: { ...state.productivity },\n                sectors: JSON.parse(JSON.stringify(state.sectors)),\n                interventions: interventionEffects,\n                derived: this.calculateDerivedMetrics(state)\n            });\n        }\n\n        this.results = results;\n        return {\n            scenario: this.currentScenario,\n            results,\n            summary: this.generateSummary(results)\n        };\n    }\n\n    /**\n     * Get AI adoption value from ai_indicators (handles different data structures)\n     */\n    getAIAdoptionValue(aiIndicators) {\n        // Handle both flattened structure (ai_indicators.companies_using_ai)\n        // and nested structure (ai_indicators.real.companies_using_ai)\n        if (aiIndicators.companies_using_ai) {\n            return aiIndicators.companies_using_ai.value;\n        }\n        if (aiIndicators.real && aiIndicators.real.companies_using_ai) {\n            return aiIndicators.real.companies_using_ai.value;\n        }\n        // Default fallback\n        return 35;\n    }\n\n    /**\n     * Initialize simulation state from baseline\n     */\n    initializeState() {\n        const baseline = this.baselineSnapshot;\n\n        return {\n            labor_market: {\n                total_employment: baseline.labor_market.total_employment,\n                unemployment_rate: baseline.labor_market.unemployment_rate,\n                labor_force_participation: baseline.labor_market.labor_force_participation,\n                job_openings: baseline.labor_market.job_openings,\n                labor_force: baseline.labor_market.total_employment /\n                    (1 - baseline.labor_market.unemployment_rate / 100)\n            },\n            wages: {\n                average_hourly: baseline.wages.average_hourly,\n                median_weekly: baseline.wages.median_weekly,\n                real_wage_growth: baseline.wages.real_wage_growth\n            },\n            productivity: {\n                growth_rate: baseline.productivity.growth_rate,\n                output_per_hour: baseline.productivity.output_per_hour\n            },\n            sectors: JSON.parse(JSON.stringify(baseline.sectors)),\n            ai: {\n                adoption_rate: this.getAIAdoptionValue(baseline.ai_indicators),\n                displaced_workers: 0,\n                new_jobs_created: 0\n            }\n        };\n    }\n\n    /**\n     * Calculate AI adoption rate based on curve type\n     */\n    calculateAIAdoption(progress, scenario) {\n        const initial = this.getAIAdoptionValue(this.baselineSnapshot.ai_indicators);\n        const target = scenario.targets.ai_adoption_rate;\n        const curve = scenario.ai_parameters.adoption_curve;\n\n        let adoption;\n\n        switch (curve) {\n            case 'linear':\n                adoption = initial + (target - initial) * progress;\n                break;\n\n            case 'exponential':\n                adoption = initial * Math.pow(target / initial, progress);\n                break;\n\n            case 's_curve':\n            default:\n                // Logistic S-curve\n                const midpoint = 0.5;\n                const steepness = 10;\n                const sigmoid = 1 / (1 + Math.exp(-steepness * (progress - midpoint)));\n                adoption = initial + (target - initial) * sigmoid;\n                break;\n        }\n\n        return {\n            rate: Math.min(100, Math.max(0, adoption)),\n            change_from_baseline: adoption - initial,\n            curve_type: curve\n        };\n    }\n\n    /**\n     * Calculate labor market impacts from AI adoption\n     */\n    calculateLaborImpact(state, aiAdoption, scenario) {\n        const adoptionChange = aiAdoption.rate - state.ai.adoption_rate;\n        const automationPace = this.getAutomationPaceMultiplier(scenario.targets.automation_pace);\n\n        // Calculate job displacement by sector\n        let totalDisplaced = 0;\n        let totalNewJobs = 0;\n        const sectorImpacts = {};\n\n        for (const [sector, data] of Object.entries(state.sectors)) {\n            const exposure = data.automation_exposure;\n            const employment = data.employment;\n\n            // Displacement based on automation exposure and AI adoption increase\n            const displacementRate = exposure * (adoptionChange / 100) * automationPace * 0.1;\n            const displaced = Math.round(employment * displacementRate);\n\n            // New jobs created (AI-complementary roles)\n            const newJobRate = scenario.ai_parameters.new_job_multiplier * (adoptionChange / 100) * 0.05;\n            const newJobs = Math.round(employment * newJobRate * (1 - exposure));\n\n            sectorImpacts[sector] = {\n                displaced,\n                new_jobs: newJobs,\n                net_change: newJobs - displaced\n            };\n\n            totalDisplaced += displaced;\n            totalNewJobs += newJobs;\n        }\n\n        // Calculate target-based adjustment\n        const targetAdjustment = this.calculateTargetAdjustment(state, scenario);\n\n        return {\n            total_displaced: totalDisplaced,\n            total_new_jobs: totalNewJobs,\n            net_job_change: totalNewJobs - totalDisplaced + targetAdjustment,\n            sector_impacts: sectorImpacts,\n            productivity_gain: adoptionChange * 0.02,\n            wage_pressure: -adoptionChange * 0.01\n        };\n    }\n\n    /**\n     * Get automation pace multiplier\n     */\n    getAutomationPaceMultiplier(pace) {\n        const multipliers = {\n            slow: 0.5,\n            moderate: 1.0,\n            fast: 1.5,\n            accelerating: 2.0\n        };\n        return multipliers[pace] || 1.0;\n    }\n\n    /**\n     * Calculate adjustment to move toward target unemployment\n     */\n    calculateTargetAdjustment(state, scenario) {\n        if (!scenario.targets.unemployment_rate) return 0;\n\n        const currentUR = state.labor_market.unemployment_rate;\n        const targetUR = scenario.targets.unemployment_rate;\n        const progress = 1 / (scenario.timeframe.end_year - scenario.timeframe.start_year);\n\n        // Calculate needed job change to move toward target\n        const laborForce = state.labor_market.labor_force;\n        const currentUnemployed = laborForce * (currentUR / 100);\n        const targetUnemployed = laborForce * (targetUR / 100);\n        const neededChange = (currentUnemployed - targetUnemployed) * progress;\n\n        return Math.round(neededChange);\n    }\n\n    /**\n     * Apply intervention effects\n     */\n    applyInterventions(state, laborImpact, interventions) {\n        if (!interventions || interventions.length === 0) {\n            return { applied: [], total_effect: 0 };\n        }\n\n        const effects = [];\n        let totalJobEffect = 0;\n        let totalWageEffect = 0;\n\n        for (const intervention of interventions) {\n            if (!intervention.active) continue;\n\n            const effect = this.calculateInterventionEffect(intervention, state, laborImpact);\n            effects.push({\n                name: intervention.name,\n                type: intervention.type,\n                ...effect\n            });\n\n            totalJobEffect += effect.job_effect || 0;\n            totalWageEffect += effect.wage_effect || 0;\n        }\n\n        return {\n            applied: effects,\n            total_job_effect: totalJobEffect,\n            total_wage_effect: totalWageEffect\n        };\n    }\n\n    /**\n     * Calculate effect of a single intervention\n     */\n    calculateInterventionEffect(intervention, state, laborImpact) {\n        // This is calculated by the Interventions module\n        // Return placeholder for engine-level calculation\n        return {\n            job_effect: 0,\n            wage_effect: 0,\n            cost: 0\n        };\n    }\n\n    /**\n     * Update simulation state\n     */\n    updateState(state, laborImpact, interventionEffects) {\n        const newState = JSON.parse(JSON.stringify(state));\n\n        // Update labor market\n        const netJobChange = laborImpact.net_job_change + (interventionEffects.total_job_effect || 0);\n        newState.labor_market.total_employment += netJobChange;\n\n        // Update unemployment rate\n        const laborForce = newState.labor_market.labor_force;\n        const employed = newState.labor_market.total_employment;\n        newState.labor_market.unemployment_rate =\n            ((laborForce - employed) / laborForce) * 100;\n        newState.labor_market.unemployment_rate =\n            Math.max(0, Math.min(50, newState.labor_market.unemployment_rate));\n\n        // Update job openings (inverse relationship with unemployment)\n        const urChange = newState.labor_market.unemployment_rate - state.labor_market.unemployment_rate;\n        newState.labor_market.job_openings = Math.max(\n            1000000,\n            state.labor_market.job_openings * (1 - urChange * 0.05)\n        );\n\n        // Update wages\n        newState.wages.real_wage_growth = state.wages.real_wage_growth +\n            laborImpact.wage_pressure +\n            (interventionEffects.total_wage_effect || 0);\n        newState.wages.average_hourly *= (1 + newState.wages.real_wage_growth / 100 / 12);\n        newState.wages.median_weekly *= (1 + newState.wages.real_wage_growth / 100 / 12);\n\n        // Update productivity\n        newState.productivity.growth_rate = state.productivity.growth_rate + laborImpact.productivity_gain;\n        newState.productivity.output_per_hour *= (1 + newState.productivity.growth_rate / 100 / 12);\n\n        // Update sectors\n        for (const [sector, impact] of Object.entries(laborImpact.sector_impacts)) {\n            if (newState.sectors[sector]) {\n                newState.sectors[sector].employment += impact.net_change;\n            }\n        }\n\n        // Update AI metrics\n        newState.ai.displaced_workers += laborImpact.total_displaced;\n        newState.ai.new_jobs_created += laborImpact.total_new_jobs;\n\n        return newState;\n    }\n\n    /**\n     * Calculate derived metrics for a state\n     */\n    calculateDerivedMetrics(state) {\n        return {\n            employment_to_population: (state.labor_market.total_employment / 210000000) * 100,\n            jobs_per_unemployed: state.labor_market.job_openings /\n                (state.labor_market.labor_force - state.labor_market.total_employment),\n            cumulative_displacement: state.ai.displaced_workers,\n            cumulative_new_jobs: state.ai.new_jobs_created,\n            net_ai_job_impact: state.ai.new_jobs_created - state.ai.displaced_workers\n        };\n    }\n\n    /**\n     * Generate summary statistics from results\n     */\n    generateSummary(results) {\n        const initial = results[0];\n        const final = results[results.length - 1];\n\n        // Calculate cumulative intervention effects\n        const interventionSummary = this.calculateInterventionSummary(results);\n\n        return {\n            timeframe: {\n                start_year: initial.year,\n                end_year: final.year,\n                duration_years: final.year - initial.year\n            },\n            labor_market_changes: {\n                unemployment_rate: {\n                    initial: initial.labor_market.unemployment_rate.toFixed(1),\n                    final: final.labor_market.unemployment_rate.toFixed(1),\n                    change: (final.labor_market.unemployment_rate - initial.labor_market.unemployment_rate).toFixed(1)\n                },\n                total_employment: {\n                    initial: initial.labor_market.total_employment,\n                    final: final.labor_market.total_employment,\n                    change: final.labor_market.total_employment - initial.labor_market.total_employment\n                },\n                job_openings: {\n                    initial: initial.labor_market.job_openings,\n                    final: final.labor_market.job_openings,\n                    change: final.labor_market.job_openings - initial.labor_market.job_openings\n                }\n            },\n            ai_impact: {\n                ai_adoption: {\n                    initial: initial.ai_adoption.rate.toFixed(1),\n                    final: final.ai_adoption.rate.toFixed(1)\n                },\n                cumulative_displacement: final.derived.cumulative_displacement,\n                cumulative_new_jobs: final.derived.cumulative_new_jobs,\n                net_impact: final.derived.net_ai_job_impact\n            },\n            wages: {\n                average_hourly: {\n                    initial: initial.wages.average_hourly.toFixed(2),\n                    final: final.wages.average_hourly.toFixed(2),\n                    change_percent: ((final.wages.average_hourly - initial.wages.average_hourly) /\n                        initial.wages.average_hourly * 100).toFixed(1)\n                }\n            },\n            productivity: {\n                growth_rate: {\n                    initial: initial.productivity.growth_rate.toFixed(1),\n                    final: final.productivity.growth_rate.toFixed(1)\n                }\n            },\n            interventions: interventionSummary,\n            sector_summary: this.generateSectorSummary(initial.sectors, final.sectors)\n        };\n    }\n\n    /**\n     * Calculate cumulative intervention effects across simulation\n     */\n    calculateInterventionSummary(results) {\n        const summary = {\n            total_job_effect: 0,\n            total_wage_effect: 0,\n            total_fiscal_cost: 0,\n            total_economic_impact: 0,\n            monthly_averages: {\n                job_effect: 0,\n                wage_effect: 0,\n                fiscal_cost: 0,\n                economic_impact: 0\n            },\n            details: []\n        };\n\n        // Sum up all intervention effects\n        for (const result of results) {\n            if (result.interventions) {\n                summary.total_job_effect += result.interventions.total_job_effect || 0;\n                summary.total_wage_effect += result.interventions.total_wage_effect || 0;\n                summary.total_fiscal_cost += result.interventions.total_fiscal_cost || 0;\n                summary.total_economic_impact += result.interventions.total_economic_impact || 0;\n            }\n        }\n\n        // Calculate monthly averages\n        const months = results.length;\n        if (months > 0) {\n            summary.monthly_averages.job_effect = summary.total_job_effect / months;\n            summary.monthly_averages.wage_effect = summary.total_wage_effect / months;\n            summary.monthly_averages.fiscal_cost = summary.total_fiscal_cost / months;\n            summary.monthly_averages.economic_impact = summary.total_economic_impact / months;\n        }\n\n        // Get last intervention details for breakdown\n        const lastResult = results[results.length - 1];\n        if (lastResult?.interventions?.details) {\n            summary.details = lastResult.interventions.details;\n        }\n\n        return summary;\n    }\n\n    /**\n     * Generate sector-level summary\n     */\n    generateSectorSummary(initialSectors, finalSectors) {\n        const summary = {};\n\n        for (const sector of Object.keys(initialSectors)) {\n            summary[sector] = {\n                employment_change: finalSectors[sector].employment - initialSectors[sector].employment,\n                employment_change_percent: ((finalSectors[sector].employment - initialSectors[sector].employment) /\n                    initialSectors[sector].employment * 100).toFixed(1),\n                automation_exposure: initialSectors[sector].automation_exposure\n            };\n        }\n\n        // Sort by employment change\n        const sorted = Object.entries(summary)\n            .sort((a, b) => a[1].employment_change - b[1].employment_change);\n\n        return {\n            most_affected: sorted.slice(0, 3).map(([name, data]) => ({ name, ...data })),\n            least_affected: sorted.slice(-3).reverse().map(([name, data]) => ({ name, ...data }))\n        };\n    }\n\n    /**\n     * Get results for a specific year\n     */\n    getResultsForYear(year) {\n        return this.results.filter(r => Math.floor(r.year) === year);\n    }\n\n    /**\n     * Export simulation results\n     */\n    exportResults(format = 'json') {\n        if (format === 'json') {\n            return JSON.stringify({\n                scenario: this.currentScenario,\n                results: this.results,\n                summary: this.generateSummary(this.results)\n            }, null, 2);\n        }\n\n        // CSV format\n        if (format === 'csv') {\n            const headers = [\n                'Year',\n                'AI Adoption %',\n                'Unemployment Rate %',\n                'Total Employment',\n                'Job Openings',\n                'Avg Hourly Wage',\n                'Productivity Growth %',\n                'Cumulative Displaced',\n                'Cumulative New Jobs'\n            ];\n\n            const rows = this.results.map(r => [\n                r.year,\n                r.ai_adoption.rate.toFixed(1),\n                r.labor_market.unemployment_rate.toFixed(2),\n                r.labor_market.total_employment,\n                Math.round(r.labor_market.job_openings),\n                r.wages.average_hourly.toFixed(2),\n                r.productivity.growth_rate.toFixed(2),\n                r.derived.cumulative_displacement,\n                r.derived.cumulative_new_jobs\n            ]);\n\n            return [headers, ...rows].map(row => row.join(',')).join('\\n');\n        }\n\n        return this.results;\n    }\n\n    /**\n     * Run sensitivity analysis on a parameter\n     */\n    async runSensitivityAnalysis(parameterName, values) {\n        const originalScenario = JSON.parse(JSON.stringify(this.currentScenario));\n        const results = [];\n\n        for (const value of values) {\n            // Modify parameter\n            this.setParameter(parameterName, value);\n\n            // Run simulation\n            const result = await this.runSimulation();\n\n            results.push({\n                parameter_value: value,\n                summary: result.summary\n            });\n        }\n\n        // Restore original scenario\n        this.currentScenario = originalScenario;\n\n        return {\n            parameter: parameterName,\n            analysis: results\n        };\n    }\n\n    /**\n     * Set a scenario parameter\n     */\n    setParameter(path, value) {\n        const parts = path.split('.');\n        let obj = this.currentScenario;\n\n        for (let i = 0; i < parts.length - 1; i++) {\n            obj = obj[parts[i]];\n        }\n\n        obj[parts[parts.length - 1]] = value;\n    }\n}\n\n// Export for ES modules\nexport { SimulationEngine };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.SimulationEngine = SimulationEngine;\n}\n","/**\n * Policy Interventions Module\n * Models various policy interventions to mitigate AI labor market disruption\n */\n\nclass InterventionSystem {\n    constructor() {\n        this.interventions = [];\n        this.interventionTypes = this.defineInterventionTypes();\n    }\n\n    /**\n     * Define available intervention types with their parameters and effects\n     */\n    defineInterventionTypes() {\n        return {\n            ubi: {\n                name: 'Universal Basic Income',\n                description: 'Monthly cash payment to all adult citizens',\n                category: 'income_support',\n                parameters: {\n                    monthly_amount: {\n                        type: 'number',\n                        default: 1000,\n                        min: 0,\n                        max: 5000,\n                        unit: 'USD/month'\n                    },\n                    eligibility_age: {\n                        type: 'number',\n                        default: 18,\n                        min: 16,\n                        max: 25\n                    },\n                    phase_out_threshold: {\n                        type: 'number',\n                        default: 0,\n                        min: 0,\n                        max: 200000,\n                        unit: 'USD/year',\n                        description: 'Income level at which UBI phases out (0 = universal)'\n                    }\n                },\n                effects: {\n                    labor_force_participation: { direction: 'decrease', magnitude: 'small' },\n                    consumption: { direction: 'increase', magnitude: 'medium' },\n                    poverty_rate: { direction: 'decrease', magnitude: 'large' },\n                    entrepreneurship: { direction: 'increase', magnitude: 'small' }\n                },\n                cost_model: 'population_based'\n            },\n\n            job_retraining: {\n                name: 'Job Retraining Programs',\n                description: 'Government-funded programs to retrain displaced workers',\n                category: 'workforce_development',\n                parameters: {\n                    funding_per_worker: {\n                        type: 'number',\n                        default: 10000,\n                        min: 1000,\n                        max: 50000,\n                        unit: 'USD'\n                    },\n                    program_duration: {\n                        type: 'number',\n                        default: 6,\n                        min: 1,\n                        max: 24,\n                        unit: 'months'\n                    },\n                    success_rate: {\n                        type: 'number',\n                        default: 60,\n                        min: 0,\n                        max: 100,\n                        unit: '%'\n                    },\n                    eligibility: {\n                        type: 'select',\n                        options: ['all_unemployed', 'displaced_only', 'means_tested'],\n                        default: 'displaced_only'\n                    }\n                },\n                effects: {\n                    skill_mismatch: { direction: 'decrease', magnitude: 'large' },\n                    unemployment_duration: { direction: 'decrease', magnitude: 'medium' },\n                    wages_post_displacement: { direction: 'increase', magnitude: 'medium' }\n                },\n                cost_model: 'participant_based'\n            },\n\n            wage_subsidy: {\n                name: 'Wage Subsidies',\n                description: 'Government subsidies to employers for maintaining employment',\n                category: 'employment_support',\n                parameters: {\n                    subsidy_rate: {\n                        type: 'number',\n                        default: 25,\n                        min: 0,\n                        max: 100,\n                        unit: '% of wage'\n                    },\n                    max_wage_covered: {\n                        type: 'number',\n                        default: 50000,\n                        min: 0,\n                        max: 150000,\n                        unit: 'USD/year'\n                    },\n                    duration: {\n                        type: 'number',\n                        default: 12,\n                        min: 1,\n                        max: 36,\n                        unit: 'months'\n                    },\n                    sector_targeting: {\n                        type: 'multiselect',\n                        options: ['all', 'high_automation_risk', 'manufacturing', 'retail', 'transportation'],\n                        default: ['high_automation_risk']\n                    }\n                },\n                effects: {\n                    employment_retention: { direction: 'increase', magnitude: 'large' },\n                    business_costs: { direction: 'decrease', magnitude: 'medium' },\n                    wage_pressure: { direction: 'decrease', magnitude: 'small' }\n                },\n                cost_model: 'wage_based'\n            },\n\n            reduced_workweek: {\n                name: 'Reduced Work Week',\n                description: 'Mandate or incentivize shorter work weeks to spread employment',\n                category: 'work_sharing',\n                parameters: {\n                    target_hours: {\n                        type: 'number',\n                        default: 32,\n                        min: 20,\n                        max: 40,\n                        unit: 'hours/week'\n                    },\n                    wage_adjustment: {\n                        type: 'select',\n                        options: ['full_wage', 'proportional', 'partial_subsidy'],\n                        default: 'partial_subsidy'\n                    },\n                    implementation: {\n                        type: 'select',\n                        options: ['mandate', 'incentive', 'voluntary'],\n                        default: 'incentive'\n                    }\n                },\n                effects: {\n                    employment: { direction: 'increase', magnitude: 'medium' },\n                    productivity_per_hour: { direction: 'increase', magnitude: 'small' },\n                    worker_wellbeing: { direction: 'increase', magnitude: 'medium' }\n                },\n                cost_model: 'economy_wide'\n            },\n\n            robot_tax: {\n                name: 'Automation Tax',\n                description: 'Tax on automation/robots to fund worker transition',\n                category: 'taxation',\n                parameters: {\n                    tax_rate: {\n                        type: 'number',\n                        default: 5,\n                        min: 0,\n                        max: 50,\n                        unit: '% of labor cost savings'\n                    },\n                    revenue_allocation: {\n                        type: 'multiselect',\n                        options: ['ubi', 'retraining', 'education', 'general_fund'],\n                        default: ['retraining', 'education']\n                    },\n                    exemptions: {\n                        type: 'multiselect',\n                        options: ['small_business', 'healthcare', 'research'],\n                        default: ['small_business']\n                    }\n                },\n                effects: {\n                    automation_pace: { direction: 'decrease', magnitude: 'small' },\n                    tax_revenue: { direction: 'increase', magnitude: 'medium' },\n                    business_investment: { direction: 'decrease', magnitude: 'small' }\n                },\n                cost_model: 'revenue_generating'\n            },\n\n            education_subsidy: {\n                name: 'Education & Skills Subsidy',\n                description: 'Subsidized education for AI-complementary skills',\n                category: 'workforce_development',\n                parameters: {\n                    subsidy_amount: {\n                        type: 'number',\n                        default: 15000,\n                        min: 0,\n                        max: 100000,\n                        unit: 'USD/year'\n                    },\n                    program_types: {\n                        type: 'multiselect',\n                        options: ['stem_degree', 'vocational', 'bootcamp', 'apprenticeship'],\n                        default: ['stem_degree', 'bootcamp']\n                    },\n                    income_cap: {\n                        type: 'number',\n                        default: 75000,\n                        min: 0,\n                        max: 200000,\n                        unit: 'USD/year'\n                    }\n                },\n                effects: {\n                    skill_supply: { direction: 'increase', magnitude: 'large' },\n                    wage_premium: { direction: 'decrease', magnitude: 'small' },\n                    inequality: { direction: 'decrease', magnitude: 'medium' }\n                },\n                cost_model: 'participant_based'\n            },\n\n            job_guarantee: {\n                name: 'Federal Job Guarantee',\n                description: 'Government as employer of last resort',\n                category: 'employment_support',\n                parameters: {\n                    hourly_wage: {\n                        type: 'number',\n                        default: 20,\n                        min: 15,\n                        max: 30,\n                        unit: 'USD/hour'\n                    },\n                    job_types: {\n                        type: 'multiselect',\n                        options: ['infrastructure', 'caregiving', 'environment', 'community_service'],\n                        default: ['infrastructure', 'caregiving']\n                    },\n                    eligibility: {\n                        type: 'select',\n                        options: ['all_unemployed', 'long_term_only', 'displaced_only'],\n                        default: 'all_unemployed'\n                    }\n                },\n                effects: {\n                    unemployment_floor: { direction: 'establish', magnitude: 'large' },\n                    wage_floor: { direction: 'increase', magnitude: 'medium' },\n                    public_services: { direction: 'increase', magnitude: 'medium' }\n                },\n                cost_model: 'participant_based'\n            },\n\n            portable_benefits: {\n                name: 'Portable Benefits System',\n                description: 'Benefits that follow workers across jobs and gig work',\n                category: 'safety_net',\n                parameters: {\n                    benefit_types: {\n                        type: 'multiselect',\n                        options: ['healthcare', 'retirement', 'unemployment', 'disability'],\n                        default: ['healthcare', 'retirement']\n                    },\n                    funding_model: {\n                        type: 'select',\n                        options: ['employer_mandate', 'payroll_tax', 'general_revenue'],\n                        default: 'payroll_tax'\n                    },\n                    contribution_rate: {\n                        type: 'number',\n                        default: 5,\n                        min: 0,\n                        max: 20,\n                        unit: '% of earnings'\n                    }\n                },\n                effects: {\n                    gig_worker_security: { direction: 'increase', magnitude: 'large' },\n                    job_mobility: { direction: 'increase', magnitude: 'medium' },\n                    entrepreneurship: { direction: 'increase', magnitude: 'small' }\n                },\n                cost_model: 'earnings_based'\n            },\n\n            transition_assistance: {\n                name: 'Transition Assistance',\n                description: 'Direct payments to workers displaced by automation',\n                category: 'income_support',\n                parameters: {\n                    replacement_rate: {\n                        type: 'number',\n                        default: 70,\n                        min: 0,\n                        max: 100,\n                        unit: '% of previous wage'\n                    },\n                    duration: {\n                        type: 'number',\n                        default: 24,\n                        min: 6,\n                        max: 48,\n                        unit: 'months'\n                    },\n                    retraining_requirement: {\n                        type: 'boolean',\n                        default: true\n                    }\n                },\n                effects: {\n                    consumption_stability: { direction: 'increase', magnitude: 'large' },\n                    job_search_quality: { direction: 'increase', magnitude: 'medium' },\n                    skill_preservation: { direction: 'increase', magnitude: 'medium' }\n                },\n                cost_model: 'displaced_based'\n            }\n        };\n    }\n\n    /**\n     * Add an intervention to the simulation\n     */\n    addIntervention(type, parameters = {}, config = {}) {\n        const interventionType = this.interventionTypes[type];\n        if (!interventionType) {\n            throw new Error(`Unknown intervention type: ${type}`);\n        }\n\n        // Merge default parameters with provided ones\n        const finalParams = {};\n        for (const [key, paramDef] of Object.entries(interventionType.parameters)) {\n            finalParams[key] = parameters[key] !== undefined ? parameters[key] : paramDef.default;\n        }\n\n        const intervention = {\n            id: Date.now() + Math.random(),\n            type,\n            name: config.name || interventionType.name,\n            description: interventionType.description,\n            category: interventionType.category,\n            parameters: finalParams,\n            effects: interventionType.effects,\n            cost_model: interventionType.cost_model,\n            active: config.active !== false,\n            start_year: config.start_year || null,\n            end_year: config.end_year || null\n        };\n\n        this.interventions.push(intervention);\n        return intervention;\n    }\n\n    /**\n     * Remove an intervention\n     */\n    removeIntervention(id) {\n        this.interventions = this.interventions.filter(i => i.id !== id);\n    }\n\n    /**\n     * Update intervention parameters\n     */\n    updateIntervention(id, updates) {\n        const intervention = this.interventions.find(i => i.id === id);\n        if (intervention) {\n            if (updates.parameters) {\n                Object.assign(intervention.parameters, updates.parameters);\n            }\n            if (updates.active !== undefined) {\n                intervention.active = updates.active;\n            }\n            if (updates.start_year !== undefined) {\n                intervention.start_year = updates.start_year;\n            }\n            if (updates.end_year !== undefined) {\n                intervention.end_year = updates.end_year;\n            }\n        }\n        return intervention;\n    }\n\n    /**\n     * Calculate intervention effects for a simulation step\n     */\n    calculateEffects(state, year, laborImpact) {\n        const effects = {\n            job_effect: 0,\n            wage_effect: 0,\n            lfpr_effect: 0,\n            fiscal_cost: 0,\n            economic_impact: 0,\n            details: []\n        };\n\n        for (const intervention of this.interventions) {\n            if (!intervention.active) continue;\n            if (intervention.start_year && year < intervention.start_year) continue;\n            if (intervention.end_year && year > intervention.end_year) continue;\n\n            const effect = this.calculateSingleEffect(intervention, state, laborImpact);\n            effects.job_effect += effect.job_effect;\n            effects.wage_effect += effect.wage_effect;\n            effects.lfpr_effect += effect.lfpr_effect;\n            effects.fiscal_cost += effect.fiscal_cost;\n            effects.economic_impact += effect.economic_impact || 0;\n            effects.details.push({\n                intervention: intervention.name,\n                type: intervention.type,\n                ...effect\n            });\n        }\n\n        // Rename for consistency with engine expectations\n        effects.total_job_effect = effects.job_effect;\n        effects.total_wage_effect = effects.wage_effect;\n        effects.total_fiscal_cost = effects.fiscal_cost;\n        effects.total_economic_impact = effects.economic_impact;\n\n        return effects;\n    }\n\n    /**\n     * Calculate effect of a single intervention\n     */\n    calculateSingleEffect(intervention, state, laborImpact) {\n        const params = intervention.parameters;\n        let effect = {\n            job_effect: 0,\n            wage_effect: 0,\n            lfpr_effect: 0,\n            fiscal_cost: 0,\n            economic_impact: 0\n        };\n\n        switch (intervention.type) {\n            case 'ubi':\n                effect = this.calculateUBIEffect(params, state);\n                break;\n            case 'job_retraining':\n                effect = this.calculateRetrainingEffect(params, state, laborImpact);\n                break;\n            case 'wage_subsidy':\n                effect = this.calculateWageSubsidyEffect(params, state);\n                break;\n            case 'reduced_workweek':\n                effect = this.calculateWorkweekEffect(params, state);\n                break;\n            case 'robot_tax':\n                effect = this.calculateRobotTaxEffect(params, state, laborImpact);\n                break;\n            case 'education_subsidy':\n                effect = this.calculateEducationEffect(params, state);\n                break;\n            case 'job_guarantee':\n                effect = this.calculateJobGuaranteeEffect(params, state);\n                break;\n            case 'portable_benefits':\n                effect = this.calculatePortableBenefitsEffect(params, state);\n                break;\n            case 'transition_assistance':\n                effect = this.calculateTransitionEffect(params, state, laborImpact);\n                break;\n        }\n\n        return effect;\n    }\n\n    /**\n     * UBI Effect Calculation\n     */\n    calculateUBIEffect(params, state) {\n        const adultPopulation = 210000000 * 0.78; // ~78% adult\n        const annualCost = params.monthly_amount * 12 * adultPopulation;\n\n        // Small decrease in LFPR (income effect)\n        const lfprEffect = -0.5 * (params.monthly_amount / 1000);\n\n        // Consumption boost supports job creation\n        const consumptionMultiplier = 0.7; // Marginal propensity to consume\n        const jobMultiplier = 0.00001; // Jobs per $100k spending\n        const jobEffect = annualCost * consumptionMultiplier * jobMultiplier;\n\n        // Economic impact: UBI spending creates economic activity through consumption\n        // Fiscal multiplier for direct transfers is typically 0.8-1.5x\n        const fiscalMultiplier = 1.2;\n        const economicImpact = annualCost * consumptionMultiplier * fiscalMultiplier;\n\n        return {\n            job_effect: Math.round(jobEffect / 12), // Monthly\n            wage_effect: 0.1 * (params.monthly_amount / 1000), // Slight wage floor increase\n            lfpr_effect: lfprEffect / 12,\n            fiscal_cost: annualCost / 12,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Job Retraining Effect Calculation\n     */\n    calculateRetrainingEffect(params, state, laborImpact) {\n        const displacedMonthly = laborImpact.total_displaced || 0;\n        const participants = displacedMonthly * (params.eligibility === 'all_unemployed' ? 2 : 1);\n        const successfulRetrains = participants * (params.success_rate / 100);\n        const monthlyLag = params.program_duration;\n\n        // Delayed effect - reductions accumulate\n        const jobEffect = successfulRetrains * 0.8; // 80% of successful retrains find jobs\n        const cost = participants * params.funding_per_worker / monthlyLag;\n\n        // Economic impact: Higher wages from retraining + increased productivity\n        // Retrained workers earn ~15% more on average\n        const avgWage = state.wages.average_hourly * 2080;\n        const economicImpact = successfulRetrains * avgWage * 1.15;\n\n        return {\n            job_effect: Math.round(jobEffect),\n            wage_effect: 0.05, // Better skills = slightly better wages\n            lfpr_effect: 0.02, // Keeps people in labor force\n            fiscal_cost: cost,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Wage Subsidy Effect Calculation\n     */\n    calculateWageSubsidyEffect(params, state) {\n        // Estimate eligible workers (high automation risk sectors)\n        const eligibleEmployment = state.labor_market.total_employment * 0.15;\n        const avgWage = state.wages.average_hourly * 2080; // Annual\n        const subsidyPerWorker = Math.min(avgWage, params.max_wage_covered) * (params.subsidy_rate / 100);\n        const annualCost = eligibleEmployment * subsidyPerWorker;\n\n        // Jobs saved from displacement\n        const jobsSaved = eligibleEmployment * 0.05 * (params.subsidy_rate / 100);\n\n        // Economic impact: Jobs saved = continued economic output\n        const economicImpact = jobsSaved * avgWage * 0.8; // 80% of wage value as economic output\n\n        return {\n            job_effect: Math.round(jobsSaved / 12),\n            wage_effect: -0.02, // Slight wage suppression\n            lfpr_effect: 0,\n            fiscal_cost: annualCost / 12,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Reduced Work Week Effect Calculation\n     */\n    calculateWorkweekEffect(params, state) {\n        const currentHours = 40;\n        const reduction = (currentHours - params.target_hours) / currentHours;\n\n        // Work spreading creates jobs\n        const newJobs = state.labor_market.total_employment * reduction * 0.5; // 50% efficiency\n\n        // Cost depends on wage adjustment\n        let wageCost = 0;\n        if (params.wage_adjustment === 'partial_subsidy') {\n            wageCost = newJobs * state.wages.average_hourly * 2080 * 0.25; // 25% subsidy\n        }\n\n        // Economic impact: New jobs create consumer spending\n        const avgWage = state.wages.average_hourly * 2080;\n        const economicImpact = newJobs * avgWage * 0.7; // 70% marginal propensity to consume\n\n        return {\n            job_effect: Math.round(newJobs / 12),\n            wage_effect: params.wage_adjustment === 'full_wage' ? 0.1 : -0.05,\n            lfpr_effect: 0.05,\n            fiscal_cost: wageCost / 12,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Robot Tax Effect Calculation\n     */\n    calculateRobotTaxEffect(params, state, laborImpact) {\n        // Estimate automation savings\n        const automationSavings = laborImpact.total_displaced *\n            state.wages.average_hourly * 2080;\n        const taxRevenue = automationSavings * (params.tax_rate / 100);\n\n        // Slight slowdown in automation\n        const displacementReduction = laborImpact.total_displaced * 0.1 * (params.tax_rate / 100);\n\n        // Economic impact: Revenue can fund other programs; jobs saved maintain spending\n        // But slight drag on business investment\n        const avgWage = state.wages.average_hourly * 2080;\n        const jobsSavedValue = displacementReduction * avgWage * 0.5;\n        const investmentDrag = taxRevenue * 0.3; // 30% drag on investment\n        const economicImpact = taxRevenue + jobsSavedValue - investmentDrag;\n\n        return {\n            job_effect: Math.round(displacementReduction / 12),\n            wage_effect: 0,\n            lfpr_effect: 0,\n            fiscal_cost: -taxRevenue / 12, // Negative = revenue\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Education Subsidy Effect Calculation\n     */\n    calculateEducationEffect(params, state) {\n        // Estimate participants (income-eligible adults seeking education)\n        const eligiblePop = 210000000 * 0.05; // 5% of population\n        const participants = eligiblePop * (params.income_cap / 100000); // More eligible = more participants\n        const annualCost = participants * params.subsidy_amount;\n\n        // Long-term skill improvement\n        const futureJobEffect = participants * 0.001; // Delayed effect\n\n        // Economic impact: Education spending + long-term productivity gains\n        // Education has high long-term ROI (estimated 8-12% per year of education)\n        const avgWage = state.wages.average_hourly * 2080;\n        const productivityGain = futureJobEffect * avgWage * 1.2; // 20% productivity premium\n        const economicImpact = annualCost * 0.8 + productivityGain; // Direct + indirect\n\n        return {\n            job_effect: Math.round(futureJobEffect / 12),\n            wage_effect: 0.02, // Gradual wage improvement\n            lfpr_effect: -0.01, // Some leave workforce for education\n            fiscal_cost: annualCost / 12,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Job Guarantee Effect Calculation\n     */\n    calculateJobGuaranteeEffect(params, state) {\n        // Calculate unemployed who would take jobs\n        const unemployed = state.labor_market.labor_force - state.labor_market.total_employment;\n        const takeupRate = params.eligibility === 'all_unemployed' ? 0.4 :\n            params.eligibility === 'long_term_only' ? 0.2 : 0.3;\n        const participants = unemployed * takeupRate;\n\n        const annualWage = params.hourly_wage * 2080;\n        const annualCost = participants * annualWage * 1.3; // Include program overhead\n\n        // Economic impact: Jobs = output + consumer spending\n        // Public jobs create value (infrastructure, services) + spending multiplier\n        const outputValue = participants * annualWage * 0.8; // 80% productivity of market jobs\n        const spendingMultiplier = 1.5; // Government spending multiplier\n        const economicImpact = outputValue * spendingMultiplier;\n\n        return {\n            job_effect: Math.round(participants / 12),\n            wage_effect: 0.15 * (params.hourly_wage / 20), // Wage floor effect\n            lfpr_effect: 0.1, // Brings people back to workforce\n            fiscal_cost: annualCost / 12,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Portable Benefits Effect Calculation\n     */\n    calculatePortableBenefitsEffect(params, state) {\n        // Reduces job lock, increases mobility\n        const gigWorkforce = state.labor_market.total_employment * 0.15;\n        const benefitCost = gigWorkforce * state.wages.average_hourly * 2080 *\n            (params.contribution_rate / 100);\n\n        // Modest employment effect through entrepreneurship\n        const jobEffect = gigWorkforce * 0.02;\n\n        // Economic impact: Better labor market matching + entrepreneurship\n        const avgWage = state.wages.average_hourly * 2080;\n        const mobilityGain = gigWorkforce * 0.03 * avgWage * 0.1; // 3% better matching\n        const entrepreneurshipGain = jobEffect * avgWage * 1.2; // New businesses\n        const economicImpact = mobilityGain + entrepreneurshipGain;\n\n        return {\n            job_effect: Math.round(jobEffect / 12),\n            wage_effect: 0,\n            lfpr_effect: 0.03, // More people willing to work\n            fiscal_cost: params.funding_model === 'general_revenue' ? benefitCost / 12 : 0,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Transition Assistance Effect Calculation\n     */\n    calculateTransitionEffect(params, state, laborImpact) {\n        const displaced = laborImpact.total_displaced || 0;\n        const avgWage = state.wages.average_hourly * 2080;\n        const assistancePerWorker = avgWage * (params.replacement_rate / 100);\n        const annualCost = displaced * 12 * assistancePerWorker * (params.duration / 12);\n\n        // Better job matching due to reduced pressure\n        const jobMatchImprovement = 0.1;\n\n        // Economic impact: Maintains consumer spending during transition + better job matches\n        // Income support has high fiscal multiplier (~1.5x)\n        const consumptionMaintained = annualCost * 0.8; // 80% spent on consumption\n        const betterMatchValue = displaced * jobMatchImprovement * avgWage * 0.1; // 10% wage premium from better matches\n        const economicImpact = consumptionMaintained * 1.5 + betterMatchValue;\n\n        return {\n            job_effect: Math.round(displaced * jobMatchImprovement / 12),\n            wage_effect: 0.05, // Better matches = better wages\n            lfpr_effect: 0.02, // Keeps people searching\n            fiscal_cost: annualCost / 12,\n            economic_impact: economicImpact / 12\n        };\n    }\n\n    /**\n     * Get intervention summary\n     */\n    getSummary() {\n        return {\n            total_interventions: this.interventions.length,\n            active_interventions: this.interventions.filter(i => i.active).length,\n            by_category: this.getByCategory(),\n            interventions: this.interventions.map(i => ({\n                id: i.id,\n                name: i.name,\n                type: i.type,\n                active: i.active,\n                parameters: i.parameters\n            }))\n        };\n    }\n\n    /**\n     * Get interventions grouped by category\n     */\n    getByCategory() {\n        const categories = {};\n        for (const intervention of this.interventions) {\n            if (!categories[intervention.category]) {\n                categories[intervention.category] = [];\n            }\n            categories[intervention.category].push(intervention.name);\n        }\n        return categories;\n    }\n\n    /**\n     * Export interventions configuration\n     */\n    exportConfig() {\n        return JSON.stringify({\n            interventions: this.interventions,\n            exported_at: new Date().toISOString()\n        }, null, 2);\n    }\n\n    /**\n     * Import interventions configuration\n     */\n    importConfig(config) {\n        const parsed = typeof config === 'string' ? JSON.parse(config) : config;\n        this.interventions = parsed.interventions || [];\n    }\n\n    /**\n     * Get available intervention types\n     */\n    getAvailableTypes() {\n        return Object.entries(this.interventionTypes).map(([key, value]) => ({\n            type: key,\n            name: value.name,\n            description: value.description,\n            category: value.category,\n            parameters: value.parameters\n        }));\n    }\n}\n\n// Export for ES modules\nexport { InterventionSystem };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.InterventionSystem = InterventionSystem;\n}\n","/**\n * Economic Calculations Utility Module\n * Helper functions for economic modeling and analysis\n */\n\nconst EconomicCalculations = {\n    /**\n     * Calculate compound growth\n     */\n    compoundGrowth(initial, rate, periods) {\n        return initial * Math.pow(1 + rate, periods);\n    },\n\n    /**\n     * Calculate CAGR (Compound Annual Growth Rate)\n     */\n    cagr(initial, final, years) {\n        return Math.pow(final / initial, 1 / years) - 1;\n    },\n\n    /**\n     * Calculate unemployment rate\n     */\n    unemploymentRate(employed, laborForce) {\n        return ((laborForce - employed) / laborForce) * 100;\n    },\n\n    /**\n     * Calculate labor force participation rate\n     */\n    lfpr(laborForce, workingAgePopulation) {\n        return (laborForce / workingAgePopulation) * 100;\n    },\n\n    /**\n     * Calculate employment-to-population ratio\n     */\n    employmentRatio(employed, population) {\n        return (employed / population) * 100;\n    },\n\n    /**\n     * Okun's Law: Relationship between unemployment and GDP\n     * A 1% increase in unemployment typically corresponds to 2% decrease in GDP\n     */\n    okunsLaw(unemploymentChange, coefficient = 2) {\n        return -coefficient * unemploymentChange;\n    },\n\n    /**\n     * Phillips Curve: Relationship between unemployment and inflation\n     */\n    phillipsCurve(unemploymentRate, nairu = 4.5, coefficient = 0.5) {\n        return coefficient * (nairu - unemploymentRate);\n    },\n\n    /**\n     * Beveridge Curve: Relationship between unemployment and vacancies\n     */\n    beveridgeCurve(unemploymentRate, matchingEfficiency = 0.5) {\n        // Simple hyperbolic approximation\n        return matchingEfficiency / unemploymentRate;\n    },\n\n    /**\n     * Calculate Gini coefficient from income distribution\n     */\n    giniCoefficient(incomes) {\n        const sorted = [...incomes].sort((a, b) => a - b);\n        const n = sorted.length;\n        const mean = sorted.reduce((a, b) => a + b, 0) / n;\n\n        let sum = 0;\n        for (let i = 0; i < n; i++) {\n            for (let j = 0; j < n; j++) {\n                sum += Math.abs(sorted[i] - sorted[j]);\n            }\n        }\n\n        return sum / (2 * n * n * mean);\n    },\n\n    /**\n     * Calculate labor share of income\n     */\n    laborShare(totalWages, gdp) {\n        return (totalWages / gdp) * 100;\n    },\n\n    /**\n     * Calculate productivity\n     */\n    productivity(output, hoursWorked) {\n        return output / hoursWorked;\n    },\n\n    /**\n     * Calculate real wage (inflation-adjusted)\n     */\n    realWage(nominalWage, priceIndex, baseIndex = 100) {\n        return nominalWage * (baseIndex / priceIndex);\n    },\n\n    /**\n     * Calculate wage polarization ratio\n     */\n    wagePolarization(percentile90, percentile10) {\n        return percentile90 / percentile10;\n    },\n\n    /**\n     * Automation exposure score based on task composition\n     */\n    automationExposure(tasks) {\n        // Tasks is an array of { name, weight, automatable }\n        const totalWeight = tasks.reduce((sum, t) => sum + t.weight, 0);\n        const automatable = tasks.reduce((sum, t) =>\n            sum + (t.automatable ? t.weight : 0), 0);\n        return automatable / totalWeight;\n    },\n\n    /**\n     * Job displacement estimate\n     */\n    displacementEstimate(employment, automationExposure, adoptionRate, timeframe) {\n        // Gradual displacement based on adoption curve\n        const annualRate = automationExposure * adoptionRate * 0.1;\n        return employment * (1 - Math.pow(1 - annualRate, timeframe));\n    },\n\n    /**\n     * New job creation estimate from AI\n     */\n    newJobEstimate(aiInvestment, jobMultiplier = 0.00001) {\n        // Jobs created per dollar of AI investment\n        return aiInvestment * jobMultiplier;\n    },\n\n    /**\n     * Calculate Beveridge curve matching efficiency\n     */\n    matchingEfficiency(hires, unemployed, vacancies, elasticity = 0.5) {\n        return hires / (Math.pow(unemployed, elasticity) * Math.pow(vacancies, 1 - elasticity));\n    },\n\n    /**\n     * Calculate skill mismatch index\n     */\n    skillMismatch(jobRequirements, workerSkills) {\n        // jobRequirements and workerSkills are objects with skill: level\n        let mismatch = 0;\n        let count = 0;\n\n        for (const skill of Object.keys(jobRequirements)) {\n            const required = jobRequirements[skill];\n            const available = workerSkills[skill] || 0;\n            mismatch += Math.max(0, required - available);\n            count++;\n        }\n\n        return count > 0 ? mismatch / count : 0;\n    },\n\n    /**\n     * Net present value calculation\n     */\n    npv(cashFlows, discountRate) {\n        return cashFlows.reduce((sum, cf, t) =>\n            sum + cf / Math.pow(1 + discountRate, t), 0);\n    },\n\n    /**\n     * Calculate intervention ROI\n     */\n    interventionROI(costs, benefits, years) {\n        const totalCost = costs.reduce((a, b) => a + b, 0);\n        const totalBenefit = benefits.reduce((a, b) => a + b, 0);\n        return ((totalBenefit - totalCost) / totalCost) * 100;\n    },\n\n    /**\n     * Logistic (S-curve) function for adoption modeling\n     */\n    logistic(t, L = 1, k = 1, t0 = 0) {\n        return L / (1 + Math.exp(-k * (t - t0)));\n    },\n\n    /**\n     * Moving average calculation\n     */\n    movingAverage(data, window) {\n        const result = [];\n        for (let i = 0; i < data.length; i++) {\n            const start = Math.max(0, i - window + 1);\n            const values = data.slice(start, i + 1);\n            result.push(values.reduce((a, b) => a + b, 0) / values.length);\n        }\n        return result;\n    },\n\n    /**\n     * Linear regression\n     */\n    linearRegression(xValues, yValues) {\n        const n = xValues.length;\n        const sumX = xValues.reduce((a, b) => a + b, 0);\n        const sumY = yValues.reduce((a, b) => a + b, 0);\n        const sumXY = xValues.reduce((sum, x, i) => sum + x * yValues[i], 0);\n        const sumXX = xValues.reduce((sum, x) => sum + x * x, 0);\n\n        const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);\n        const intercept = (sumY - slope * sumX) / n;\n\n        return { slope, intercept };\n    },\n\n    /**\n     * Forecast using linear trend\n     */\n    forecast(historicalData, periods) {\n        const xValues = historicalData.map((_, i) => i);\n        const yValues = historicalData;\n        const { slope, intercept } = this.linearRegression(xValues, yValues);\n\n        const forecasts = [];\n        for (let i = 0; i < periods; i++) {\n            forecasts.push(slope * (historicalData.length + i) + intercept);\n        }\n\n        return forecasts;\n    },\n\n    /**\n     * Calculate standard deviation\n     */\n    standardDeviation(values) {\n        const mean = values.reduce((a, b) => a + b, 0) / values.length;\n        const squaredDiffs = values.map(v => Math.pow(v - mean, 2));\n        return Math.sqrt(squaredDiffs.reduce((a, b) => a + b, 0) / values.length);\n    },\n\n    /**\n     * Calculate correlation coefficient\n     */\n    correlation(x, y) {\n        const n = x.length;\n        const meanX = x.reduce((a, b) => a + b, 0) / n;\n        const meanY = y.reduce((a, b) => a + b, 0) / n;\n\n        let numerator = 0;\n        let denomX = 0;\n        let denomY = 0;\n\n        for (let i = 0; i < n; i++) {\n            const dx = x[i] - meanX;\n            const dy = y[i] - meanY;\n            numerator += dx * dy;\n            denomX += dx * dx;\n            denomY += dy * dy;\n        }\n\n        return numerator / Math.sqrt(denomX * denomY);\n    },\n\n    /**\n     * Format large numbers for display\n     */\n    formatNumber(num, precision = 1) {\n        if (num >= 1e12) return (num / 1e12).toFixed(precision) + 'T';\n        if (num >= 1e9) return (num / 1e9).toFixed(precision) + 'B';\n        if (num >= 1e6) return (num / 1e6).toFixed(precision) + 'M';\n        if (num >= 1e3) return (num / 1e3).toFixed(precision) + 'K';\n        return num.toFixed(precision);\n    },\n\n    /**\n     * Format currency\n     */\n    formatCurrency(amount) {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0\n        }).format(amount);\n    },\n\n    /**\n     * Format percentage\n     */\n    formatPercent(value, precision = 1) {\n        return value.toFixed(precision) + '%';\n    }\n};\n\n// Export for ES modules\nexport { EconomicCalculations };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.EconomicCalculations = EconomicCalculations;\n}\n","/**\n * DOM Utility Functions\n * Safe DOM manipulation helpers to prevent XSS vulnerabilities\n */\n\n/**\n * Create an element with text content (safe - no HTML parsing)\n * @param {string} tag - HTML tag name\n * @param {string} text - Text content\n * @param {Object} attrs - HTML attributes\n * @returns {HTMLElement}\n */\nfunction createElement(tag, text = '', attrs = {}) {\n    const el = document.createElement(tag);\n    if (text) {\n        el.textContent = text;\n    }\n    Object.entries(attrs).forEach(([key, value]) => {\n        if (key === 'className') {\n            el.className = value;\n        } else if (key === 'style' && typeof value === 'object') {\n            Object.assign(el.style, value);\n        } else if (key.startsWith('on') && typeof value === 'function') {\n            el.addEventListener(key.slice(2).toLowerCase(), value);\n        } else if (key === 'dataset' && typeof value === 'object') {\n            Object.entries(value).forEach(([dataKey, dataValue]) => {\n                el.dataset[dataKey] = dataValue;\n            });\n        } else {\n            el.setAttribute(key, value);\n        }\n    });\n    return el;\n}\n\n/**\n * Safely set text content of an element\n * @param {HTMLElement|string} element - Element or selector\n * @param {string} text - Text to set\n */\nfunction setText(element, text) {\n    const el = typeof element === 'string' ? document.querySelector(element) : element;\n    if (el) {\n        el.textContent = text;\n    }\n}\n\n/**\n * Clear all children from an element\n * @param {HTMLElement|string} element - Element or selector\n */\nfunction clearChildren(element) {\n    const el = typeof element === 'string' ? document.querySelector(element) : element;\n    if (el) {\n        while (el.firstChild) {\n            el.removeChild(el.firstChild);\n        }\n    }\n}\n\n/**\n * Append multiple children to an element\n * @param {HTMLElement} parent - Parent element\n * @param {...HTMLElement} children - Child elements to append\n */\nfunction appendChildren(parent, ...children) {\n    children.forEach(child => {\n        if (child) {\n            parent.appendChild(child);\n        }\n    });\n}\n\n/**\n * Create a document fragment from multiple elements\n * @param {...HTMLElement} elements - Elements to include\n * @returns {DocumentFragment}\n */\nfunction createFragment(...elements) {\n    const fragment = document.createDocumentFragment();\n    elements.forEach(el => {\n        if (el) {\n            fragment.appendChild(el);\n        }\n    });\n    return fragment;\n}\n\n/**\n * Create a table row with cells (safe)\n * @param {Array<string|{text: string, attrs?: Object}>} cells - Cell content\n * @param {Object} rowAttrs - Row attributes\n * @returns {HTMLTableRowElement}\n */\nfunction createTableRow(cells, rowAttrs = {}) {\n    const tr = createElement('tr', '', rowAttrs);\n    cells.forEach(cell => {\n        const td = document.createElement('td');\n        if (typeof cell === 'string') {\n            td.textContent = cell;\n        } else if (cell && typeof cell === 'object') {\n            td.textContent = cell.text || '';\n            if (cell.attrs) {\n                Object.entries(cell.attrs).forEach(([key, value]) => {\n                    if (key === 'className') {\n                        td.className = value;\n                    } else {\n                        td.setAttribute(key, value);\n                    }\n                });\n            }\n            if (cell.element) {\n                td.appendChild(cell.element);\n            }\n        }\n        tr.appendChild(td);\n    });\n    return tr;\n}\n\n/**\n * Create a card element with header and content\n * @param {Object} options - Card options\n * @returns {HTMLElement}\n */\nfunction createCard({ title, content, className = '', style = {} }) {\n    const card = createElement('div', '', { className: `card ${className}`.trim(), style });\n\n    if (title) {\n        const header = createElement('h3', title);\n        card.appendChild(header);\n    }\n\n    if (typeof content === 'string') {\n        const p = createElement('p', content);\n        card.appendChild(p);\n    } else if (content instanceof HTMLElement) {\n        card.appendChild(content);\n    }\n\n    return card;\n}\n\n/**\n * Create a loading spinner element\n * @param {string} message - Loading message\n * @returns {HTMLElement}\n */\nfunction createLoadingSpinner(message = 'Loading...') {\n    const container = createElement('div', '', { className: 'loading' });\n    const spinner = createElement('div', '', { className: 'spinner' });\n    const text = createElement('span', message);\n    appendChildren(container, spinner, text);\n    return container;\n}\n\n/**\n * Create an error message element\n * @param {string} message - Error message\n * @returns {HTMLElement}\n */\nfunction createErrorMessage(message) {\n    const card = createElement('div', '', {\n        className: 'card',\n        style: { textAlign: 'center', padding: '60px' }\n    });\n    const title = createElement('h3', 'Error', { style: { color: 'var(--danger)' } });\n    const text = createElement('p', message);\n    appendChildren(card, title, text);\n    return card;\n}\n\n/**\n * Create a stat/metric display\n * @param {Object} options - Stat options\n * @returns {HTMLElement}\n */\nfunction createStatDisplay({ label, value, unit = '', color = '' }) {\n    const container = createElement('div', '', { className: 'indicator-item' });\n    const labelDiv = createElement('div');\n    const nameSpan = createElement('div', label, { className: 'indicator-name' });\n    labelDiv.appendChild(nameSpan);\n\n    const valueDiv = createElement('div', `${value}${unit}`, {\n        className: 'indicator-value',\n        style: color ? { color } : {}\n    });\n\n    appendChildren(container, labelDiv, valueDiv);\n    return container;\n}\n\n/**\n * Create a button element\n * @param {Object} options - Button options\n * @returns {HTMLButtonElement}\n */\nfunction createButton({ text, onClick, className = 'btn', disabled = false, style = {} }) {\n    const btn = createElement('button', text, {\n        className,\n        style,\n        disabled: disabled ? 'disabled' : null\n    });\n    if (onClick) {\n        btn.addEventListener('click', onClick);\n    }\n    return btn;\n}\n\n/**\n * Create a progress bar element\n * @param {number} percentage - Progress percentage (0-100)\n * @param {string} color - Bar color\n * @returns {HTMLElement}\n */\nfunction createProgressBar(percentage, color = 'var(--primary)') {\n    const container = createElement('div', '', {\n        className: 'progress-bar',\n        style: { width: '100px', display: 'inline-block', verticalAlign: 'middle' }\n    });\n    const fill = createElement('div', '', {\n        className: 'fill',\n        style: { width: `${percentage}%`, background: color }\n    });\n    container.appendChild(fill);\n    return container;\n}\n\n/**\n * Create a tag/badge element\n * @param {string} text - Tag text\n * @param {string} variant - Tag variant (low, medium, high)\n * @returns {HTMLElement}\n */\nfunction createTag(text, variant = 'medium') {\n    return createElement('span', text, { className: `tag tag-${variant}` });\n}\n\n/**\n * Escape HTML entities in a string (for rare cases where HTML is needed)\n * @param {string} str - String to escape\n * @returns {string}\n */\nfunction escapeHtml(str) {\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n}\n\n/**\n * Safely parse and display markdown-like text (bold, links only)\n * @param {string} text - Text to parse\n * @returns {DocumentFragment}\n */\nfunction parseSimpleMarkdown(text) {\n    const fragment = document.createDocumentFragment();\n\n    // Split by bold markers **text**\n    const parts = text.split(/(\\*\\*[^*]+\\*\\*)/g);\n\n    parts.forEach(part => {\n        if (part.startsWith('**') && part.endsWith('**')) {\n            // Bold text\n            const strong = createElement('strong', part.slice(2, -2));\n            fragment.appendChild(strong);\n        } else {\n            // Regular text\n            fragment.appendChild(document.createTextNode(part));\n        }\n    });\n\n    return fragment;\n}\n\n// Export for ES modules\nexport {\n    createElement,\n    setText,\n    clearChildren,\n    appendChildren,\n    createFragment,\n    createTableRow,\n    createCard,\n    createLoadingSpinner,\n    createErrorMessage,\n    createStatDisplay,\n    createButton,\n    createProgressBar,\n    createTag,\n    escapeHtml,\n    parseSimpleMarkdown\n};\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.DOMUtils = {\n        createElement,\n        setText,\n        clearChildren,\n        appendChildren,\n        createFragment,\n        createTableRow,\n        createCard,\n        createLoadingSpinner,\n        createErrorMessage,\n        createStatDisplay,\n        createButton,\n        createProgressBar,\n        createTag,\n        escapeHtml,\n        parseSimpleMarkdown\n    };\n}\n","/**\n * Visualization Components Module\n * Chart creation and data visualization for the simulator\n */\n\nclass VisualizationManager {\n    constructor() {\n        this.charts = {};\n        this.colors = {\n            primary: '#3b82f6',\n            secondary: '#10b981',\n            danger: '#ef4444',\n            warning: '#f59e0b',\n            info: '#6366f1',\n            gray: '#6b7280',\n            sectors: [\n                '#3b82f6', '#10b981', '#f59e0b', '#ef4444',\n                '#8b5cf6', '#ec4899', '#14b8a6', '#f97316',\n                '#06b6d4', '#84cc16', '#a855f7'\n            ]\n        };\n    }\n\n    /**\n     * Initialize Chart.js with defaults\n     */\n    initDefaults() {\n        if (typeof Chart !== 'undefined') {\n            Chart.defaults.font.family = \"'Inter', 'Segoe UI', sans-serif\";\n            // Always use light mode colors\n            Chart.defaults.color = '#374151';\n            Chart.defaults.borderColor = '#e5e7eb';\n            Chart.defaults.plugins.legend.labels.usePointStyle = true;\n        }\n    }\n\n    /**\n     * Create unemployment trend chart\n     */\n    createUnemploymentChart(containerId, data) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: data.map(d => d.year.toFixed(1)),\n                datasets: [{\n                    label: 'Unemployment Rate (%)',\n                    data: data.map(d => d.labor_market.unemployment_rate),\n                    borderColor: this.colors.danger,\n                    backgroundColor: this.colors.danger + '20',\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Projected Unemployment Rate'\n                    }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        max: Math.max(45, Math.ceil(Math.max(...data.map(d => d.labor_market.unemployment_rate)) / 5) * 5 + 5),\n                        title: {\n                            display: true,\n                            text: 'Rate (%)'\n                        }\n                    },\n                    x: {\n                        title: {\n                            display: true,\n                            text: 'Year'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create employment by sector chart\n     */\n    createSectorEmploymentChart(containerId, sectors) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        const sectorNames = Object.keys(sectors).map(s =>\n            s.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n        );\n        const employment = Object.values(sectors).map(s => s.employment / 1000000);\n        const exposures = Object.values(sectors).map(s => s.automation_exposure * 100);\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: sectorNames,\n                datasets: [{\n                    label: 'Employment (Millions)',\n                    data: employment,\n                    backgroundColor: this.colors.sectors,\n                    yAxisID: 'y'\n                }, {\n                    label: 'Automation Exposure (%)',\n                    data: exposures,\n                    type: 'line',\n                    borderColor: this.colors.danger,\n                    backgroundColor: 'transparent',\n                    yAxisID: 'y1'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Employment & Automation Exposure by Sector'\n                    }\n                },\n                scales: {\n                    y: {\n                        type: 'linear',\n                        position: 'left',\n                        title: {\n                            display: true,\n                            text: 'Employment (M)'\n                        }\n                    },\n                    y1: {\n                        type: 'linear',\n                        position: 'right',\n                        max: 100,\n                        grid: { drawOnChartArea: false },\n                        title: {\n                            display: true,\n                            text: 'Exposure (%)'\n                        }\n                    },\n                    x: {\n                        ticks: {\n                            maxRotation: 45,\n                            minRotation: 45\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create AI adoption curve chart\n     */\n    createAdoptionChart(containerId, data) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: data.map(d => d.year.toFixed(1)),\n                datasets: [{\n                    label: 'AI Adoption Rate (%)',\n                    data: data.map(d => d.ai_adoption.rate),\n                    borderColor: this.colors.info,\n                    backgroundColor: this.colors.info + '20',\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'AI Adoption Rate Over Time'\n                    }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        max: 100,\n                        title: {\n                            display: true,\n                            text: 'Adoption (%)'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create jobs displaced vs created chart\n     */\n    createJobImpactChart(containerId, data) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: data.map(d => d.year.toFixed(1)),\n                datasets: [{\n                    label: 'Jobs Displaced (Cumulative)',\n                    data: data.map(d => d.derived.cumulative_displacement / 1000000),\n                    borderColor: this.colors.danger,\n                    backgroundColor: 'transparent',\n                    tension: 0.4\n                }, {\n                    label: 'New Jobs Created (Cumulative)',\n                    data: data.map(d => d.derived.cumulative_new_jobs / 1000000),\n                    borderColor: this.colors.secondary,\n                    backgroundColor: 'transparent',\n                    tension: 0.4\n                }, {\n                    label: 'Net Impact',\n                    data: data.map(d => d.derived.net_ai_job_impact / 1000000),\n                    borderColor: this.colors.info,\n                    backgroundColor: this.colors.info + '20',\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'AI Job Impact Over Time'\n                    }\n                },\n                scales: {\n                    y: {\n                        title: {\n                            display: true,\n                            text: 'Jobs (Millions)'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create wage trend chart\n     */\n    createWageChart(containerId, data) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: data.map(d => d.year.toFixed(1)),\n                datasets: [{\n                    label: 'Average Hourly Wage ($)',\n                    data: data.map(d => d.wages.average_hourly),\n                    borderColor: this.colors.primary,\n                    backgroundColor: 'transparent',\n                    tension: 0.4,\n                    yAxisID: 'y'\n                }, {\n                    label: 'Real Wage Growth (%)',\n                    data: data.map(d => d.wages.real_wage_growth),\n                    borderColor: this.colors.secondary,\n                    backgroundColor: 'transparent',\n                    tension: 0.4,\n                    yAxisID: 'y1'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Wage Trends'\n                    }\n                },\n                scales: {\n                    y: {\n                        position: 'left',\n                        title: {\n                            display: true,\n                            text: 'Wage ($)'\n                        }\n                    },\n                    y1: {\n                        position: 'right',\n                        grid: { drawOnChartArea: false },\n                        title: {\n                            display: true,\n                            text: 'Growth (%)'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create productivity chart\n     */\n    createProductivityChart(containerId, data) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: data.map(d => d.year.toFixed(1)),\n                datasets: [{\n                    label: 'Output per Hour (Index)',\n                    data: data.map(d => d.productivity.output_per_hour),\n                    borderColor: this.colors.info,\n                    backgroundColor: this.colors.info + '20',\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Labor Productivity'\n                    }\n                },\n                scales: {\n                    y: {\n                        title: {\n                            display: true,\n                            text: 'Index (2017=100)'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create sector impact comparison chart\n     */\n    createSectorImpactChart(containerId, initialSectors, finalSectors) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        const sectorNames = Object.keys(initialSectors).map(s =>\n            s.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n        );\n\n        const changes = Object.keys(initialSectors).map(s => {\n            const change = finalSectors[s].employment - initialSectors[s].employment;\n            return change / 1000000;\n        });\n\n        const backgroundColors = changes.map(c =>\n            c >= 0 ? this.colors.secondary : this.colors.danger\n        );\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: sectorNames,\n                datasets: [{\n                    label: 'Employment Change (Millions)',\n                    data: changes,\n                    backgroundColor: backgroundColors\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                indexAxis: 'y',\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Employment Change by Sector'\n                    }\n                },\n                scales: {\n                    x: {\n                        title: {\n                            display: true,\n                            text: 'Change (Millions)'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create intervention cost/benefit chart\n     */\n    createInterventionChart(containerId, interventions) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        const names = interventions.map(i => i.name);\n        const costs = interventions.map(i => i.fiscal_cost / 1e9);\n        const jobEffects = interventions.map(i => i.job_effect);\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: names,\n                datasets: [{\n                    label: 'Annual Cost ($B)',\n                    data: costs,\n                    backgroundColor: this.colors.warning,\n                    yAxisID: 'y'\n                }, {\n                    label: 'Monthly Job Effect',\n                    data: jobEffects,\n                    backgroundColor: this.colors.secondary,\n                    yAxisID: 'y1'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Intervention Costs & Effects'\n                    }\n                },\n                scales: {\n                    y: {\n                        position: 'left',\n                        title: {\n                            display: true,\n                            text: 'Cost ($B)'\n                        }\n                    },\n                    y1: {\n                        position: 'right',\n                        grid: { drawOnChartArea: false },\n                        title: {\n                            display: true,\n                            text: 'Jobs'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create historical comparison chart\n     */\n    createHistoricalChart(containerId, historical, projected) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        const historicalYears = historical.map(d => d.year);\n        const projectedYears = projected.map(d => Math.floor(d.year));\n        const uniqueProjectedYears = [...new Set(projectedYears)];\n\n        // Get one value per projected year\n        const projectedByYear = {};\n        projected.forEach(d => {\n            const year = Math.floor(d.year);\n            if (!projectedByYear[year]) {\n                projectedByYear[year] = d.labor_market.unemployment_rate;\n            }\n        });\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: [...historicalYears, ...uniqueProjectedYears.filter(y => !historicalYears.includes(y))],\n                datasets: [{\n                    label: 'Historical',\n                    data: historical.map(d => ({ x: d.year, y: d.value })),\n                    borderColor: this.colors.primary,\n                    backgroundColor: 'transparent',\n                    tension: 0.4\n                }, {\n                    label: 'Projected',\n                    data: uniqueProjectedYears.map(y => ({ x: y, y: projectedByYear[y] })),\n                    borderColor: this.colors.info,\n                    backgroundColor: this.colors.info + '20',\n                    borderDash: [5, 5],\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: 'Historical vs Projected Unemployment'\n                    }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: {\n                            display: true,\n                            text: 'Unemployment Rate (%)'\n                        }\n                    }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Create automation exposure gauge\n     */\n    createExposureGauge(containerId, exposure) {\n        const ctx = document.getElementById(containerId);\n        if (!ctx) return null;\n\n        if (this.charts[containerId]) {\n            this.charts[containerId].destroy();\n        }\n\n        const color = exposure >= 70 ? this.colors.danger :\n            exposure >= 50 ? this.colors.warning :\n                exposure >= 30 ? this.colors.primary : this.colors.secondary;\n\n        this.charts[containerId] = new Chart(ctx, {\n            type: 'doughnut',\n            data: {\n                labels: ['Exposed', 'Protected'],\n                datasets: [{\n                    data: [exposure, 100 - exposure],\n                    backgroundColor: [color, '#e5e7eb'],\n                    borderWidth: 0\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                circumference: 180,\n                rotation: -90,\n                cutout: '70%',\n                plugins: {\n                    legend: { display: false },\n                    tooltip: { enabled: false }\n                }\n            }\n        });\n\n        return this.charts[containerId];\n    }\n\n    /**\n     * Destroy all charts\n     */\n    destroyAll() {\n        for (const chart of Object.values(this.charts)) {\n            chart.destroy();\n        }\n        this.charts = {};\n    }\n\n    /**\n     * Update chart data\n     */\n    updateChart(containerId, newData) {\n        const chart = this.charts[containerId];\n        if (chart) {\n            chart.data = newData;\n            chart.update();\n        }\n    }\n\n    /**\n     * Create summary statistics display\n     */\n    createSummaryHTML(summary) {\n        return `\n            <div class=\"summary-grid\">\n                <div class=\"summary-card\">\n                    <h4>Unemployment Rate</h4>\n                    <div class=\"stat-change ${parseFloat(summary.labor_market_changes.unemployment_rate.change) > 0 ? 'negative' : 'positive'}\">\n                        ${summary.labor_market_changes.unemployment_rate.initial}%  ${summary.labor_market_changes.unemployment_rate.final}%\n                        <span>(${summary.labor_market_changes.unemployment_rate.change > 0 ? '+' : ''}${summary.labor_market_changes.unemployment_rate.change}%)</span>\n                    </div>\n                </div>\n                <div class=\"summary-card\">\n                    <h4>Total Employment</h4>\n                    <div class=\"stat-change ${summary.labor_market_changes.total_employment.change < 0 ? 'negative' : 'positive'}\">\n                        ${(summary.labor_market_changes.total_employment.change / 1000000).toFixed(1)}M\n                        <span>net change</span>\n                    </div>\n                </div>\n                <div class=\"summary-card\">\n                    <h4>AI Adoption</h4>\n                    <div class=\"stat-value\">\n                        ${summary.ai_impact.ai_adoption.initial}%  ${summary.ai_impact.ai_adoption.final}%\n                    </div>\n                </div>\n                <div class=\"summary-card\">\n                    <h4>Net AI Job Impact</h4>\n                    <div class=\"stat-change ${summary.ai_impact.net_impact < 0 ? 'negative' : 'positive'}\">\n                        ${(summary.ai_impact.net_impact / 1000000).toFixed(1)}M\n                        <span>jobs</span>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n}\n\n// Export for ES modules\nexport { VisualizationManager };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.VisualizationManager = VisualizationManager;\n}\n","/**\n * AI Summary Service - Gemini API Integration\n * Generates natural language summaries of simulation results\n *\n * Uses Cloudflare Worker proxy for secure API access\n */\n\nclass AISummaryService {\n    constructor() {\n        // Cloudflare Worker proxy URL for AI analysis access\n        this.proxyEndpoint = 'https://gemini-proxy.adamconner7.workers.dev';\n\n        // Track quota from proxy responses\n        this.lastQuotaInfo = null;\n\n        // API call counter - persisted in localStorage\n        this.apiCallCount = parseInt(localStorage.getItem('gemini_api_call_count') || '0', 10);\n        this.apiCallHistory = JSON.parse(localStorage.getItem('gemini_api_call_history') || '[]');\n        this.counterEnabled = localStorage.getItem('gemini_counter_enabled') !== 'false'; // Default enabled\n    }\n\n    /**\n     * Get the total API call count\n     */\n    getApiCallCount() {\n        return this.apiCallCount;\n    }\n\n    /**\n     * Get API call history\n     */\n    getApiCallHistory() {\n        return this.apiCallHistory;\n    }\n\n    /**\n     * Check if counter is enabled\n     */\n    isCounterEnabled() {\n        return this.counterEnabled;\n    }\n\n    /**\n     * Enable/disable the counter\n     */\n    setCounterEnabled(enabled) {\n        this.counterEnabled = enabled;\n        localStorage.setItem('gemini_counter_enabled', enabled.toString());\n    }\n\n    /**\n     * Reset the API call counter\n     */\n    resetApiCallCount() {\n        this.apiCallCount = 0;\n        this.apiCallHistory = [];\n        localStorage.setItem('gemini_api_call_count', '0');\n        localStorage.setItem('gemini_api_call_history', '[]');\n    }\n\n    /**\n     * Increment and track API call\n     */\n    _trackApiCall(type = 'unknown') {\n        if (!this.counterEnabled) return;\n\n        this.apiCallCount++;\n\n        const callRecord = {\n            timestamp: new Date().toISOString(),\n            type: type,\n            mode: this.getMode(),\n            count: this.apiCallCount\n        };\n\n        this.apiCallHistory.push(callRecord);\n\n        // Keep only last 100 calls in history\n        if (this.apiCallHistory.length > 100) {\n            this.apiCallHistory = this.apiCallHistory.slice(-100);\n        }\n\n        // Persist\n        localStorage.setItem('gemini_api_call_count', this.apiCallCount.toString());\n        localStorage.setItem('gemini_api_call_history', JSON.stringify(this.apiCallHistory));\n\n        // Dispatch event for UI updates\n        window.dispatchEvent(new CustomEvent('geminiApiCallUpdated', {\n            detail: { count: this.apiCallCount, lastCall: callRecord }\n        }));\n    }\n\n    /**\n     * Get stats summary\n     */\n    getApiCallStats() {\n        const today = new Date().toDateString();\n        const todayCalls = this.apiCallHistory.filter(c =>\n            new Date(c.timestamp).toDateString() === today\n        ).length;\n\n        const thisWeek = new Date();\n        thisWeek.setDate(thisWeek.getDate() - 7);\n        const weekCalls = this.apiCallHistory.filter(c =>\n            new Date(c.timestamp) >= thisWeek\n        ).length;\n\n        return {\n            total: this.apiCallCount,\n            today: todayCalls,\n            thisWeek: weekCalls,\n            lastCall: this.apiCallHistory.length > 0\n                ? this.apiCallHistory[this.apiCallHistory.length - 1]\n                : null\n        };\n    }\n\n    /**\n     * Check if AI analysis is available\n     */\n    isAvailable() {\n        return this.proxyEndpoint && this.proxyEndpoint.length > 0;\n    }\n\n    /**\n     * Get the mode being used\n     */\n    getMode() {\n        return 'proxy';\n    }\n\n    /**\n     * Get quota info from last proxy request\n     */\n    getQuotaInfo() {\n        return this.lastQuotaInfo;\n    }\n\n    /**\n     * Generate summary prompt from simulation results\n     */\n    buildPrompt(results) {\n        const summary = results.summary;\n        const scenario = results.scenario;\n\n        return `You are an expert labor economist analyzing AI's impact on employment. Based on the following simulation results, provide a clear, insightful summary in 3-4 paragraphs. Be specific with numbers and highlight key findings, risks, and recommendations.\n\nSIMULATION PARAMETERS:\n- Scenario: ${scenario.name}\n- Timeframe: ${scenario.timeframe.start_year} to ${scenario.timeframe.end_year}\n- Target Unemployment Rate: ${scenario.targets.unemployment_rate}%\n- AI Adoption Rate Target: ${scenario.targets.ai_adoption_rate}%\n- Automation Pace: ${scenario.targets.automation_pace}\n- Adoption Curve: ${scenario.ai_parameters.adoption_curve}\n\nLABOR MARKET RESULTS:\n- Starting Unemployment: ${summary.labor_market_changes.unemployment_rate.initial}%\n- Final Unemployment: ${summary.labor_market_changes.unemployment_rate.final}%\n- Unemployment Change: ${summary.labor_market_changes.unemployment_rate.change}%\n- Starting Employment: ${(summary.labor_market_changes.total_employment.initial / 1e6).toFixed(1)} million\n- Final Employment: ${(summary.labor_market_changes.total_employment.final / 1e6).toFixed(1)} million\n- Net Employment Change: ${(summary.labor_market_changes.total_employment.change / 1e6).toFixed(2)} million\n\nAI IMPACT:\n- Final AI Adoption: ${summary.ai_impact.ai_adoption.final}%\n- Jobs Displaced by AI: ${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(2)} million\n- New Jobs Created by AI: ${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(2)} million\n- Net AI Job Impact: ${(summary.ai_impact.net_impact / 1e6).toFixed(2)} million\n\nECONOMIC INDICATORS:\n- Final Productivity Growth: ${summary.productivity.growth_rate.final}%\n- Final Wage Change: ${summary.wages.average_hourly.change_percent}%\n\nPOLICY INTERVENTIONS ACTIVE: ${scenario.interventions.length > 0 ? scenario.interventions.map(i => i.name).join(', ') : 'None'}\n\nPlease provide:\n1. An executive summary of the key findings\n2. Analysis of the most significant impacts and which sectors/workers are most affected\n3. Economic implications (wages, productivity, inequality)\n4. Recommendations or considerations for policymakers\n\nKeep the tone professional but accessible. Use specific numbers from the data.`;\n    }\n\n    /**\n     * Make API request via Cloudflare proxy\n     */\n    async makeRequest(body) {\n        if (!this.isAvailable()) {\n            throw new Error('AI analysis is not available.');\n        }\n\n        const response = await fetch(this.proxyEndpoint, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body)\n        });\n        return response;\n    }\n\n    /**\n     * Call Gemini API to generate summary\n     */\n    async generateSummary(results) {\n        if (!this.isAvailable()) {\n            throw new Error('AI analysis is not available.');\n        }\n\n        const prompt = this.buildPrompt(results);\n\n        try {\n            const response = await this.makeRequest({\n                contents: [{\n                    parts: [{\n                        text: prompt\n                    }]\n                }],\n                generationConfig: {\n                    temperature: 0.7,\n                    topK: 40,\n                    topP: 0.95,\n                    maxOutputTokens: 1024,\n                },\n                safetySettings: [\n                    {\n                        category: \"HARM_CATEGORY_HARASSMENT\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_HATE_SPEECH\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n                        threshold: \"BLOCK_NONE\"\n                    }\n                ]\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n\n                // Handle rate limit from proxy\n                if (response.status === 429) {\n                    throw new Error('Daily AI analysis limit reached. Please try again tomorrow.');\n                }\n\n                throw new Error(`API request failed: ${errorData.error?.message || response.statusText}`);\n            }\n\n            const data = await response.json();\n\n            // Store quota info if using proxy\n            if (data._quota) {\n                this.lastQuotaInfo = data._quota;\n            }\n\n            // Track the API call (successful)\n            this._trackApiCall('summary');\n\n            if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {\n                return data.candidates[0].content.parts[0].text;\n            } else {\n                throw new Error('Unexpected API response format');\n            }\n        } catch (error) {\n            if (error.message.includes('Failed to fetch')) {\n                throw new Error('Network error. Please check your internet connection.');\n            }\n            throw error;\n        }\n    }\n\n    /**\n     * Generate a quick bullet-point summary (shorter, for sidebar)\n     */\n    async generateQuickInsights(results) {\n        if (!this.isAvailable()) {\n            return null;\n        }\n\n        const summary = results.summary;\n\n        const prompt = `Based on this labor market simulation data, provide exactly 4 brief, impactful bullet points (max 15 words each):\n\n- Unemployment: ${summary.labor_market_changes.unemployment_rate.initial}%  ${summary.labor_market_changes.unemployment_rate.final}%\n- Jobs Displaced: ${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(1)}M\n- Jobs Created: ${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(1)}M\n- Net Impact: ${(summary.ai_impact.net_impact / 1e6).toFixed(1)}M\n\nFormat as 4 bullet points starting with an emoji. Focus on the most important insights.`;\n\n        try {\n            const response = await this.makeRequest({\n                contents: [{\n                    parts: [{ text: prompt }]\n                }],\n                generationConfig: {\n                    temperature: 0.5,\n                    maxOutputTokens: 256,\n                }\n            });\n\n            if (!response.ok) return null;\n\n            const data = await response.json();\n\n            // Track the API call (successful)\n            this._trackApiCall('quick_insights');\n\n            // Store quota info if using proxy\n            if (data._quota) {\n                this.lastQuotaInfo = data._quota;\n            }\n\n            return data.candidates?.[0]?.content?.parts?.[0]?.text || null;\n        } catch {\n            return null;\n        }\n    }\n}\n\n// Global instance\nconst aiSummaryService = new AISummaryService();\n\n// Export for ES modules\nexport { AISummaryService, aiSummaryService };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.AISummaryService = AISummaryService;\n    window.aiSummaryService = aiSummaryService;\n}\n","/**\n * AI Scenario Enhancer Service\n * Uses Gemini to expand simple user inputs into rich, nuanced simulation parameters\n * and to generate deeper analysis of simulation outputs\n */\n\nclass AIScenarioEnhancer {\n    constructor() {\n        // Cloudflare Worker proxy for Gemini API\n        this.proxyEndpoint = 'https://gemini-proxy.adamconner7.workers.dev';\n\n        // Storage for AI-enhanced simulations\n        this.storageKey = 'ai_enhanced_simulations';\n\n        // Password for advanced simulation (hashed)\n        this.passwordKey = 'advanced_sim_password_hash';\n    }\n\n    /**\n     * Check if service is available\n     */\n    isAvailable() {\n        return this.proxyEndpoint && this.proxyEndpoint.length > 0;\n    }\n\n    /**\n     * Make API request to Gemini via Cloudflare proxy\n     */\n    async makeRequest(prompt, options = {}) {\n        const body = {\n            contents: [{\n                parts: [{ text: prompt }]\n            }],\n            generationConfig: {\n                temperature: options.temperature || 0.7,\n                topK: 40,\n                topP: 0.95,\n                maxOutputTokens: options.maxTokens || 2048,\n            }\n        };\n\n        const response = await fetch(this.proxyEndpoint, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body)\n        });\n\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error?.message || 'AI request failed');\n        }\n\n        const data = await response.json();\n        return data.candidates?.[0]?.content?.parts?.[0]?.text || '';\n    }\n\n    /**\n     * Enhance simple inputs into rich simulation parameters\n     */\n    async enhanceInputs(simpleInputs) {\n        const prompt = `You are an expert labor economist and AI researcher. Given these simple simulation inputs, generate a comprehensive, nuanced set of parameters for a labor market simulation.\n\nSIMPLE INPUTS:\n- Target Unemployment Rate: ${simpleInputs.targetUnemployment}%\n- AI Adoption Rate: ${simpleInputs.aiAdoption}%\n- Automation Pace: ${simpleInputs.automationPace}\n- Timeframe: ${simpleInputs.years} years (${simpleInputs.startYear} to ${simpleInputs.endYear})\n- Adoption Curve: ${simpleInputs.adoptionCurve}\n- Active Interventions: ${simpleInputs.interventions?.length > 0 ? simpleInputs.interventions.map(i => i.name).join(', ') : 'None'}\n\nBased on current economic research and AI development trends, generate enhanced parameters. Consider:\n1. How different sectors will be affected differently\n2. Labor market dynamics (retraining effectiveness, geographic mobility)\n3. Wage effects across skill levels\n4. Second-order economic effects\n5. Historical patterns from past technological transitions\n6. Current AI capabilities and likely progression\n\nIMPORTANT: Respond with ONLY valid JSON. All values must be actual numbers, not ranges. Choose specific values appropriate for this scenario.\n\nVALUE GUIDELINES (pick a specific number within these ranges):\n- adoption_multiplier: between 1.0 and 2.0\n- displacement_rate: between 0.0 and 0.5\n- new_role_creation: between 0.0 and 1.0\n- wage_premium: between -0.1 and 0.3\n- retraining_effectiveness: between 0.1 and 0.6\n- retraining_duration_months: between 3 and 24\n- geographic_mobility: between 0.05 and 0.3\n- gig_economy_absorption: between 0.1 and 0.4\n- early_retirement_rate: between 0.05 and 0.2\n- labor_force_participation_change: between -0.05 and 0.05\n- skills_mismatch_factor: between 0.1 and 0.5\n- skill_premium_growth: between 0.0 and 5.0\n- median_wage_pressure: between -3.0 and 2.0\n- top_decile_growth: between 0.0 and 8.0\n- bottom_decile_pressure: between -5.0 and 0.0\n- wage_polarization_index: between 0.0 and 1.0\n- productivity_multiplier: between 1.0 and 2.0\n- gdp_impact_modifier: between -0.02 and 0.05\n- consumer_spending_impact: between -0.03 and 0.02\n- business_investment_boost: between 0.0 and 0.1\n- inflation_pressure: between -0.01 and 0.03\n- displacement_lag_months: between 3 and 18\n- new_job_creation_lag_months: between 6 and 36\n- peak_disruption_year: between 1 and ${simpleInputs.years}\n- recovery_speed: between 0.5 and 2.0\n- structural_unemployment_risk: between 0.0 and 0.3\n\nReturn this exact JSON structure with your chosen values:\n{\n    \"sector_dynamics\": {\n        \"technology\": { \"adoption_multiplier\": 1.5, \"displacement_rate\": 0.2, \"new_role_creation\": 0.6, \"wage_premium\": 0.15 },\n        \"finance\": { \"adoption_multiplier\": 1.4, \"displacement_rate\": 0.25, \"new_role_creation\": 0.4, \"wage_premium\": 0.1 },\n        \"healthcare\": { \"adoption_multiplier\": 1.2, \"displacement_rate\": 0.1, \"new_role_creation\": 0.5, \"wage_premium\": 0.12 },\n        \"manufacturing\": { \"adoption_multiplier\": 1.6, \"displacement_rate\": 0.35, \"new_role_creation\": 0.2, \"wage_premium\": -0.05 },\n        \"retail\": { \"adoption_multiplier\": 1.4, \"displacement_rate\": 0.3, \"new_role_creation\": 0.15, \"wage_premium\": -0.08 },\n        \"education\": { \"adoption_multiplier\": 1.1, \"displacement_rate\": 0.05, \"new_role_creation\": 0.4, \"wage_premium\": 0.05 },\n        \"professional_services\": { \"adoption_multiplier\": 1.5, \"displacement_rate\": 0.2, \"new_role_creation\": 0.5, \"wage_premium\": 0.1 },\n        \"transportation\": { \"adoption_multiplier\": 1.7, \"displacement_rate\": 0.4, \"new_role_creation\": 0.1, \"wage_premium\": -0.1 }\n    },\n    \"labor_market_dynamics\": {\n        \"retraining_effectiveness\": 0.35,\n        \"retraining_duration_months\": 12,\n        \"geographic_mobility\": 0.15,\n        \"gig_economy_absorption\": 0.25,\n        \"early_retirement_rate\": 0.1,\n        \"labor_force_participation_change\": -0.02,\n        \"skills_mismatch_factor\": 0.3\n    },\n    \"wage_dynamics\": {\n        \"skill_premium_growth\": 2.5,\n        \"median_wage_pressure\": -0.5,\n        \"top_decile_growth\": 4.0,\n        \"bottom_decile_pressure\": -2.0,\n        \"wage_polarization_index\": 0.5\n    },\n    \"economic_effects\": {\n        \"productivity_multiplier\": 1.4,\n        \"gdp_impact_modifier\": 0.02,\n        \"consumer_spending_impact\": -0.01,\n        \"business_investment_boost\": 0.05,\n        \"inflation_pressure\": 0.01\n    },\n    \"transition_dynamics\": {\n        \"displacement_lag_months\": 9,\n        \"new_job_creation_lag_months\": 18,\n        \"peak_disruption_year\": 3,\n        \"recovery_speed\": 1.2,\n        \"structural_unemployment_risk\": 0.15\n    },\n    \"confidence_intervals\": {\n        \"unemployment_low\": 5.5,\n        \"unemployment_high\": 9.5,\n        \"displacement_low\": 8.0,\n        \"displacement_high\": 15.0\n    },\n    \"key_assumptions\": [\n        \"Your first key assumption about this scenario\",\n        \"Your second key assumption\",\n        \"Your third key assumption\"\n    ],\n    \"risk_factors\": [\n        \"First major risk factor\",\n        \"Second major risk factor\",\n        \"Third major risk factor\"\n    ]\n}\n\nAdjust all values based on the specific inputs provided. Be realistic and consistent with economic research.`;\n\n        const response = await this.makeRequest(prompt, { temperature: 0.6, maxTokens: 2500 });\n\n        // Parse JSON from response\n        return this.extractJSON(response, 'enhanceInputs');\n    }\n\n    /**\n     * Extract and parse JSON from AI response\n     */\n    extractJSON(response, context = '') {\n        try {\n            let jsonStr = response.trim();\n\n            // Remove markdown code blocks if present\n            if (jsonStr.startsWith('```json')) {\n                jsonStr = jsonStr.slice(7);\n            } else if (jsonStr.startsWith('```')) {\n                jsonStr = jsonStr.slice(3);\n            }\n            if (jsonStr.endsWith('```')) {\n                jsonStr = jsonStr.slice(0, -3);\n            }\n\n            // Try to find JSON object in the response\n            const jsonStart = jsonStr.indexOf('{');\n            const jsonEnd = jsonStr.lastIndexOf('}');\n\n            if (jsonStart !== -1 && jsonEnd !== -1 && jsonEnd > jsonStart) {\n                jsonStr = jsonStr.slice(jsonStart, jsonEnd + 1);\n            }\n\n            // Clean up common issues\n            jsonStr = jsonStr.trim();\n\n            return JSON.parse(jsonStr);\n        } catch (e) {\n            console.error(`Failed to parse AI response (${context}):`, response);\n            console.error('Parse error:', e.message);\n            throw new Error('AI returned invalid JSON. Please try again.');\n        }\n    }\n\n    /**\n     * Generate deep analysis of simulation results\n     */\n    async analyzeResults(simpleInputs, enhancedParams, simulationResults) {\n        const summary = simulationResults.summary;\n\n        const prompt = `You are an expert labor economist analyzing an AI-enhanced labor market simulation. Provide a comprehensive, nuanced analysis.\n\nSCENARIO INPUTS:\n- Target Unemployment: ${simpleInputs.targetUnemployment}%\n- AI Adoption: ${simpleInputs.aiAdoption}%\n- Automation Pace: ${simpleInputs.automationPace}\n- Timeframe: ${simpleInputs.years} years\n\nAI-ENHANCED PARAMETERS USED:\n${JSON.stringify(enhancedParams, null, 2)}\n\nSIMULATION RESULTS:\n- Starting Unemployment: ${summary.labor_market_changes.unemployment_rate.initial}%\n- Final Unemployment: ${summary.labor_market_changes.unemployment_rate.final}%\n- Jobs Displaced: ${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(2)} million\n- Jobs Created: ${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(2)} million\n- Net Impact: ${(summary.ai_impact.net_impact / 1e6).toFixed(2)} million\n- Wage Change: ${summary.wages.average_hourly.change_percent}%\n\nRespond with ONLY a valid JSON object (no markdown) in this format:\n{\n    \"executive_summary\": \"2-3 sentence overview\",\n    \"key_findings\": [\n        { \"finding\": \"string\", \"confidence\": \"high/medium/low\", \"impact\": \"high/medium/low\" },\n        { \"finding\": \"string\", \"confidence\": \"high/medium/low\", \"impact\": \"high/medium/low\" },\n        { \"finding\": \"string\", \"confidence\": \"high/medium/low\", \"impact\": \"high/medium/low\" }\n    ],\n    \"sector_analysis\": {\n        \"most_disrupted\": [\"sector1\", \"sector2\"],\n        \"most_opportunity\": [\"sector1\", \"sector2\"],\n        \"transition_sectors\": [\"sector1\", \"sector2\"]\n    },\n    \"workforce_impacts\": {\n        \"high_risk_workers\": \"description of who is most at risk\",\n        \"emerging_opportunities\": \"description of new opportunities\",\n        \"skills_in_demand\": [\"skill1\", \"skill2\", \"skill3\"],\n        \"skills_declining\": [\"skill1\", \"skill2\", \"skill3\"]\n    },\n    \"economic_implications\": {\n        \"wage_inequality\": \"assessment\",\n        \"productivity_gains\": \"assessment\",\n        \"consumer_impact\": \"assessment\",\n        \"regional_disparities\": \"assessment\"\n    },\n    \"policy_recommendations\": [\n        { \"policy\": \"string\", \"priority\": \"immediate/short-term/long-term\", \"effectiveness\": \"high/medium/low\" },\n        { \"policy\": \"string\", \"priority\": \"immediate/short-term/long-term\", \"effectiveness\": \"high/medium/low\" },\n        { \"policy\": \"string\", \"priority\": \"immediate/short-term/long-term\", \"effectiveness\": \"high/medium/low\" }\n    ],\n    \"scenario_variations\": {\n        \"optimistic_case\": \"brief description\",\n        \"pessimistic_case\": \"brief description\",\n        \"most_likely\": \"brief description\"\n    },\n    \"model_confidence\": {\n        \"overall\": \"high/medium/low\",\n        \"factors\": [\"factor affecting confidence 1\", \"factor 2\"]\n    },\n    \"narrative_analysis\": \"3-4 paragraph detailed narrative analysis of the scenario and its implications\"\n}`;\n\n        const response = await this.makeRequest(prompt, { temperature: 0.5, maxTokens: 3000 });\n\n        return this.extractJSON(response, 'analyzeResults');\n    }\n\n    /**\n     * Store an AI-enhanced simulation\n     */\n    storeSimulation(data) {\n        const stored = this.getStoredSimulations();\n\n        const record = {\n            id: Date.now(),\n            timestamp: new Date().toISOString(),\n            inputs: data.inputs,\n            enhancedParams: data.enhancedParams,\n            results: data.results,\n            analysis: data.analysis\n        };\n\n        stored.push(record);\n\n        // Keep last 100 simulations\n        if (stored.length > 100) {\n            stored.shift();\n        }\n\n        localStorage.setItem(this.storageKey, JSON.stringify(stored));\n        return record.id;\n    }\n\n    /**\n     * Get all stored simulations\n     */\n    getStoredSimulations() {\n        try {\n            return JSON.parse(localStorage.getItem(this.storageKey) || '[]');\n        } catch {\n            return [];\n        }\n    }\n\n    /**\n     * Get stored simulation by ID\n     */\n    getSimulation(id) {\n        const stored = this.getStoredSimulations();\n        return stored.find(s => s.id === id);\n    }\n\n    /**\n     * Export stored simulations for training\n     */\n    exportForTraining() {\n        const stored = this.getStoredSimulations();\n        return {\n            version: '1.0',\n            exportDate: new Date().toISOString(),\n            count: stored.length,\n            simulations: stored\n        };\n    }\n\n    /**\n     * Password management\n     */\n    setPassword(password) {\n        // Simple hash for client-side (not cryptographically secure, but sufficient for gating)\n        const hash = this.simpleHash(password);\n        localStorage.setItem(this.passwordKey, hash);\n    }\n\n    checkPassword(password) {\n        const storedHash = localStorage.getItem(this.passwordKey);\n        if (!storedHash) return true; // No password set\n        return this.simpleHash(password) === storedHash;\n    }\n\n    hasPassword() {\n        return !!localStorage.getItem(this.passwordKey);\n    }\n\n    clearPassword() {\n        localStorage.removeItem(this.passwordKey);\n    }\n\n    simpleHash(str) {\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            const char = str.charCodeAt(i);\n            hash = ((hash << 5) - hash) + char;\n            hash = hash & hash;\n        }\n        return hash.toString(36);\n    }\n}\n\n// Global instance\nconst aiScenarioEnhancer = new AIScenarioEnhancer();\n\n// Export for ES modules\nexport { AIScenarioEnhancer, aiScenarioEnhancer };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.AIScenarioEnhancer = AIScenarioEnhancer;\n    window.aiScenarioEnhancer = aiScenarioEnhancer;\n}\n","/**\n * Model Training Service\n * Uses stored AI-enhanced simulations to train and improve the base economic model\n * Leverages AI (Gemini) to analyze patterns and generate optimized parameters\n */\n\nclass ModelTrainer {\n    constructor() {\n        this.modelVersion = '1.0';\n        this.trainedModelKey = 'trained_model_params';\n        this.trainingHistoryKey = 'training_history';\n\n        // Cloudflare Worker proxy for AI calls\n        this.proxyEndpoint = 'https://gemini-proxy.adamconner7.workers.dev';\n    }\n\n    /**\n     * Make AI request via Cloudflare proxy\n     */\n    async makeRequest(prompt, options = {}) {\n        const body = {\n            contents: [{\n                parts: [{ text: prompt }]\n            }],\n            generationConfig: {\n                temperature: options.temperature || 0.3,\n                maxOutputTokens: options.maxTokens || 4096,\n            }\n        };\n\n        const response = await fetch(this.proxyEndpoint, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body)\n        });\n\n        if (!response.ok) {\n            throw new Error('Training AI request failed');\n        }\n\n        const data = await response.json();\n        return data.candidates?.[0]?.content?.parts?.[0]?.text || '';\n    }\n\n    /**\n     * Analyze stored simulations to extract patterns\n     */\n    async analyzeStoredSimulations() {\n        const simulations = aiScenarioEnhancer.getStoredSimulations();\n\n        if (simulations.length < 3) {\n            return {\n                success: false,\n                message: 'Need at least 3 stored AI simulations to analyze patterns',\n                count: simulations.length\n            };\n        }\n\n        // Extract key patterns\n        const patterns = simulations.map(sim => ({\n            inputs: {\n                unemployment: sim.inputs.targetUnemployment,\n                aiAdoption: sim.inputs.aiAdoption,\n                pace: sim.inputs.automationPace,\n                years: sim.inputs.years\n            },\n            enhancedParams: sim.enhancedParams,\n            outcomes: {\n                finalUnemployment: parseFloat(sim.results.summary.labor_market_changes.unemployment_rate.final),\n                displacement: sim.results.summary.ai_impact.cumulative_displacement,\n                newJobs: sim.results.summary.ai_impact.cumulative_new_jobs,\n                wageChange: parseFloat(sim.results.summary.wages.average_hourly.change_percent)\n            }\n        }));\n\n        return {\n            success: true,\n            count: simulations.length,\n            patterns\n        };\n    }\n\n    /**\n     * Train improved model parameters using AI analysis of stored data\n     */\n    async trainModel(options = {}) {\n        const analysis = await this.analyzeStoredSimulations();\n\n        if (!analysis.success) {\n            return analysis;\n        }\n\n        const prompt = `You are an expert economist and machine learning engineer. Analyze these AI-enhanced labor market simulations and derive optimized parameters for a base economic model.\n\nTRAINING DATA (${analysis.count} simulations):\n${JSON.stringify(analysis.patterns.slice(0, 20), null, 2)}\n\nYour task:\n1. Identify patterns between inputs and AI-enhanced parameters\n2. Find relationships between enhanced parameters and outcomes\n3. Generate optimized base model coefficients\n\nGenerate improved model parameters that will make the BASE simulation (without AI enhancement) produce more realistic results.\n\nRespond with ONLY a valid JSON object (no markdown):\n{\n    \"model_version\": \"2.0\",\n    \"training_date\": \"${new Date().toISOString()}\",\n    \"training_samples\": ${analysis.count},\n\n    \"displacement_coefficients\": {\n        \"base_rate\": 0.05-0.2,\n        \"ai_adoption_factor\": 0.5-2.0,\n        \"pace_multipliers\": {\n            \"slow\": 0.3-0.7,\n            \"moderate\": 0.8-1.2,\n            \"fast\": 1.3-1.8,\n            \"accelerating\": 1.8-2.5\n        },\n        \"sector_exposure_weights\": {\n            \"technology\": 0.1-0.3,\n            \"finance\": 0.3-0.5,\n            \"healthcare\": 0.1-0.3,\n            \"manufacturing\": 0.5-0.8,\n            \"retail\": 0.4-0.7,\n            \"education\": 0.1-0.3,\n            \"professional_services\": 0.3-0.5,\n            \"transportation\": 0.5-0.8\n        }\n    },\n\n    \"job_creation_coefficients\": {\n        \"base_multiplier\": 0.2-0.5,\n        \"ai_complementarity_factor\": 0.3-0.8,\n        \"lag_months\": 6-24,\n        \"sector_creation_rates\": {\n            \"technology\": 0.3-0.6,\n            \"finance\": 0.2-0.4,\n            \"healthcare\": 0.3-0.5,\n            \"manufacturing\": 0.1-0.3,\n            \"retail\": 0.1-0.3,\n            \"education\": 0.2-0.4,\n            \"professional_services\": 0.3-0.5,\n            \"transportation\": 0.1-0.2\n        }\n    },\n\n    \"wage_coefficients\": {\n        \"productivity_wage_pass_through\": 0.2-0.6,\n        \"displacement_wage_pressure\": -0.02--0.005,\n        \"skill_premium_growth_rate\": 0.01-0.05,\n        \"polarization_factor\": 0.1-0.4\n    },\n\n    \"transition_coefficients\": {\n        \"retraining_effectiveness\": 0.2-0.5,\n        \"mobility_factor\": 0.1-0.3,\n        \"structural_unemployment_rate\": 0.02-0.08,\n        \"recovery_half_life_months\": 12-36\n    },\n\n    \"feedback_loops\": {\n        \"unemployment_to_spending\": -0.3--0.1,\n        \"productivity_to_investment\": 0.1-0.4,\n        \"wage_to_consumption\": 0.4-0.7,\n        \"ai_adoption_acceleration\": 0.05-0.2\n    },\n\n    \"calibration_notes\": [\n        \"observation about the training data\",\n        \"key insight derived\",\n        \"recommendation for model use\"\n    ],\n\n    \"confidence_score\": 0.0-1.0,\n    \"recommended_for_production\": true/false\n}\n\nBase your parameters on patterns observed in the training data. Use realistic economic values.`;\n\n        try {\n            const response = await this.makeRequest(prompt, { temperature: 0.2, maxTokens: 4000 });\n\n            let jsonStr = response.trim();\n            if (jsonStr.startsWith('```json')) jsonStr = jsonStr.slice(7);\n            else if (jsonStr.startsWith('```')) jsonStr = jsonStr.slice(3);\n            if (jsonStr.endsWith('```')) jsonStr = jsonStr.slice(0, -3);\n\n            const trainedParams = JSON.parse(jsonStr.trim());\n\n            // Store trained model\n            this.saveTrainedModel(trainedParams);\n\n            // Log training history\n            this.logTraining({\n                timestamp: new Date().toISOString(),\n                samples: analysis.count,\n                version: trainedParams.model_version,\n                confidence: trainedParams.confidence_score\n            });\n\n            return {\n                success: true,\n                model: trainedParams,\n                message: `Model trained on ${analysis.count} simulations`\n            };\n        } catch (e) {\n            console.error('Training failed:', e);\n            return {\n                success: false,\n                message: 'Failed to train model: ' + e.message\n            };\n        }\n    }\n\n    /**\n     * Save trained model parameters\n     */\n    saveTrainedModel(params) {\n        localStorage.setItem(this.trainedModelKey, JSON.stringify(params));\n    }\n\n    /**\n     * Get trained model parameters\n     */\n    getTrainedModel() {\n        try {\n            return JSON.parse(localStorage.getItem(this.trainedModelKey));\n        } catch {\n            return null;\n        }\n    }\n\n    /**\n     * Check if trained model exists\n     */\n    hasTrainedModel() {\n        return !!localStorage.getItem(this.trainedModelKey);\n    }\n\n    /**\n     * Clear trained model\n     */\n    clearTrainedModel() {\n        localStorage.removeItem(this.trainedModelKey);\n    }\n\n    /**\n     * Log training event\n     */\n    logTraining(entry) {\n        const history = this.getTrainingHistory();\n        history.push(entry);\n        if (history.length > 50) history.shift();\n        localStorage.setItem(this.trainingHistoryKey, JSON.stringify(history));\n    }\n\n    /**\n     * Get training history\n     */\n    getTrainingHistory() {\n        try {\n            return JSON.parse(localStorage.getItem(this.trainingHistoryKey) || '[]');\n        } catch {\n            return [];\n        }\n    }\n\n    /**\n     * Apply trained model to simulation engine\n     */\n    applyToEngine(engine) {\n        const trained = this.getTrainedModel();\n        if (!trained) return false;\n\n        // Store original coefficients\n        engine._originalCoefficients = engine._originalCoefficients || {\n            automationPaceMultipliers: { ...engine.getAutomationPaceMultiplier }\n        };\n\n        // Apply trained coefficients\n        // This modifies the engine's behavior based on learned parameters\n        engine.trainedModel = trained;\n\n        return true;\n    }\n\n    /**\n     * Get model status summary\n     */\n    getStatus() {\n        const trained = this.getTrainedModel();\n        const history = this.getTrainingHistory();\n        const simCount = aiScenarioEnhancer.getStoredSimulations().length;\n\n        return {\n            hasTrainedModel: !!trained,\n            modelVersion: trained?.model_version || 'None',\n            confidence: trained?.confidence_score || 0,\n            trainingCount: history.length,\n            lastTraining: history.length > 0 ? history[history.length - 1].timestamp : null,\n            storedSimulations: simCount,\n            readyForTraining: simCount >= 3\n        };\n    }\n\n    /**\n     * Export training data and model\n     */\n    exportAll() {\n        return {\n            exportDate: new Date().toISOString(),\n            trainedModel: this.getTrainedModel(),\n            trainingHistory: this.getTrainingHistory(),\n            simulations: aiScenarioEnhancer.exportForTraining()\n        };\n    }\n}\n\n// Global instance\nconst modelTrainer = new ModelTrainer();\n\n// Export for ES modules\nexport { ModelTrainer, modelTrainer };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.ModelTrainer = ModelTrainer;\n    window.modelTrainer = modelTrainer;\n}\n","/**\n * Results Interpretation API\n * Provides structured, rule-based interpretations of ABM simulation results\n *\n * This service analyzes simulation outcomes and generates:\n * - Key findings and insights\n * - Risk assessments\n * - Policy recommendations\n * - Trend analysis\n * - Comparative benchmarks\n */\n\nclass ResultsInterpreter {\n    constructor() {\n        // Thresholds for interpretation\n        this.thresholds = {\n            unemployment: {\n                crisis: 10,      // Above this is crisis level\n                high: 7,         // Above this is concerning\n                moderate: 5,     // Normal range\n                low: 3.5         // Below this may indicate overheating\n            },\n            displacement: {\n                severe: 5,       // Millions - severe disruption\n                significant: 2,  // Millions - significant\n                moderate: 0.5    // Millions - moderate\n            },\n            jobCreation: {\n                strong: 3,       // Millions - strong job creation\n                moderate: 1,     // Millions - moderate\n                weak: 0.3        // Millions - weak\n            },\n            wageGrowth: {\n                strong: 3,       // Percent - strong growth\n                moderate: 1.5,   // Percent - moderate\n                stagnant: 0,     // Percent - stagnant\n                declining: -1    // Percent - concerning decline\n            },\n            adoption: {\n                rapid: 70,       // Percent - rapid adoption\n                moderate: 40,    // Percent - moderate\n                slow: 20         // Percent - slow\n            }\n        };\n\n        // Risk weights for overall assessment\n        this.riskWeights = {\n            unemployment: 0.3,\n            displacement: 0.25,\n            wageChange: 0.2,\n            netJobImpact: 0.15,\n            inequality: 0.1\n        };\n    }\n\n    /**\n     * Generate comprehensive interpretation of simulation results\n     */\n    interpret(results) {\n        if (!results || !results.summary) {\n            return { error: 'Invalid results format' };\n        }\n\n        const summary = results.summary;\n        const scenario = results.scenario;\n\n        return {\n            overview: this.generateOverview(summary, scenario),\n            keyFindings: this.extractKeyFindings(summary, scenario),\n            riskAssessment: this.assessRisks(summary),\n            trendAnalysis: this.analyzeTrends(results),\n            sectorAnalysis: this.analyzeSectors(summary),\n            policyRecommendations: this.generateRecommendations(summary, scenario),\n            comparativeBenchmarks: this.generateBenchmarks(summary),\n            narrativeSummary: this.generateNarrativeSummary(summary, scenario),\n            dataPoints: this.extractDataPoints(summary)\n        };\n    }\n\n    /**\n     * Generate executive overview\n     */\n    generateOverview(summary, scenario) {\n        const urChange = summary.labor_market_changes.unemployment_rate.change;\n        const netJobs = summary.ai_impact.net_impact;\n        const finalUR = summary.labor_market_changes.unemployment_rate.final;\n\n        let outlook = 'neutral';\n        let severity = 'moderate';\n\n        if (urChange <= -1 && netJobs > 0) {\n            outlook = 'positive';\n            severity = 'low';\n        } else if (urChange >= 2 || netJobs < -2000000) {\n            outlook = 'negative';\n            severity = 'high';\n        } else if (urChange >= 4 || netJobs < -5000000) {\n            outlook = 'critical';\n            severity = 'critical';\n        }\n\n        return {\n            outlook,\n            severity,\n            timeframe: `${scenario.timeframe.start_year}-${scenario.timeframe.end_year}`,\n            scenarioType: scenario.name,\n            headline: this.generateHeadline(summary, scenario),\n            subheadline: this.generateSubheadline(summary)\n        };\n    }\n\n    /**\n     * Generate headline summary\n     */\n    generateHeadline(summary, scenario) {\n        const netJobs = summary.ai_impact.net_impact;\n        const urChange = summary.labor_market_changes.unemployment_rate.change;\n\n        if (netJobs > 1000000) {\n            return `AI Integration Creates ${(netJobs / 1e6).toFixed(1)}M Net Jobs`;\n        } else if (netJobs < -3000000) {\n            return `Significant Labor Disruption: ${Math.abs(netJobs / 1e6).toFixed(1)}M Net Jobs Lost`;\n        } else if (urChange >= 3) {\n            return `Unemployment Rises ${urChange.toFixed(1)} Points Amid AI Transition`;\n        } else if (urChange <= -1) {\n            return `Labor Market Improves Despite AI Automation`;\n        } else {\n            return `Mixed Results as AI Reshapes Labor Market`;\n        }\n    }\n\n    /**\n     * Generate subheadline\n     */\n    generateSubheadline(summary) {\n        const displaced = summary.ai_impact.cumulative_displacement;\n        const created = summary.ai_impact.cumulative_new_jobs;\n        const finalAdoption = summary.ai_impact.ai_adoption.final;\n\n        return `${(displaced / 1e6).toFixed(1)}M jobs displaced, ${(created / 1e6).toFixed(1)}M created at ${finalAdoption.toFixed(0)}% AI adoption`;\n    }\n\n    /**\n     * Extract key findings\n     */\n    extractKeyFindings(summary, scenario) {\n        const findings = [];\n\n        // Unemployment finding\n        const urChange = summary.labor_market_changes.unemployment_rate.change;\n        const finalUR = summary.labor_market_changes.unemployment_rate.final;\n\n        findings.push({\n            category: 'unemployment',\n            severity: this.getURSeverity(finalUR),\n            finding: `Unemployment ${urChange >= 0 ? 'rises' : 'falls'} to ${finalUR.toFixed(1)}% (${urChange >= 0 ? '+' : ''}${urChange.toFixed(1)} points)`,\n            impact: urChange >= 2 ? 'high' : urChange >= 0.5 ? 'medium' : 'low',\n            icon: urChange >= 0 ? '' : ''\n        });\n\n        // Job displacement finding\n        const displaced = summary.ai_impact.cumulative_displacement;\n        findings.push({\n            category: 'displacement',\n            severity: this.getDisplacementSeverity(displaced),\n            finding: `${(displaced / 1e6).toFixed(2)}M workers displaced by automation`,\n            impact: displaced > 5000000 ? 'high' : displaced > 2000000 ? 'medium' : 'low',\n            icon: ''\n        });\n\n        // Job creation finding\n        const created = summary.ai_impact.cumulative_new_jobs;\n        findings.push({\n            category: 'job_creation',\n            severity: this.getCreationSeverity(created),\n            finding: `${(created / 1e6).toFixed(2)}M new jobs created by AI economy`,\n            impact: created > 3000000 ? 'positive' : created > 1000000 ? 'neutral' : 'negative',\n            icon: ''\n        });\n\n        // Net impact finding\n        const netImpact = summary.ai_impact.net_impact;\n        findings.push({\n            category: 'net_impact',\n            severity: netImpact > 0 ? 'positive' : netImpact < -2000000 ? 'critical' : 'warning',\n            finding: `Net job impact: ${netImpact >= 0 ? '+' : ''}${(netImpact / 1e6).toFixed(2)}M`,\n            impact: netImpact > 0 ? 'positive' : netImpact < -2000000 ? 'high' : 'medium',\n            icon: netImpact >= 0 ? '' : ''\n        });\n\n        // Wage finding\n        const wageChange = summary.wages.average_hourly.change_percent;\n        findings.push({\n            category: 'wages',\n            severity: wageChange > 2 ? 'positive' : wageChange < 0 ? 'warning' : 'neutral',\n            finding: `Average wages ${wageChange >= 0 ? 'increase' : 'decrease'} by ${Math.abs(wageChange).toFixed(1)}%`,\n            impact: wageChange > 2 ? 'positive' : wageChange < -1 ? 'negative' : 'neutral',\n            icon: wageChange >= 0 ? '' : ''\n        });\n\n        // Productivity finding\n        const productivityGrowth = summary.productivity.growth_rate.final;\n        findings.push({\n            category: 'productivity',\n            severity: 'positive',\n            finding: `Productivity growth reaches ${productivityGrowth.toFixed(1)}%`,\n            impact: productivityGrowth > 3 ? 'high' : 'medium',\n            icon: ''\n        });\n\n        return findings;\n    }\n\n    /**\n     * Assess overall risks\n     */\n    assessRisks(summary) {\n        const risks = [];\n\n        // Structural unemployment risk\n        const urFinal = summary.labor_market_changes.unemployment_rate.final;\n        if (urFinal > this.thresholds.unemployment.high) {\n            risks.push({\n                type: 'structural_unemployment',\n                level: urFinal > this.thresholds.unemployment.crisis ? 'critical' : 'high',\n                description: `Unemployment at ${urFinal.toFixed(1)}% indicates structural labor market issues`,\n                mitigation: 'Consider expanded retraining programs and job creation initiatives'\n            });\n        }\n\n        // Skills gap risk\n        const displaced = summary.ai_impact.cumulative_displacement;\n        const created = summary.ai_impact.cumulative_new_jobs;\n        if (displaced > created * 1.5) {\n            risks.push({\n                type: 'skills_gap',\n                level: 'high',\n                description: 'Job displacement significantly outpaces creation, suggesting skills mismatch',\n                mitigation: 'Invest in education and skills training aligned with AI economy needs'\n            });\n        }\n\n        // Wage stagnation risk\n        const wageChange = summary.wages.average_hourly.change_percent;\n        if (wageChange < 0) {\n            risks.push({\n                type: 'wage_decline',\n                level: wageChange < -2 ? 'high' : 'medium',\n                description: `Wage decline of ${Math.abs(wageChange).toFixed(1)}% threatens living standards`,\n                mitigation: 'Consider minimum wage adjustments or wage subsidies'\n            });\n        }\n\n        // Inequality risk\n        if (summary.inequality) {\n            const giniChange = summary.inequality.gini.final - summary.inequality.gini.initial;\n            if (giniChange > 0.02) {\n                risks.push({\n                    type: 'inequality',\n                    level: giniChange > 0.05 ? 'high' : 'medium',\n                    description: 'Income inequality is increasing during AI transition',\n                    mitigation: 'Progressive tax policies and targeted support for affected workers'\n                });\n            }\n        }\n\n        // Rapid displacement risk\n        if (displaced > 5000000) {\n            risks.push({\n                type: 'rapid_displacement',\n                level: 'high',\n                description: `${(displaced / 1e6).toFixed(1)}M workers displaced may overwhelm support systems`,\n                mitigation: 'Phase automation and strengthen unemployment insurance'\n            });\n        }\n\n        // Calculate overall risk score\n        const overallScore = this.calculateOverallRiskScore(summary);\n\n        return {\n            risks,\n            overallScore,\n            overallLevel: overallScore > 70 ? 'critical' : overallScore > 50 ? 'high' : overallScore > 30 ? 'medium' : 'low',\n            riskCount: {\n                critical: risks.filter(r => r.level === 'critical').length,\n                high: risks.filter(r => r.level === 'high').length,\n                medium: risks.filter(r => r.level === 'medium').length\n            }\n        };\n    }\n\n    /**\n     * Calculate overall risk score (0-100)\n     */\n    calculateOverallRiskScore(summary) {\n        let score = 0;\n\n        // Unemployment component (0-30 points)\n        const urFinal = summary.labor_market_changes.unemployment_rate.final;\n        score += Math.min(30, (urFinal / this.thresholds.unemployment.crisis) * 30);\n\n        // Displacement component (0-25 points)\n        const displaced = summary.ai_impact.cumulative_displacement / 1e6;\n        score += Math.min(25, (displaced / this.thresholds.displacement.severe) * 25);\n\n        // Wage change component (0-20 points)\n        const wageChange = summary.wages.average_hourly.change_percent;\n        if (wageChange < 0) {\n            score += Math.min(20, Math.abs(wageChange) * 5);\n        }\n\n        // Net job impact component (0-15 points)\n        const netImpact = summary.ai_impact.net_impact / 1e6;\n        if (netImpact < 0) {\n            score += Math.min(15, Math.abs(netImpact) * 3);\n        }\n\n        // Inequality component (0-10 points)\n        if (summary.inequality) {\n            const giniChange = summary.inequality.gini.final - summary.inequality.gini.initial;\n            score += Math.min(10, giniChange * 100);\n        }\n\n        return Math.min(100, Math.round(score));\n    }\n\n    /**\n     * Analyze trends from time series data\n     */\n    analyzeTrends(results) {\n        if (!results.monthlyData || results.monthlyData.length < 6) {\n            return { available: false };\n        }\n\n        const data = results.monthlyData;\n        const midpoint = Math.floor(data.length / 2);\n\n        // Calculate trend directions\n        const firstHalf = data.slice(0, midpoint);\n        const secondHalf = data.slice(midpoint);\n\n        const getAvg = (arr, key) => arr.reduce((sum, d) => sum + (d[key] || 0), 0) / arr.length;\n\n        const unemploymentTrend = this.calculateTrendDirection(\n            getAvg(firstHalf, 'unemploymentRate'),\n            getAvg(secondHalf, 'unemploymentRate')\n        );\n\n        const displacementTrend = this.calculateTrendDirection(\n            getAvg(firstHalf, 'monthlyDisplacement'),\n            getAvg(secondHalf, 'monthlyDisplacement')\n        );\n\n        // Identify inflection points\n        const inflectionPoints = this.findInflectionPoints(data);\n\n        return {\n            available: true,\n            unemploymentTrend: {\n                direction: unemploymentTrend,\n                description: `Unemployment ${unemploymentTrend} over simulation period`\n            },\n            displacementTrend: {\n                direction: displacementTrend,\n                description: `Displacement rate ${displacementTrend} in later months`\n            },\n            inflectionPoints,\n            peakDisplacement: this.findPeakMonth(data, 'monthlyDisplacement'),\n            steadyStateReached: this.checkSteadyState(data)\n        };\n    }\n\n    /**\n     * Calculate trend direction\n     */\n    calculateTrendDirection(early, late) {\n        const diff = ((late - early) / early) * 100;\n        if (diff > 10) return 'increasing';\n        if (diff < -10) return 'decreasing';\n        return 'stable';\n    }\n\n    /**\n     * Find inflection points in time series\n     */\n    findInflectionPoints(data) {\n        const points = [];\n\n        for (let i = 2; i < data.length - 2; i++) {\n            const prevSlope = data[i].unemploymentRate - data[i-2].unemploymentRate;\n            const nextSlope = data[i+2].unemploymentRate - data[i].unemploymentRate;\n\n            if (prevSlope > 0 && nextSlope < 0) {\n                points.push({ month: i, type: 'peak', value: data[i].unemploymentRate });\n            } else if (prevSlope < 0 && nextSlope > 0) {\n                points.push({ month: i, type: 'trough', value: data[i].unemploymentRate });\n            }\n        }\n\n        return points;\n    }\n\n    /**\n     * Find peak month for a metric\n     */\n    findPeakMonth(data, key) {\n        let maxVal = 0;\n        let maxMonth = 0;\n\n        data.forEach((d, i) => {\n            if (d[key] > maxVal) {\n                maxVal = d[key];\n                maxMonth = i;\n            }\n        });\n\n        return { month: maxMonth, value: maxVal };\n    }\n\n    /**\n     * Check if steady state has been reached\n     */\n    checkSteadyState(data) {\n        if (data.length < 6) return false;\n\n        const last6 = data.slice(-6);\n        const urValues = last6.map(d => d.unemploymentRate);\n        const variance = this.calculateVariance(urValues);\n\n        return variance < 0.5;\n    }\n\n    /**\n     * Calculate variance\n     */\n    calculateVariance(values) {\n        const mean = values.reduce((a, b) => a + b, 0) / values.length;\n        return values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length;\n    }\n\n    /**\n     * Analyze sector-specific impacts\n     */\n    analyzeSectors(summary) {\n        if (!summary.sectorImpacts) {\n            return { available: false };\n        }\n\n        const sectors = Object.entries(summary.sectorImpacts);\n\n        // Sort by displacement\n        const byDisplacement = sectors\n            .sort((a, b) => (b[1].displaced || 0) - (a[1].displaced || 0))\n            .slice(0, 5);\n\n        // Sort by job creation\n        const byCreation = sectors\n            .filter(([_, data]) => data.created > 0)\n            .sort((a, b) => (b[1].created || 0) - (a[1].created || 0))\n            .slice(0, 5);\n\n        return {\n            available: true,\n            mostAffected: byDisplacement.map(([name, data]) => ({\n                name,\n                displaced: data.displaced,\n                percentAffected: ((data.displaced / data.employment) * 100).toFixed(1)\n            })),\n            mostGrowth: byCreation.map(([name, data]) => ({\n                name,\n                created: data.created,\n                growthPercent: ((data.created / data.employment) * 100).toFixed(1)\n            })),\n            totalSectorsAffected: sectors.filter(([_, d]) => d.displaced > 0).length\n        };\n    }\n\n    /**\n     * Generate policy recommendations\n     */\n    generateRecommendations(summary, scenario) {\n        const recommendations = [];\n        const urFinal = summary.labor_market_changes.unemployment_rate.final;\n        const displaced = summary.ai_impact.cumulative_displacement;\n        const netImpact = summary.ai_impact.net_impact;\n        const wageChange = summary.wages.average_hourly.change_percent;\n\n        // High priority recommendations\n        if (urFinal > this.thresholds.unemployment.high) {\n            recommendations.push({\n                priority: 'high',\n                category: 'employment',\n                title: 'Expand Active Labor Market Policies',\n                description: 'High unemployment requires immediate intervention through job training, placement services, and employment subsidies.',\n                expectedImpact: 'Could reduce unemployment by 1-2 percentage points within 12 months'\n            });\n        }\n\n        if (displaced > 3000000) {\n            recommendations.push({\n                priority: 'high',\n                category: 'transition_support',\n                title: 'Strengthen Transition Assistance',\n                description: 'Large-scale displacement requires enhanced unemployment insurance, portable benefits, and career counseling.',\n                expectedImpact: 'Helps displaced workers maintain income while transitioning to new opportunities'\n            });\n        }\n\n        if (netImpact < -2000000) {\n            recommendations.push({\n                priority: 'high',\n                category: 'job_creation',\n                title: 'Invest in New Job Creation',\n                description: 'Net job losses require public investment in infrastructure, green economy, and care sectors.',\n                expectedImpact: 'Could create 1-3M jobs through targeted public investment'\n            });\n        }\n\n        // Medium priority recommendations\n        if (wageChange < 1) {\n            recommendations.push({\n                priority: 'medium',\n                category: 'wages',\n                title: 'Address Wage Pressures',\n                description: 'Stagnant wages may require minimum wage adjustments, profit-sharing incentives, or EITC expansion.',\n                expectedImpact: 'Supports living standards and maintains consumer demand'\n            });\n        }\n\n        recommendations.push({\n            priority: 'medium',\n            category: 'education',\n            title: 'Align Education with AI Economy',\n            description: 'Update curricula to emphasize complementary skills: creativity, emotional intelligence, and AI literacy.',\n            expectedImpact: 'Prepares future workforce for AI-augmented roles'\n        });\n\n        // Standard recommendations\n        recommendations.push({\n            priority: 'standard',\n            category: 'monitoring',\n            title: 'Establish Early Warning Systems',\n            description: 'Create monitoring systems to identify at-risk occupations and regions before displacement occurs.',\n            expectedImpact: 'Enables proactive rather than reactive policy responses'\n        });\n\n        // Sort by priority\n        const priorityOrder = { high: 0, medium: 1, standard: 2 };\n        recommendations.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);\n\n        return recommendations;\n    }\n\n    /**\n     * Generate comparative benchmarks\n     */\n    generateBenchmarks(summary) {\n        const urFinal = summary.labor_market_changes.unemployment_rate.final;\n        const displaced = summary.ai_impact.cumulative_displacement;\n\n        return {\n            unemploymentBenchmarks: [\n                { label: 'Your Scenario', value: urFinal, current: true },\n                { label: 'Historical Average (2010-2019)', value: 5.8 },\n                { label: 'Great Recession Peak', value: 10.0 },\n                { label: 'Full Employment Target', value: 4.0 }\n            ],\n            displacementBenchmarks: [\n                { label: 'Your Scenario', value: (displaced / 1e6).toFixed(1) + 'M', current: true },\n                { label: 'Manufacturing Decline (1980-2010)', value: '7M' },\n                { label: 'Great Recession Job Loss', value: '8.7M' },\n                { label: 'Monthly Normal Turnover', value: '5M/month' }\n            ],\n            context: this.generateBenchmarkContext(summary)\n        };\n    }\n\n    /**\n     * Generate benchmark context\n     */\n    generateBenchmarkContext(summary) {\n        const urFinal = summary.labor_market_changes.unemployment_rate.final;\n        const displaced = summary.ai_impact.cumulative_displacement;\n\n        if (urFinal > 10) {\n            return 'Results indicate potential crisis exceeding Great Recession levels';\n        } else if (urFinal > 7) {\n            return 'Unemployment would reach concerning levels requiring significant intervention';\n        } else if (displaced > 7000000) {\n            return 'Displacement scale comparable to decades-long manufacturing transition';\n        } else {\n            return 'Results within range of manageable labor market adjustments';\n        }\n    }\n\n    /**\n     * Generate narrative summary\n     */\n    generateNarrativeSummary(summary, scenario) {\n        const parts = [];\n\n        // Opening\n        const netImpact = summary.ai_impact.net_impact;\n        const urChange = summary.labor_market_changes.unemployment_rate.change;\n\n        if (netImpact > 0) {\n            parts.push(`This ${scenario.name} scenario projects a net positive labor market outcome, with AI technology creating more jobs than it displaces over the ${scenario.timeframe.end_year - scenario.timeframe.start_year}-year period.`);\n        } else {\n            parts.push(`This ${scenario.name} scenario projects significant labor market disruption, with AI automation displacing more workers than new opportunities created.`);\n        }\n\n        // Key numbers\n        parts.push(`The simulation shows ${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(1)} million jobs displaced by automation, while ${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(1)} million new positions emerge in the AI-augmented economy.`);\n\n        // Unemployment trajectory\n        if (urChange > 2) {\n            parts.push(`Unemployment rises from ${summary.labor_market_changes.unemployment_rate.initial}% to ${summary.labor_market_changes.unemployment_rate.final}%, indicating that job creation fails to keep pace with displacement.`);\n        } else if (urChange < -1) {\n            parts.push(`Unemployment actually decreases from ${summary.labor_market_changes.unemployment_rate.initial}% to ${summary.labor_market_changes.unemployment_rate.final}%, suggesting successful adaptation to the AI economy.`);\n        } else {\n            parts.push(`Unemployment remains relatively stable at ${summary.labor_market_changes.unemployment_rate.final}%, suggesting the labor market absorbs changes without major disruption.`);\n        }\n\n        // Wages\n        const wageChange = summary.wages.average_hourly.change_percent;\n        if (wageChange > 2) {\n            parts.push(`Wages grow by ${wageChange.toFixed(1)}%, indicating workers benefit from productivity gains.`);\n        } else if (wageChange < 0) {\n            parts.push(`Average wages decline by ${Math.abs(wageChange).toFixed(1)}%, suggesting increased competition for available positions.`);\n        }\n\n        // Conclusion\n        if (netImpact < -2000000 || urChange > 3) {\n            parts.push(`These results suggest policymakers should prepare robust transition support programs and consider regulatory measures to manage the pace of automation.`);\n        } else {\n            parts.push(`While transition challenges remain, these results suggest manageable adjustment with appropriate policy support.`);\n        }\n\n        return parts.join(' ');\n    }\n\n    /**\n     * Extract structured data points for UI display\n     */\n    extractDataPoints(summary) {\n        return {\n            primary: [\n                {\n                    label: 'Final Unemployment Rate',\n                    value: summary.labor_market_changes.unemployment_rate.final.toFixed(1),\n                    unit: '%',\n                    change: summary.labor_market_changes.unemployment_rate.change.toFixed(1),\n                    changeDirection: summary.labor_market_changes.unemployment_rate.change >= 0 ? 'up' : 'down',\n                    status: this.getURStatus(summary.labor_market_changes.unemployment_rate.final)\n                },\n                {\n                    label: 'Jobs Displaced',\n                    value: (summary.ai_impact.cumulative_displacement / 1e6).toFixed(2),\n                    unit: 'M',\n                    status: summary.ai_impact.cumulative_displacement > 3000000 ? 'warning' : 'neutral'\n                },\n                {\n                    label: 'Jobs Created',\n                    value: (summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(2),\n                    unit: 'M',\n                    status: 'positive'\n                },\n                {\n                    label: 'Net Impact',\n                    value: (summary.ai_impact.net_impact / 1e6).toFixed(2),\n                    unit: 'M',\n                    status: summary.ai_impact.net_impact >= 0 ? 'positive' : 'warning'\n                }\n            ],\n            secondary: [\n                {\n                    label: 'AI Adoption Rate',\n                    value: summary.ai_impact.ai_adoption.final.toFixed(0),\n                    unit: '%'\n                },\n                {\n                    label: 'Wage Change',\n                    value: summary.wages.average_hourly.change_percent.toFixed(1),\n                    unit: '%'\n                },\n                {\n                    label: 'Productivity Growth',\n                    value: summary.productivity.growth_rate.final.toFixed(1),\n                    unit: '%'\n                }\n            ]\n        };\n    }\n\n    /**\n     * Helper: Get unemployment rate severity\n     */\n    getURSeverity(rate) {\n        if (rate >= this.thresholds.unemployment.crisis) return 'critical';\n        if (rate >= this.thresholds.unemployment.high) return 'high';\n        if (rate >= this.thresholds.unemployment.moderate) return 'moderate';\n        return 'low';\n    }\n\n    /**\n     * Helper: Get unemployment rate status\n     */\n    getURStatus(rate) {\n        if (rate >= this.thresholds.unemployment.crisis) return 'danger';\n        if (rate >= this.thresholds.unemployment.high) return 'warning';\n        return 'neutral';\n    }\n\n    /**\n     * Helper: Get displacement severity\n     */\n    getDisplacementSeverity(displaced) {\n        const millions = displaced / 1e6;\n        if (millions >= this.thresholds.displacement.severe) return 'critical';\n        if (millions >= this.thresholds.displacement.significant) return 'high';\n        if (millions >= this.thresholds.displacement.moderate) return 'moderate';\n        return 'low';\n    }\n\n    /**\n     * Helper: Get creation severity\n     */\n    getCreationSeverity(created) {\n        const millions = created / 1e6;\n        if (millions >= this.thresholds.jobCreation.strong) return 'positive';\n        if (millions >= this.thresholds.jobCreation.moderate) return 'neutral';\n        return 'low';\n    }\n\n    /**\n     * Quick interpretation for display\n     */\n    getQuickInterpretation(results) {\n        const summary = results.summary;\n        const netImpact = summary.ai_impact.net_impact;\n        const urChange = summary.labor_market_changes.unemployment_rate.change;\n\n        const bullets = [];\n\n        // Net impact bullet\n        if (netImpact > 1000000) {\n            bullets.push({ icon: '', text: `Net positive: ${(netImpact / 1e6).toFixed(1)}M more jobs created than displaced` });\n        } else if (netImpact < -2000000) {\n            bullets.push({ icon: '', text: `Significant disruption: ${Math.abs(netImpact / 1e6).toFixed(1)}M net job losses` });\n        } else {\n            bullets.push({ icon: '', text: `Balanced transition: modest net job changes` });\n        }\n\n        // Unemployment bullet\n        if (urChange > 2) {\n            bullets.push({ icon: '', text: `Unemployment rises ${urChange.toFixed(1)} points - requires intervention` });\n        } else if (urChange < -1) {\n            bullets.push({ icon: '', text: `Unemployment falls ${Math.abs(urChange).toFixed(1)} points - positive trajectory` });\n        } else {\n            bullets.push({ icon: '', text: `Unemployment stable - labor market absorbs changes` });\n        }\n\n        // Wage bullet\n        const wageChange = summary.wages.average_hourly.change_percent;\n        if (wageChange > 2) {\n            bullets.push({ icon: '', text: `Wages grow ${wageChange.toFixed(1)}% - workers share in gains` });\n        } else if (wageChange < -1) {\n            bullets.push({ icon: '', text: `Wages decline ${Math.abs(wageChange).toFixed(1)}% - competitive pressure` });\n        }\n\n        // Productivity bullet\n        const productivity = summary.productivity.growth_rate.final;\n        bullets.push({ icon: '', text: `Productivity reaches ${productivity.toFixed(1)}% growth rate` });\n\n        return bullets;\n    }\n}\n\n// Global instance\nconst resultsInterpreter = new ResultsInterpreter();\n\n// Export for ES modules\nexport { ResultsInterpreter, resultsInterpreter };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.ResultsInterpreter = ResultsInterpreter;\n    window.resultsInterpreter = resultsInterpreter;\n}\n","/**\n * Simulation History Service\n * Tracks and manages past simulation runs in localStorage\n */\n\nclass SimulationHistoryService {\n    constructor() {\n        this.storageKey = 'simulation_history';\n        this.maxHistory = 20; // Keep last 20 simulations\n    }\n\n    /**\n     * Get all saved simulations\n     * @returns {Array} List of saved simulations\n     */\n    getAll() {\n        try {\n            const data = localStorage.getItem(this.storageKey);\n            return data ? JSON.parse(data) : [];\n        } catch (e) {\n            console.error('Error reading simulation history:', e);\n            return [];\n        }\n    }\n\n    /**\n     * Save a simulation to history\n     * @param {Object} simulation - The simulation to save\n     */\n    save(simulation) {\n        if (!simulation || !simulation.scenario || !simulation.results) {\n            return;\n        }\n\n        const history = this.getAll();\n\n        // Create a summary for the history entry\n        const entry = {\n            id: Date.now(),\n            timestamp: new Date().toISOString(),\n            name: simulation.scenario.name || 'Unnamed Scenario',\n            summary: {\n                timeframe: `${simulation.scenario.timeframe.start_year}-${simulation.scenario.timeframe.end_year}`,\n                targetUnemployment: simulation.scenario.targets.unemployment_rate,\n                aiAdoption: simulation.scenario.targets.ai_adoption_rate,\n                adoptionCurve: simulation.scenario.ai_parameters.adoption_curve,\n                interventions: simulation.scenario.interventions?.length || 0,\n                finalUnemployment: simulation.summary?.labor_market_changes?.unemployment?.final,\n                jobsDisplaced: simulation.summary?.labor_market_changes?.cumulative_displacement,\n                jobsCreated: simulation.summary?.labor_market_changes?.cumulative_new_jobs\n            },\n            // Store full data for loading\n            scenario: simulation.scenario,\n            results: simulation.results,\n            summaryData: simulation.summary\n        };\n\n        // Add to front\n        history.unshift(entry);\n\n        // Trim to max\n        const trimmed = history.slice(0, this.maxHistory);\n\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(trimmed));\n        } catch (e) {\n            console.error('Error saving simulation history:', e);\n            // If storage is full, try removing oldest entries\n            if (e.name === 'QuotaExceededError') {\n                const smaller = trimmed.slice(0, Math.floor(this.maxHistory / 2));\n                localStorage.setItem(this.storageKey, JSON.stringify(smaller));\n            }\n        }\n\n        return entry;\n    }\n\n    /**\n     * Get a specific simulation by ID\n     * @param {number} id - The simulation ID\n     * @returns {Object|null} The simulation or null if not found\n     */\n    get(id) {\n        const history = this.getAll();\n        return history.find(h => h.id === id) || null;\n    }\n\n    /**\n     * Delete a simulation from history\n     * @param {number} id - The simulation ID to delete\n     */\n    delete(id) {\n        const history = this.getAll();\n        const filtered = history.filter(h => h.id !== id);\n        localStorage.setItem(this.storageKey, JSON.stringify(filtered));\n    }\n\n    /**\n     * Clear all history\n     */\n    clearAll() {\n        localStorage.removeItem(this.storageKey);\n    }\n\n    /**\n     * Get history count\n     * @returns {number}\n     */\n    getCount() {\n        return this.getAll().length;\n    }\n\n    /**\n     * Format timestamp for display\n     * @param {string} timestamp - ISO timestamp\n     * @returns {string} Formatted date/time\n     */\n    formatTimestamp(timestamp) {\n        const date = new Date(timestamp);\n        const now = new Date();\n        const diff = now - date;\n\n        // Less than 1 hour ago\n        if (diff < 3600000) {\n            const mins = Math.floor(diff / 60000);\n            return mins <= 1 ? 'Just now' : `${mins} minutes ago`;\n        }\n\n        // Less than 24 hours ago\n        if (diff < 86400000) {\n            const hours = Math.floor(diff / 3600000);\n            return hours === 1 ? '1 hour ago' : `${hours} hours ago`;\n        }\n\n        // Less than 7 days ago\n        if (diff < 604800000) {\n            const days = Math.floor(diff / 86400000);\n            return days === 1 ? 'Yesterday' : `${days} days ago`;\n        }\n\n        // Otherwise show date\n        return date.toLocaleDateString();\n    }\n\n    /**\n     * Format number for display\n     * @param {number} n - Number to format\n     * @returns {string}\n     */\n    formatNumber(n) {\n        if (n === undefined || n === null) return 'N/A';\n        if (Math.abs(n) >= 1000000) return (n / 1000000).toFixed(1) + 'M';\n        if (Math.abs(n) >= 1000) return (n / 1000).toFixed(1) + 'K';\n        return n.toFixed(1);\n    }\n}\n\n// Global instance\nconst simulationHistory = new SimulationHistoryService();\n\n// Export for ES modules\nexport { SimulationHistoryService, simulationHistory };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.SimulationHistoryService = SimulationHistoryService;\n    window.simulationHistory = simulationHistory;\n}\n","/**\n * Simulation Sharing Service\n * Handles saving, loading, and sharing simulations publicly\n */\n\nclass SimulationSharingService {\n    constructor() {\n        // Use the same Cloudflare Worker endpoint\n        this.endpoint = 'https://gemini-proxy.adamconner7.workers.dev';\n    }\n\n    /**\n     * Save a simulation publicly\n     * @param {Object} simulation - The simulation to save\n     * @returns {Promise<Object>} - Save result with share URL\n     */\n    async savePublic(simulation) {\n        if (!simulation.results || !simulation.scenario) {\n            throw new Error('Invalid simulation: missing results or scenario');\n        }\n\n        const response = await fetch(`${this.endpoint}/simulations`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                name: simulation.name || simulation.scenario.name || 'Untitled Simulation',\n                description: simulation.description || '',\n                scenario: simulation.scenario,\n                results: simulation.results,\n                summary: simulation.summary || null\n            })\n        });\n\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to save simulation');\n        }\n\n        return await response.json();\n    }\n\n    /**\n     * Load a simulation by ID\n     * @param {string} id - The simulation ID\n     * @returns {Promise<Object>} - The loaded simulation\n     */\n    async load(id) {\n        const response = await fetch(`${this.endpoint}/simulations/${id}`);\n\n        if (!response.ok) {\n            if (response.status === 404) {\n                throw new Error('Simulation not found. It may have expired or been deleted.');\n            }\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to load simulation');\n        }\n\n        return await response.json();\n    }\n\n    /**\n     * List recent public simulations\n     * @param {number} limit - Max number to return (default 20)\n     * @returns {Promise<Object>} - List of simulations\n     */\n    async listRecent(limit = 20) {\n        const response = await fetch(`${this.endpoint}/simulations?limit=${limit}`);\n\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error || 'Failed to list simulations');\n        }\n\n        return await response.json();\n    }\n\n    /**\n     * Check if sharing is available\n     * @returns {boolean}\n     */\n    isAvailable() {\n        return this.endpoint && this.endpoint.length > 0;\n    }\n\n    /**\n     * Generate share URL for a simulation\n     * @param {string} id - The simulation ID\n     * @returns {string} - The share URL\n     */\n    getShareUrl(id) {\n        const baseUrl = window.location.origin + window.location.pathname;\n        return `${baseUrl}?sim=${id}`;\n    }\n\n    /**\n     * Check URL for shared simulation ID\n     * @returns {string|null} - The simulation ID if present\n     */\n    getSharedIdFromUrl() {\n        const params = new URLSearchParams(window.location.search);\n        return params.get('sim');\n    }\n\n    /**\n     * Copy share URL to clipboard\n     * @param {string} id - The simulation ID\n     * @returns {Promise<boolean>} - Success status\n     */\n    async copyShareUrl(id) {\n        const url = this.getShareUrl(id);\n        try {\n            await navigator.clipboard.writeText(url);\n            return true;\n        } catch {\n            // Fallback for older browsers\n            const textArea = document.createElement('textarea');\n            textArea.value = url;\n            document.body.appendChild(textArea);\n            textArea.select();\n            document.execCommand('copy');\n            document.body.removeChild(textArea);\n            return true;\n        }\n    }\n}\n\n// Global instance\nconst simulationSharing = new SimulationSharingService();\n\n// Export for ES modules\nexport { SimulationSharingService, simulationSharing };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.SimulationSharingService = SimulationSharingService;\n    window.simulationSharing = simulationSharing;\n}\n","/**\n * Scenario Comparison Module\n * Allows users to compare 2-3 scenarios side-by-side\n */\n\nclass ScenarioComparison {\n    constructor() {\n        this.scenarios = [];\n        this.maxScenarios = 3;\n        this.colors = [\n            { primary: '#3b82f6', light: 'rgba(59, 130, 246, 0.1)' },  // Blue\n            { primary: '#10b981', light: 'rgba(16, 185, 129, 0.1)' },  // Green\n            { primary: '#f59e0b', light: 'rgba(245, 158, 11, 0.1)' }   // Orange\n        ];\n    }\n\n    /**\n     * Add a scenario to comparison\n     */\n    addScenario(name, config, results) {\n        if (this.scenarios.length >= this.maxScenarios) {\n            return { success: false, message: `Maximum ${this.maxScenarios} scenarios allowed for comparison.` };\n        }\n\n        // Check for duplicate names\n        if (this.scenarios.some(s => s.name === name)) {\n            return { success: false, message: 'A scenario with this name already exists in comparison.' };\n        }\n\n        const scenario = {\n            id: `scenario_${Date.now()}`,\n            name,\n            config,\n            results,\n            color: this.colors[this.scenarios.length],\n            addedAt: new Date().toISOString()\n        };\n\n        this.scenarios.push(scenario);\n        return { success: true, scenario };\n    }\n\n    /**\n     * Remove a scenario from comparison\n     */\n    removeScenario(id) {\n        const index = this.scenarios.findIndex(s => s.id === id);\n        if (index > -1) {\n            this.scenarios.splice(index, 1);\n            // Reassign colors\n            this.scenarios.forEach((s, i) => {\n                s.color = this.colors[i];\n            });\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Clear all scenarios\n     */\n    clearAll() {\n        this.scenarios = [];\n    }\n\n    /**\n     * Get comparison data\n     */\n    getComparisonData() {\n        if (this.scenarios.length < 2) {\n            return null;\n        }\n\n        return {\n            scenarios: this.scenarios,\n            metrics: this.extractComparisonMetrics(),\n            charts: this.prepareChartData()\n        };\n    }\n\n    /**\n     * Extract key metrics for comparison table\n     */\n    extractComparisonMetrics() {\n        return this.scenarios.map(s => {\n            const summary = s.results.summary;\n            const lastResult = s.results.results[s.results.results.length - 1];\n\n            return {\n                id: s.id,\n                name: s.name,\n                color: s.color,\n                metrics: {\n                    // Configuration\n                    targetYear: s.config.targetYear,\n                    targetUR: s.config.targetUR,\n                    aiAdoption: s.config.aiAdoption,\n                    automationPace: s.config.automationPace,\n                    interventions: s.config.interventions?.length || 0,\n\n                    // Results\n                    finalUnemployment: summary.labor_market_changes.unemployment_rate.final,\n                    unemploymentChange: summary.labor_market_changes.unemployment_rate.change,\n                    jobsDisplaced: summary.ai_impact.jobs_displaced,\n                    jobsCreated: summary.ai_impact.jobs_created,\n                    netJobImpact: summary.ai_impact.net_impact,\n                    finalProductivity: summary.economic_indicators.productivity_growth.final,\n                    finalWageGrowth: summary.economic_indicators.wage_growth.final,\n                    finalLaborShare: summary.economic_indicators.labor_share.final,\n                    finalAIAdoption: summary.ai_impact.ai_adoption.final\n                }\n            };\n        });\n    }\n\n    /**\n     * Prepare data for comparison charts\n     */\n    prepareChartData() {\n        const years = this.scenarios[0]?.results.results.map(r => r.year) || [];\n\n        return {\n            unemployment: {\n                labels: years,\n                datasets: this.scenarios.map(s => ({\n                    label: s.name,\n                    data: s.results.results.map(r => r.unemployment_rate),\n                    borderColor: s.color.primary,\n                    backgroundColor: s.color.light,\n                    tension: 0.3,\n                    fill: false\n                }))\n            },\n            employment: {\n                labels: years,\n                datasets: this.scenarios.map(s => ({\n                    label: s.name,\n                    data: s.results.results.map(r => r.employment / 1e6),\n                    borderColor: s.color.primary,\n                    backgroundColor: s.color.light,\n                    tension: 0.3,\n                    fill: false\n                }))\n            },\n            aiAdoption: {\n                labels: years,\n                datasets: this.scenarios.map(s => ({\n                    label: s.name,\n                    data: s.results.results.map(r => r.ai_adoption),\n                    borderColor: s.color.primary,\n                    backgroundColor: s.color.light,\n                    tension: 0.3,\n                    fill: false\n                }))\n            },\n            productivity: {\n                labels: years,\n                datasets: this.scenarios.map(s => ({\n                    label: s.name,\n                    data: s.results.results.map(r => r.productivity_growth),\n                    borderColor: s.color.primary,\n                    backgroundColor: s.color.light,\n                    tension: 0.3,\n                    fill: false\n                }))\n            }\n        };\n    }\n\n    /**\n     * Generate comparison HTML\n     */\n    generateComparisonHTML() {\n        if (this.scenarios.length < 2) {\n            return `\n                <div style=\"text-align: center; padding: 40px; color: var(--gray-500);\">\n                    <h3 style=\"margin-bottom: 16px;\">Add Scenarios to Compare</h3>\n                    <p>Run simulations and click \"Add to Comparison\" to compare up to ${this.maxScenarios} scenarios side-by-side.</p>\n                    <p style=\"margin-top: 12px; font-size: 0.875rem;\">Current scenarios: ${this.scenarios.length}/${this.maxScenarios}</p>\n                </div>\n            `;\n        }\n\n        const metrics = this.extractComparisonMetrics();\n\n        return `\n            <div class=\"comparison-container\">\n                <!-- Scenario Cards -->\n                <div style=\"display: grid; grid-template-columns: repeat(${this.scenarios.length}, 1fr); gap: 16px; margin-bottom: 24px;\">\n                    ${metrics.map(m => `\n                        <div class=\"card\" style=\"border-top: 4px solid ${m.color.primary};\">\n                            <div style=\"display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;\">\n                                <div>\n                                    <h3 style=\"color: ${m.color.primary}; margin-bottom: 4px;\">${m.name}</h3>\n                                    <span style=\"font-size: 0.75rem; color: var(--gray-500);\">Target: ${m.metrics.targetYear}</span>\n                                </div>\n                                <button class=\"btn btn-sm btn-outline\" onclick=\"scenarioComparison.removeScenario('${m.id}'); renderComparisonView();\" style=\"font-size: 0.7rem;\">\n                                    Remove\n                                </button>\n                            </div>\n                            <div class=\"comparison-metrics\">\n                                <div class=\"metric-row\">\n                                    <span class=\"metric-label\">Final Unemployment</span>\n                                    <span class=\"metric-value\" style=\"color: ${m.metrics.finalUnemployment > 6 ? 'var(--danger)' : 'var(--secondary)'}\">\n                                        ${m.metrics.finalUnemployment.toFixed(1)}%\n                                    </span>\n                                </div>\n                                <div class=\"metric-row\">\n                                    <span class=\"metric-label\">Jobs Displaced</span>\n                                    <span class=\"metric-value\">${(m.metrics.jobsDisplaced / 1e6).toFixed(1)}M</span>\n                                </div>\n                                <div class=\"metric-row\">\n                                    <span class=\"metric-label\">Jobs Created</span>\n                                    <span class=\"metric-value\">${(m.metrics.jobsCreated / 1e6).toFixed(1)}M</span>\n                                </div>\n                                <div class=\"metric-row\">\n                                    <span class=\"metric-label\">Net Impact</span>\n                                    <span class=\"metric-value\" style=\"color: ${m.metrics.netJobImpact < 0 ? 'var(--danger)' : 'var(--secondary)'}\">\n                                        ${m.metrics.netJobImpact > 0 ? '+' : ''}${(m.metrics.netJobImpact / 1e6).toFixed(1)}M\n                                    </span>\n                                </div>\n                                <div class=\"metric-row\">\n                                    <span class=\"metric-label\">Interventions</span>\n                                    <span class=\"metric-value\">${m.metrics.interventions}</span>\n                                </div>\n                            </div>\n                        </div>\n                    `).join('')}\n                </div>\n\n                <!-- Comparison Table -->\n                <div class=\"card\" style=\"margin-bottom: 24px;\">\n                    <div class=\"card-header\">\n                        <h3>Detailed Comparison</h3>\n                    </div>\n                    <table class=\"data-table comparison-table\">\n                        <thead>\n                            <tr>\n                                <th>Metric</th>\n                                ${metrics.map(m => `<th style=\"color: ${m.color.primary};\">${m.name}</th>`).join('')}\n                                <th>Difference</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${this.generateComparisonRows(metrics)}\n                        </tbody>\n                    </table>\n                </div>\n\n                <!-- Comparison Charts -->\n                <div class=\"card-grid\" style=\"margin-bottom: 24px;\">\n                    <div class=\"card\">\n                        <div class=\"card-header\"><h3>Unemployment Rate Comparison</h3></div>\n                        <div class=\"chart-container\">\n                            <canvas id=\"comparisonURChart\"></canvas>\n                        </div>\n                    </div>\n                    <div class=\"card\">\n                        <div class=\"card-header\"><h3>Employment Comparison</h3></div>\n                        <div class=\"chart-container\">\n                            <canvas id=\"comparisonEmpChart\"></canvas>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"card-grid\">\n                    <div class=\"card\">\n                        <div class=\"card-header\"><h3>AI Adoption Comparison</h3></div>\n                        <div class=\"chart-container\">\n                            <canvas id=\"comparisonAIChart\"></canvas>\n                        </div>\n                    </div>\n                    <div class=\"card\">\n                        <div class=\"card-header\"><h3>Productivity Growth Comparison</h3></div>\n                        <div class=\"chart-container\">\n                            <canvas id=\"comparisonProdChart\"></canvas>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Generate comparison table rows\n     */\n    generateComparisonRows(metrics) {\n        const rows = [\n            { label: 'Target Year', key: 'targetYear', format: v => v },\n            { label: 'Target Unemployment', key: 'targetUR', format: v => `${v}%` },\n            { label: 'AI Adoption Target', key: 'aiAdoption', format: v => `${v}%` },\n            { label: 'Automation Pace', key: 'automationPace', format: v => v.charAt(0).toUpperCase() + v.slice(1) },\n            { label: 'Final Unemployment', key: 'finalUnemployment', format: v => `${v.toFixed(1)}%`, highlight: true },\n            { label: 'Unemployment Change', key: 'unemploymentChange', format: v => `${v > 0 ? '+' : ''}${v.toFixed(1)}%` },\n            { label: 'Jobs Displaced', key: 'jobsDisplaced', format: v => `${(v / 1e6).toFixed(2)}M` },\n            { label: 'Jobs Created', key: 'jobsCreated', format: v => `${(v / 1e6).toFixed(2)}M` },\n            { label: 'Net Job Impact', key: 'netJobImpact', format: v => `${v > 0 ? '+' : ''}${(v / 1e6).toFixed(2)}M`, highlight: true },\n            { label: 'Final AI Adoption', key: 'finalAIAdoption', format: v => `${v.toFixed(1)}%` },\n            { label: 'Final Productivity Growth', key: 'finalProductivity', format: v => `${v.toFixed(1)}%` },\n            { label: 'Final Wage Growth', key: 'finalWageGrowth', format: v => `${v.toFixed(1)}%` },\n            { label: 'Final Labor Share', key: 'finalLaborShare', format: v => `${v.toFixed(1)}%` }\n        ];\n\n        return rows.map(row => {\n            const values = metrics.map(m => m.metrics[row.key]);\n            const min = Math.min(...values.filter(v => typeof v === 'number'));\n            const max = Math.max(...values.filter(v => typeof v === 'number'));\n            const diff = max - min;\n\n            return `\n                <tr ${row.highlight ? 'style=\"background: var(--gray-50); font-weight: 600;\"' : ''}>\n                    <td>${row.label}</td>\n                    ${metrics.map((m, i) => {\n                        const val = m.metrics[row.key];\n                        const isMin = val === min && typeof val === 'number';\n                        const isMax = val === max && typeof val === 'number';\n                        return `<td style=\"${isMin ? 'color: var(--secondary);' : ''} ${isMax && row.key.includes('Displaced') ? 'color: var(--danger);' : ''}\">${row.format(val)}</td>`;\n                    }).join('')}\n                    <td style=\"color: var(--gray-500);\">\n                        ${typeof values[0] === 'number' ? (row.key.includes('job') ? `${(diff / 1e6).toFixed(2)}M` : `${diff.toFixed(1)}${row.key.includes('Rate') || row.key.includes('Unemployment') || row.key.includes('Adoption') || row.key.includes('Growth') || row.key.includes('Share') ? '%' : ''}`) : '-'}\n                    </td>\n                </tr>\n            `;\n        }).join('');\n    }\n\n    /**\n     * Render comparison charts\n     */\n    renderCharts() {\n        if (this.scenarios.length < 2) return;\n\n        const chartData = this.prepareChartData();\n        const chartOptions = {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                legend: {\n                    position: 'top'\n                }\n            },\n            scales: {\n                y: {\n                    beginAtZero: false\n                }\n            }\n        };\n\n        // Destroy existing charts\n        ['comparisonURChart', 'comparisonEmpChart', 'comparisonAIChart', 'comparisonProdChart'].forEach(id => {\n            const canvas = document.getElementById(id);\n            if (canvas) {\n                const existingChart = Chart.getChart(canvas);\n                if (existingChart) existingChart.destroy();\n            }\n        });\n\n        // Create new charts\n        setTimeout(() => {\n            new Chart(document.getElementById('comparisonURChart'), {\n                type: 'line',\n                data: chartData.unemployment,\n                options: { ...chartOptions, scales: { y: { title: { display: true, text: 'Unemployment Rate (%)' } } } }\n            });\n\n            new Chart(document.getElementById('comparisonEmpChart'), {\n                type: 'line',\n                data: chartData.employment,\n                options: { ...chartOptions, scales: { y: { title: { display: true, text: 'Employment (Millions)' } } } }\n            });\n\n            new Chart(document.getElementById('comparisonAIChart'), {\n                type: 'line',\n                data: chartData.aiAdoption,\n                options: { ...chartOptions, scales: { y: { title: { display: true, text: 'AI Adoption (%)' } } } }\n            });\n\n            new Chart(document.getElementById('comparisonProdChart'), {\n                type: 'line',\n                data: chartData.productivity,\n                options: { ...chartOptions, scales: { y: { title: { display: true, text: 'Productivity Growth (%)' } } } }\n            });\n        }, 100);\n    }\n\n    /**\n     * Get scenario count\n     */\n    getCount() {\n        return this.scenarios.length;\n    }\n\n    /**\n     * Check if can add more scenarios\n     */\n    canAddMore() {\n        return this.scenarios.length < this.maxScenarios;\n    }\n}\n\n// Global instance\nconst scenarioComparison = new ScenarioComparison();\n\n// Export for ES modules\nexport { ScenarioComparison, scenarioComparison };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.ScenarioComparison = ScenarioComparison;\n    window.scenarioComparison = scenarioComparison;\n}\n","/**\n * Occupation-Level Drill-Down Module\n * Analyzes AI impact on specific occupations using O*NET-based task framework\n */\n\nclass OccupationDrilldown {\n    constructor() {\n        // O*NET-based occupation categories with task automation exposure\n        this.occupations = this.getOccupationData();\n        this.selectedOccupation = null;\n    }\n\n    /**\n     * Get occupation data with AI automation exposure estimates\n     * Based on O*NET task framework and AI capability research\n     */\n    getOccupationData() {\n        return {\n            // High-exposure white collar\n            'data_entry_clerks': {\n                name: 'Data Entry Clerks',\n                socCode: '43-9021',\n                category: 'Office & Administrative',\n                employment: 152000,\n                medianWage: 37810,\n                automationExposure: 0.92,\n                aiAugmentationPotential: 0.15,\n                tasks: [\n                    { name: 'Entering data from source documents', exposure: 0.95, type: 'routine_cognitive' },\n                    { name: 'Verifying data accuracy', exposure: 0.85, type: 'routine_cognitive' },\n                    { name: 'Maintaining data entry logs', exposure: 0.90, type: 'routine_cognitive' },\n                    { name: 'Resolving data discrepancies', exposure: 0.70, type: 'non_routine_cognitive' }\n                ],\n                projectedChange: { 2025: -8, 2027: -22, 2029: -38, 2034: -65 }\n            },\n            'customer_service_reps': {\n                name: 'Customer Service Representatives',\n                socCode: '43-4051',\n                employment: 2840000,\n                category: 'Office & Administrative',\n                medianWage: 39680,\n                automationExposure: 0.78,\n                aiAugmentationPotential: 0.45,\n                tasks: [\n                    { name: 'Answering routine inquiries', exposure: 0.90, type: 'routine_cognitive' },\n                    { name: 'Processing orders and returns', exposure: 0.85, type: 'routine_cognitive' },\n                    { name: 'Handling complaints', exposure: 0.55, type: 'non_routine_interactive' },\n                    { name: 'Providing product information', exposure: 0.75, type: 'routine_cognitive' },\n                    { name: 'Escalating complex issues', exposure: 0.30, type: 'non_routine_interactive' }\n                ],\n                projectedChange: { 2025: -5, 2027: -15, 2029: -28, 2034: -45 }\n            },\n            'accountants_auditors': {\n                name: 'Accountants and Auditors',\n                socCode: '13-2011',\n                category: 'Business & Financial',\n                employment: 1538000,\n                medianWage: 79880,\n                automationExposure: 0.68,\n                aiAugmentationPotential: 0.65,\n                tasks: [\n                    { name: 'Preparing tax returns', exposure: 0.80, type: 'routine_cognitive' },\n                    { name: 'Analyzing financial data', exposure: 0.55, type: 'non_routine_analytical' },\n                    { name: 'Auditing financial statements', exposure: 0.60, type: 'non_routine_analytical' },\n                    { name: 'Advising on financial strategy', exposure: 0.25, type: 'non_routine_interactive' },\n                    { name: 'Regulatory compliance', exposure: 0.70, type: 'routine_cognitive' }\n                ],\n                projectedChange: { 2025: -3, 2027: -10, 2029: -18, 2034: -30 }\n            },\n            'paralegals': {\n                name: 'Paralegals and Legal Assistants',\n                socCode: '23-2011',\n                category: 'Legal',\n                employment: 358000,\n                medianWage: 60970,\n                automationExposure: 0.72,\n                aiAugmentationPotential: 0.60,\n                tasks: [\n                    { name: 'Legal research', exposure: 0.75, type: 'non_routine_analytical' },\n                    { name: 'Document review', exposure: 0.85, type: 'routine_cognitive' },\n                    { name: 'Preparing legal documents', exposure: 0.70, type: 'routine_cognitive' },\n                    { name: 'Client communication', exposure: 0.35, type: 'non_routine_interactive' },\n                    { name: 'Case organization', exposure: 0.65, type: 'routine_cognitive' }\n                ],\n                projectedChange: { 2025: -4, 2027: -12, 2029: -22, 2034: -35 }\n            },\n            'software_developers': {\n                name: 'Software Developers',\n                socCode: '15-1256',\n                category: 'Computer & IT',\n                employment: 1847000,\n                medianWage: 127260,\n                automationExposure: 0.45,\n                aiAugmentationPotential: 0.85,\n                tasks: [\n                    { name: 'Writing code', exposure: 0.55, type: 'non_routine_analytical' },\n                    { name: 'Code review', exposure: 0.50, type: 'non_routine_analytical' },\n                    { name: 'Debugging', exposure: 0.45, type: 'non_routine_analytical' },\n                    { name: 'System design', exposure: 0.25, type: 'non_routine_analytical' },\n                    { name: 'Requirements gathering', exposure: 0.20, type: 'non_routine_interactive' }\n                ],\n                projectedChange: { 2025: 5, 2027: 8, 2029: 12, 2034: 18 }\n            },\n            'radiologic_technologists': {\n                name: 'Radiologic Technologists',\n                socCode: '29-2034',\n                category: 'Healthcare',\n                employment: 241000,\n                medianWage: 65140,\n                automationExposure: 0.52,\n                aiAugmentationPotential: 0.70,\n                tasks: [\n                    { name: 'Positioning patients', exposure: 0.15, type: 'non_routine_manual' },\n                    { name: 'Operating imaging equipment', exposure: 0.40, type: 'routine_cognitive' },\n                    { name: 'Image analysis (preliminary)', exposure: 0.75, type: 'non_routine_analytical' },\n                    { name: 'Patient interaction', exposure: 0.10, type: 'non_routine_interactive' },\n                    { name: 'Quality control', exposure: 0.55, type: 'routine_cognitive' }\n                ],\n                projectedChange: { 2025: 2, 2027: 3, 2029: 4, 2034: 6 }\n            },\n            'registered_nurses': {\n                name: 'Registered Nurses',\n                socCode: '29-1141',\n                category: 'Healthcare',\n                employment: 3175000,\n                medianWage: 81220,\n                automationExposure: 0.28,\n                aiAugmentationPotential: 0.55,\n                tasks: [\n                    { name: 'Patient care planning', exposure: 0.35, type: 'non_routine_analytical' },\n                    { name: 'Administering medications', exposure: 0.20, type: 'routine_manual' },\n                    { name: 'Patient monitoring', exposure: 0.45, type: 'routine_cognitive' },\n                    { name: 'Emotional support', exposure: 0.05, type: 'non_routine_interactive' },\n                    { name: 'Documentation', exposure: 0.60, type: 'routine_cognitive' }\n                ],\n                projectedChange: { 2025: 4, 2027: 7, 2029: 10, 2034: 15 }\n            },\n            'truck_drivers': {\n                name: 'Heavy Truck Drivers',\n                socCode: '53-3032',\n                category: 'Transportation',\n                employment: 2097000,\n                medianWage: 49920,\n                automationExposure: 0.65,\n                aiAugmentationPotential: 0.40,\n                tasks: [\n                    { name: 'Driving on highways', exposure: 0.80, type: 'routine_manual' },\n                    { name: 'Loading/unloading', exposure: 0.35, type: 'routine_manual' },\n                    { name: 'Route planning', exposure: 0.85, type: 'routine_cognitive' },\n                    { name: 'Vehicle inspection', exposure: 0.40, type: 'routine_cognitive' },\n                    { name: 'Urban navigation', exposure: 0.45, type: 'non_routine_manual' }\n                ],\n                projectedChange: { 2025: -2, 2027: -8, 2029: -15, 2034: -30 }\n            },\n            'retail_salespersons': {\n                name: 'Retail Salespersons',\n                socCode: '41-2031',\n                category: 'Sales',\n                employment: 3686000,\n                medianWage: 31920,\n                automationExposure: 0.58,\n                aiAugmentationPotential: 0.35,\n                tasks: [\n                    { name: 'Processing transactions', exposure: 0.90, type: 'routine_cognitive' },\n                    { name: 'Product recommendations', exposure: 0.60, type: 'non_routine_interactive' },\n                    { name: 'Inventory management', exposure: 0.75, type: 'routine_cognitive' },\n                    { name: 'Customer assistance', exposure: 0.35, type: 'non_routine_interactive' },\n                    { name: 'Store maintenance', exposure: 0.20, type: 'routine_manual' }\n                ],\n                projectedChange: { 2025: -4, 2027: -10, 2029: -18, 2034: -28 }\n            },\n            'financial_analysts': {\n                name: 'Financial Analysts',\n                socCode: '13-2051',\n                category: 'Business & Financial',\n                employment: 330000,\n                medianWage: 99010,\n                automationExposure: 0.55,\n                aiAugmentationPotential: 0.75,\n                tasks: [\n                    { name: 'Data analysis', exposure: 0.65, type: 'non_routine_analytical' },\n                    { name: 'Report generation', exposure: 0.70, type: 'routine_cognitive' },\n                    { name: 'Investment recommendations', exposure: 0.40, type: 'non_routine_analytical' },\n                    { name: 'Client presentations', exposure: 0.25, type: 'non_routine_interactive' },\n                    { name: 'Market research', exposure: 0.55, type: 'non_routine_analytical' }\n                ],\n                projectedChange: { 2025: 0, 2027: -3, 2029: -8, 2034: -12 }\n            },\n            'graphic_designers': {\n                name: 'Graphic Designers',\n                socCode: '27-1024',\n                category: 'Arts & Design',\n                employment: 265000,\n                medianWage: 57990,\n                automationExposure: 0.62,\n                aiAugmentationPotential: 0.70,\n                tasks: [\n                    { name: 'Creating visual concepts', exposure: 0.55, type: 'non_routine_analytical' },\n                    { name: 'Production design work', exposure: 0.75, type: 'routine_cognitive' },\n                    { name: 'Client collaboration', exposure: 0.20, type: 'non_routine_interactive' },\n                    { name: 'Asset resizing/formatting', exposure: 0.90, type: 'routine_cognitive' },\n                    { name: 'Brand strategy', exposure: 0.25, type: 'non_routine_analytical' }\n                ],\n                projectedChange: { 2025: -3, 2027: -10, 2029: -18, 2034: -25 }\n            },\n            'marketing_managers': {\n                name: 'Marketing Managers',\n                socCode: '11-2021',\n                category: 'Management',\n                employment: 316000,\n                medianWage: 157620,\n                automationExposure: 0.35,\n                aiAugmentationPotential: 0.70,\n                tasks: [\n                    { name: 'Campaign strategy', exposure: 0.30, type: 'non_routine_analytical' },\n                    { name: 'Team leadership', exposure: 0.10, type: 'non_routine_interactive' },\n                    { name: 'Performance analytics', exposure: 0.60, type: 'non_routine_analytical' },\n                    { name: 'Content oversight', exposure: 0.45, type: 'non_routine_analytical' },\n                    { name: 'Stakeholder communication', exposure: 0.15, type: 'non_routine_interactive' }\n                ],\n                projectedChange: { 2025: 2, 2027: 4, 2029: 6, 2034: 10 }\n            }\n        };\n    }\n\n    /**\n     * Get all occupations grouped by category\n     */\n    getOccupationsByCategory() {\n        const grouped = {};\n        Object.entries(this.occupations).forEach(([id, occ]) => {\n            if (!grouped[occ.category]) {\n                grouped[occ.category] = [];\n            }\n            grouped[occ.category].push({ id, ...occ });\n        });\n        return grouped;\n    }\n\n    /**\n     * Get occupation by ID\n     */\n    getOccupation(id) {\n        return this.occupations[id] || null;\n    }\n\n    /**\n     * Calculate task-level impact for an occupation\n     */\n    calculateTaskImpact(occupationId, aiAdoptionRate = 70) {\n        const occ = this.occupations[occupationId];\n        if (!occ) return null;\n\n        const adoptionFactor = aiAdoptionRate / 100;\n\n        return occ.tasks.map(task => {\n            const adjustedExposure = task.exposure * adoptionFactor;\n            const automationLikelihood = this.getAutomationLikelihood(adjustedExposure);\n\n            return {\n                ...task,\n                adjustedExposure,\n                automationLikelihood,\n                impact: this.getImpactLevel(adjustedExposure)\n            };\n        });\n    }\n\n    /**\n     * Get automation likelihood description\n     */\n    getAutomationLikelihood(exposure) {\n        if (exposure >= 0.8) return 'Very High';\n        if (exposure >= 0.6) return 'High';\n        if (exposure >= 0.4) return 'Moderate';\n        if (exposure >= 0.2) return 'Low';\n        return 'Very Low';\n    }\n\n    /**\n     * Get impact level\n     */\n    getImpactLevel(exposure) {\n        if (exposure >= 0.7) return { level: 'high', color: 'var(--danger)' };\n        if (exposure >= 0.4) return { level: 'medium', color: 'var(--warning)' };\n        return { level: 'low', color: 'var(--secondary)' };\n    }\n\n    /**\n     * Project employment change for an occupation\n     */\n    projectEmploymentChange(occupationId, targetYear, aiAdoptionRate = 70) {\n        const occ = this.occupations[occupationId];\n        if (!occ) return null;\n\n        // Get base projection for target year\n        let baseChange = 0;\n        const years = Object.keys(occ.projectedChange).map(Number).sort();\n\n        if (targetYear <= years[0]) {\n            baseChange = occ.projectedChange[years[0]];\n        } else if (targetYear >= years[years.length - 1]) {\n            baseChange = occ.projectedChange[years[years.length - 1]];\n        } else {\n            // Interpolate\n            for (let i = 0; i < years.length - 1; i++) {\n                if (targetYear >= years[i] && targetYear < years[i + 1]) {\n                    const ratio = (targetYear - years[i]) / (years[i + 1] - years[i]);\n                    baseChange = occ.projectedChange[years[i]] + ratio * (occ.projectedChange[years[i + 1]] - occ.projectedChange[years[i]]);\n                    break;\n                }\n            }\n        }\n\n        // Adjust for AI adoption rate (higher adoption = stronger effect)\n        const adoptionMultiplier = aiAdoptionRate / 70; // Normalize to baseline 70%\n        const adjustedChange = baseChange * adoptionMultiplier;\n\n        return {\n            percentChange: adjustedChange,\n            absoluteChange: Math.round(occ.employment * (adjustedChange / 100)),\n            projectedEmployment: Math.round(occ.employment * (1 + adjustedChange / 100))\n        };\n    }\n\n    /**\n     * Get skill recommendations for transition\n     */\n    getTransitionRecommendations(occupationId) {\n        const occ = this.occupations[occupationId];\n        if (!occ) return [];\n\n        const recommendations = {\n            routine_cognitive: [\n                'Data analysis and interpretation',\n                'AI/ML tool proficiency',\n                'Process optimization',\n                'Quality assurance oversight'\n            ],\n            routine_manual: [\n                'Robotics and automation supervision',\n                'Technical troubleshooting',\n                'Safety and compliance management',\n                'Equipment maintenance'\n            ],\n            non_routine_analytical: [\n                'Strategic thinking and planning',\n                'Complex problem-solving',\n                'AI model interpretation',\n                'Innovation and creativity'\n            ],\n            non_routine_interactive: [\n                'Emotional intelligence',\n                'Negotiation and persuasion',\n                'Leadership and mentoring',\n                'Cross-cultural communication'\n            ],\n            non_routine_manual: [\n                'Fine motor skills development',\n                'Adaptive response training',\n                'Human-robot collaboration',\n                'Environmental awareness'\n            ]\n        };\n\n        // Find most exposed task types\n        const taskTypeExposure = {};\n        occ.tasks.forEach(task => {\n            if (!taskTypeExposure[task.type]) {\n                taskTypeExposure[task.type] = 0;\n            }\n            taskTypeExposure[task.type] += task.exposure;\n        });\n\n        // Get recommendations based on most exposed types\n        const sortedTypes = Object.entries(taskTypeExposure)\n            .sort((a, b) => b[1] - a[1])\n            .slice(0, 2)\n            .map(([type]) => type);\n\n        const skills = new Set();\n        sortedTypes.forEach(type => {\n            if (recommendations[type]) {\n                recommendations[type].forEach(skill => skills.add(skill));\n            }\n        });\n\n        return Array.from(skills).slice(0, 6);\n    }\n\n    /**\n     * Generate HTML for occupation drill-down\n     */\n    generateOccupationListHTML() {\n        const grouped = this.getOccupationsByCategory();\n\n        let html = '<div class=\"occupation-drilldown\">';\n\n        Object.entries(grouped).forEach(([category, occupations]) => {\n            html += `\n                <div class=\"occupation-category\" style=\"margin-bottom: 24px;\">\n                    <h4 style=\"font-size: 0.875rem; color: var(--gray-600); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px;\">\n                        ${category}\n                    </h4>\n                    <div class=\"occupation-grid\" style=\"display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px;\">\n            `;\n\n            occupations.forEach(occ => {\n                const riskClass = occ.automationExposure >= 0.7 ? 'tag-high' :\n                    occ.automationExposure >= 0.4 ? 'tag-medium' : 'tag-low';\n                const riskLabel = occ.automationExposure >= 0.7 ? 'High Risk' :\n                    occ.automationExposure >= 0.4 ? 'Medium Risk' : 'Low Risk';\n\n                html += `\n                    <div class=\"occupation-card\" style=\"\n                        background: var(--gray-50);\n                        border: 1px solid var(--gray-200);\n                        border-radius: 8px;\n                        padding: 16px;\n                        cursor: pointer;\n                        transition: all 0.2s;\n                    \" onclick=\"showOccupationDetails('${occ.id}')\"\n                       onmouseover=\"this.style.borderColor='var(--primary)'; this.style.boxShadow='var(--shadow)';\"\n                       onmouseout=\"this.style.borderColor='var(--gray-200)'; this.style.boxShadow='none';\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;\">\n                            <div>\n                                <div style=\"font-weight: 600; color: var(--gray-800);\">${occ.name}</div>\n                                <div style=\"font-size: 0.75rem; color: var(--gray-500);\">SOC: ${occ.socCode}</div>\n                            </div>\n                            <span class=\"tag ${riskClass}\">${riskLabel}</span>\n                        </div>\n                        <div style=\"display: flex; justify-content: space-between; font-size: 0.875rem; color: var(--gray-600);\">\n                            <span>${(occ.employment / 1000).toFixed(0)}K employed</span>\n                            <span>$${(occ.medianWage / 1000).toFixed(0)}K median</span>\n                        </div>\n                        <div style=\"margin-top: 8px;\">\n                            <div style=\"height: 6px; background: var(--gray-200); border-radius: 3px; overflow: hidden;\">\n                                <div style=\"height: 100%; width: ${occ.automationExposure * 100}%; background: ${\n                    occ.automationExposure >= 0.7 ? 'var(--danger)' :\n                        occ.automationExposure >= 0.4 ? 'var(--warning)' : 'var(--secondary)'\n                }\"></div>\n                            </div>\n                            <div style=\"display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--gray-400); margin-top: 4px;\">\n                                <span>AI Exposure: ${(occ.automationExposure * 100).toFixed(0)}%</span>\n                                <span>Augmentation: ${(occ.aiAugmentationPotential * 100).toFixed(0)}%</span>\n                            </div>\n                        </div>\n                    </div>\n                `;\n            });\n\n            html += '</div></div>';\n        });\n\n        html += '</div>';\n        return html;\n    }\n\n    /**\n     * Generate detailed view for an occupation\n     */\n    generateDetailedViewHTML(occupationId, aiAdoptionRate = 70, targetYear = 2029) {\n        const occ = this.getOccupation(occupationId);\n        if (!occ) return '<p>Occupation not found.</p>';\n\n        const taskImpact = this.calculateTaskImpact(occupationId, aiAdoptionRate);\n        const projection = this.projectEmploymentChange(occupationId, targetYear, aiAdoptionRate);\n        const recommendations = this.getTransitionRecommendations(occupationId);\n\n        const riskClass = occ.automationExposure >= 0.7 ? 'tag-high' :\n            occ.automationExposure >= 0.4 ? 'tag-medium' : 'tag-low';\n\n        return `\n            <div class=\"occupation-detail\">\n                <button class=\"btn btn-outline btn-sm\" onclick=\"hideOccupationDetails()\" style=\"margin-bottom: 16px;\">\n                    &larr; Back to List\n                </button>\n\n                <div class=\"card\" style=\"margin-bottom: 24px;\">\n                    <div style=\"display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 16px;\">\n                        <div>\n                            <h2 style=\"font-size: 1.5rem; color: var(--gray-900); margin-bottom: 4px;\">${occ.name}</h2>\n                            <p style=\"color: var(--gray-500);\">SOC Code: ${occ.socCode} | ${occ.category}</p>\n                        </div>\n                        <span class=\"tag ${riskClass}\" style=\"font-size: 1rem; padding: 8px 16px;\">\n                            ${occ.automationExposure >= 0.7 ? 'High Risk' : occ.automationExposure >= 0.4 ? 'Medium Risk' : 'Low Risk'}\n                        </span>\n                    </div>\n\n                    <div class=\"stats-grid\" style=\"margin-top: 24px;\">\n                        <div class=\"stat-card\">\n                            <div class=\"label\">Current Employment</div>\n                            <div class=\"value\">${(occ.employment / 1e6).toFixed(2)}M</div>\n                        </div>\n                        <div class=\"stat-card\">\n                            <div class=\"label\">Median Wage</div>\n                            <div class=\"value\">$${occ.medianWage.toLocaleString()}</div>\n                        </div>\n                        <div class=\"stat-card\">\n                            <div class=\"label\">AI Exposure</div>\n                            <div class=\"value\" style=\"color: ${occ.automationExposure >= 0.7 ? 'var(--danger)' : 'var(--warning)'}\">\n                                ${(occ.automationExposure * 100).toFixed(0)}%\n                            </div>\n                        </div>\n                        <div class=\"stat-card\">\n                            <div class=\"label\">Augmentation Potential</div>\n                            <div class=\"value\" style=\"color: var(--secondary);\">\n                                ${(occ.aiAugmentationPotential * 100).toFixed(0)}%\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Employment Projection -->\n                <div class=\"card\" style=\"margin-bottom: 24px;\">\n                    <div class=\"card-header\">\n                        <h3>Employment Projection to ${targetYear}</h3>\n                    </div>\n                    <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; text-align: center;\">\n                        <div>\n                            <div style=\"font-size: 0.875rem; color: var(--gray-500);\">Projected Change</div>\n                            <div style=\"font-size: 1.75rem; font-weight: 700; color: ${projection.percentChange < 0 ? 'var(--danger)' : 'var(--secondary)'};\">\n                                ${projection.percentChange > 0 ? '+' : ''}${projection.percentChange.toFixed(1)}%\n                            </div>\n                        </div>\n                        <div>\n                            <div style=\"font-size: 0.875rem; color: var(--gray-500);\">Jobs Impact</div>\n                            <div style=\"font-size: 1.75rem; font-weight: 700; color: ${projection.absoluteChange < 0 ? 'var(--danger)' : 'var(--secondary)'};\">\n                                ${projection.absoluteChange > 0 ? '+' : ''}${(projection.absoluteChange / 1000).toFixed(0)}K\n                            </div>\n                        </div>\n                        <div>\n                            <div style=\"font-size: 0.875rem; color: var(--gray-500);\">Projected Employment</div>\n                            <div style=\"font-size: 1.75rem; font-weight: 700; color: var(--gray-900);\">\n                                ${(projection.projectedEmployment / 1e6).toFixed(2)}M\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Task-Level Analysis -->\n                <div class=\"card\" style=\"margin-bottom: 24px;\">\n                    <div class=\"card-header\">\n                        <h3>Task-Level AI Exposure Analysis</h3>\n                    </div>\n                    <table class=\"data-table\">\n                        <thead>\n                            <tr>\n                                <th>Task</th>\n                                <th>Type</th>\n                                <th>AI Exposure</th>\n                                <th>Automation Likelihood</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${taskImpact.map(task => `\n                                <tr>\n                                    <td><strong>${task.name}</strong></td>\n                                    <td style=\"font-size: 0.75rem; color: var(--gray-500);\">\n                                        ${task.type.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                                    </td>\n                                    <td>\n                                        <div style=\"display: flex; align-items: center; gap: 8px;\">\n                                            <div style=\"width: 60px; height: 8px; background: var(--gray-200); border-radius: 4px; overflow: hidden;\">\n                                                <div style=\"height: 100%; width: ${task.adjustedExposure * 100}%; background: ${task.impact.color};\"></div>\n                                            </div>\n                                            <span>${(task.adjustedExposure * 100).toFixed(0)}%</span>\n                                        </div>\n                                    </td>\n                                    <td>\n                                        <span class=\"tag ${task.impact.level === 'high' ? 'tag-high' : task.impact.level === 'medium' ? 'tag-medium' : 'tag-low'}\">\n                                            ${task.automationLikelihood}\n                                        </span>\n                                    </td>\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n\n                <!-- Skill Recommendations -->\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3>Recommended Skills for AI Era</h3>\n                    </div>\n                    <p style=\"color: var(--gray-600); margin-bottom: 16px;\">\n                        Workers in this occupation should consider developing these skills to adapt to AI-driven changes:\n                    </p>\n                    <div style=\"display: flex; flex-wrap: wrap; gap: 8px;\">\n                        ${recommendations.map(skill => `\n                            <span style=\"\n                                background: var(--primary);\n                                color: white;\n                                padding: 8px 16px;\n                                border-radius: 9999px;\n                                font-size: 0.875rem;\n                            \">${skill}</span>\n                        `).join('')}\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n}\n\n// Global instance\nconst occupationDrilldown = new OccupationDrilldown();\n\n// Export for ES modules\nexport { OccupationDrilldown, occupationDrilldown };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.OccupationDrilldown = OccupationDrilldown;\n    window.occupationDrilldown = occupationDrilldown;\n}\n","/**\n * PDF Export Module\n * Generates printable reports from simulation results\n */\n\nclass PDFExporter {\n    constructor() {\n        this.reportStyles = `\n            @media print {\n                body {\n                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n                    color: #111827;\n                    line-height: 1.6;\n                }\n                .no-print { display: none !important; }\n                .page-break { page-break-before: always; }\n                .report-section { margin-bottom: 24px; }\n                table { width: 100%; border-collapse: collapse; }\n                th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }\n                th { background: #f9fafb; font-weight: 600; }\n            }\n        `;\n    }\n\n    /**\n     * Generate and open print dialog for simulation report\n     */\n    generateReport(results, options = {}) {\n        if (!results) {\n            alert('No simulation results to export. Please run a simulation first.');\n            return;\n        }\n\n        const reportContent = this.buildReportHTML(results, options);\n        this.openPrintWindow(reportContent);\n    }\n\n    /**\n     * Build report HTML content\n     */\n    buildReportHTML(results, options) {\n        const summary = results.summary;\n        const scenario = results.scenario;\n        const timestamp = new Date().toLocaleString();\n\n        const includeCharts = options.includeCharts !== false;\n        const includeRawData = options.includeRawData === true;\n\n        return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>AI Labor Market Simulation Report - ${scenario.name}</title>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <style>\n        * { box-sizing: border-box; margin: 0; padding: 0; }\n        body {\n            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n            color: #111827;\n            line-height: 1.6;\n            padding: 40px;\n            max-width: 1000px;\n            margin: 0 auto;\n        }\n        .report-header {\n            text-align: center;\n            margin-bottom: 40px;\n            padding-bottom: 20px;\n            border-bottom: 2px solid #3b82f6;\n        }\n        .report-header h1 { font-size: 24px; margin-bottom: 8px; }\n        .report-header p { color: #6b7280; }\n        .section { margin-bottom: 32px; }\n        .section h2 {\n            font-size: 18px;\n            color: #1f2937;\n            margin-bottom: 16px;\n            padding-bottom: 8px;\n            border-bottom: 1px solid #e5e7eb;\n        }\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(4, 1fr);\n            gap: 16px;\n            margin-bottom: 24px;\n        }\n        .stat-box {\n            background: #f9fafb;\n            border: 1px solid #e5e7eb;\n            border-radius: 8px;\n            padding: 16px;\n            text-align: center;\n        }\n        .stat-box .label { font-size: 12px; color: #6b7280; margin-bottom: 4px; }\n        .stat-box .value { font-size: 24px; font-weight: 700; }\n        .stat-box .value.positive { color: #10b981; }\n        .stat-box .value.negative { color: #ef4444; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 16px; }\n        th, td { padding: 10px 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }\n        th { background: #f9fafb; font-weight: 600; font-size: 12px; text-transform: uppercase; color: #6b7280; }\n        .highlight { background: #fef3c7; }\n        .tag {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 9999px;\n            font-size: 11px;\n            font-weight: 500;\n        }\n        .tag-high { background: #fee2e2; color: #ef4444; }\n        .tag-medium { background: #fef3c7; color: #f59e0b; }\n        .tag-low { background: #d1fae5; color: #10b981; }\n        .footer {\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid #e5e7eb;\n            text-align: center;\n            font-size: 12px;\n            color: #9ca3af;\n        }\n        .page-break { page-break-before: always; }\n        @media print {\n            body { padding: 20px; }\n            .no-print { display: none !important; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"report-header\">\n        <h1>AI Labor Market Impact Simulation Report</h1>\n        <p><strong>${scenario.name}</strong> | Generated: ${timestamp}</p>\n    </div>\n\n    <!-- Executive Summary -->\n    <div class=\"section\">\n        <h2>Executive Summary</h2>\n        <div class=\"stats-grid\">\n            <div class=\"stat-box\">\n                <div class=\"label\">Final Unemployment Rate</div>\n                <div class=\"value ${parseFloat(summary.labor_market_changes.unemployment_rate.final) > 6 ? 'negative' : ''}\">\n                    ${summary.labor_market_changes.unemployment_rate.final}%\n                </div>\n            </div>\n            <div class=\"stat-box\">\n                <div class=\"label\">Net Job Impact</div>\n                <div class=\"value ${summary.ai_impact.net_impact < 0 ? 'negative' : 'positive'}\">\n                    ${summary.ai_impact.net_impact > 0 ? '+' : ''}${(summary.ai_impact.net_impact / 1e6).toFixed(2)}M\n                </div>\n            </div>\n            <div class=\"stat-box\">\n                <div class=\"label\">Jobs Displaced</div>\n                <div class=\"value negative\">\n                    ${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(2)}M\n                </div>\n            </div>\n            <div class=\"stat-box\">\n                <div class=\"label\">Jobs Created</div>\n                <div class=\"value positive\">\n                    ${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(2)}M\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Scenario Configuration -->\n    <div class=\"section\">\n        <h2>Scenario Configuration</h2>\n        <table>\n            <tbody>\n                <tr>\n                    <td><strong>Timeframe</strong></td>\n                    <td>${scenario.timeframe.start_year} - ${scenario.timeframe.end_year} (${scenario.timeframe.end_year - scenario.timeframe.start_year} years)</td>\n                </tr>\n                <tr>\n                    <td><strong>Target Unemployment Rate</strong></td>\n                    <td>${scenario.targets.unemployment_rate}%</td>\n                </tr>\n                <tr>\n                    <td><strong>Target AI Adoption Rate</strong></td>\n                    <td>${scenario.targets.ai_adoption_rate}%</td>\n                </tr>\n                <tr>\n                    <td><strong>Automation Pace</strong></td>\n                    <td>${scenario.targets.automation_pace.charAt(0).toUpperCase() + scenario.targets.automation_pace.slice(1)}</td>\n                </tr>\n                <tr>\n                    <td><strong>Adoption Curve</strong></td>\n                    <td>${scenario.ai_parameters.adoption_curve.replace('_', '-').replace(/\\b\\w/g, l => l.toUpperCase())}</td>\n                </tr>\n                <tr>\n                    <td><strong>New Job Multiplier</strong></td>\n                    <td>${scenario.ai_parameters.new_job_multiplier}</td>\n                </tr>\n                <tr>\n                    <td><strong>Active Interventions</strong></td>\n                    <td>${scenario.interventions.length > 0 ?\n                        scenario.interventions.map(i => i.name).join(', ') : 'None'}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Labor Market Outcomes -->\n    <div class=\"section\">\n        <h2>Labor Market Outcomes</h2>\n        <table>\n            <thead>\n                <tr>\n                    <th>Indicator</th>\n                    <th>Initial</th>\n                    <th>Final</th>\n                    <th>Change</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr class=\"highlight\">\n                    <td><strong>Unemployment Rate</strong></td>\n                    <td>${summary.labor_market_changes.unemployment_rate.initial}%</td>\n                    <td>${summary.labor_market_changes.unemployment_rate.final}%</td>\n                    <td>${parseFloat(summary.labor_market_changes.unemployment_rate.change) > 0 ? '+' : ''}${summary.labor_market_changes.unemployment_rate.change}%</td>\n                </tr>\n                <tr>\n                    <td><strong>Total Employment</strong></td>\n                    <td>${(summary.labor_market_changes.total_employment.initial / 1e6).toFixed(2)}M</td>\n                    <td>${(summary.labor_market_changes.total_employment.final / 1e6).toFixed(2)}M</td>\n                    <td>${summary.labor_market_changes.total_employment.change > 0 ? '+' : ''}${(summary.labor_market_changes.total_employment.change / 1e6).toFixed(2)}M</td>\n                </tr>\n                <tr>\n                    <td><strong>Job Openings</strong></td>\n                    <td>${(summary.labor_market_changes.job_openings.initial / 1e6).toFixed(2)}M</td>\n                    <td>${(summary.labor_market_changes.job_openings.final / 1e6).toFixed(2)}M</td>\n                    <td>${summary.labor_market_changes.job_openings.change > 0 ? '+' : ''}${(summary.labor_market_changes.job_openings.change / 1e6).toFixed(2)}M</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Economic Indicators -->\n    <div class=\"section\">\n        <h2>Economic Indicators</h2>\n        <table>\n            <thead>\n                <tr>\n                    <th>Indicator</th>\n                    <th>Initial</th>\n                    <th>Final</th>\n                    <th>Change</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td><strong>Productivity Growth</strong></td>\n                    <td>${summary.productivity.growth_rate.initial}%</td>\n                    <td>${summary.productivity.growth_rate.final}%</td>\n                    <td>${(parseFloat(summary.productivity.growth_rate.final) - parseFloat(summary.productivity.growth_rate.initial)) > 0 ? '+' : ''}${(parseFloat(summary.productivity.growth_rate.final) - parseFloat(summary.productivity.growth_rate.initial)).toFixed(1)}%</td>\n                </tr>\n                <tr>\n                    <td><strong>Average Hourly Wage</strong></td>\n                    <td>$${summary.wages.average_hourly.initial}</td>\n                    <td>$${summary.wages.average_hourly.final}</td>\n                    <td>${parseFloat(summary.wages.average_hourly.change_percent) > 0 ? '+' : ''}${summary.wages.average_hourly.change_percent}%</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <!-- AI Impact -->\n    <div class=\"section\">\n        <h2>AI Impact Analysis</h2>\n        <div class=\"stats-grid\">\n            <div class=\"stat-box\">\n                <div class=\"label\">AI Adoption (Initial)</div>\n                <div class=\"value\">${summary.ai_impact.ai_adoption.initial}%</div>\n            </div>\n            <div class=\"stat-box\">\n                <div class=\"label\">AI Adoption (Final)</div>\n                <div class=\"value\">${summary.ai_impact.ai_adoption.final}%</div>\n            </div>\n            <div class=\"stat-box\">\n                <div class=\"label\">Total Jobs Displaced</div>\n                <div class=\"value negative\">${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(2)}M</div>\n            </div>\n            <div class=\"stat-box\">\n                <div class=\"label\">Total Jobs Created</div>\n                <div class=\"value positive\">${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(2)}M</div>\n            </div>\n        </div>\n    </div>\n\n    ${scenario.interventions.length > 0 ? `\n    <!-- Policy Interventions -->\n    <div class=\"section page-break\">\n        <h2>Policy Interventions</h2>\n        <table>\n            <thead>\n                <tr>\n                    <th>Intervention</th>\n                    <th>Category</th>\n                    <th>Status</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${scenario.interventions.map(intervention => `\n                    <tr>\n                        <td><strong>${intervention.name}</strong></td>\n                        <td>${intervention.category.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</td>\n                        <td><span class=\"tag tag-low\">Active</span></td>\n                    </tr>\n                `).join('')}\n            </tbody>\n        </table>\n    </div>\n    ` : ''}\n\n    <!-- Year-by-Year Projections -->\n    <div class=\"section ${scenario.interventions.length > 0 ? '' : 'page-break'}\">\n        <h2>Year-by-Year Projections</h2>\n        <table>\n            <thead>\n                <tr>\n                    <th>Year</th>\n                    <th>UR (%)</th>\n                    <th>Employment (M)</th>\n                    <th>AI Adoption (%)</th>\n                    <th>Jobs Displaced (K)</th>\n                    <th>Jobs Created (K)</th>\n                    <th>Productivity (%)</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${results.results.map(year => `\n                    <tr>\n                        <td><strong>${year.year}</strong></td>\n                        <td>${year.unemployment_rate.toFixed(1)}</td>\n                        <td>${(year.employment / 1e6).toFixed(2)}</td>\n                        <td>${year.ai_adoption.toFixed(1)}</td>\n                        <td>${(year.jobs_displaced / 1000).toFixed(0)}</td>\n                        <td>${(year.jobs_created / 1000).toFixed(0)}</td>\n                        <td>${year.productivity_growth.toFixed(1)}</td>\n                    </tr>\n                `).join('')}\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Methodology Notes -->\n    <div class=\"section\">\n        <h2>Methodology Notes</h2>\n        <p style=\"font-size: 13px; color: #6b7280;\">\n            This simulation uses economic modeling based on historical labor market data from the Bureau of Labor Statistics,\n            combined with AI adoption projections from research institutions including the Anthropic Economic Index,\n            MIT Iceberg Index, and IMF working papers. Job displacement and creation estimates are derived from\n            sector-level automation exposure analysis using O*NET task frameworks. All projections are hypothetical\n            and intended for educational and research purposes only. Actual labor market outcomes will depend on\n            numerous factors not captured in this model.\n        </p>\n    </div>\n\n    <div class=\"footer\">\n        <p>AI Labor Market Impact Simulator | Report generated automatically</p>\n        <p style=\"margin-top: 4px;\">This report is for informational purposes only and should not be considered financial or policy advice.</p>\n    </div>\n\n    <div class=\"no-print\" style=\"text-align: center; margin-top: 40px;\">\n        <button onclick=\"window.print()\" style=\"\n            background: #3b82f6;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 6px;\n            font-size: 14px;\n            cursor: pointer;\n        \">Print / Save as PDF</button>\n        <button onclick=\"window.close()\" style=\"\n            background: #e5e7eb;\n            color: #374151;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 6px;\n            font-size: 14px;\n            cursor: pointer;\n            margin-left: 8px;\n        \">Close</button>\n    </div>\n</body>\n</html>\n        `;\n    }\n\n    /**\n     * Open print window with report content\n     */\n    openPrintWindow(content) {\n        const printWindow = window.open('', '_blank', 'width=1000,height=800');\n        if (!printWindow) {\n            alert('Please allow pop-ups to generate the PDF report.');\n            return;\n        }\n        printWindow.document.write(content);\n        printWindow.document.close();\n    }\n\n    /**\n     * Generate quick summary text\n     */\n    generateQuickSummary(results) {\n        const summary = results.summary;\n        const scenario = results.scenario;\n\n        return `\nAI Labor Market Simulation Summary\n==================================\nScenario: ${scenario.name}\nTimeframe: ${scenario.timeframe.start_year}-${scenario.timeframe.end_year}\n\nKey Results:\n- Final Unemployment: ${summary.labor_market_changes.unemployment_rate.final}% (${parseFloat(summary.labor_market_changes.unemployment_rate.change) > 0 ? '+' : ''}${summary.labor_market_changes.unemployment_rate.change}%)\n- Jobs Displaced: ${(summary.ai_impact.cumulative_displacement / 1e6).toFixed(2)}M\n- Jobs Created: ${(summary.ai_impact.cumulative_new_jobs / 1e6).toFixed(2)}M\n- Net Impact: ${summary.ai_impact.net_impact > 0 ? '+' : ''}${(summary.ai_impact.net_impact / 1e6).toFixed(2)}M jobs\n- Final AI Adoption: ${summary.ai_impact.ai_adoption.final}%\n\nConfiguration:\n- Target Unemployment: ${scenario.targets.unemployment_rate}%\n- AI Adoption Rate: ${scenario.targets.ai_adoption_rate}%\n- Automation Pace: ${scenario.targets.automation_pace}\n- Interventions: ${scenario.interventions.length > 0 ? scenario.interventions.map(i => i.name).join(', ') : 'None'}\n        `.trim();\n    }\n}\n\n// Global instance\nconst pdfExporter = new PDFExporter();\n\n// Export for ES modules\nexport { PDFExporter, pdfExporter };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.PDFExporter = PDFExporter;\n    window.pdfExporter = pdfExporter;\n}\n","/**\n * PDF Report Generator\n * Generates downloadable PDF reports from simulation results\n */\n\nclass PDFReportGenerator {\n    constructor() {\n        this.pageWidth = 595.28; // A4 width in points\n        this.pageHeight = 841.89; // A4 height in points\n        this.margin = 40;\n        this.lineHeight = 14;\n        this.currentY = this.margin;\n    }\n\n    /**\n     * Generate and download PDF report\n     */\n    async generateReport(results, options = {}) {\n        // Check if jsPDF is available, if not load it\n        if (typeof jspdf === 'undefined' && typeof jsPDF === 'undefined') {\n            await this.loadJsPDF();\n        }\n\n        const { jsPDF } = window.jspdf || window;\n        const doc = new jsPDF('p', 'pt', 'a4');\n\n        this.doc = doc;\n        this.currentY = this.margin;\n\n        const summary = results.summary;\n        const scenario = results.scenario;\n\n        // Title Page\n        this.addTitlePage(scenario, summary);\n\n        // Executive Summary\n        this.addNewPage();\n        this.addExecutiveSummary(summary, scenario);\n\n        // Labor Market Projections\n        this.addNewPage();\n        this.addLaborMarketSection(summary);\n\n        // AI Impact Analysis\n        this.addNewPage();\n        this.addAIImpactSection(summary);\n\n        // Sector Analysis\n        this.addNewPage();\n        this.addSectorAnalysis(summary);\n\n        // Intervention Analysis (if applicable)\n        if (scenario.interventions && scenario.interventions.length > 0) {\n            this.addNewPage();\n            this.addInterventionSection(summary, scenario.interventions);\n        }\n\n        // Demographics Analysis (if available)\n        if (summary.demographics) {\n            this.addNewPage();\n            this.addDemographicsSection(summary.demographics);\n        }\n\n        // Skills Gap Analysis (if available)\n        if (summary.skills_gap) {\n            this.addNewPage();\n            this.addSkillsGapSection(summary.skills_gap);\n        }\n\n        // Methodology\n        this.addNewPage();\n        this.addMethodologySection(scenario);\n\n        // Download\n        const filename = `labor-market-simulation-${new Date().toISOString().split('T')[0]}.pdf`;\n        doc.save(filename);\n\n        return filename;\n    }\n\n    /**\n     * Load jsPDF library dynamically\n     */\n    async loadJsPDF() {\n        return new Promise((resolve, reject) => {\n            const script = document.createElement('script');\n            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\n            script.onload = resolve;\n            script.onerror = reject;\n            document.head.appendChild(script);\n        });\n    }\n\n    /**\n     * Add title page\n     */\n    addTitlePage(scenario, summary) {\n        const doc = this.doc;\n        const centerX = this.pageWidth / 2;\n\n        // Title\n        doc.setFontSize(28);\n        doc.setFont('helvetica', 'bold');\n        doc.text('AI Labor Market', centerX, 200, { align: 'center' });\n        doc.text('Impact Simulation', centerX, 235, { align: 'center' });\n\n        // Subtitle\n        doc.setFontSize(16);\n        doc.setFont('helvetica', 'normal');\n        doc.text('Comprehensive Analysis Report', centerX, 280, { align: 'center' });\n\n        // Scenario info\n        doc.setFontSize(12);\n        const scenarioName = scenario.name || 'Custom Scenario';\n        doc.text(`Scenario: ${scenarioName}`, centerX, 340, { align: 'center' });\n\n        const timeframe = `${summary.timeframe.start_year} - ${summary.timeframe.end_year}`;\n        doc.text(`Timeframe: ${timeframe}`, centerX, 360, { align: 'center' });\n\n        // Key metrics preview\n        doc.setFontSize(11);\n        doc.setFont('helvetica', 'bold');\n        doc.text('Key Projections', centerX, 420, { align: 'center' });\n\n        doc.setFont('helvetica', 'normal');\n        const metrics = [\n            `Unemployment: ${summary.labor_market_changes.unemployment_rate.initial}%  ${summary.labor_market_changes.unemployment_rate.final}%`,\n            `Jobs Displaced: ${this.formatNumber(summary.ai_impact.cumulative_displacement)}`,\n            `Jobs Created: ${this.formatNumber(summary.ai_impact.cumulative_new_jobs)}`,\n            `Net Impact: ${this.formatNumber(summary.ai_impact.net_impact)}`\n        ];\n\n        metrics.forEach((metric, i) => {\n            doc.text(metric, centerX, 450 + (i * 20), { align: 'center' });\n        });\n\n        // Footer\n        doc.setFontSize(10);\n        doc.setTextColor(128);\n        const date = new Date().toLocaleDateString('en-US', {\n            year: 'numeric', month: 'long', day: 'numeric'\n        });\n        doc.text(`Generated: ${date}`, centerX, this.pageHeight - 60, { align: 'center' });\n        doc.text('AI Labor Market Impact Simulator', centerX, this.pageHeight - 45, { align: 'center' });\n        doc.setTextColor(0);\n    }\n\n    /**\n     * Add executive summary\n     */\n    addExecutiveSummary(summary, scenario) {\n        this.addSectionHeader('Executive Summary');\n\n        const ur = summary.labor_market_changes.unemployment_rate;\n        const aiImpact = summary.ai_impact;\n\n        // Overview paragraph\n        const overviewText = `This simulation projects labor market outcomes from ${summary.timeframe.start_year} to ${summary.timeframe.end_year} under a scenario with ${scenario.targets.ai_adoption_rate}% AI adoption and ${scenario.targets.automation_pace} automation pace. The analysis indicates ${ur.change > 0 ? 'an increase' : 'a decrease'} in unemployment from ${ur.initial}% to ${ur.final}%.`;\n\n        this.addParagraph(overviewText);\n        this.currentY += 10;\n\n        // Key findings\n        this.addSubHeader('Key Findings');\n\n        const findings = [\n            ` Unemployment Rate Change: ${ur.change > 0 ? '+' : ''}${ur.change} percentage points`,\n            ` Total Jobs Displaced by AI: ${this.formatNumber(aiImpact.cumulative_displacement)}`,\n            ` New Jobs Created: ${this.formatNumber(aiImpact.cumulative_new_jobs)}`,\n            ` Net Job Impact: ${this.formatNumber(aiImpact.net_impact)} ${aiImpact.net_impact >= 0 ? '(net positive)' : '(net negative)'}`,\n            ` Average Wage Change: ${summary.wages.average_hourly.change_percent}%`\n        ];\n\n        findings.forEach(finding => {\n            this.addText(finding);\n        });\n\n        this.currentY += 15;\n\n        // Risk assessment\n        this.addSubHeader('Risk Assessment');\n\n        let riskLevel = 'Moderate';\n        let riskColor = [255, 165, 0];\n        if (parseFloat(ur.final) > 10) {\n            riskLevel = 'High';\n            riskColor = [255, 0, 0];\n        } else if (parseFloat(ur.final) < 5) {\n            riskLevel = 'Low';\n            riskColor = [0, 128, 0];\n        }\n\n        this.doc.setTextColor(...riskColor);\n        this.addText(`Overall Risk Level: ${riskLevel}`);\n        this.doc.setTextColor(0);\n\n        const riskFactors = [];\n        if (aiImpact.net_impact < -1000000) {\n            riskFactors.push(' Significant net job losses projected');\n        }\n        if (parseFloat(ur.final) > 8) {\n            riskFactors.push(' Elevated unemployment exceeding historical norms');\n        }\n        if (parseFloat(summary.wages.average_hourly.change_percent) < 0) {\n            riskFactors.push(' Wage pressure from automation');\n        }\n\n        if (riskFactors.length > 0) {\n            riskFactors.forEach(factor => this.addText(factor));\n        } else {\n            this.addText(' No major risk factors identified');\n        }\n    }\n\n    /**\n     * Add labor market section\n     */\n    addLaborMarketSection(summary) {\n        this.addSectionHeader('Labor Market Projections');\n\n        const lm = summary.labor_market_changes;\n\n        // Unemployment\n        this.addSubHeader('Unemployment Rate');\n        this.addText(`Initial: ${lm.unemployment_rate.initial}%`);\n        this.addText(`Final: ${lm.unemployment_rate.final}%`);\n        this.addText(`Change: ${lm.unemployment_rate.change > 0 ? '+' : ''}${lm.unemployment_rate.change} percentage points`);\n\n        this.currentY += 10;\n\n        // Employment\n        this.addSubHeader('Total Employment');\n        this.addText(`Initial: ${this.formatNumber(lm.total_employment.initial)} workers`);\n        this.addText(`Final: ${this.formatNumber(lm.total_employment.final)} workers`);\n        this.addText(`Change: ${this.formatNumber(lm.total_employment.change)} workers`);\n\n        this.currentY += 10;\n\n        // Job Openings\n        this.addSubHeader('Job Openings');\n        this.addText(`Initial: ${this.formatNumber(lm.job_openings.initial)}`);\n        this.addText(`Final: ${this.formatNumber(lm.job_openings.final)}`);\n        this.addText(`Change: ${this.formatNumber(lm.job_openings.change)}`);\n\n        this.currentY += 10;\n\n        // Wages\n        this.addSubHeader('Wage Trends');\n        this.addText(`Initial Average Hourly Wage: $${summary.wages.average_hourly.initial}`);\n        this.addText(`Final Average Hourly Wage: $${summary.wages.average_hourly.final}`);\n        this.addText(`Wage Growth: ${summary.wages.average_hourly.change_percent}%`);\n    }\n\n    /**\n     * Add AI impact section\n     */\n    addAIImpactSection(summary) {\n        this.addSectionHeader('AI & Automation Impact');\n\n        const ai = summary.ai_impact;\n\n        // Adoption\n        this.addSubHeader('AI Adoption');\n        this.addText(`Initial Adoption Rate: ${ai.ai_adoption.initial}%`);\n        this.addText(`Final Adoption Rate: ${ai.ai_adoption.final}%`);\n\n        this.currentY += 10;\n\n        // Job displacement\n        this.addSubHeader('Job Displacement');\n        this.addText(`Cumulative Jobs Displaced: ${this.formatNumber(ai.cumulative_displacement)}`);\n        this.addParagraph('Job displacement represents positions eliminated or significantly transformed by AI and automation technologies.');\n\n        this.currentY += 10;\n\n        // Job creation\n        this.addSubHeader('Job Creation');\n        this.addText(`Cumulative New Jobs Created: ${this.formatNumber(ai.cumulative_new_jobs)}`);\n        this.addParagraph('New jobs include AI-adjacent roles, technology implementation positions, and emerging occupations enabled by automation.');\n\n        this.currentY += 10;\n\n        // Net impact\n        this.addSubHeader('Net Impact Analysis');\n        const netImpact = ai.net_impact;\n        const impactType = netImpact >= 0 ? 'positive' : 'negative';\n        this.addText(`Net Job Impact: ${this.formatNumber(netImpact)} (${impactType})`);\n\n        if (netImpact < 0) {\n            this.addParagraph(`The simulation projects a net loss of ${this.formatNumber(Math.abs(netImpact))} jobs. Policy interventions may help mitigate this impact.`);\n        } else {\n            this.addParagraph(`The simulation projects a net gain of ${this.formatNumber(netImpact)} jobs, suggesting job creation outpaces displacement in this scenario.`);\n        }\n    }\n\n    /**\n     * Add sector analysis\n     */\n    addSectorAnalysis(summary) {\n        this.addSectionHeader('Sector-Level Analysis');\n\n        const sectors = summary.sector_summary;\n\n        // Most affected\n        this.addSubHeader('Most Affected Sectors');\n        if (sectors.most_affected) {\n            sectors.most_affected.forEach((sector, i) => {\n                const name = sector.name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n                this.addText(`${i + 1}. ${name}`);\n                this.addText(`   Employment Change: ${this.formatNumber(sector.employment_change)} (${sector.employment_change_percent}%)`);\n                this.addText(`   Automation Exposure: ${(sector.automation_exposure * 100).toFixed(0)}%`);\n                this.currentY += 5;\n            });\n        }\n\n        this.currentY += 10;\n\n        // Least affected\n        this.addSubHeader('Most Resilient Sectors');\n        if (sectors.least_affected) {\n            sectors.least_affected.forEach((sector, i) => {\n                const name = sector.name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n                this.addText(`${i + 1}. ${name}`);\n                this.addText(`   Employment Change: ${this.formatNumber(sector.employment_change)} (${sector.employment_change_percent}%)`);\n                this.addText(`   Automation Exposure: ${(sector.automation_exposure * 100).toFixed(0)}%`);\n                this.currentY += 5;\n            });\n        }\n    }\n\n    /**\n     * Add intervention section\n     */\n    addInterventionSection(summary, interventions) {\n        this.addSectionHeader('Policy Intervention Analysis');\n\n        this.addParagraph(`This simulation includes ${interventions.length} active policy intervention(s) designed to mitigate negative labor market impacts.`);\n\n        this.currentY += 10;\n\n        // List interventions\n        this.addSubHeader('Active Interventions');\n        interventions.forEach((intervention, i) => {\n            this.addText(`${i + 1}. ${intervention.name}`);\n            if (intervention.description) {\n                this.doc.setFontSize(10);\n                this.addText(`   ${intervention.description.substring(0, 80)}...`);\n                this.doc.setFontSize(11);\n            }\n            this.currentY += 5;\n        });\n\n        // Intervention effects summary\n        if (summary.interventions) {\n            this.currentY += 10;\n            this.addSubHeader('Combined Intervention Effects');\n\n            const effects = summary.interventions;\n            this.addText(`Total Job Effect: ${this.formatNumber(effects.total_job_effect || 0)}`);\n            this.addText(`Total Economic Impact: $${this.formatNumber(effects.total_economic_impact || 0)}`);\n            this.addText(`Total Fiscal Cost: $${this.formatNumber(Math.abs(effects.total_fiscal_cost || 0))}${effects.total_fiscal_cost < 0 ? ' (revenue)' : ''}`);\n        }\n    }\n\n    /**\n     * Add demographics section\n     */\n    addDemographicsSection(demographics) {\n        this.addSectionHeader('Demographic Impact Analysis');\n\n        // Age groups\n        if (demographics.by_age) {\n            this.addSubHeader('Impact by Age Group');\n            Object.entries(demographics.by_age).forEach(([age, data]) => {\n                this.addText(`${age}: ${data.impact_level} impact (${data.displacement_rate}% displacement risk)`);\n            });\n            this.currentY += 10;\n        }\n\n        // Education\n        if (demographics.by_education) {\n            this.addSubHeader('Impact by Education Level');\n            Object.entries(demographics.by_education).forEach(([edu, data]) => {\n                this.addText(`${edu}: ${data.impact_level} impact (${data.displacement_rate}% displacement risk)`);\n            });\n            this.currentY += 10;\n        }\n\n        // Recommendations\n        if (demographics.recommendations) {\n            this.addSubHeader('Targeted Recommendations');\n            demographics.recommendations.forEach((rec, i) => {\n                this.addText(`${i + 1}. ${rec}`);\n            });\n        }\n    }\n\n    /**\n     * Add skills gap section\n     */\n    addSkillsGapSection(skillsGap) {\n        this.addSectionHeader('Skills Gap Analysis');\n\n        // Declining skills\n        if (skillsGap.declining_skills) {\n            this.addSubHeader('Declining Skills');\n            skillsGap.declining_skills.forEach(skill => {\n                this.addText(` ${skill.name} (-${skill.decline_rate}% demand)`);\n            });\n            this.currentY += 10;\n        }\n\n        // Growing skills\n        if (skillsGap.growing_skills) {\n            this.addSubHeader('In-Demand Skills');\n            skillsGap.growing_skills.forEach(skill => {\n                this.addText(` ${skill.name} (+${skill.growth_rate}% demand)`);\n            });\n            this.currentY += 10;\n        }\n\n        // Training recommendations\n        if (skillsGap.training_recommendations) {\n            this.addSubHeader('Training Recommendations');\n            skillsGap.training_recommendations.forEach((rec, i) => {\n                this.addText(`${i + 1}. ${rec.program}: ${rec.duration} months, ${rec.cost}`);\n            });\n        }\n    }\n\n    /**\n     * Add methodology section\n     */\n    addMethodologySection(scenario) {\n        this.addSectionHeader('Methodology');\n\n        this.addSubHeader('Simulation Parameters');\n        this.addText(`Target Unemployment Rate: ${scenario.targets.unemployment_rate}%`);\n        this.addText(`Target AI Adoption: ${scenario.targets.ai_adoption_rate}%`);\n        this.addText(`Automation Pace: ${scenario.targets.automation_pace}`);\n        this.addText(`Adoption Curve: ${scenario.ai_parameters.adoption_curve.replace('_', '-')}`);\n\n        this.currentY += 15;\n\n        this.addSubHeader('Model Description');\n        this.addParagraph('This simulation uses a multi-factor economic model that projects labor market outcomes based on AI adoption trajectories, sector-specific automation exposure rates, historical employment patterns, and policy intervention effects.');\n\n        this.currentY += 10;\n\n        this.addParagraph('Key model components include:');\n        const components = [\n            ' Sector-specific automation exposure coefficients derived from occupational task analysis',\n            ' AI adoption curves (linear, exponential, or S-curve) based on technology diffusion research',\n            ' Labor market dynamics including job displacement, creation, and wage effects',\n            ' Policy intervention models with fiscal cost and effectiveness estimates'\n        ];\n        components.forEach(c => this.addText(c));\n\n        this.currentY += 15;\n\n        this.addSubHeader('Limitations');\n        this.addParagraph('This simulation provides projections based on model assumptions and historical patterns. Actual outcomes may vary due to unforeseen technological developments, policy changes, economic shocks, or other factors not captured in the model.');\n    }\n\n    /**\n     * Helper: Add section header\n     */\n    addSectionHeader(text) {\n        this.checkPageBreak(40);\n        this.doc.setFontSize(18);\n        this.doc.setFont('helvetica', 'bold');\n        this.doc.text(text, this.margin, this.currentY);\n        this.currentY += 25;\n        this.doc.setFontSize(11);\n        this.doc.setFont('helvetica', 'normal');\n    }\n\n    /**\n     * Helper: Add sub-header\n     */\n    addSubHeader(text) {\n        this.checkPageBreak(25);\n        this.doc.setFontSize(13);\n        this.doc.setFont('helvetica', 'bold');\n        this.doc.text(text, this.margin, this.currentY);\n        this.currentY += 18;\n        this.doc.setFontSize(11);\n        this.doc.setFont('helvetica', 'normal');\n    }\n\n    /**\n     * Helper: Add text line\n     */\n    addText(text) {\n        this.checkPageBreak(this.lineHeight);\n        this.doc.text(text, this.margin, this.currentY);\n        this.currentY += this.lineHeight;\n    }\n\n    /**\n     * Helper: Add paragraph (wrapped text)\n     */\n    addParagraph(text) {\n        const maxWidth = this.pageWidth - (this.margin * 2);\n        const lines = this.doc.splitTextToSize(text, maxWidth);\n        lines.forEach(line => {\n            this.checkPageBreak(this.lineHeight);\n            this.doc.text(line, this.margin, this.currentY);\n            this.currentY += this.lineHeight;\n        });\n        this.currentY += 5;\n    }\n\n    /**\n     * Helper: Check if need new page\n     */\n    checkPageBreak(neededSpace) {\n        if (this.currentY + neededSpace > this.pageHeight - this.margin) {\n            this.addNewPage();\n        }\n    }\n\n    /**\n     * Helper: Add new page\n     */\n    addNewPage() {\n        this.doc.addPage();\n        this.currentY = this.margin;\n\n        // Add page number\n        const pageNum = this.doc.internal.getNumberOfPages();\n        this.doc.setFontSize(9);\n        this.doc.setTextColor(128);\n        this.doc.text(`Page ${pageNum}`, this.pageWidth - this.margin, this.pageHeight - 20, { align: 'right' });\n        this.doc.setTextColor(0);\n        this.doc.setFontSize(11);\n    }\n\n    /**\n     * Helper: Format number\n     */\n    formatNumber(n) {\n        if (n === undefined || n === null) return 'N/A';\n        const num = parseFloat(n);\n        if (isNaN(num)) return 'N/A';\n\n        if (Math.abs(num) >= 1e9) return (num / 1e9).toFixed(1) + 'B';\n        if (Math.abs(num) >= 1e6) return (num / 1e6).toFixed(1) + 'M';\n        if (Math.abs(num) >= 1e3) return (num / 1e3).toFixed(1) + 'K';\n        return num.toLocaleString();\n    }\n}\n\n// Global instance\nconst pdfReportGenerator = new PDFReportGenerator();\n\n// Export for ES modules\nexport { PDFReportGenerator, pdfReportGenerator };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.PDFReportGenerator = PDFReportGenerator;\n    window.pdfReportGenerator = pdfReportGenerator;\n}\n","/**\n * Sensitivity Analysis Module\n * Analyzes how changes in input parameters affect simulation outcomes\n */\n\nclass SensitivityAnalysis {\n    constructor() {\n        this.parameters = {\n            unemployment_rate: {\n                name: 'Target Unemployment Rate',\n                unit: '%',\n                baseValue: 10,\n                range: { min: 4, max: 20, step: 2 },\n                inputId: 'targetUR'\n            },\n            ai_adoption: {\n                name: 'AI Adoption Rate',\n                unit: '%',\n                baseValue: 70,\n                range: { min: 30, max: 100, step: 10 },\n                inputId: 'aiAdoption'\n            },\n            target_year: {\n                name: 'Target Year',\n                unit: '',\n                baseValue: 2029,\n                range: { min: 2026, max: 2034, step: 1 },\n                inputId: 'targetYear'\n            }\n        };\n\n        this.outcomes = {\n            final_unemployment: {\n                name: 'Final Unemployment Rate',\n                unit: '%',\n                extractor: (results) => results.summary.labor_market_changes.unemployment_rate.final\n            },\n            net_job_impact: {\n                name: 'Net Job Impact',\n                unit: 'millions',\n                extractor: (results) => results.summary.ai_impact.net_impact / 1e6\n            },\n            jobs_displaced: {\n                name: 'Jobs Displaced',\n                unit: 'millions',\n                extractor: (results) => results.summary.ai_impact.jobs_displaced / 1e6\n            },\n            jobs_created: {\n                name: 'Jobs Created',\n                unit: 'millions',\n                extractor: (results) => results.summary.ai_impact.jobs_created / 1e6\n            },\n            productivity_growth: {\n                name: 'Final Productivity Growth',\n                unit: '%',\n                extractor: (results) => results.summary.economic_indicators.productivity_growth.final\n            }\n        };\n\n        this.analysisResults = null;\n    }\n\n    /**\n     * Run sensitivity analysis for a parameter\n     */\n    async runAnalysis(parameterId, simulationEngine, baseConfig, selectedOutcomes = null) {\n        const param = this.parameters[parameterId];\n        if (!param) return null;\n\n        const outcomes = selectedOutcomes || Object.keys(this.outcomes);\n        const results = [];\n\n        // Generate test values\n        const testValues = [];\n        for (let v = param.range.min; v <= param.range.max; v += param.range.step) {\n            testValues.push(v);\n        }\n\n        // Run simulation for each test value\n        for (const value of testValues) {\n            const config = { ...baseConfig };\n\n            // Apply test value\n            switch (parameterId) {\n                case 'unemployment_rate':\n                    config.target_unemployment = value;\n                    break;\n                case 'ai_adoption':\n                    config.ai_adoption_rate = value;\n                    break;\n                case 'target_year':\n                    config.end_year = value;\n                    break;\n            }\n\n            try {\n                // Create scenario and run simulation\n                simulationEngine.createScenario(config);\n                const simResults = await simulationEngine.runSimulation();\n\n                const outcomeValues = {};\n                outcomes.forEach(outcomeId => {\n                    const outcome = this.outcomes[outcomeId];\n                    if (outcome) {\n                        outcomeValues[outcomeId] = outcome.extractor(simResults);\n                    }\n                });\n\n                results.push({\n                    paramValue: value,\n                    outcomes: outcomeValues\n                });\n            } catch (error) {\n                console.error(`Sensitivity analysis error at ${parameterId}=${value}:`, error);\n            }\n        }\n\n        return {\n            parameter: param,\n            parameterId,\n            results,\n            baseValue: param.baseValue\n        };\n    }\n\n    /**\n     * Calculate sensitivity metrics\n     */\n    calculateSensitivity(analysisResults) {\n        if (!analysisResults || analysisResults.results.length < 2) return null;\n\n        const metrics = {};\n\n        Object.keys(this.outcomes).forEach(outcomeId => {\n            const values = analysisResults.results.map(r => r.outcomes[outcomeId]).filter(v => v !== undefined);\n            if (values.length < 2) return;\n\n            const min = Math.min(...values);\n            const max = Math.max(...values);\n            const range = max - min;\n            const mean = values.reduce((a, b) => a + b, 0) / values.length;\n\n            // Calculate elasticity (% change in outcome / % change in parameter)\n            const paramValues = analysisResults.results.map(r => r.paramValue);\n            const paramRange = Math.max(...paramValues) - Math.min(...paramValues);\n            const elasticity = paramRange > 0 ? (range / mean) / (paramRange / analysisResults.parameter.baseValue) : 0;\n\n            metrics[outcomeId] = {\n                name: this.outcomes[outcomeId].name,\n                unit: this.outcomes[outcomeId].unit,\n                min,\n                max,\n                range,\n                mean,\n                elasticity: Math.abs(elasticity),\n                sensitivity: this.getSensitivityLevel(Math.abs(elasticity))\n            };\n        });\n\n        return metrics;\n    }\n\n    /**\n     * Get sensitivity level description\n     */\n    getSensitivityLevel(elasticity) {\n        if (elasticity >= 1.5) return { level: 'high', color: 'var(--danger)', label: 'High' };\n        if (elasticity >= 0.5) return { level: 'medium', color: 'var(--warning)', label: 'Medium' };\n        return { level: 'low', color: 'var(--secondary)', label: 'Low' };\n    }\n\n    /**\n     * Generate tornado chart data\n     */\n    generateTornadoData(multiParamResults) {\n        const data = [];\n\n        Object.entries(multiParamResults).forEach(([paramId, analysis]) => {\n            if (!analysis || !analysis.results.length) return;\n\n            const param = this.parameters[paramId];\n            const outcomes = analysis.results.map(r => r.outcomes.final_unemployment);\n            const min = Math.min(...outcomes);\n            const max = Math.max(...outcomes);\n\n            data.push({\n                parameter: param.name,\n                low: min,\n                high: max,\n                range: max - min\n            });\n        });\n\n        // Sort by range (descending)\n        data.sort((a, b) => b.range - a.range);\n\n        return data;\n    }\n\n    /**\n     * Generate sensitivity analysis HTML\n     */\n    generateAnalysisHTML(analysisResults) {\n        if (!analysisResults || !analysisResults.results.length) {\n            return '<p style=\"color: var(--gray-500);\">No analysis results available.</p>';\n        }\n\n        const metrics = this.calculateSensitivity(analysisResults);\n        const param = analysisResults.parameter;\n\n        return `\n            <div class=\"sensitivity-analysis\">\n                <div class=\"card\" style=\"margin-bottom: 24px;\">\n                    <div class=\"card-header\">\n                        <h3>Sensitivity to ${param.name}</h3>\n                    </div>\n                    <p style=\"color: var(--gray-600); margin-bottom: 16px;\">\n                        Analysis of how changes in ${param.name} (${param.range.min}${param.unit} to ${param.range.max}${param.unit})\n                        affect simulation outcomes.\n                    </p>\n\n                    <!-- Sensitivity Metrics Table -->\n                    <table class=\"data-table\">\n                        <thead>\n                            <tr>\n                                <th>Outcome</th>\n                                <th>Min</th>\n                                <th>Max</th>\n                                <th>Range</th>\n                                <th>Sensitivity</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${Object.entries(metrics).map(([id, m]) => `\n                                <tr>\n                                    <td><strong>${m.name}</strong></td>\n                                    <td>${m.min.toFixed(2)}${m.unit === '%' ? '%' : m.unit === 'millions' ? 'M' : ''}</td>\n                                    <td>${m.max.toFixed(2)}${m.unit === '%' ? '%' : m.unit === 'millions' ? 'M' : ''}</td>\n                                    <td>${m.range.toFixed(2)}${m.unit === '%' ? '%' : m.unit === 'millions' ? 'M' : ''}</td>\n                                    <td>\n                                        <span class=\"tag\" style=\"background: ${m.sensitivity.color}20; color: ${m.sensitivity.color};\">\n                                            ${m.sensitivity.label}\n                                        </span>\n                                    </td>\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n\n                <!-- Parameter Values vs Outcomes -->\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3>${param.name} Impact Table</h3>\n                    </div>\n                    <table class=\"data-table\">\n                        <thead>\n                            <tr>\n                                <th>${param.name}</th>\n                                ${Object.keys(this.outcomes).map(id => `<th>${this.outcomes[id].name}</th>`).join('')}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${analysisResults.results.map(r => `\n                                <tr ${r.paramValue === param.baseValue ? 'style=\"background: var(--primary); color: white;\"' : ''}>\n                                    <td><strong>${r.paramValue}${param.unit}</strong></td>\n                                    ${Object.keys(this.outcomes).map(id => {\n                                        const val = r.outcomes[id];\n                                        const unit = this.outcomes[id].unit;\n                                        return `<td>${val !== undefined ? val.toFixed(2) : 'N/A'}${unit === '%' ? '%' : unit === 'millions' ? 'M' : ''}</td>`;\n                                    }).join('')}\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Generate quick sensitivity overview\n     */\n    generateOverviewHTML() {\n        return `\n            <div class=\"sensitivity-overview\">\n                <div class=\"card\" style=\"margin-bottom: 24px;\">\n                    <div class=\"card-header\">\n                        <h3>Sensitivity Analysis</h3>\n                    </div>\n                    <p style=\"color: var(--gray-600); margin-bottom: 24px;\">\n                        Analyze how changes in key input parameters affect simulation outcomes.\n                        Select a parameter to see how sensitive the results are to changes in that variable.\n                    </p>\n\n                    <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;\">\n                        ${Object.entries(this.parameters).map(([id, param]) => `\n                            <div class=\"sensitivity-param-card\" style=\"\n                                background: var(--gray-50);\n                                border: 1px solid var(--gray-200);\n                                border-radius: 8px;\n                                padding: 16px;\n                                cursor: pointer;\n                                transition: all 0.2s;\n                            \" onclick=\"runParameterSensitivity('${id}')\"\n                               onmouseover=\"this.style.borderColor='var(--primary)'; this.style.boxShadow='var(--shadow)';\"\n                               onmouseout=\"this.style.borderColor='var(--gray-200)'; this.style.boxShadow='none';\">\n                                <h4 style=\"margin-bottom: 8px; color: var(--gray-800);\">${param.name}</h4>\n                                <p style=\"font-size: 0.875rem; color: var(--gray-500); margin-bottom: 12px;\">\n                                    Test range: ${param.range.min}${param.unit} to ${param.range.max}${param.unit}\n                                </p>\n                                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                                    <span style=\"font-size: 0.75rem; color: var(--gray-400);\">\n                                        Base: ${param.baseValue}${param.unit}\n                                    </span>\n                                    <span class=\"tag tag-medium\">Analyze</span>\n                                </div>\n                            </div>\n                        `).join('')}\n                    </div>\n                </div>\n\n                <div id=\"sensitivity-results\">\n                    <div class=\"card\" style=\"text-align: center; padding: 40px; color: var(--gray-500);\">\n                        <p>Select a parameter above to run sensitivity analysis.</p>\n                        <p style=\"font-size: 0.875rem; margin-top: 8px;\">\n                            Analysis will show how outcomes change as the parameter varies.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n}\n\n// Global instance\nconst sensitivityAnalysis = new SensitivityAnalysis();\n\n// Export for ES modules\nexport { SensitivityAnalysis, sensitivityAnalysis };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.SensitivityAnalysis = SensitivityAnalysis;\n    window.sensitivityAnalysis = sensitivityAnalysis;\n}\n","/**\n * Monte Carlo Simulation Feature\n * Runs multiple iterations with randomized parameters to show probability distributions\n */\n\nclass MonteCarloSimulation {\n    constructor(simulationEngine) {\n        this.engine = simulationEngine;\n        this.iterations = 1000;\n        this.results = null;\n        this.isRunning = false;\n        this.progress = 0;\n    }\n\n    /**\n     * Configure Monte Carlo parameters\n     */\n    configure(options = {}) {\n        this.iterations = options.iterations || 1000;\n        this.parameterRanges = {\n            // AI adoption variation (+/- percentage points)\n            ai_adoption_variance: options.ai_adoption_variance || 15,\n            // Productivity growth variance (+/- percentage points)\n            productivity_variance: options.productivity_variance || 1.5,\n            // New job multiplier variance\n            job_multiplier_variance: options.job_multiplier_variance || 0.15,\n            // Displacement lag variance (months)\n            displacement_lag_variance: options.displacement_lag_variance || 3,\n            // GDP growth variance\n            gdp_variance: options.gdp_variance || 1.0,\n            // Labor elasticity variance\n            elasticity_variance: options.elasticity_variance || 0.2\n        };\n    }\n\n    /**\n     * Run Monte Carlo simulation\n     * @param {Object} baseScenario - Base scenario configuration\n     * @param {Function} progressCallback - Called with progress updates\n     * @returns {Object} Monte Carlo results with distributions\n     */\n    async run(baseScenario, progressCallback = null) {\n        this.isRunning = true;\n        this.progress = 0;\n        const allResults = [];\n\n        // Store original scenario\n        const originalScenario = { ...this.engine.currentScenario };\n\n        try {\n            for (let i = 0; i < this.iterations; i++) {\n                // Create randomized scenario\n                const randomizedConfig = this.randomizeScenario(baseScenario);\n\n                // Create and run scenario\n                this.engine.createScenario(randomizedConfig);\n                const result = await this.engine.runSimulation();\n\n                // Store key metrics from final state\n                allResults.push(this.extractKeyMetrics(result));\n\n                // Update progress\n                this.progress = ((i + 1) / this.iterations) * 100;\n                if (progressCallback && i % 50 === 0) {\n                    progressCallback(this.progress);\n                }\n            }\n\n            // Restore original scenario\n            this.engine.currentScenario = originalScenario;\n\n            // Analyze results\n            this.results = this.analyzeDistributions(allResults);\n            this.isRunning = false;\n\n            return this.results;\n        } catch (error) {\n            this.isRunning = false;\n            this.engine.currentScenario = originalScenario;\n            throw error;\n        }\n    }\n\n    /**\n     * Randomize scenario parameters within configured ranges\n     */\n    randomizeScenario(baseConfig) {\n        const config = JSON.parse(JSON.stringify(baseConfig));\n        const ranges = this.parameterRanges;\n\n        // Randomize AI adoption rate\n        config.ai_adoption_rate = this.randomize(\n            config.ai_adoption_rate || 50,\n            ranges.ai_adoption_variance\n        );\n\n        // Randomize productivity growth\n        config.productivity_growth = this.randomize(\n            config.productivity_growth || 3,\n            ranges.productivity_variance\n        );\n\n        // Randomize new job multiplier\n        config.new_job_multiplier = Math.max(0.1, this.randomize(\n            config.new_job_multiplier || 0.3,\n            ranges.job_multiplier_variance\n        ));\n\n        // Randomize displacement lag\n        config.displacement_lag = Math.max(1, Math.round(this.randomize(\n            config.displacement_lag || 6,\n            ranges.displacement_lag_variance\n        )));\n\n        // Randomize GDP growth\n        config.gdp_growth = this.randomize(\n            config.gdp_growth || 2.0,\n            ranges.gdp_variance\n        );\n\n        // Randomize labor elasticity\n        config.labor_elasticity = this.randomize(\n            config.labor_elasticity || -0.5,\n            ranges.elasticity_variance\n        );\n\n        return config;\n    }\n\n    /**\n     * Add Gaussian noise to a value\n     */\n    randomize(value, variance) {\n        // Box-Muller transform for normal distribution\n        const u1 = Math.random();\n        const u2 = Math.random();\n        const z = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);\n        return value + z * (variance / 2);\n    }\n\n    /**\n     * Extract key metrics from simulation result\n     */\n    extractKeyMetrics(result) {\n        const summary = result.summary;\n        const finalResult = result.results[result.results.length - 1];\n        const yearlyResults = this.getYearlySnapshots(result.results);\n\n        // Use correct property paths from simulation engine's generateSummary\n        return {\n            // Final state metrics\n            final_unemployment: parseFloat(summary.labor_market_changes.unemployment_rate.final),\n            final_employment: finalResult.labor_market.total_employment,\n            cumulative_displacement: summary.ai_impact.cumulative_displacement,\n            cumulative_new_jobs: summary.ai_impact.cumulative_new_jobs,\n            net_job_change: summary.ai_impact.net_impact,\n            final_ai_adoption: finalResult.ai_adoption,\n            final_productivity: finalResult.productivity.growth_rate,\n            final_wage_growth: parseFloat(summary.wages.average_hourly.change_percent),\n\n            // Yearly trajectory\n            yearly: yearlyResults\n        };\n    }\n\n    /**\n     * Get yearly snapshots from results\n     */\n    getYearlySnapshots(results) {\n        const yearly = {};\n        results.forEach(r => {\n            const year = Math.floor(r.year);\n            if (!yearly[year] || r.year === year) {\n                yearly[year] = {\n                    unemployment: r.labor_market.unemployment_rate,\n                    employment: r.labor_market.total_employment,\n                    ai_adoption: r.ai_adoption,\n                    productivity: r.productivity.growth_rate\n                };\n            }\n        });\n        return yearly;\n    }\n\n    /**\n     * Analyze distributions from all iterations\n     */\n    analyzeDistributions(allResults) {\n        const metrics = [\n            'final_unemployment',\n            'final_employment',\n            'cumulative_displacement',\n            'cumulative_new_jobs',\n            'net_job_change',\n            'final_ai_adoption',\n            'final_productivity',\n            'final_wage_growth'\n        ];\n\n        const distributions = {};\n\n        metrics.forEach(metric => {\n            const values = allResults.map(r => r[metric]).filter(v => !isNaN(v)).sort((a, b) => a - b);\n            distributions[metric] = this.calculateDistributionStats(values);\n        });\n\n        // Calculate yearly distributions\n        const years = Object.keys(allResults[0].yearly).map(Number).sort((a, b) => a - b);\n        const yearlyDistributions = {};\n\n        years.forEach(year => {\n            const yearMetrics = ['unemployment', 'employment', 'ai_adoption', 'productivity'];\n            yearlyDistributions[year] = {};\n\n            yearMetrics.forEach(metric => {\n                const values = allResults\n                    .map(r => r.yearly[year]?.[metric])\n                    .filter(v => v !== undefined && !isNaN(v))\n                    .sort((a, b) => a - b);\n                yearlyDistributions[year][metric] = this.calculateDistributionStats(values);\n            });\n        });\n\n        return {\n            iterations: this.iterations,\n            distributions,\n            yearlyDistributions,\n            rawResults: allResults\n        };\n    }\n\n    /**\n     * Calculate distribution statistics\n     */\n    calculateDistributionStats(sortedValues) {\n        if (sortedValues.length === 0) {\n            return null;\n        }\n\n        const n = sortedValues.length;\n        const mean = sortedValues.reduce((a, b) => a + b, 0) / n;\n        const variance = sortedValues.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / n;\n        const stdDev = Math.sqrt(variance);\n\n        return {\n            min: sortedValues[0],\n            max: sortedValues[n - 1],\n            mean: mean,\n            median: this.percentile(sortedValues, 50),\n            stdDev: stdDev,\n            p5: this.percentile(sortedValues, 5),\n            p10: this.percentile(sortedValues, 10),\n            p25: this.percentile(sortedValues, 25),\n            p75: this.percentile(sortedValues, 75),\n            p90: this.percentile(sortedValues, 90),\n            p95: this.percentile(sortedValues, 95),\n            histogram: this.createHistogram(sortedValues, 20)\n        };\n    }\n\n    /**\n     * Calculate percentile value\n     */\n    percentile(sortedValues, p) {\n        const index = (p / 100) * (sortedValues.length - 1);\n        const lower = Math.floor(index);\n        const upper = Math.ceil(index);\n        const fraction = index - lower;\n\n        if (lower === upper) {\n            return sortedValues[lower];\n        }\n        return sortedValues[lower] * (1 - fraction) + sortedValues[upper] * fraction;\n    }\n\n    /**\n     * Create histogram bins\n     */\n    createHistogram(sortedValues, bins) {\n        const min = sortedValues[0];\n        const max = sortedValues[sortedValues.length - 1];\n        const binWidth = (max - min) / bins;\n        const histogram = [];\n\n        for (let i = 0; i < bins; i++) {\n            const binStart = min + i * binWidth;\n            const binEnd = min + (i + 1) * binWidth;\n            const count = sortedValues.filter(v => v >= binStart && (i === bins - 1 ? v <= binEnd : v < binEnd)).length;\n            histogram.push({\n                binStart,\n                binEnd,\n                binMid: (binStart + binEnd) / 2,\n                count,\n                frequency: count / sortedValues.length\n            });\n        }\n\n        return histogram;\n    }\n\n    /**\n     * Get probability of outcome\n     */\n    getProbability(metric, threshold, comparison = 'less') {\n        if (!this.results) return null;\n\n        const dist = this.results.distributions[metric];\n        if (!dist) return null;\n\n        const values = this.results.rawResults.map(r => r[metric]).filter(v => !isNaN(v));\n        let count;\n\n        if (comparison === 'less') {\n            count = values.filter(v => v < threshold).length;\n        } else if (comparison === 'greater') {\n            count = values.filter(v => v > threshold).length;\n        } else {\n            count = values.filter(v => v === threshold).length;\n        }\n\n        return count / values.length;\n    }\n\n    /**\n     * Generate summary report\n     */\n    generateReport() {\n        if (!this.results) return null;\n\n        const dist = this.results.distributions;\n\n        return {\n            iterations: this.iterations,\n            unemployment: {\n                mostLikely: dist.final_unemployment.median,\n                range: `${dist.final_unemployment.p10.toFixed(1)}% - ${dist.final_unemployment.p90.toFixed(1)}%`,\n                confidence90: {\n                    low: dist.final_unemployment.p5,\n                    high: dist.final_unemployment.p95\n                },\n                probability_above_10: this.getProbability('final_unemployment', 10, 'greater')\n            },\n            displacement: {\n                mostLikely: dist.cumulative_displacement.median,\n                range: `${(dist.cumulative_displacement.p10 / 1000000).toFixed(1)}M - ${(dist.cumulative_displacement.p90 / 1000000).toFixed(1)}M`,\n                confidence90: {\n                    low: dist.cumulative_displacement.p5,\n                    high: dist.cumulative_displacement.p95\n                }\n            },\n            netJobChange: {\n                mostLikely: dist.net_job_change.median,\n                range: `${(dist.net_job_change.p10 / 1000000).toFixed(1)}M - ${(dist.net_job_change.p90 / 1000000).toFixed(1)}M`,\n                probability_positive: this.getProbability('net_job_change', 0, 'greater')\n            }\n        };\n    }\n}\n\n// Export for ES modules\nexport { MonteCarloSimulation };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.MonteCarloSimulation = MonteCarloSimulation;\n}\n","/**\n * Intervention Cost Calculator\n * Calculates fiscal costs and ROI for policy interventions\n */\n\nclass InterventionCostCalculator {\n    constructor() {\n        // US economic baseline assumptions\n        this.assumptions = {\n            adultPopulation: 258000000, // US adult population (18+)\n            averageWage: 59428, // Average annual wage\n            workingPopulation: 160000000, // Labor force\n            avgHoursPerWeek: 38.6,\n            taxRevenueMultiplier: 0.25, // Avg effective tax rate\n            gdp: 25.5e12 // US GDP in dollars\n        };\n    }\n\n    /**\n     * Calculate costs for all active interventions\n     * @param {Array} interventions - Active interventions\n     * @param {Object} simulationResults - Simulation results with displacement data\n     * @returns {Object} Cost analysis results\n     */\n    calculateAllCosts(interventions, simulationResults) {\n        const results = {\n            interventions: [],\n            totalCost: 0,\n            totalRevenue: 0,\n            netCost: 0,\n            totalJobsSaved: 0,\n            costPerJobSaved: 0\n        };\n\n        if (!interventions || interventions.length === 0) {\n            return results;\n        }\n\n        // Get displacement data from simulation - correct path is ai_impact\n        const summary = simulationResults?.summary || {};\n        const jobsDisplaced = summary.ai_impact?.cumulative_displacement || 0;\n        const yearsSimulated = this.getYearsSimulated(simulationResults);\n\n        interventions.forEach(intervention => {\n            const costAnalysis = this.calculateInterventionCost(\n                intervention,\n                jobsDisplaced,\n                yearsSimulated\n            );\n            results.interventions.push(costAnalysis);\n            results.totalCost += costAnalysis.annualCost * yearsSimulated;\n            results.totalRevenue += costAnalysis.annualRevenue * yearsSimulated;\n            results.totalJobsSaved += costAnalysis.estimatedJobsSaved;\n        });\n\n        results.netCost = results.totalCost - results.totalRevenue;\n        results.costPerJobSaved = results.totalJobsSaved > 0\n            ? results.netCost / results.totalJobsSaved\n            : 0;\n\n        return results;\n    }\n\n    /**\n     * Calculate cost for a single intervention\n     */\n    calculateInterventionCost(intervention, jobsDisplaced, years) {\n        const type = intervention.type;\n        const params = intervention.parameters || {};\n\n        let annualCost = 0;\n        let annualRevenue = 0;\n        let estimatedJobsSaved = 0;\n        let description = '';\n\n        switch (type) {\n            case 'ubi':\n                const result = this.calculateUBICost(params, jobsDisplaced);\n                annualCost = result.cost;\n                estimatedJobsSaved = result.jobsSaved;\n                description = result.description;\n                break;\n\n            case 'job_retraining':\n                const retraining = this.calculateRetrainingCost(params, jobsDisplaced, years);\n                annualCost = retraining.cost;\n                estimatedJobsSaved = retraining.jobsSaved;\n                description = retraining.description;\n                break;\n\n            case 'wage_subsidy':\n                const subsidy = this.calculateWageSubsidyCost(params, jobsDisplaced);\n                annualCost = subsidy.cost;\n                estimatedJobsSaved = subsidy.jobsSaved;\n                description = subsidy.description;\n                break;\n\n            case 'reduced_workweek':\n                const workweek = this.calculateReducedWorkweekCost(params);\n                annualCost = workweek.cost;\n                estimatedJobsSaved = workweek.jobsSaved;\n                description = workweek.description;\n                break;\n\n            case 'robot_tax':\n                const robotTax = this.calculateRobotTaxRevenue(params, jobsDisplaced);\n                annualRevenue = robotTax.revenue;\n                estimatedJobsSaved = robotTax.jobsSaved;\n                description = robotTax.description;\n                break;\n\n            case 'education_subsidy':\n                const education = this.calculateEducationSubsidyCost(params);\n                annualCost = education.cost;\n                estimatedJobsSaved = education.jobsSaved;\n                description = education.description;\n                break;\n\n            default:\n                description = 'Cost model not available for this intervention';\n        }\n\n        const roi = annualCost > 0 && estimatedJobsSaved > 0\n            ? (estimatedJobsSaved * this.assumptions.averageWage) / annualCost\n            : annualRevenue > 0 ? 'Revenue generating' : 0;\n\n        return {\n            name: intervention.name,\n            type: type,\n            annualCost,\n            annualRevenue,\n            netAnnualCost: annualCost - annualRevenue,\n            estimatedJobsSaved,\n            costPerJob: estimatedJobsSaved > 0 ? (annualCost - annualRevenue) / estimatedJobsSaved : 0,\n            roi,\n            description\n        };\n    }\n\n    /**\n     * Calculate UBI costs\n     */\n    calculateUBICost(params, jobsDisplaced) {\n        const monthlyAmount = params.monthly_amount || 1000;\n        const annualAmount = monthlyAmount * 12;\n\n        // If phase_out_threshold is 0, it's truly universal\n        const phaseOut = params.phase_out_threshold || 0;\n        const eligiblePopulation = phaseOut === 0\n            ? this.assumptions.adultPopulation\n            : this.assumptions.adultPopulation * 0.7; // Assume 70% eligible with means testing\n\n        const grossCost = eligiblePopulation * annualAmount;\n\n        // Economic effects (stimulated consumption, reduced social costs)\n        const economicBenefit = grossCost * 0.15; // Conservative multiplier\n        const reducedSocialCosts = jobsDisplaced * 15000; // Reduced welfare, healthcare, crime costs\n\n        const netCost = grossCost - economicBenefit - reducedSocialCosts;\n\n        // Jobs \"saved\" through entrepreneurship and consumer spending\n        const jobsFromSpending = Math.floor((grossCost * 0.7) / this.assumptions.averageWage * 0.1);\n\n        return {\n            cost: netCost,\n            jobsSaved: jobsFromSpending,\n            description: `$${monthlyAmount}/month to ${this.formatNumber(eligiblePopulation)} adults. Gross: $${this.formatNumber(grossCost)}/yr`\n        };\n    }\n\n    /**\n     * Calculate job retraining costs\n     */\n    calculateRetrainingCost(params, jobsDisplaced, years) {\n        const fundingPerWorker = params.funding_per_worker || 10000;\n        const successRate = (params.success_rate || 60) / 100;\n\n        // Annual participants based on displacement\n        const annualParticipants = Math.ceil(jobsDisplaced / years);\n        const annualCost = annualParticipants * fundingPerWorker;\n\n        // Jobs saved = successful retraining completers\n        const jobsSaved = Math.floor(annualParticipants * successRate);\n\n        return {\n            cost: annualCost,\n            jobsSaved: jobsSaved,\n            description: `$${this.formatNumber(fundingPerWorker)} per worker, ${annualParticipants.toLocaleString()} annual participants, ${Math.round(successRate * 100)}% success rate`\n        };\n    }\n\n    /**\n     * Calculate wage subsidy costs\n     */\n    calculateWageSubsidyCost(params, jobsDisplaced) {\n        const subsidyRate = (params.subsidy_rate || 25) / 100;\n        const maxWageCovered = params.max_wage_covered || 50000;\n\n        // Assume subsidy covers jobs that would otherwise be displaced\n        const jobsCovered = Math.floor(jobsDisplaced * 0.8); // 80% of at-risk jobs\n        const avgSubsidy = Math.min(this.assumptions.averageWage, maxWageCovered) * subsidyRate;\n        const annualCost = jobsCovered * avgSubsidy;\n\n        // Jobs saved = jobs covered that wouldn't exist without subsidy\n        const jobsSaved = Math.floor(jobsCovered * 0.7); // 70% effectiveness\n\n        return {\n            cost: annualCost,\n            jobsSaved: jobsSaved,\n            description: `${Math.round(subsidyRate * 100)}% subsidy on wages up to $${this.formatNumber(maxWageCovered)}, covering ${jobsCovered.toLocaleString()} jobs`\n        };\n    }\n\n    /**\n     * Calculate reduced workweek costs\n     */\n    calculateReducedWorkweekCost(params) {\n        const targetHours = params.target_hours || 32;\n        const currentHours = this.assumptions.avgHoursPerWeek;\n        const hourReduction = (currentHours - targetHours) / currentHours;\n\n        // Government cost depends on wage adjustment approach\n        const wageAdjustment = params.wage_adjustment || 'partial_subsidy';\n        let costMultiplier = 0;\n\n        switch (wageAdjustment) {\n            case 'full_wage':\n                costMultiplier = hourReduction * 0.5; // Gov covers half the gap\n                break;\n            case 'partial_subsidy':\n                costMultiplier = hourReduction * 0.25;\n                break;\n            case 'proportional':\n                costMultiplier = 0; // No gov cost, workers accept lower pay\n                break;\n        }\n\n        const annualCost = this.assumptions.workingPopulation * this.assumptions.averageWage * costMultiplier;\n\n        // Jobs created by spreading work\n        const jobsCreated = Math.floor(this.assumptions.workingPopulation * hourReduction * 0.6); // 60% of theoretical max\n\n        return {\n            cost: annualCost,\n            jobsSaved: jobsCreated,\n            description: `${targetHours}hr week (from ${currentHours}hrs), ${wageAdjustment.replace('_', ' ')} approach`\n        };\n    }\n\n    /**\n     * Calculate robot tax revenue\n     */\n    calculateRobotTaxRevenue(params, jobsDisplaced) {\n        const taxRate = (params.tax_rate || 5) / 100;\n\n        // Revenue based on labor cost savings from automation\n        const avgLaborCost = this.assumptions.averageWage * 1.3; // Include benefits\n        const laborSavings = jobsDisplaced * avgLaborCost;\n        const annualRevenue = laborSavings * taxRate;\n\n        // Slight slowdown in automation = jobs \"saved\"\n        const automationSlowdown = taxRate * 0.1; // 10% of tax rate slows adoption\n        const jobsSaved = Math.floor(jobsDisplaced * automationSlowdown);\n\n        return {\n            revenue: annualRevenue,\n            jobsSaved: jobsSaved,\n            description: `${Math.round(taxRate * 100)}% tax on automation savings, generating $${this.formatNumber(annualRevenue)}/yr in revenue`\n        };\n    }\n\n    /**\n     * Calculate education subsidy costs\n     */\n    calculateEducationSubsidyCost(params) {\n        const fundingLevel = params.funding_increase || 20;\n        const currentEducationSpending = 800e9; // ~$800B current US education spending\n\n        const additionalSpending = currentEducationSpending * (fundingLevel / 100);\n\n        // Long-term job effects (10-20 year horizon compressed)\n        const graduatesPerYear = 4000000; // Approx college graduates\n        const improvedOutcomes = graduatesPerYear * 0.05; // 5% better employment outcomes\n\n        return {\n            cost: additionalSpending,\n            jobsSaved: Math.floor(improvedOutcomes),\n            description: `${fundingLevel}% increase in education funding, improving outcomes for ${this.formatNumber(improvedOutcomes)} graduates annually`\n        };\n    }\n\n    /**\n     * Get years simulated from results\n     */\n    getYearsSimulated(results) {\n        if (!results?.scenario?.timeframe) return 5;\n        const { start_year, end_year } = results.scenario.timeframe;\n        return end_year - start_year;\n    }\n\n    /**\n     * Format large numbers\n     */\n    formatNumber(n) {\n        if (n >= 1e12) return '$' + (n / 1e12).toFixed(1) + 'T';\n        if (n >= 1e9) return '$' + (n / 1e9).toFixed(1) + 'B';\n        if (n >= 1e6) return '$' + (n / 1e6).toFixed(1) + 'M';\n        if (n >= 1e3) return '$' + (n / 1e3).toFixed(1) + 'K';\n        return '$' + n.toFixed(0);\n    }\n\n    /**\n     * Generate summary HTML\n     */\n    generateSummaryHTML(analysis) {\n        if (!analysis || analysis.interventions.length === 0) {\n            return `\n                <div style=\"text-align: center; padding: 24px; color: var(--gray-500);\">\n                    <p>No interventions active. Add interventions to see cost analysis.</p>\n                </div>\n            `;\n        }\n\n        const interventionRows = analysis.interventions.map(i => `\n            <tr>\n                <td><strong>${i.name}</strong></td>\n                <td style=\"text-align: right;\">${i.annualCost > 0 ? this.formatNumber(i.annualCost) : '-'}</td>\n                <td style=\"text-align: right; color: var(--secondary);\">${i.annualRevenue > 0 ? this.formatNumber(i.annualRevenue) : '-'}</td>\n                <td style=\"text-align: right;\">${i.estimatedJobsSaved.toLocaleString()}</td>\n                <td style=\"text-align: right;\">${i.costPerJob > 0 ? this.formatNumber(i.costPerJob) : 'N/A'}</td>\n                <td style=\"text-align: right;\">${typeof i.roi === 'number' ? i.roi.toFixed(2) + 'x' : i.roi}</td>\n            </tr>\n        `).join('');\n\n        return `\n            <div style=\"margin-bottom: 24px;\">\n                <!-- Summary Cards -->\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 24px;\">\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Total Cost</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--danger);\">${this.formatNumber(analysis.totalCost)}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Tax Revenue</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--secondary);\">${this.formatNumber(analysis.totalRevenue)}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Net Cost</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--gray-900);\">${this.formatNumber(analysis.netCost)}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Jobs Saved</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--primary);\">${analysis.totalJobsSaved.toLocaleString()}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Cost Per Job</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--warning);\">${this.formatNumber(analysis.costPerJobSaved)}</div>\n                    </div>\n                </div>\n\n                <!-- Detailed Table -->\n                <table class=\"data-table\" style=\"font-size: 0.875rem;\">\n                    <thead>\n                        <tr>\n                            <th>Intervention</th>\n                            <th style=\"text-align: right;\">Annual Cost</th>\n                            <th style=\"text-align: right;\">Revenue</th>\n                            <th style=\"text-align: right;\">Jobs Saved</th>\n                            <th style=\"text-align: right;\">Cost/Job</th>\n                            <th style=\"text-align: right;\">ROI</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${interventionRows}\n                    </tbody>\n                </table>\n\n                <p style=\"font-size: 0.75rem; color: var(--gray-400); margin-top: 12px;\">\n                    * Costs are estimates based on economic models. Actual costs depend on implementation details.\n                    ROI = (Jobs Saved  Avg Wage) / Net Cost. Values >1 indicate positive economic return.\n                </p>\n            </div>\n        `;\n    }\n}\n\n// Global instance\nconst interventionCostCalculator = new InterventionCostCalculator();\n\n// Export for ES modules\nexport { InterventionCostCalculator, interventionCostCalculator };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.InterventionCostCalculator = InterventionCostCalculator;\n    window.interventionCostCalculator = interventionCostCalculator;\n}\n","/**\n * Timeline Player\n * Animated playback of simulation results through time with visual graphs\n */\n\nclass TimelinePlayer {\n    constructor() {\n        this.isPlaying = false;\n        this.currentYearIndex = 0;\n        this.playbackSpeed = 1000; // ms per year\n        this.playbackInterval = null;\n        this.simulationData = null;\n        this.years = [];\n        this.onYearChange = null;\n        this.onPlayStateChange = null;\n    }\n\n    /**\n     * Initialize the player with simulation data\n     * @param {Object} simulationResults - Results from simulation engine\n     */\n    initialize(simulationResults) {\n        // The simulation stores yearly data in results.results array\n        const yearlyData = simulationResults?.results || simulationResults?.timeline;\n        if (!yearlyData || yearlyData.length === 0) {\n            console.warn('No timeline data available');\n            return false;\n        }\n\n        // Store the data with timeline property for easier access\n        this.simulationData = {\n            ...simulationResults,\n            timeline: yearlyData\n        };\n        this.years = yearlyData.map(t => t.year);\n        this.currentYearIndex = 0;\n        this.isPlaying = false;\n\n        return true;\n    }\n\n    /**\n     * Get current year data\n     */\n    getCurrentYearData() {\n        if (!this.simulationData || !this.simulationData.timeline) {\n            return null;\n        }\n        return this.simulationData.timeline[this.currentYearIndex];\n    }\n\n    /**\n     * Get data for a specific year index\n     */\n    getYearData(index) {\n        if (!this.simulationData || !this.simulationData.timeline) {\n            return null;\n        }\n        return this.simulationData.timeline[Math.min(index, this.simulationData.timeline.length - 1)];\n    }\n\n    /**\n     * Get all timeline data\n     */\n    getAllData() {\n        return this.simulationData?.timeline || [];\n    }\n\n    /**\n     * Start playback\n     */\n    play() {\n        if (this.isPlaying) return;\n\n        this.isPlaying = true;\n        if (this.onPlayStateChange) {\n            this.onPlayStateChange(true);\n        }\n\n        this.playbackInterval = setInterval(() => {\n            if (this.currentYearIndex < this.years.length - 1) {\n                this.currentYearIndex++;\n                this.emitYearChange();\n            } else {\n                this.pause();\n                // Reset to beginning for next play\n                this.currentYearIndex = 0;\n                this.emitYearChange();\n            }\n        }, this.playbackSpeed);\n    }\n\n    /**\n     * Pause playback\n     */\n    pause() {\n        this.isPlaying = false;\n        if (this.playbackInterval) {\n            clearInterval(this.playbackInterval);\n            this.playbackInterval = null;\n        }\n        if (this.onPlayStateChange) {\n            this.onPlayStateChange(false);\n        }\n    }\n\n    /**\n     * Toggle play/pause\n     */\n    toggle() {\n        if (this.isPlaying) {\n            this.pause();\n        } else {\n            this.play();\n        }\n    }\n\n    /**\n     * Seek to specific year index\n     */\n    seekTo(index) {\n        this.pause();\n        this.currentYearIndex = Math.max(0, Math.min(index, this.years.length - 1));\n        this.emitYearChange();\n    }\n\n    /**\n     * Seek to specific year\n     */\n    seekToYear(year) {\n        const index = this.years.indexOf(year);\n        if (index !== -1) {\n            this.seekTo(index);\n        }\n    }\n\n    /**\n     * Step forward one year\n     */\n    stepForward() {\n        this.pause();\n        if (this.currentYearIndex < this.years.length - 1) {\n            this.currentYearIndex++;\n            this.emitYearChange();\n        }\n    }\n\n    /**\n     * Step backward one year\n     */\n    stepBackward() {\n        this.pause();\n        if (this.currentYearIndex > 0) {\n            this.currentYearIndex--;\n            this.emitYearChange();\n        }\n    }\n\n    /**\n     * Go to first year\n     */\n    goToStart() {\n        this.pause();\n        this.currentYearIndex = 0;\n        this.emitYearChange();\n    }\n\n    /**\n     * Go to last year\n     */\n    goToEnd() {\n        this.pause();\n        this.currentYearIndex = this.years.length - 1;\n        this.emitYearChange();\n    }\n\n    /**\n     * Set playback speed\n     * @param {number} speed - Milliseconds per year (lower = faster)\n     */\n    setSpeed(speed) {\n        this.playbackSpeed = speed;\n        if (this.isPlaying) {\n            this.pause();\n            this.play();\n        }\n    }\n\n    /**\n     * Emit year change event\n     */\n    emitYearChange() {\n        if (this.onYearChange) {\n            this.onYearChange(this.currentYearIndex, this.getCurrentYearData());\n        }\n    }\n\n    /**\n     * Get progress percentage (0-100)\n     */\n    getProgress() {\n        if (this.years.length <= 1) return 100;\n        return (this.currentYearIndex / (this.years.length - 1)) * 100;\n    }\n\n    /**\n     * Destroy the player\n     */\n    destroy() {\n        this.pause();\n        this.simulationData = null;\n        this.years = [];\n        this.onYearChange = null;\n        this.onPlayStateChange = null;\n    }\n}\n\n/**\n * Timeline UI Component with Visual Charts\n * Renders the timeline player controls, display, and animated graphs\n */\nclass TimelineUI {\n    constructor(containerId, player) {\n        this.container = document.getElementById(containerId);\n        this.player = player;\n        this.animatedMetrics = {};\n        this.charts = {};\n        this.metricConfigs = [\n            {\n                key: 'unemployment_rate',\n                label: 'Unemployment Rate',\n                unit: '%',\n                color: '#ef4444',\n                colorLight: 'rgba(239, 68, 68, 0.2)',\n                decimals: 1,\n                extract: (d) => this.getNumber(d.labor_market?.unemployment_rate ?? d.unemployment_rate ?? 0)\n            },\n            {\n                key: 'ai_adoption',\n                label: 'AI Adoption',\n                unit: '%',\n                color: '#10b981',\n                colorLight: 'rgba(16, 185, 129, 0.2)',\n                decimals: 0,\n                extract: (d) => {\n                    const raw = d.ai_adoption;\n                    return (typeof raw === 'object' ? this.getNumber(raw?.rate) : this.getNumber(raw)) * 100;\n                }\n            },\n            {\n                key: 'productivity',\n                label: 'Productivity Growth',\n                unit: '%',\n                color: '#6366f1',\n                colorLight: 'rgba(99, 102, 241, 0.2)',\n                decimals: 1,\n                extract: (d) => {\n                    const raw = d.productivity;\n                    return typeof raw === 'object' ? this.getNumber(raw?.growth_rate) : this.getNumber(raw);\n                }\n            },\n            {\n                key: 'employment',\n                label: 'Total Employment',\n                unit: 'M',\n                color: '#3b82f6',\n                colorLight: 'rgba(59, 130, 246, 0.2)',\n                decimals: 1,\n                extract: (d) => this.getNumber(d.labor_market?.total_employment ?? d.labor_market?.employment ?? d.employment ?? 0) / 1e6,\n                formatValue: (v) => v.toFixed(1) + 'M'\n            }\n        ];\n\n        // Bind player events\n        this.player.onYearChange = (index, data) => this.handleYearChange(index, data);\n        this.player.onPlayStateChange = (isPlaying) => this.handlePlayStateChange(isPlaying);\n    }\n\n    /**\n     * Helper to safely get numeric value\n     */\n    getNumber(val) {\n        if (typeof val === 'number') return val;\n        if (typeof val === 'object' && val !== null) return 0;\n        return parseFloat(val) || 0;\n    }\n\n    /**\n     * Format decimal year as Month Year (e.g., 2025.92 -> \"Nov 2025\")\n     */\n    formatYearAsDate(decimalYear) {\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n                        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        const year = Math.floor(decimalYear);\n        const monthDecimal = (decimalYear - year) * 12;\n        const monthIndex = Math.min(11, Math.floor(monthDecimal));\n        return `${months[monthIndex]} ${year}`;\n    }\n\n    /**\n     * Format decimal year as short label for tick marks\n     */\n    formatYearShort(decimalYear) {\n        const year = Math.floor(decimalYear);\n        const monthDecimal = (decimalYear - year) * 12;\n        const monthIndex = Math.min(11, Math.floor(monthDecimal));\n        // Only show month if not January\n        if (monthIndex === 0) {\n            return `${year}`;\n        }\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n                        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        return `${months[monthIndex]} '${String(year).slice(-2)}`;\n    }\n\n    /**\n     * Extract all metric values from timeline data\n     */\n    extractMetricSeries() {\n        const allData = this.player.getAllData();\n        const series = {};\n\n        for (const config of this.metricConfigs) {\n            series[config.key] = allData.map(d => config.extract(d));\n        }\n\n        return series;\n    }\n\n    /**\n     * Render the timeline UI\n     */\n    render() {\n        if (!this.container) {\n            console.error('Timeline container not found');\n            return;\n        }\n\n        const years = this.player.years;\n        console.log('Rendering timeline with years:', years.length > 0 ? `${years[0]} to ${years[years.length-1]}` : 'empty');\n\n        if (years.length === 0) {\n            this.container.innerHTML = '<p style=\"text-align: center; color: var(--gray-500);\">Run a simulation to see the timeline player.</p>';\n            return;\n        }\n\n        const metricSeries = this.extractMetricSeries();\n        const firstYearFormatted = this.formatYearAsDate(years[0]);\n        const lastYearFormatted = this.formatYearAsDate(years[years.length - 1]);\n\n        // Calculate which ticks should show labels (spread evenly)\n        const labelInterval = Math.max(1, Math.ceil(years.length / 6));\n\n        this.container.innerHTML = `\n            <div class=\"timeline-player\">\n                <!-- Playback Controls at Top -->\n                <div class=\"timeline-controls-bar\">\n                    <div class=\"timeline-controls\">\n                        <button class=\"timeline-btn\" onclick=\"timelinePlayer.goToStart()\" title=\"Go to start\"></button>\n                        <button class=\"timeline-btn\" onclick=\"timelinePlayer.stepBackward()\" title=\"Previous\"></button>\n                        <button class=\"timeline-btn timeline-btn-play\" id=\"timeline-play-btn\" onclick=\"timelinePlayer.toggle()\" title=\"Play/Pause\">\n                            <span id=\"timeline-play-icon\"></span>\n                        </button>\n                        <button class=\"timeline-btn\" onclick=\"timelinePlayer.stepForward()\" title=\"Next\"></button>\n                        <button class=\"timeline-btn\" onclick=\"timelinePlayer.goToEnd()\" title=\"Go to end\"></button>\n                    </div>\n\n                    <div class=\"timeline-speed-control\">\n                        <label>Speed:</label>\n                        <select class=\"timeline-speed-select\" id=\"timeline-speed\" onchange=\"timelineUI.handleSpeedChange(this.value)\" title=\"Playback speed\">\n                            <option value=\"2000\">0.5x</option>\n                            <option value=\"1000\" selected>1x</option>\n                            <option value=\"500\">2x</option>\n                            <option value=\"250\">4x</option>\n                        </select>\n                    </div>\n                </div>\n\n                <!-- Charts Grid -->\n                <div class=\"timeline-charts-grid\">\n                    ${this.metricConfigs.map(config => this.renderChartCard(config, metricSeries[config.key])).join('')}\n                </div>\n\n                <!-- Visual Timeline Scrubber -->\n                <div class=\"timeline-scrubber\">\n                    <div class=\"timeline-track\">\n                        ${years.map((year, i) => `\n                            <div class=\"timeline-tick ${i === 0 ? 'active' : ''}\"\n                                 data-index=\"${i}\"\n                                 onclick=\"timelineUI.handleTickClick(${i})\"\n                                 title=\"${this.formatYearAsDate(year)}\">\n                                <div class=\"timeline-tick-dot\"></div>\n                            </div>\n                        `).join('')}\n                        <div class=\"timeline-track-line\"></div>\n                        <div class=\"timeline-track-progress\" id=\"timeline-track-progress\"></div>\n                    </div>\n                    <div class=\"timeline-labels\">\n                        <span>${firstYearFormatted}</span>\n                        <span>${lastYearFormatted}</span>\n                    </div>\n                </div>\n\n                <!-- Current Date Display at Bottom -->\n                <div class=\"timeline-date-display\">\n                    <span class=\"timeline-date-value\" id=\"timeline-current-year\">${firstYearFormatted}</span>\n                </div>\n            </div>\n        `;\n\n        // Initialize charts after DOM is ready\n        requestAnimationFrame(() => this.initializeCharts(metricSeries));\n    }\n\n    /**\n     * Render a chart card for a metric\n     */\n    renderChartCard(config, data) {\n        const currentValue = data[0];\n        const formatValue = config.formatValue || ((v) => v.toFixed(config.decimals) + config.unit);\n\n        return `\n            <div class=\"timeline-chart-card\" data-metric=\"${config.key}\">\n                <div class=\"timeline-chart-header\">\n                    <span class=\"timeline-chart-label\">${config.label}</span>\n                    <span class=\"timeline-chart-value\" id=\"chart-value-${config.key}\" style=\"color: ${config.color}\">\n                        ${formatValue(currentValue)}\n                    </span>\n                </div>\n                <div class=\"timeline-chart-container\">\n                    <canvas id=\"chart-${config.key}\" class=\"timeline-chart-canvas\"></canvas>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Initialize canvas charts\n     */\n    initializeCharts(metricSeries) {\n        for (const config of this.metricConfigs) {\n            const canvas = document.getElementById(`chart-${config.key}`);\n            if (!canvas) continue;\n\n            const ctx = canvas.getContext('2d');\n            const data = metricSeries[config.key];\n\n            // Set canvas size\n            const rect = canvas.parentElement.getBoundingClientRect();\n            canvas.width = rect.width * window.devicePixelRatio;\n            canvas.height = rect.height * window.devicePixelRatio;\n            canvas.style.width = rect.width + 'px';\n            canvas.style.height = rect.height + 'px';\n            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\n            // Store chart info\n            this.charts[config.key] = {\n                canvas,\n                ctx,\n                data,\n                config,\n                width: rect.width,\n                height: rect.height\n            };\n\n            this.drawChart(config.key, 0);\n        }\n    }\n\n    /**\n     * Draw a chart with current year highlighted\n     */\n    drawChart(key, currentIndex) {\n        const chart = this.charts[key];\n        if (!chart) return;\n\n        const { ctx, data, config, width, height } = chart;\n        const padding = { top: 10, right: 10, bottom: 10, left: 10 };\n        const chartWidth = width - padding.left - padding.right;\n        const chartHeight = height - padding.top - padding.bottom;\n\n        // Clear canvas\n        ctx.clearRect(0, 0, width, height);\n\n        if (data.length < 2) return;\n\n        // Calculate min/max with some padding\n        const minVal = Math.min(...data);\n        const maxVal = Math.max(...data);\n        const range = maxVal - minVal || 1;\n        const yMin = minVal - range * 0.1;\n        const yMax = maxVal + range * 0.1;\n\n        // Helper to convert data point to canvas coordinates\n        const toX = (i) => padding.left + (i / (data.length - 1)) * chartWidth;\n        const toY = (v) => padding.top + chartHeight - ((v - yMin) / (yMax - yMin)) * chartHeight;\n\n        // Draw filled area up to current index\n        ctx.beginPath();\n        ctx.moveTo(toX(0), toY(data[0]));\n        for (let i = 1; i <= currentIndex; i++) {\n            ctx.lineTo(toX(i), toY(data[i]));\n        }\n        ctx.lineTo(toX(currentIndex), height - padding.bottom);\n        ctx.lineTo(toX(0), height - padding.bottom);\n        ctx.closePath();\n        ctx.fillStyle = config.colorLight;\n        ctx.fill();\n\n        // Draw full line (faded)\n        ctx.beginPath();\n        ctx.moveTo(toX(0), toY(data[0]));\n        for (let i = 1; i < data.length; i++) {\n            ctx.lineTo(toX(i), toY(data[i]));\n        }\n        ctx.strokeStyle = 'rgba(150, 150, 150, 0.3)';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n\n        // Draw active line up to current index\n        ctx.beginPath();\n        ctx.moveTo(toX(0), toY(data[0]));\n        for (let i = 1; i <= currentIndex; i++) {\n            ctx.lineTo(toX(i), toY(data[i]));\n        }\n        ctx.strokeStyle = config.color;\n        ctx.lineWidth = 2;\n        ctx.stroke();\n\n        // Draw current point\n        ctx.beginPath();\n        ctx.arc(toX(currentIndex), toY(data[currentIndex]), 5, 0, Math.PI * 2);\n        ctx.fillStyle = config.color;\n        ctx.fill();\n        ctx.strokeStyle = '#fff';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n\n        // Draw vertical line at current position\n        ctx.beginPath();\n        ctx.moveTo(toX(currentIndex), padding.top);\n        ctx.lineTo(toX(currentIndex), height - padding.bottom);\n        ctx.strokeStyle = 'rgba(150, 150, 150, 0.2)';\n        ctx.lineWidth = 1;\n        ctx.setLineDash([4, 4]);\n        ctx.stroke();\n        ctx.setLineDash([]);\n    }\n\n    /**\n     * Handle year change\n     */\n    handleYearChange(index, data) {\n        // Update year display with formatted date\n        const yearDisplay = document.getElementById('timeline-current-year');\n        if (yearDisplay) {\n            yearDisplay.textContent = this.formatYearAsDate(this.player.years[index]);\n            yearDisplay.classList.add('timeline-year-animate');\n            setTimeout(() => yearDisplay.classList.remove('timeline-year-animate'), 300);\n        }\n\n        // Update timeline ticks\n        const ticks = document.querySelectorAll('.timeline-tick');\n        ticks.forEach((tick, i) => {\n            tick.classList.toggle('active', i <= index);\n            tick.classList.toggle('current', i === index);\n        });\n\n        // Update track progress\n        const progress = document.getElementById('timeline-track-progress');\n        if (progress) {\n            const percentage = this.player.years.length > 1\n                ? (index / (this.player.years.length - 1)) * 100\n                : 0;\n            progress.style.width = percentage + '%';\n        }\n\n        // Update charts\n        for (const config of this.metricConfigs) {\n            this.drawChart(config.key, index);\n\n            // Update value display\n            const valueEl = document.getElementById(`chart-value-${config.key}`);\n            if (valueEl && data) {\n                const value = config.extract(data);\n                const formatValue = config.formatValue || ((v) => v.toFixed(config.decimals) + config.unit);\n                this.animateValue(valueEl, value, formatValue);\n            }\n        }\n    }\n\n    /**\n     * Animate value change\n     */\n    animateValue(el, newValue, formatter) {\n        const key = el.id;\n        const oldValue = this.animatedMetrics[key] ?? newValue;\n        this.animatedMetrics[key] = newValue;\n\n        const duration = 300;\n        const startTime = performance.now();\n\n        const animate = (currentTime) => {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n            const easeProgress = 1 - Math.pow(1 - progress, 3);\n            const currentValue = oldValue + (newValue - oldValue) * easeProgress;\n\n            el.textContent = formatter(currentValue);\n\n            if (progress < 1) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    }\n\n    /**\n     * Handle play state change\n     */\n    handlePlayStateChange(isPlaying) {\n        const playIcon = document.getElementById('timeline-play-icon');\n        const playBtn = document.getElementById('timeline-play-btn');\n\n        if (playIcon) {\n            playIcon.textContent = isPlaying ? '' : '';\n        }\n        if (playBtn) {\n            playBtn.classList.toggle('playing', isPlaying);\n        }\n    }\n\n    /**\n     * Handle tick click\n     */\n    handleTickClick(index) {\n        this.player.seekTo(index);\n    }\n\n    /**\n     * Handle slider change\n     */\n    handleSliderChange(value) {\n        this.player.seekTo(parseInt(value));\n    }\n\n    /**\n     * Handle speed change\n     */\n    handleSpeedChange(value) {\n        this.player.setSpeed(parseInt(value));\n    }\n}\n\n// Global instances\nconst timelinePlayer = new TimelinePlayer();\nlet timelineUI = null;\n\n/**\n * Initialize timeline with simulation results\n */\nfunction initializeTimeline(simulationResults) {\n    console.log('Initializing timeline player...');\n\n    // Check if container exists\n    const container = document.getElementById('timeline-player-container');\n    if (!container) {\n        console.warn('Timeline container not found, retrying...');\n        // Retry after a short delay\n        setTimeout(() => initializeTimeline(simulationResults), 100);\n        return false;\n    }\n\n    if (timelinePlayer.initialize(simulationResults)) {\n        console.log('Timeline player initialized with', timelinePlayer.years.length, 'data points');\n        timelineUI = new TimelineUI('timeline-player-container', timelinePlayer);\n        timelineUI.render();\n        console.log('Timeline UI rendered');\n        return true;\n    } else {\n        console.warn('Failed to initialize timeline player - no data');\n        container.innerHTML = '<p style=\"text-align: center; color: var(--gray-500); padding: 20px;\">No timeline data available.</p>';\n    }\n    return false;\n}\n\n// Export for ES modules\nexport { TimelinePlayer, TimelineUI, initializeTimeline };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.TimelinePlayer = TimelinePlayer;\n    window.TimelineUI = TimelineUI;\n    window.initializeTimeline = initializeTimeline;\n}\n","/**\n * Regional Heat Map Visualization\n * Displays US state-level data with interactive heat map\n */\n\nclass RegionalHeatMap {\n    constructor() {\n        // State coordinates for simplified US map (relative positions)\n        this.statePositions = {\n            WA: { x: 6, y: 2, w: 3, h: 2 },\n            OR: { x: 6, y: 4, w: 3, h: 2 },\n            CA: { x: 5, y: 6, w: 2, h: 4 },\n            NV: { x: 7, y: 6, w: 2, h: 2 },\n            ID: { x: 9, y: 3, w: 2, h: 3 },\n            MT: { x: 11, y: 2, w: 4, h: 2 },\n            WY: { x: 12, y: 4, w: 3, h: 2 },\n            UT: { x: 9, y: 6, w: 2, h: 2 },\n            CO: { x: 12, y: 6, w: 3, h: 2 },\n            AZ: { x: 9, y: 8, w: 2, h: 2 },\n            NM: { x: 11, y: 8, w: 2, h: 2 },\n            ND: { x: 15, y: 2, w: 3, h: 1.5 },\n            SD: { x: 15, y: 3.5, w: 3, h: 1.5 },\n            NE: { x: 15, y: 5, w: 3, h: 1.5 },\n            KS: { x: 15, y: 6.5, w: 3, h: 1.5 },\n            OK: { x: 15, y: 8, w: 3, h: 1.5 },\n            TX: { x: 14, y: 9.5, w: 4, h: 3 },\n            MN: { x: 18, y: 2, w: 2, h: 2 },\n            IA: { x: 18, y: 4, w: 2, h: 1.5 },\n            MO: { x: 18, y: 5.5, w: 2, h: 2 },\n            AR: { x: 18, y: 7.5, w: 2, h: 1.5 },\n            LA: { x: 18, y: 9, w: 2, h: 1.5 },\n            WI: { x: 20, y: 2, w: 2, h: 2 },\n            IL: { x: 20, y: 4, w: 2, h: 2.5 },\n            IN: { x: 22, y: 4, w: 1.5, h: 2 },\n            MI: { x: 22, y: 2, w: 2, h: 2 },\n            OH: { x: 23.5, y: 4, w: 2, h: 2 },\n            KY: { x: 22, y: 6, w: 3, h: 1.5 },\n            TN: { x: 21, y: 7.5, w: 4, h: 1.5 },\n            MS: { x: 20, y: 9, w: 1.5, h: 2 },\n            AL: { x: 21.5, y: 9, w: 1.5, h: 2 },\n            GA: { x: 23, y: 9, w: 2, h: 2 },\n            FL: { x: 24, y: 11, w: 2, h: 2 },\n            SC: { x: 25, y: 8, w: 2, h: 1.5 },\n            NC: { x: 25, y: 6.5, w: 3, h: 1.5 },\n            VA: { x: 26, y: 5, w: 2.5, h: 1.5 },\n            WV: { x: 25, y: 5, w: 1, h: 1.5 },\n            PA: { x: 26, y: 3.5, w: 2.5, h: 1.5 },\n            NY: { x: 27, y: 2, w: 2, h: 1.5 },\n            VT: { x: 29, y: 1, w: 1, h: 1 },\n            NH: { x: 30, y: 1.5, w: 0.8, h: 1 },\n            ME: { x: 30.8, y: 0.5, w: 1.2, h: 2 },\n            MA: { x: 29.5, y: 2.5, w: 1.5, h: 0.8 },\n            RI: { x: 30, y: 3.3, w: 0.8, h: 0.5 },\n            CT: { x: 29, y: 3.3, w: 1, h: 0.7 },\n            NJ: { x: 28.5, y: 4, w: 0.8, h: 1 },\n            DE: { x: 28.5, y: 5, w: 0.5, h: 0.7 },\n            MD: { x: 27.5, y: 5, w: 1, h: 0.8 },\n            AK: { x: 1, y: 10, w: 3, h: 2 },\n            HI: { x: 4, y: 12, w: 2, h: 1 }\n        };\n\n        // Color scales\n        this.colorScales = {\n            unemployment: {\n                stops: [\n                    { value: 3, color: '#10b981' },   // Green - low\n                    { value: 5, color: '#84cc16' },   // Light green\n                    { value: 7, color: '#fbbf24' },   // Yellow\n                    { value: 9, color: '#f97316' },   // Orange\n                    { value: 12, color: '#ef4444' }   // Red - high\n                ]\n            },\n            displacement: {\n                stops: [\n                    { value: 0, color: '#10b981' },\n                    { value: 0.02, color: '#84cc16' },\n                    { value: 0.05, color: '#fbbf24' },\n                    { value: 0.08, color: '#f97316' },\n                    { value: 0.12, color: '#ef4444' }\n                ]\n            },\n            aiAdoption: {\n                stops: [\n                    { value: 0.2, color: '#94a3b8' },\n                    { value: 0.4, color: '#60a5fa' },\n                    { value: 0.6, color: '#3b82f6' },\n                    { value: 0.8, color: '#2563eb' },\n                    { value: 1.0, color: '#1d4ed8' }\n                ]\n            },\n            wageChange: {\n                stops: [\n                    { value: -5, color: '#ef4444' },\n                    { value: -2, color: '#f97316' },\n                    { value: 0, color: '#fbbf24' },\n                    { value: 2, color: '#84cc16' },\n                    { value: 5, color: '#10b981' }\n                ]\n            }\n        };\n\n        this.selectedMetric = 'unemployment';\n        this.regionalData = null;\n    }\n\n    /**\n     * Initialize the heat map with regional data\n     */\n    initialize(results) {\n        this.regionalData = this.extractRegionalData(results);\n    }\n\n    /**\n     * Extract regional data from simulation results\n     */\n    extractRegionalData(results) {\n        const data = {};\n\n        // If we have regional data from the simulation\n        if (results.regionalData) {\n            return results.regionalData;\n        }\n\n        // Otherwise, generate synthetic regional data based on simulation summary\n        if (typeof US_REGIONS !== 'undefined') {\n            const summary = results.summary;\n            const baseUR = summary.final?.unemploymentRate || 0.05;\n            const baseDisplacement = (summary.totalLayoffs || 0) / 150000000; // Relative to workforce\n\n            US_REGIONS.forEach(region => {\n                // Adjust based on region characteristics\n                let urMultiplier = 1;\n                let displacementMultiplier = 1;\n                let aiAdoption = 0.3;\n                let wageChange = 0;\n\n                // Tech hubs have lower unemployment but faster AI adoption\n                if (region.techHub) {\n                    urMultiplier = 0.8;\n                    displacementMultiplier = 0.7;\n                    aiAdoption = 0.6;\n                    wageChange = 2;\n                }\n\n                // High cost of living areas have different dynamics\n                if (region.costOfLiving > 1.2) {\n                    urMultiplier *= 0.9;\n                    wageChange += 1;\n                }\n\n                // Manufacturing states face more displacement\n                const manufacturingStates = ['MI', 'OH', 'IN', 'WI', 'PA'];\n                if (manufacturingStates.includes(region.abbrev)) {\n                    displacementMultiplier = 1.3;\n                    urMultiplier = 1.2;\n                    wageChange -= 1;\n                }\n\n                // Rural states\n                if (region.population < 2) {\n                    urMultiplier *= 1.1;\n                    aiAdoption *= 0.7;\n                }\n\n                // Add some randomness for visual interest\n                const noise = () => 0.9 + Math.random() * 0.2;\n\n                data[region.abbrev] = {\n                    name: region.name,\n                    unemployment: (baseUR * 100 * urMultiplier * noise()).toFixed(1),\n                    displacement: (baseDisplacement * displacementMultiplier * noise()).toFixed(3),\n                    aiAdoption: (aiAdoption * noise()).toFixed(2),\n                    wageChange: (wageChange * noise()).toFixed(1),\n                    population: region.population,\n                    techHub: region.techHub,\n                    costOfLiving: region.costOfLiving\n                };\n            });\n        }\n\n        return data;\n    }\n\n    /**\n     * Get color for a value based on color scale\n     */\n    getColor(value, scaleName) {\n        const scale = this.colorScales[scaleName];\n        if (!scale) return '#94a3b8';\n\n        const stops = scale.stops;\n\n        // Handle edge cases\n        if (value <= stops[0].value) return stops[0].color;\n        if (value >= stops[stops.length - 1].value) return stops[stops.length - 1].color;\n\n        // Find the two stops to interpolate between\n        for (let i = 0; i < stops.length - 1; i++) {\n            if (value >= stops[i].value && value <= stops[i + 1].value) {\n                const t = (value - stops[i].value) / (stops[i + 1].value - stops[i].value);\n                return this.interpolateColor(stops[i].color, stops[i + 1].color, t);\n            }\n        }\n\n        return '#94a3b8';\n    }\n\n    /**\n     * Interpolate between two hex colors\n     */\n    interpolateColor(color1, color2, t) {\n        const r1 = parseInt(color1.slice(1, 3), 16);\n        const g1 = parseInt(color1.slice(3, 5), 16);\n        const b1 = parseInt(color1.slice(5, 7), 16);\n\n        const r2 = parseInt(color2.slice(1, 3), 16);\n        const g2 = parseInt(color2.slice(3, 5), 16);\n        const b2 = parseInt(color2.slice(5, 7), 16);\n\n        const r = Math.round(r1 + (r2 - r1) * t);\n        const g = Math.round(g1 + (g2 - g1) * t);\n        const b = Math.round(b1 + (b2 - b1) * t);\n\n        return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n    }\n\n    /**\n     * Render the heat map\n     */\n    render(containerId, metric = 'unemployment') {\n        this.selectedMetric = metric;\n        const container = document.getElementById(containerId);\n        if (!container || !this.regionalData) return;\n\n        const scale = 20; // pixels per unit\n        const width = 35 * scale;\n        const height = 15 * scale;\n\n        let html = `\n            <div style=\"margin-bottom: 16px;\">\n                <div style=\"display: flex; gap: 8px; flex-wrap: wrap;\">\n                    <button class=\"heatmap-btn ${metric === 'unemployment' ? 'active' : ''}\" onclick=\"regionalHeatMap.render('${containerId}', 'unemployment')\">Unemployment</button>\n                    <button class=\"heatmap-btn ${metric === 'displacement' ? 'active' : ''}\" onclick=\"regionalHeatMap.render('${containerId}', 'displacement')\">Displacement</button>\n                    <button class=\"heatmap-btn ${metric === 'aiAdoption' ? 'active' : ''}\" onclick=\"regionalHeatMap.render('${containerId}', 'aiAdoption')\">AI Adoption</button>\n                    <button class=\"heatmap-btn ${metric === 'wageChange' ? 'active' : ''}\" onclick=\"regionalHeatMap.render('${containerId}', 'wageChange')\">Wage Change</button>\n                </div>\n            </div>\n            <style>\n                .heatmap-btn {\n                    padding: 8px 16px;\n                    border: 1px solid var(--gray-300);\n                    background: var(--gray-50);\n                    border-radius: 6px;\n                    cursor: pointer;\n                    font-size: 0.875rem;\n                    transition: all 0.2s;\n                }\n                .heatmap-btn:hover {\n                    background: var(--gray-100);\n                }\n                .heatmap-btn.active {\n                    background: var(--primary);\n                    color: white;\n                    border-color: var(--primary);\n                }\n                .state-rect {\n                    cursor: pointer;\n                    transition: all 0.2s;\n                }\n                .state-rect:hover {\n                    filter: brightness(1.1);\n                    stroke-width: 2;\n                }\n            </style>\n            <div style=\"position: relative; overflow-x: auto;\">\n                <svg viewBox=\"0 0 ${width} ${height}\" style=\"width: 100%; max-width: ${width}px; height: auto;\">\n        `;\n\n        // Draw states\n        Object.entries(this.statePositions).forEach(([abbrev, pos]) => {\n            const data = this.regionalData[abbrev];\n            if (!data) return;\n\n            let value;\n            switch (metric) {\n                case 'unemployment':\n                    value = parseFloat(data.unemployment);\n                    break;\n                case 'displacement':\n                    value = parseFloat(data.displacement);\n                    break;\n                case 'aiAdoption':\n                    value = parseFloat(data.aiAdoption);\n                    break;\n                case 'wageChange':\n                    value = parseFloat(data.wageChange);\n                    break;\n            }\n\n            const color = this.getColor(value, metric);\n\n            html += `\n                <g class=\"state-group\" data-state=\"${abbrev}\">\n                    <rect\n                        class=\"state-rect\"\n                        x=\"${pos.x * scale}\"\n                        y=\"${pos.y * scale}\"\n                        width=\"${pos.w * scale}\"\n                        height=\"${pos.h * scale}\"\n                        fill=\"${color}\"\n                        stroke=\"white\"\n                        stroke-width=\"1\"\n                        rx=\"3\"\n                        onclick=\"regionalHeatMap.showStateDetails('${abbrev}')\"\n                    />\n                    <text\n                        x=\"${(pos.x + pos.w / 2) * scale}\"\n                        y=\"${(pos.y + pos.h / 2 + 0.15) * scale}\"\n                        text-anchor=\"middle\"\n                        dominant-baseline=\"middle\"\n                        font-size=\"${Math.min(pos.w, pos.h) * scale * 0.35}\"\n                        fill=\"white\"\n                        font-weight=\"600\"\n                        style=\"text-shadow: 0 1px 2px rgba(0,0,0,0.3); pointer-events: none;\"\n                    >${abbrev}</text>\n                </g>\n            `;\n        });\n\n        html += '</svg></div>';\n\n        // Legend\n        html += this.renderLegend(metric);\n\n        // State details panel\n        html += '<div id=\"stateDetailsPanel\" style=\"display: none; margin-top: 16px;\"></div>';\n\n        container.innerHTML = html;\n    }\n\n    /**\n     * Render the legend\n     */\n    renderLegend(metric) {\n        const scale = this.colorScales[metric];\n        if (!scale) return '';\n\n        const labels = {\n            unemployment: 'Unemployment Rate (%)',\n            displacement: 'Job Displacement Rate',\n            aiAdoption: 'AI Adoption Rate',\n            wageChange: 'Wage Change (%)'\n        };\n\n        const formatValue = (val) => {\n            if (metric === 'displacement') return (val * 100).toFixed(0) + '%';\n            if (metric === 'aiAdoption') return (val * 100).toFixed(0) + '%';\n            return val + '%';\n        };\n\n        let html = `\n            <div style=\"margin-top: 16px; padding: 12px; background: var(--gray-50); border-radius: 8px;\">\n                <div style=\"font-size: 0.875rem; font-weight: 600; color: var(--gray-700); margin-bottom: 8px;\">${labels[metric]}</div>\n                <div style=\"display: flex; align-items: center; gap: 4px;\">\n        `;\n\n        // Create gradient bar\n        html += '<div style=\"flex: 1; height: 12px; border-radius: 6px; background: linear-gradient(to right';\n        scale.stops.forEach((stop, i) => {\n            const percent = (i / (scale.stops.length - 1)) * 100;\n            html += `, ${stop.color} ${percent}%`;\n        });\n        html += ');\"></div>';\n\n        html += '</div><div style=\"display: flex; justify-content: space-between; margin-top: 4px; font-size: 0.75rem; color: var(--gray-500);\">';\n\n        scale.stops.forEach(stop => {\n            html += `<span>${formatValue(stop.value)}</span>`;\n        });\n\n        html += '</div></div>';\n\n        return html;\n    }\n\n    /**\n     * Show detailed information for a state\n     */\n    showStateDetails(abbrev) {\n        const panel = document.getElementById('stateDetailsPanel');\n        const data = this.regionalData[abbrev];\n\n        if (!panel || !data) return;\n\n        panel.style.display = 'block';\n\n        panel.innerHTML = `\n            <div style=\"padding: 16px; background: var(--gray-50); border-radius: 8px; border-left: 4px solid var(--primary);\">\n                <div style=\"display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;\">\n                    <div>\n                        <h4 style=\"margin: 0; color: var(--gray-800);\">${data.name} (${abbrev})</h4>\n                        <div style=\"font-size: 0.875rem; color: var(--gray-500);\">\n                            Pop: ${data.population}M ${data.techHub ? ' Tech Hub' : ''}  COL: ${(data.costOfLiving * 100).toFixed(0)}%\n                        </div>\n                    </div>\n                    <button onclick=\"document.getElementById('stateDetailsPanel').style.display='none'\" style=\"background: none; border: none; cursor: pointer; font-size: 1.2rem; color: var(--gray-400);\"></button>\n                </div>\n                <div style=\"display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;\">\n                    <div style=\"text-align: center; padding: 12px; background: white; border-radius: 8px;\">\n                        <div style=\"font-size: 1.5rem; font-weight: 700; color: ${parseFloat(data.unemployment) > 7 ? 'var(--danger)' : 'var(--gray-700)'};\">${data.unemployment}%</div>\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500);\">Unemployment</div>\n                    </div>\n                    <div style=\"text-align: center; padding: 12px; background: white; border-radius: 8px;\">\n                        <div style=\"font-size: 1.5rem; font-weight: 700; color: var(--gray-700);\">${(parseFloat(data.displacement) * 100).toFixed(1)}%</div>\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500);\">Displacement</div>\n                    </div>\n                    <div style=\"text-align: center; padding: 12px; background: white; border-radius: 8px;\">\n                        <div style=\"font-size: 1.5rem; font-weight: 700; color: var(--primary);\">${(parseFloat(data.aiAdoption) * 100).toFixed(0)}%</div>\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500);\">AI Adoption</div>\n                    </div>\n                    <div style=\"text-align: center; padding: 12px; background: white; border-radius: 8px;\">\n                        <div style=\"font-size: 1.5rem; font-weight: 700; color: ${parseFloat(data.wageChange) >= 0 ? 'var(--secondary)' : 'var(--danger)'};\">${data.wageChange > 0 ? '+' : ''}${data.wageChange}%</div>\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500);\">Wage Change</div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Get summary statistics\n     */\n    getSummaryStats() {\n        if (!this.regionalData) return null;\n\n        const values = Object.values(this.regionalData);\n\n        const getAvg = (key) => values.reduce((sum, v) => sum + parseFloat(v[key]), 0) / values.length;\n        const getMax = (key) => Math.max(...values.map(v => parseFloat(v[key])));\n        const getMin = (key) => Math.min(...values.map(v => parseFloat(v[key])));\n\n        const findState = (key, findMax) => {\n            const sorted = [...values].sort((a, b) =>\n                findMax ? parseFloat(b[key]) - parseFloat(a[key]) : parseFloat(a[key]) - parseFloat(b[key])\n            );\n            return sorted[0]?.name;\n        };\n\n        return {\n            unemployment: {\n                avg: getAvg('unemployment').toFixed(1),\n                max: getMax('unemployment').toFixed(1),\n                min: getMin('unemployment').toFixed(1),\n                highest: findState('unemployment', true),\n                lowest: findState('unemployment', false)\n            },\n            displacement: {\n                avg: (getAvg('displacement') * 100).toFixed(1),\n                max: (getMax('displacement') * 100).toFixed(1),\n                min: (getMin('displacement') * 100).toFixed(1),\n                highest: findState('displacement', true),\n                lowest: findState('displacement', false)\n            },\n            aiAdoption: {\n                avg: (getAvg('aiAdoption') * 100).toFixed(0),\n                max: (getMax('aiAdoption') * 100).toFixed(0),\n                min: (getMin('aiAdoption') * 100).toFixed(0),\n                highest: findState('aiAdoption', true),\n                lowest: findState('aiAdoption', false)\n            },\n            techHubCount: values.filter(v => v.techHub).length,\n            statesAboveNationalUR: values.filter(v => parseFloat(v.unemployment) > getAvg('unemployment')).length\n        };\n    }\n\n    /**\n     * Render summary statistics panel\n     */\n    renderSummaryPanel(containerId) {\n        const container = document.getElementById(containerId);\n        const stats = this.getSummaryStats();\n\n        if (!container || !stats) return;\n\n        container.innerHTML = `\n            <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;\">\n                <div style=\"padding: 16px; background: var(--gray-50); border-radius: 8px;\">\n                    <div style=\"font-size: 0.875rem; font-weight: 600; color: var(--gray-700); margin-bottom: 12px;\">Unemployment</div>\n                    <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; text-align: center;\">\n                        <div>\n                            <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--secondary);\">${stats.unemployment.min}%</div>\n                            <div style=\"font-size: 0.65rem; color: var(--gray-500);\">Lowest</div>\n                        </div>\n                        <div>\n                            <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--gray-600);\">${stats.unemployment.avg}%</div>\n                            <div style=\"font-size: 0.65rem; color: var(--gray-500);\">Average</div>\n                        </div>\n                        <div>\n                            <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--danger);\">${stats.unemployment.max}%</div>\n                            <div style=\"font-size: 0.65rem; color: var(--gray-500);\">Highest</div>\n                        </div>\n                    </div>\n                    <div style=\"font-size: 0.75rem; color: var(--gray-500); margin-top: 8px;\">\n                        Best: ${stats.unemployment.lowest}  Worst: ${stats.unemployment.highest}\n                    </div>\n                </div>\n                <div style=\"padding: 16px; background: var(--gray-50); border-radius: 8px;\">\n                    <div style=\"font-size: 0.875rem; font-weight: 600; color: var(--gray-700); margin-bottom: 12px;\">AI Adoption</div>\n                    <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; text-align: center;\">\n                        <div>\n                            <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--gray-400);\">${stats.aiAdoption.min}%</div>\n                            <div style=\"font-size: 0.65rem; color: var(--gray-500);\">Lowest</div>\n                        </div>\n                        <div>\n                            <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--primary);\">${stats.aiAdoption.avg}%</div>\n                            <div style=\"font-size: 0.65rem; color: var(--gray-500);\">Average</div>\n                        </div>\n                        <div>\n                            <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--primary);\">${stats.aiAdoption.max}%</div>\n                            <div style=\"font-size: 0.65rem; color: var(--gray-500);\">Highest</div>\n                        </div>\n                    </div>\n                    <div style=\"font-size: 0.75rem; color: var(--gray-500); margin-top: 8px;\">\n                        ${stats.techHubCount} tech hub states driving adoption\n                    </div>\n                </div>\n                <div style=\"padding: 16px; background: var(--gray-50); border-radius: 8px;\">\n                    <div style=\"font-size: 0.875rem; font-weight: 600; color: var(--gray-700); margin-bottom: 12px;\">Regional Disparity</div>\n                    <div style=\"text-align: center; padding: 8px 0;\">\n                        <div style=\"font-size: 2rem; font-weight: 700; color: var(--warning);\">${stats.statesAboveNationalUR}</div>\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500);\">states above national average</div>\n                    </div>\n                    <div style=\"font-size: 0.75rem; color: var(--gray-500); margin-top: 8px;\">\n                        UR range: ${stats.unemployment.min}% - ${stats.unemployment.max}%\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n}\n\n// Global instance\nconst regionalHeatMap = new RegionalHeatMap();\n\n// Export for ES modules\nexport { RegionalHeatMap, regionalHeatMap };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.RegionalHeatMap = RegionalHeatMap;\n    window.regionalHeatMap = regionalHeatMap;\n}\n","/**\n * Demographics Analysis Module\n * Analyzes AI/automation impact across different demographic groups\n */\n\nclass DemographicsAnalyzer {\n    constructor() {\n        // US labor force demographics data (approximate)\n        this.demographicData = {\n            age_groups: {\n                '16-24': {\n                    labor_force: 19500000,\n                    avg_wage: 16.50,\n                    sectors: { retail: 0.22, food_services: 0.18, healthcare: 0.08, technology: 0.05 },\n                    education_distribution: { no_degree: 0.45, high_school: 0.35, bachelors: 0.15, advanced: 0.05 },\n                    automation_vulnerability: 0.45 // Higher - more in automatable roles\n                },\n                '25-34': {\n                    labor_force: 35800000,\n                    avg_wage: 28.50,\n                    sectors: { technology: 0.12, healthcare: 0.14, finance: 0.10, professional_services: 0.15 },\n                    education_distribution: { no_degree: 0.12, high_school: 0.28, bachelors: 0.40, advanced: 0.20 },\n                    automation_vulnerability: 0.32\n                },\n                '35-44': {\n                    labor_force: 33200000,\n                    avg_wage: 32.80,\n                    sectors: { technology: 0.10, healthcare: 0.15, finance: 0.12, manufacturing: 0.10 },\n                    education_distribution: { no_degree: 0.10, high_school: 0.30, bachelors: 0.38, advanced: 0.22 },\n                    automation_vulnerability: 0.30\n                },\n                '45-54': {\n                    labor_force: 32500000,\n                    avg_wage: 33.20,\n                    sectors: { healthcare: 0.16, manufacturing: 0.12, government: 0.10, education: 0.10 },\n                    education_distribution: { no_degree: 0.12, high_school: 0.35, bachelors: 0.33, advanced: 0.20 },\n                    automation_vulnerability: 0.35\n                },\n                '55-64': {\n                    labor_force: 26800000,\n                    avg_wage: 32.50,\n                    sectors: { healthcare: 0.18, government: 0.12, manufacturing: 0.10, retail: 0.08 },\n                    education_distribution: { no_degree: 0.14, high_school: 0.38, bachelors: 0.30, advanced: 0.18 },\n                    automation_vulnerability: 0.38\n                },\n                '65+': {\n                    labor_force: 10800000,\n                    avg_wage: 28.00,\n                    sectors: { healthcare: 0.15, retail: 0.12, professional_services: 0.10, education: 0.08 },\n                    education_distribution: { no_degree: 0.18, high_school: 0.40, bachelors: 0.28, advanced: 0.14 },\n                    automation_vulnerability: 0.30\n                }\n            },\n            education_levels: {\n                'No High School': {\n                    labor_force: 8200000,\n                    avg_wage: 14.50,\n                    unemployment_rate: 8.5,\n                    automation_vulnerability: 0.65,\n                    primary_sectors: ['agriculture', 'construction', 'food_services']\n                },\n                'High School': {\n                    labor_force: 35500000,\n                    avg_wage: 20.50,\n                    unemployment_rate: 5.8,\n                    automation_vulnerability: 0.52,\n                    primary_sectors: ['retail', 'manufacturing', 'transportation']\n                },\n                'Some College': {\n                    labor_force: 32800000,\n                    avg_wage: 24.80,\n                    unemployment_rate: 4.5,\n                    automation_vulnerability: 0.42,\n                    primary_sectors: ['healthcare', 'retail', 'administrative']\n                },\n                'Bachelor\\'s': {\n                    labor_force: 48500000,\n                    avg_wage: 35.50,\n                    unemployment_rate: 3.2,\n                    automation_vulnerability: 0.28,\n                    primary_sectors: ['technology', 'finance', 'professional_services']\n                },\n                'Advanced Degree': {\n                    labor_force: 26500000,\n                    avg_wage: 48.00,\n                    unemployment_rate: 2.1,\n                    automation_vulnerability: 0.18,\n                    primary_sectors: ['healthcare', 'education', 'technology', 'legal']\n                }\n            },\n            gender: {\n                'Male': {\n                    labor_force: 82500000,\n                    participation_rate: 68.2,\n                    avg_wage: 31.50,\n                    sector_concentration: {\n                        construction: 0.96, transportation: 0.78, manufacturing: 0.72,\n                        technology: 0.74, mining: 0.88\n                    },\n                    automation_vulnerability: 0.38\n                },\n                'Female': {\n                    labor_force: 75000000,\n                    participation_rate: 57.4,\n                    avg_wage: 27.80,\n                    sector_concentration: {\n                        healthcare: 0.77, education: 0.73, administrative: 0.65,\n                        retail: 0.52, food_services: 0.54\n                    },\n                    automation_vulnerability: 0.35\n                }\n            }\n        };\n\n        // Retraining difficulty by age\n        this.retrainingFactors = {\n            '16-24': { difficulty: 0.2, duration_multiplier: 0.8, success_rate: 0.85 },\n            '25-34': { difficulty: 0.3, duration_multiplier: 1.0, success_rate: 0.80 },\n            '35-44': { difficulty: 0.4, duration_multiplier: 1.2, success_rate: 0.70 },\n            '45-54': { difficulty: 0.5, duration_multiplier: 1.4, success_rate: 0.55 },\n            '55-64': { difficulty: 0.6, duration_multiplier: 1.6, success_rate: 0.40 },\n            '65+': { difficulty: 0.7, duration_multiplier: 2.0, success_rate: 0.25 }\n        };\n    }\n\n    /**\n     * Analyze demographic impacts based on simulation results\n     */\n    analyzeImpacts(simulationResults) {\n        const summary = simulationResults.summary;\n        const aiImpact = summary.ai_impact;\n        const sectorSummary = summary.sector_summary;\n\n        const analysis = {\n            by_age: this.analyzeByAge(aiImpact, sectorSummary),\n            by_education: this.analyzeByEducation(aiImpact, sectorSummary),\n            by_gender: this.analyzeByGender(aiImpact, sectorSummary),\n            most_vulnerable: [],\n            recommendations: [],\n            summary_stats: {}\n        };\n\n        // Identify most vulnerable groups\n        analysis.most_vulnerable = this.identifyMostVulnerable(analysis);\n\n        // Generate recommendations\n        analysis.recommendations = this.generateRecommendations(analysis);\n\n        // Calculate summary statistics\n        analysis.summary_stats = this.calculateSummaryStats(analysis);\n\n        return analysis;\n    }\n\n    /**\n     * Analyze impact by age group\n     */\n    analyzeByAge(aiImpact, sectorSummary) {\n        const results = {};\n        const totalDisplacement = aiImpact.cumulative_displacement;\n\n        for (const [ageGroup, data] of Object.entries(this.demographicData.age_groups)) {\n            // Calculate displacement based on sector exposure and vulnerability\n            const sectorExposure = this.calculateSectorExposure(data.sectors, sectorSummary);\n            const displacementShare = (data.labor_force / 158000000) * data.automation_vulnerability * sectorExposure;\n            const estimatedDisplacement = Math.round(totalDisplacement * displacementShare);\n\n            // Displacement rate as percentage of age group\n            const displacementRate = (estimatedDisplacement / data.labor_force * 100).toFixed(1);\n\n            // Impact level\n            let impactLevel = 'Low';\n            if (displacementRate > 8) impactLevel = 'Critical';\n            else if (displacementRate > 5) impactLevel = 'High';\n            else if (displacementRate > 3) impactLevel = 'Moderate';\n\n            // Retraining outlook\n            const retraining = this.retrainingFactors[ageGroup];\n\n            results[ageGroup] = {\n                labor_force: data.labor_force,\n                estimated_displacement: estimatedDisplacement,\n                displacement_rate: parseFloat(displacementRate),\n                impact_level: impactLevel,\n                avg_wage: data.avg_wage,\n                wage_impact: this.estimateWageImpact(data.automation_vulnerability, impactLevel),\n                retraining_success_rate: (retraining.success_rate * 100).toFixed(0) + '%',\n                retraining_difficulty: retraining.difficulty < 0.4 ? 'Low' : retraining.difficulty < 0.6 ? 'Moderate' : 'High',\n                key_risks: this.identifyAgeRisks(ageGroup, data)\n            };\n        }\n\n        return results;\n    }\n\n    /**\n     * Analyze impact by education level\n     */\n    analyzeByEducation(aiImpact, sectorSummary) {\n        const results = {};\n        const totalDisplacement = aiImpact.cumulative_displacement;\n\n        for (const [eduLevel, data] of Object.entries(this.demographicData.education_levels)) {\n            // Calculate displacement based on vulnerability\n            const displacementShare = (data.labor_force / 151500000) * data.automation_vulnerability;\n            const estimatedDisplacement = Math.round(totalDisplacement * displacementShare * 1.2); // Weight by vulnerability\n\n            const displacementRate = (estimatedDisplacement / data.labor_force * 100).toFixed(1);\n\n            let impactLevel = 'Low';\n            if (displacementRate > 10) impactLevel = 'Critical';\n            else if (displacementRate > 6) impactLevel = 'High';\n            else if (displacementRate > 3) impactLevel = 'Moderate';\n\n            results[eduLevel] = {\n                labor_force: data.labor_force,\n                estimated_displacement: estimatedDisplacement,\n                displacement_rate: parseFloat(displacementRate),\n                impact_level: impactLevel,\n                current_unemployment: data.unemployment_rate + '%',\n                projected_unemployment: (data.unemployment_rate + parseFloat(displacementRate) * 0.4).toFixed(1) + '%',\n                avg_wage: '$' + data.avg_wage.toFixed(2),\n                primary_sectors: data.primary_sectors.join(', '),\n                upskilling_priority: data.automation_vulnerability > 0.4 ? 'High' : data.automation_vulnerability > 0.25 ? 'Medium' : 'Low'\n            };\n        }\n\n        return results;\n    }\n\n    /**\n     * Analyze impact by gender\n     */\n    analyzeByGender(aiImpact, sectorSummary) {\n        const results = {};\n        const totalDisplacement = aiImpact.cumulative_displacement;\n\n        for (const [gender, data] of Object.entries(this.demographicData.gender)) {\n            // Calculate based on sector concentration\n            let weightedVulnerability = 0;\n            let totalWeight = 0;\n\n            for (const [sector, concentration] of Object.entries(data.sector_concentration)) {\n                const sectorData = sectorSummary.most_affected?.find(s => s.name === sector) ||\n                    sectorSummary.least_affected?.find(s => s.name === sector);\n                if (sectorData) {\n                    weightedVulnerability += concentration * Math.abs(parseFloat(sectorData.employment_change_percent) / 100);\n                    totalWeight += concentration;\n                }\n            }\n\n            const effectiveVulnerability = totalWeight > 0 ?\n                data.automation_vulnerability * (1 + weightedVulnerability / totalWeight) :\n                data.automation_vulnerability;\n\n            const displacementShare = (data.labor_force / 157500000) * effectiveVulnerability;\n            const estimatedDisplacement = Math.round(totalDisplacement * displacementShare);\n            const displacementRate = (estimatedDisplacement / data.labor_force * 100).toFixed(1);\n\n            let impactLevel = 'Low';\n            if (displacementRate > 7) impactLevel = 'High';\n            else if (displacementRate > 4) impactLevel = 'Moderate';\n\n            results[gender] = {\n                labor_force: data.labor_force,\n                participation_rate: data.participation_rate + '%',\n                estimated_displacement: estimatedDisplacement,\n                displacement_rate: parseFloat(displacementRate),\n                impact_level: impactLevel,\n                avg_wage: '$' + data.avg_wage.toFixed(2),\n                high_exposure_sectors: Object.entries(data.sector_concentration)\n                    .filter(([_, v]) => v > 0.6)\n                    .map(([k, _]) => k.replace(/_/g, ' '))\n                    .join(', ')\n            };\n        }\n\n        return results;\n    }\n\n    /**\n     * Calculate sector exposure for an age group\n     */\n    calculateSectorExposure(sectors, sectorSummary) {\n        let exposure = 1.0;\n\n        const affectedSectors = [...(sectorSummary.most_affected || [])];\n        for (const [sector, share] of Object.entries(sectors)) {\n            const affected = affectedSectors.find(s => s.name === sector);\n            if (affected) {\n                exposure += share * Math.abs(parseFloat(affected.employment_change_percent) / 100);\n            }\n        }\n\n        return Math.min(2.0, exposure);\n    }\n\n    /**\n     * Estimate wage impact\n     */\n    estimateWageImpact(vulnerability, impactLevel) {\n        const baseImpact = vulnerability * -3; // Base percentage impact\n        const levelMultiplier = impactLevel === 'Critical' ? 1.5 :\n            impactLevel === 'High' ? 1.2 :\n                impactLevel === 'Moderate' ? 1.0 : 0.8;\n\n        return (baseImpact * levelMultiplier).toFixed(1) + '%';\n    }\n\n    /**\n     * Identify age-specific risks\n     */\n    identifyAgeRisks(ageGroup, data) {\n        const risks = [];\n\n        if (ageGroup === '16-24') {\n            risks.push('Limited work experience');\n            risks.push('High concentration in retail/food service');\n        } else if (ageGroup === '55-64' || ageGroup === '65+') {\n            risks.push('Retraining challenges');\n            risks.push('Potential early workforce exit');\n        }\n\n        if (data.automation_vulnerability > 0.4) {\n            risks.push('High automation exposure');\n        }\n\n        return risks;\n    }\n\n    /**\n     * Identify most vulnerable groups\n     */\n    identifyMostVulnerable(analysis) {\n        const vulnerable = [];\n\n        // Check age groups\n        for (const [group, data] of Object.entries(analysis.by_age)) {\n            if (data.impact_level === 'Critical' || data.impact_level === 'High') {\n                vulnerable.push({\n                    type: 'Age Group',\n                    group: group,\n                    impact_level: data.impact_level,\n                    displacement_rate: data.displacement_rate,\n                    estimated_affected: data.estimated_displacement\n                });\n            }\n        }\n\n        // Check education levels\n        for (const [level, data] of Object.entries(analysis.by_education)) {\n            if (data.impact_level === 'Critical' || data.impact_level === 'High') {\n                vulnerable.push({\n                    type: 'Education',\n                    group: level,\n                    impact_level: data.impact_level,\n                    displacement_rate: data.displacement_rate,\n                    estimated_affected: data.estimated_displacement\n                });\n            }\n        }\n\n        // Sort by displacement rate\n        return vulnerable.sort((a, b) => b.displacement_rate - a.displacement_rate);\n    }\n\n    /**\n     * Generate policy recommendations\n     */\n    generateRecommendations(analysis) {\n        const recommendations = [];\n\n        // Age-based recommendations\n        const youngWorkers = analysis.by_age['16-24'];\n        const olderWorkers = analysis.by_age['55-64'];\n\n        if (youngWorkers?.impact_level === 'High' || youngWorkers?.impact_level === 'Critical') {\n            recommendations.push({\n                target: 'Young Workers (16-24)',\n                priority: 'High',\n                actions: [\n                    'Expand apprenticeship programs in growing sectors',\n                    'Provide tech skills training in high schools',\n                    'Create entry-level positions in AI-adjacent roles'\n                ]\n            });\n        }\n\n        if (olderWorkers?.impact_level === 'High' || olderWorkers?.impact_level === 'Critical') {\n            recommendations.push({\n                target: 'Older Workers (55-64)',\n                priority: 'High',\n                actions: [\n                    'Phased retirement programs with knowledge transfer',\n                    'Age-appropriate retraining with extended timelines',\n                    'Bridge employment in supervisory/consulting roles'\n                ]\n            });\n        }\n\n        // Education-based recommendations\n        const lowEdu = analysis.by_education['No High School'];\n        const hsOnly = analysis.by_education['High School'];\n\n        if (lowEdu?.impact_level === 'Critical' || hsOnly?.impact_level === 'High') {\n            recommendations.push({\n                target: 'Workers without College Degree',\n                priority: 'Critical',\n                actions: [\n                    'Free community college for high-demand fields',\n                    'Stackable credentials and micro-certifications',\n                    'On-the-job training subsidies for employers',\n                    'Basic digital literacy programs'\n                ]\n            });\n        }\n\n        // General recommendations\n        recommendations.push({\n            target: 'All Workers',\n            priority: 'Medium',\n            actions: [\n                'Portable benefits for gig and transitioning workers',\n                'Career counseling and job matching services',\n                'Income support during retraining periods'\n            ]\n        });\n\n        return recommendations;\n    }\n\n    /**\n     * Calculate summary statistics\n     */\n    calculateSummaryStats(analysis) {\n        let totalDisplaced = 0;\n        let highImpactGroups = 0;\n        let criticalGroups = 0;\n\n        for (const data of Object.values(analysis.by_age)) {\n            totalDisplaced += data.estimated_displacement;\n            if (data.impact_level === 'High') highImpactGroups++;\n            if (data.impact_level === 'Critical') criticalGroups++;\n        }\n\n        return {\n            total_estimated_displacement: totalDisplaced,\n            high_impact_demographic_groups: highImpactGroups,\n            critical_impact_groups: criticalGroups,\n            most_vulnerable_segment: analysis.most_vulnerable[0]?.group || 'None identified',\n            policy_recommendations_count: analysis.recommendations.length\n        };\n    }\n\n    /**\n     * Generate HTML display for demographics section\n     */\n    generateHTML(analysis) {\n        if (!analysis) return '<p>Demographics analysis not available.</p>';\n\n        return `\n            <div class=\"demographics-analysis\">\n                <!-- Summary Stats -->\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 24px;\">\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">High Impact Groups</div>\n                        <div style=\"font-size: 1.5rem; font-weight: 700; color: var(--warning);\">${analysis.summary_stats.high_impact_demographic_groups}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Critical Groups</div>\n                        <div style=\"font-size: 1.5rem; font-weight: 700; color: var(--danger);\">${analysis.summary_stats.critical_impact_groups}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Most Vulnerable</div>\n                        <div style=\"font-size: 1rem; font-weight: 700; color: var(--primary);\">${analysis.summary_stats.most_vulnerable_segment}</div>\n                    </div>\n                </div>\n\n                <!-- Age Group Impact -->\n                <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">Impact by Age Group</h4>\n                <div style=\"overflow-x: auto; margin-bottom: 24px;\">\n                    <table style=\"width: 100%; font-size: 0.875rem; border-collapse: collapse;\">\n                        <thead>\n                            <tr style=\"border-bottom: 2px solid var(--gray-200);\">\n                                <th style=\"text-align: left; padding: 8px;\">Age</th>\n                                <th style=\"text-align: right; padding: 8px;\">Displacement</th>\n                                <th style=\"text-align: right; padding: 8px;\">Rate</th>\n                                <th style=\"text-align: center; padding: 8px;\">Impact</th>\n                                <th style=\"text-align: center; padding: 8px;\">Retraining</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${Object.entries(analysis.by_age).map(([age, data]) => `\n                                <tr style=\"border-bottom: 1px solid var(--gray-100);\">\n                                    <td style=\"padding: 8px; font-weight: 500;\">${age}</td>\n                                    <td style=\"padding: 8px; text-align: right;\">${this.formatNumber(data.estimated_displacement)}</td>\n                                    <td style=\"padding: 8px; text-align: right;\">${data.displacement_rate}%</td>\n                                    <td style=\"padding: 8px; text-align: center;\">\n                                        <span style=\"padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; background: ${this.getImpactColor(data.impact_level)}; color: white;\">\n                                            ${data.impact_level}\n                                        </span>\n                                    </td>\n                                    <td style=\"padding: 8px; text-align: center; color: var(--gray-500);\">${data.retraining_success_rate}</td>\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n\n                <!-- Education Impact -->\n                <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">Impact by Education Level</h4>\n                <div style=\"overflow-x: auto; margin-bottom: 24px;\">\n                    <table style=\"width: 100%; font-size: 0.875rem; border-collapse: collapse;\">\n                        <thead>\n                            <tr style=\"border-bottom: 2px solid var(--gray-200);\">\n                                <th style=\"text-align: left; padding: 8px;\">Education</th>\n                                <th style=\"text-align: right; padding: 8px;\">Displacement</th>\n                                <th style=\"text-align: right; padding: 8px;\">Rate</th>\n                                <th style=\"text-align: center; padding: 8px;\">Impact</th>\n                                <th style=\"text-align: center; padding: 8px;\">Priority</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${Object.entries(analysis.by_education).map(([edu, data]) => `\n                                <tr style=\"border-bottom: 1px solid var(--gray-100);\">\n                                    <td style=\"padding: 8px; font-weight: 500;\">${edu}</td>\n                                    <td style=\"padding: 8px; text-align: right;\">${this.formatNumber(data.estimated_displacement)}</td>\n                                    <td style=\"padding: 8px; text-align: right;\">${data.displacement_rate}%</td>\n                                    <td style=\"padding: 8px; text-align: center;\">\n                                        <span style=\"padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; background: ${this.getImpactColor(data.impact_level)}; color: white;\">\n                                            ${data.impact_level}\n                                        </span>\n                                    </td>\n                                    <td style=\"padding: 8px; text-align: center;\">\n                                        <span style=\"color: ${data.upskilling_priority === 'High' ? 'var(--danger)' : data.upskilling_priority === 'Medium' ? 'var(--warning)' : 'var(--secondary)'};\">\n                                            ${data.upskilling_priority}\n                                        </span>\n                                    </td>\n                                </tr>\n                            `).join('')}\n                        </tbody>\n                    </table>\n                </div>\n\n                <!-- Recommendations -->\n                ${analysis.recommendations.length > 0 ? `\n                    <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">Policy Recommendations</h4>\n                    <div style=\"display: grid; gap: 12px;\">\n                        ${analysis.recommendations.slice(0, 3).map(rec => `\n                            <div style=\"padding: 12px; background: var(--gray-50); border-radius: 8px; border-left: 4px solid ${rec.priority === 'Critical' ? 'var(--danger)' : rec.priority === 'High' ? 'var(--warning)' : 'var(--primary)'};\">\n                                <div style=\"font-weight: 600; margin-bottom: 8px;\">${rec.target}</div>\n                                <ul style=\"margin: 0; padding-left: 20px; font-size: 0.875rem; color: var(--text-secondary);\">\n                                    ${rec.actions.slice(0, 2).map(a => `<li>${a}</li>`).join('')}\n                                </ul>\n                            </div>\n                        `).join('')}\n                    </div>\n                ` : ''}\n            </div>\n        `;\n    }\n\n    /**\n     * Get color for impact level\n     */\n    getImpactColor(level) {\n        switch (level) {\n            case 'Critical': return 'var(--danger)';\n            case 'High': return '#f97316';\n            case 'Moderate': return 'var(--warning)';\n            default: return 'var(--secondary)';\n        }\n    }\n\n    /**\n     * Format number\n     */\n    formatNumber(n) {\n        if (Math.abs(n) >= 1e6) return (n / 1e6).toFixed(1) + 'M';\n        if (Math.abs(n) >= 1e3) return (n / 1e3).toFixed(1) + 'K';\n        return n.toLocaleString();\n    }\n}\n\n// Global instance\nconst demographicsAnalyzer = new DemographicsAnalyzer();\n\n// Export for ES modules\nexport { DemographicsAnalyzer, demographicsAnalyzer };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.DemographicsAnalyzer = DemographicsAnalyzer;\n    window.demographicsAnalyzer = demographicsAnalyzer;\n}\n","/**\n * ABM Sensitivity Analysis\n * Analyzes parameter sensitivity specifically for Agent-Based Model simulations\n */\n\nclass ABMSensitivityAnalysis {\n    constructor() {\n        // ABM-specific parameters\n        this.parameters = {\n            numWorkers: {\n                name: 'Number of Workers',\n                baseValue: 1000,\n                range: { min: 500, max: 2000, step: 250 },\n                description: 'Total worker agents in simulation'\n            },\n            numFirms: {\n                name: 'Number of Firms',\n                baseValue: 100,\n                range: { min: 50, max: 200, step: 25 },\n                description: 'Total firm agents in simulation'\n            },\n            initialAIAdoption: {\n                name: 'Initial AI Adoption',\n                baseValue: 0.2,\n                range: { min: 0.05, max: 0.4, step: 0.05 },\n                format: 'percent',\n                description: 'Starting AI adoption rate among firms'\n            },\n            aiAdoptionSpeed: {\n                name: 'AI Adoption Speed',\n                baseValue: 1.0,\n                range: { min: 0.5, max: 2.0, step: 0.25 },\n                description: 'Multiplier for AI adoption rate'\n            },\n            laborMarketFriction: {\n                name: 'Labor Market Friction',\n                baseValue: 0.1,\n                range: { min: 0.02, max: 0.25, step: 0.03 },\n                format: 'percent',\n                description: 'Difficulty of job matching'\n            },\n            retrainingEffectiveness: {\n                name: 'Retraining Effectiveness',\n                baseValue: 0.3,\n                range: { min: 0.1, max: 0.6, step: 0.1 },\n                format: 'percent',\n                description: 'Success rate of retraining programs'\n            },\n            wageFlexibility: {\n                name: 'Wage Flexibility',\n                baseValue: 0.05,\n                range: { min: 0.01, max: 0.15, step: 0.02 },\n                format: 'percent',\n                description: 'How quickly wages adjust to market conditions'\n            },\n            informationSpread: {\n                name: 'Information Spread Rate',\n                baseValue: 0.1,\n                range: { min: 0.02, max: 0.2, step: 0.03 },\n                format: 'percent',\n                description: 'Rate at which workers learn about opportunities'\n            }\n        };\n\n        // Outcomes to measure\n        this.outcomes = {\n            finalUnemployment: {\n                name: 'Final Unemployment Rate',\n                format: 'percent',\n                extractor: (results) => results.summary.final.unemploymentRate\n            },\n            peakUnemployment: {\n                name: 'Peak Unemployment',\n                format: 'percent',\n                extractor: (results) => results.summary.peakUnemployment\n            },\n            netJobChange: {\n                name: 'Net Job Change',\n                format: 'number',\n                extractor: (results) => results.summary.totalHires - results.summary.totalLayoffs\n            },\n            totalDisplacement: {\n                name: 'Total Displaced',\n                format: 'number',\n                extractor: (results) => results.summary.totalLayoffs\n            },\n            aiAdoptionFinal: {\n                name: 'Final AI Adoption',\n                format: 'percent',\n                extractor: (results) => results.summary.final.aiAdoptionRate\n            },\n            avgPolicySupport: {\n                name: 'Avg Policy Support',\n                format: 'percent',\n                extractor: (results) => {\n                    const ps = results.summary.finalPolicySupport;\n                    if (!ps) return 0;\n                    const values = Object.values(ps).map(p => p.mean || 0);\n                    return values.reduce((a, b) => a + b, 0) / values.length;\n                }\n            }\n        };\n\n        this.analysisCache = new Map();\n        this.isRunning = false;\n    }\n\n    /**\n     * Run single parameter sensitivity analysis\n     */\n    async runSingleParameterAnalysis(paramId, engine, baseConfig, progressCallback) {\n        const param = this.parameters[paramId];\n        if (!param) return null;\n\n        const results = [];\n        const testValues = this.generateTestValues(param);\n\n        for (let i = 0; i < testValues.length; i++) {\n            const value = testValues[i];\n\n            if (progressCallback) {\n                progressCallback({\n                    parameter: param.name,\n                    current: i + 1,\n                    total: testValues.length,\n                    value\n                });\n            }\n\n            // Create modified config\n            const config = this.applyParameterValue(baseConfig, paramId, value);\n\n            try {\n                // Run ABM simulation\n                const simResults = await this.runABMSimulation(engine, config);\n\n                // Extract outcomes\n                const outcomeValues = {};\n                Object.entries(this.outcomes).forEach(([id, outcome]) => {\n                    try {\n                        outcomeValues[id] = outcome.extractor(simResults);\n                    } catch (e) {\n                        outcomeValues[id] = null;\n                    }\n                });\n\n                results.push({\n                    paramValue: value,\n                    outcomes: outcomeValues\n                });\n            } catch (error) {\n                console.error(`ABM sensitivity error at ${paramId}=${value}:`, error);\n            }\n        }\n\n        return {\n            parameter: param,\n            parameterId: paramId,\n            results,\n            baseValue: param.baseValue\n        };\n    }\n\n    /**\n     * Generate test values for a parameter\n     */\n    generateTestValues(param) {\n        const values = [];\n        for (let v = param.range.min; v <= param.range.max; v += param.range.step) {\n            values.push(Math.round(v * 1000) / 1000); // Avoid floating point issues\n        }\n        return values;\n    }\n\n    /**\n     * Apply parameter value to config\n     */\n    applyParameterValue(baseConfig, paramId, value) {\n        const config = JSON.parse(JSON.stringify(baseConfig));\n\n        switch (paramId) {\n            case 'numWorkers':\n                config.numWorkers = value;\n                break;\n            case 'numFirms':\n                config.numFirms = value;\n                break;\n            case 'initialAIAdoption':\n                config.initialAIAdoption = value;\n                break;\n            case 'aiAdoptionSpeed':\n                config.aiAdoptionSpeed = value;\n                break;\n            case 'laborMarketFriction':\n                config.laborMarketFriction = value;\n                break;\n            case 'retrainingEffectiveness':\n                config.retrainingEffectiveness = value;\n                break;\n            case 'wageFlexibility':\n                config.wageFlexibility = value;\n                break;\n            case 'informationSpread':\n                config.informationSpread = value;\n                break;\n        }\n\n        return config;\n    }\n\n    /**\n     * Run ABM simulation with given config\n     */\n    async runABMSimulation(engine, config) {\n        // This integrates with the ABM engine\n        if (typeof engine.runSimulation === 'function') {\n            return await engine.runSimulation(config);\n        }\n\n        // Fallback: create mock results for development\n        return this.generateMockResults(config);\n    }\n\n    /**\n     * Generate mock results for development/testing\n     */\n    generateMockResults(config) {\n        const baseUR = 0.05 + Math.random() * 0.03;\n        const adoptionFactor = config.initialAIAdoption || 0.2;\n        const frictionFactor = config.laborMarketFriction || 0.1;\n\n        return {\n            summary: {\n                initial: { unemploymentRate: 0.05, aiAdoptionRate: adoptionFactor },\n                final: {\n                    unemploymentRate: baseUR + frictionFactor * 0.5 - adoptionFactor * 0.2,\n                    aiAdoptionRate: Math.min(0.9, adoptionFactor + 0.4)\n                },\n                peakUnemployment: baseUR + frictionFactor * 0.8,\n                totalHires: Math.floor(100000 * (1 - frictionFactor)),\n                totalLayoffs: Math.floor(80000 * adoptionFactor),\n                finalPolicySupport: {\n                    ubi: { mean: 0.4 + adoptionFactor * 0.3 },\n                    retraining: { mean: 0.5 + frictionFactor * 0.2 }\n                }\n            }\n        };\n    }\n\n    /**\n     * Calculate sensitivity metrics from analysis results\n     */\n    calculateMetrics(analysisResults) {\n        if (!analysisResults || analysisResults.results.length < 2) return null;\n\n        const metrics = {};\n\n        Object.entries(this.outcomes).forEach(([outcomeId, outcome]) => {\n            const values = analysisResults.results\n                .map(r => r.outcomes[outcomeId])\n                .filter(v => v !== null && v !== undefined && !isNaN(v));\n\n            if (values.length < 2) return;\n\n            const min = Math.min(...values);\n            const max = Math.max(...values);\n            const range = max - min;\n            const mean = values.reduce((a, b) => a + b, 0) / values.length;\n            const stdDev = Math.sqrt(\n                values.reduce((sum, v) => sum + Math.pow(v - mean, 2), 0) / values.length\n            );\n\n            // Calculate coefficient of variation\n            const cv = mean !== 0 ? (stdDev / Math.abs(mean)) * 100 : 0;\n\n            // Calculate elasticity\n            const paramValues = analysisResults.results.map(r => r.paramValue);\n            const paramRange = Math.max(...paramValues) - Math.min(...paramValues);\n            const paramMean = analysisResults.parameter.baseValue;\n            const elasticity = paramRange > 0 && paramMean > 0\n                ? (range / mean) / (paramRange / paramMean)\n                : 0;\n\n            metrics[outcomeId] = {\n                name: outcome.name,\n                format: outcome.format,\n                min,\n                max,\n                range,\n                mean,\n                stdDev,\n                cv,\n                elasticity: Math.abs(elasticity),\n                sensitivity: this.getSensitivityLevel(Math.abs(elasticity), cv)\n            };\n        });\n\n        return metrics;\n    }\n\n    /**\n     * Determine sensitivity level\n     */\n    getSensitivityLevel(elasticity, cv) {\n        const score = elasticity * 0.6 + (cv / 100) * 0.4;\n\n        if (score >= 0.8) return { level: 'critical', color: '#ef4444', label: 'Critical' };\n        if (score >= 0.5) return { level: 'high', color: '#f97316', label: 'High' };\n        if (score >= 0.25) return { level: 'medium', color: '#fbbf24', label: 'Medium' };\n        return { level: 'low', color: '#10b981', label: 'Low' };\n    }\n\n    /**\n     * Run multi-parameter analysis\n     */\n    async runMultiParameterAnalysis(paramIds, engine, baseConfig, progressCallback) {\n        const results = {};\n\n        for (let i = 0; i < paramIds.length; i++) {\n            const paramId = paramIds[i];\n\n            if (progressCallback) {\n                progressCallback({\n                    phase: 'parameter',\n                    current: i + 1,\n                    total: paramIds.length,\n                    paramName: this.parameters[paramId]?.name\n                });\n            }\n\n            results[paramId] = await this.runSingleParameterAnalysis(\n                paramId,\n                engine,\n                baseConfig,\n                (p) => {\n                    if (progressCallback) {\n                        progressCallback({\n                            phase: 'simulation',\n                            parameter: p.parameter,\n                            current: p.current,\n                            total: p.total,\n                            paramIndex: i + 1,\n                            paramTotal: paramIds.length\n                        });\n                    }\n                }\n            );\n        }\n\n        return results;\n    }\n\n    /**\n     * Generate tornado chart data for comparison\n     */\n    generateTornadoData(multiResults, outcomeId = 'finalUnemployment') {\n        const data = [];\n\n        Object.entries(multiResults).forEach(([paramId, analysis]) => {\n            if (!analysis || !analysis.results.length) return;\n\n            const values = analysis.results\n                .map(r => r.outcomes[outcomeId])\n                .filter(v => v !== null && !isNaN(v));\n\n            if (values.length < 2) return;\n\n            const param = this.parameters[paramId];\n            const baseValue = this.getBaseOutcome(analysis, outcomeId);\n            const min = Math.min(...values);\n            const max = Math.max(...values);\n\n            data.push({\n                parameterId: paramId,\n                parameter: param.name,\n                low: min,\n                high: max,\n                range: max - min,\n                baseValue,\n                lowDiff: min - baseValue,\n                highDiff: max - baseValue\n            });\n        });\n\n        // Sort by range (largest impact first)\n        data.sort((a, b) => b.range - a.range);\n\n        return data;\n    }\n\n    /**\n     * Get base outcome value\n     */\n    getBaseOutcome(analysis, outcomeId) {\n        if (!analysis || !analysis.results.length) return 0;\n\n        const baseResult = analysis.results.find(r =>\n            Math.abs(r.paramValue - analysis.baseValue) < 0.001\n        );\n\n        return baseResult?.outcomes[outcomeId] || analysis.results[0].outcomes[outcomeId] || 0;\n    }\n\n    /**\n     * Render sensitivity analysis dashboard\n     */\n    renderDashboard(containerId, multiResults) {\n        const container = document.getElementById(containerId);\n        if (!container) return;\n\n        let html = '';\n\n        // Summary cards\n        html += this.renderSummaryCards(multiResults);\n\n        // Tornado chart\n        html += this.renderTornadoChart(multiResults);\n\n        // Detailed parameter tables\n        html += this.renderParameterTables(multiResults);\n\n        container.innerHTML = html;\n    }\n\n    /**\n     * Render summary cards\n     */\n    renderSummaryCards(multiResults) {\n        const paramCount = Object.keys(multiResults).length;\n        const allMetrics = {};\n\n        Object.entries(multiResults).forEach(([paramId, analysis]) => {\n            const metrics = this.calculateMetrics(analysis);\n            if (metrics) {\n                allMetrics[paramId] = metrics;\n            }\n        });\n\n        // Find most sensitive parameters\n        const sensitivities = [];\n        Object.entries(allMetrics).forEach(([paramId, metrics]) => {\n            const avgElasticity = Object.values(metrics)\n                .reduce((sum, m) => sum + m.elasticity, 0) / Object.keys(metrics).length;\n\n            sensitivities.push({\n                paramId,\n                name: this.parameters[paramId].name,\n                avgElasticity,\n                level: this.getSensitivityLevel(avgElasticity, 50)\n            });\n        });\n\n        sensitivities.sort((a, b) => b.avgElasticity - a.avgElasticity);\n\n        const mostSensitive = sensitivities[0];\n        const leastSensitive = sensitivities[sensitivities.length - 1];\n        const criticalCount = sensitivities.filter(s => s.level.level === 'critical' || s.level.level === 'high').length;\n\n        return `\n            <div style=\"display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px;\">\n                <div style=\"background: var(--gray-50); padding: 16px; border-radius: 12px; text-align: center;\">\n                    <div style=\"font-size: 2rem; font-weight: 700; color: var(--primary);\">${paramCount}</div>\n                    <div style=\"font-size: 0.875rem; color: var(--gray-500);\">Parameters Analyzed</div>\n                </div>\n                <div style=\"background: var(--gray-50); padding: 16px; border-radius: 12px; text-align: center;\">\n                    <div style=\"font-size: 2rem; font-weight: 700; color: var(--danger);\">${criticalCount}</div>\n                    <div style=\"font-size: 0.875rem; color: var(--gray-500);\">High Sensitivity</div>\n                </div>\n                <div style=\"background: var(--gray-50); padding: 16px; border-radius: 12px; text-align: center;\">\n                    <div style=\"font-size: 1rem; font-weight: 600; color: ${mostSensitive?.level.color || 'var(--gray-600)'}; margin-bottom: 4px;\">\n                        ${mostSensitive?.name || 'N/A'}\n                    </div>\n                    <div style=\"font-size: 0.875rem; color: var(--gray-500);\">Most Sensitive</div>\n                </div>\n                <div style=\"background: var(--gray-50); padding: 16px; border-radius: 12px; text-align: center;\">\n                    <div style=\"font-size: 1rem; font-weight: 600; color: ${leastSensitive?.level.color || 'var(--gray-600)'}; margin-bottom: 4px;\">\n                        ${leastSensitive?.name || 'N/A'}\n                    </div>\n                    <div style=\"font-size: 0.875rem; color: var(--gray-500);\">Least Sensitive</div>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Render tornado chart\n     */\n    renderTornadoChart(multiResults) {\n        const tornadoData = this.generateTornadoData(multiResults, 'finalUnemployment');\n\n        if (tornadoData.length === 0) {\n            return '<p style=\"color: var(--gray-500);\">No data for tornado chart</p>';\n        }\n\n        const maxRange = Math.max(...tornadoData.map(d => Math.max(Math.abs(d.lowDiff), Math.abs(d.highDiff))));\n        const scale = 100 / (maxRange * 2);\n\n        let html = `\n            <div style=\"background: var(--gray-50); padding: 20px; border-radius: 12px; margin-bottom: 24px;\">\n                <h4 style=\"margin-bottom: 16px; color: var(--gray-700);\"> Impact on Final Unemployment Rate</h4>\n                <div style=\"position: relative;\">\n                    <!-- Center line -->\n                    <div style=\"position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background: var(--gray-300);\"></div>\n\n                    ${tornadoData.map((d, i) => {\n                        const lowWidth = Math.abs(d.lowDiff) * scale;\n                        const highWidth = Math.abs(d.highDiff) * scale;\n\n                        return `\n                            <div style=\"display: flex; align-items: center; margin-bottom: 12px; position: relative;\">\n                                <div style=\"width: 180px; text-align: right; padding-right: 12px; font-size: 0.875rem; color: var(--gray-600);\">\n                                    ${d.parameter}\n                                </div>\n                                <div style=\"flex: 1; display: flex; position: relative;\">\n                                    <!-- Low bar (left side) -->\n                                    <div style=\"width: 50%; display: flex; justify-content: flex-end;\">\n                                        <div style=\"background: #3b82f6; height: 24px; width: ${lowWidth}%; border-radius: 4px 0 0 4px; display: flex; align-items: center; justify-content: flex-start; padding-left: 4px;\">\n                                            <span style=\"font-size: 0.7rem; color: white;\">${(d.low * 100).toFixed(1)}%</span>\n                                        </div>\n                                    </div>\n                                    <!-- High bar (right side) -->\n                                    <div style=\"width: 50%; display: flex; justify-content: flex-start;\">\n                                        <div style=\"background: #ef4444; height: 24px; width: ${highWidth}%; border-radius: 0 4px 4px 0; display: flex; align-items: center; justify-content: flex-end; padding-right: 4px;\">\n                                            <span style=\"font-size: 0.7rem; color: white;\">${(d.high * 100).toFixed(1)}%</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        `;\n                    }).join('')}\n                </div>\n                <div style=\"display: flex; justify-content: center; gap: 24px; margin-top: 16px; font-size: 0.75rem; color: var(--gray-500);\">\n                    <span> Lower Values</span>\n                    <span> Higher Values</span>\n                </div>\n            </div>\n        `;\n\n        return html;\n    }\n\n    /**\n     * Render detailed parameter tables\n     */\n    renderParameterTables(multiResults) {\n        let html = '<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;\">';\n\n        Object.entries(multiResults).forEach(([paramId, analysis]) => {\n            if (!analysis) return;\n\n            const param = this.parameters[paramId];\n            const metrics = this.calculateMetrics(analysis);\n\n            html += `\n                <div style=\"background: var(--gray-50); padding: 16px; border-radius: 12px;\">\n                    <h5 style=\"margin-bottom: 12px; color: var(--gray-700);\">${param.name}</h5>\n                    <p style=\"font-size: 0.75rem; color: var(--gray-500); margin-bottom: 12px;\">${param.description}</p>\n\n                    ${metrics ? `\n                        <div style=\"display: grid; gap: 8px;\">\n                            ${Object.entries(metrics).slice(0, 4).map(([id, m]) => `\n                                <div style=\"display: flex; justify-content: space-between; padding: 8px; background: white; border-radius: 6px;\">\n                                    <span style=\"font-size: 0.875rem; color: var(--gray-600);\">${m.name}</span>\n                                    <div style=\"display: flex; align-items: center; gap: 8px;\">\n                                        <span style=\"font-size: 0.75rem; color: var(--gray-400);\">\n                                            ${this.formatValue(m.min, m.format)} - ${this.formatValue(m.max, m.format)}\n                                        </span>\n                                        <span style=\"background: ${m.sensitivity.color}20; color: ${m.sensitivity.color}; padding: 2px 6px; border-radius: 4px; font-size: 0.65rem; font-weight: 600;\">\n                                            ${m.sensitivity.label}\n                                        </span>\n                                    </div>\n                                </div>\n                            `).join('')}\n                        </div>\n                    ` : '<p style=\"color: var(--gray-400); font-size: 0.875rem;\">No metrics available</p>'}\n                </div>\n            `;\n        });\n\n        html += '</div>';\n        return html;\n    }\n\n    /**\n     * Format value based on type\n     */\n    formatValue(value, format) {\n        if (value === null || value === undefined || isNaN(value)) return 'N/A';\n\n        switch (format) {\n            case 'percent':\n                return (value * 100).toFixed(1) + '%';\n            case 'number':\n                return value.toLocaleString();\n            default:\n                return value.toFixed(2);\n        }\n    }\n}\n\n// Global instance\nconst abmSensitivity = new ABMSensitivityAnalysis();\n\n// Export for ES modules\nexport { ABMSensitivityAnalysis, abmSensitivity };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.ABMSensitivityAnalysis = ABMSensitivityAnalysis;\n    window.abmSensitivity = abmSensitivity;\n}\n","/**\n * Skills Gap Analysis Module\n * Analyzes skill transitions, identifies gaps, and recommends training\n */\n\nclass SkillsGapAnalyzer {\n    constructor() {\n        // Skills taxonomy with current demand and automation risk\n        this.skillsData = {\n            // Declining skills (high automation risk)\n            declining: {\n                'Data Entry': { current_demand: 1200000, automation_risk: 0.95, decline_rate: 15, sector: 'administrative' },\n                'Basic Bookkeeping': { current_demand: 800000, automation_risk: 0.90, decline_rate: 12, sector: 'finance' },\n                'Assembly Line Work': { current_demand: 2500000, automation_risk: 0.85, decline_rate: 10, sector: 'manufacturing' },\n                'Telemarketing': { current_demand: 400000, automation_risk: 0.90, decline_rate: 18, sector: 'retail' },\n                'Cashier Operations': { current_demand: 3200000, automation_risk: 0.80, decline_rate: 8, sector: 'retail' },\n                'Basic Customer Service': { current_demand: 2800000, automation_risk: 0.75, decline_rate: 7, sector: 'retail' },\n                'Filing/Records Management': { current_demand: 600000, automation_risk: 0.88, decline_rate: 14, sector: 'administrative' },\n                'Routine Analysis': { current_demand: 900000, automation_risk: 0.70, decline_rate: 6, sector: 'finance' },\n                'Manual QA Testing': { current_demand: 450000, automation_risk: 0.72, decline_rate: 9, sector: 'technology' },\n                'Basic Translation': { current_demand: 350000, automation_risk: 0.78, decline_rate: 11, sector: 'professional_services' }\n            },\n            // Growing skills (AI-resistant or AI-enhanced)\n            growing: {\n                'AI/ML Engineering': { current_demand: 280000, growth_rate: 35, avg_salary: 145000, training_months: 18, sector: 'technology' },\n                'Data Science': { current_demand: 450000, growth_rate: 28, avg_salary: 125000, training_months: 12, sector: 'technology' },\n                'Cybersecurity': { current_demand: 520000, growth_rate: 25, avg_salary: 115000, training_months: 12, sector: 'technology' },\n                'Cloud Architecture': { current_demand: 380000, growth_rate: 22, avg_salary: 135000, training_months: 9, sector: 'technology' },\n                'Healthcare Tech': { current_demand: 620000, growth_rate: 20, avg_salary: 85000, training_months: 12, sector: 'healthcare' },\n                'Robotics Maintenance': { current_demand: 180000, growth_rate: 30, avg_salary: 72000, training_months: 9, sector: 'manufacturing' },\n                'UX/UI Design': { current_demand: 340000, growth_rate: 18, avg_salary: 95000, training_months: 6, sector: 'technology' },\n                'Digital Marketing': { current_demand: 580000, growth_rate: 15, avg_salary: 72000, training_months: 6, sector: 'professional_services' },\n                'Project Management': { current_demand: 720000, growth_rate: 12, avg_salary: 95000, training_months: 6, sector: 'professional_services' },\n                'Human-AI Collaboration': { current_demand: 150000, growth_rate: 45, avg_salary: 110000, training_months: 9, sector: 'technology' },\n                'AI Ethics/Governance': { current_demand: 45000, growth_rate: 55, avg_salary: 120000, training_months: 12, sector: 'professional_services' },\n                'Prompt Engineering': { current_demand: 85000, growth_rate: 80, avg_salary: 100000, training_months: 3, sector: 'technology' },\n                'Renewable Energy Tech': { current_demand: 320000, growth_rate: 24, avg_salary: 78000, training_months: 12, sector: 'construction' },\n                'Elder Care': { current_demand: 1800000, growth_rate: 18, avg_salary: 35000, training_months: 6, sector: 'healthcare' },\n                'Mental Health Services': { current_demand: 420000, growth_rate: 22, avg_salary: 55000, training_months: 24, sector: 'healthcare' }\n            },\n            // Transition paths from declining to growing skills\n            transitions: {\n                'Data Entry': ['Data Science', 'Digital Marketing', 'Project Management'],\n                'Basic Bookkeeping': ['Data Science', 'Cloud Architecture', 'AI Ethics/Governance'],\n                'Assembly Line Work': ['Robotics Maintenance', 'Renewable Energy Tech', 'Healthcare Tech'],\n                'Telemarketing': ['Digital Marketing', 'UX/UI Design', 'Project Management'],\n                'Cashier Operations': ['Digital Marketing', 'Healthcare Tech', 'Elder Care'],\n                'Basic Customer Service': ['UX/UI Design', 'Project Management', 'Mental Health Services'],\n                'Filing/Records Management': ['Cybersecurity', 'Cloud Architecture', 'Project Management'],\n                'Routine Analysis': ['Data Science', 'AI/ML Engineering', 'Prompt Engineering'],\n                'Manual QA Testing': ['Cybersecurity', 'AI/ML Engineering', 'Human-AI Collaboration'],\n                'Basic Translation': ['AI Ethics/Governance', 'Prompt Engineering', 'Digital Marketing']\n            }\n        };\n\n        // Training programs database\n        this.trainingPrograms = {\n            'AI/ML Engineering': {\n                programs: [\n                    { name: 'Google ML Engineer Certificate', duration: 6, cost: '$300/month', provider: 'Coursera', format: 'Online' },\n                    { name: 'AWS Machine Learning Specialty', duration: 3, cost: '$500 exam', provider: 'AWS', format: 'Self-paced' },\n                    { name: 'University ML Bootcamp', duration: 12, cost: '$15,000', provider: 'Various', format: 'Hybrid' }\n                ],\n                prerequisites: ['Python programming', 'Statistics basics', 'Linear algebra'],\n                career_paths: ['ML Engineer', 'AI Developer', 'Research Scientist']\n            },\n            'Data Science': {\n                programs: [\n                    { name: 'IBM Data Science Professional', duration: 5, cost: '$39/month', provider: 'Coursera', format: 'Online' },\n                    { name: 'Data Science Bootcamp', duration: 6, cost: '$12,000', provider: 'Various', format: 'Intensive' },\n                    { name: 'Google Data Analytics', duration: 4, cost: '$39/month', provider: 'Coursera', format: 'Online' }\n                ],\n                prerequisites: ['Excel proficiency', 'Basic statistics', 'SQL basics'],\n                career_paths: ['Data Analyst', 'Data Scientist', 'Business Intelligence']\n            },\n            'Cybersecurity': {\n                programs: [\n                    { name: 'CompTIA Security+', duration: 3, cost: '$392 exam', provider: 'CompTIA', format: 'Self-paced' },\n                    { name: 'Google Cybersecurity Certificate', duration: 6, cost: '$39/month', provider: 'Coursera', format: 'Online' },\n                    { name: 'CISSP Certification', duration: 6, cost: '$749 exam', provider: 'ISC2', format: 'Self-paced' }\n                ],\n                prerequisites: ['Networking basics', 'Operating systems', 'IT fundamentals'],\n                career_paths: ['Security Analyst', 'Penetration Tester', 'Security Engineer']\n            },\n            'Cloud Architecture': {\n                programs: [\n                    { name: 'AWS Solutions Architect', duration: 3, cost: '$300 exam', provider: 'AWS', format: 'Self-paced' },\n                    { name: 'Google Cloud Professional', duration: 4, cost: '$200 exam', provider: 'Google', format: 'Self-paced' },\n                    { name: 'Azure Administrator', duration: 3, cost: '$165 exam', provider: 'Microsoft', format: 'Self-paced' }\n                ],\n                prerequisites: ['IT fundamentals', 'Networking', 'Linux basics'],\n                career_paths: ['Cloud Architect', 'DevOps Engineer', 'Platform Engineer']\n            },\n            'Prompt Engineering': {\n                programs: [\n                    { name: 'DeepLearning.AI Prompt Engineering', duration: 1, cost: 'Free', provider: 'DeepLearning.AI', format: 'Online' },\n                    { name: 'Anthropic Prompt Design', duration: 1, cost: 'Free', provider: 'Anthropic', format: 'Online' },\n                    { name: 'Enterprise AI Implementation', duration: 2, cost: '$500', provider: 'Various', format: 'Online' }\n                ],\n                prerequisites: ['Basic AI understanding', 'Writing skills', 'Domain expertise'],\n                career_paths: ['Prompt Engineer', 'AI Product Manager', 'AI Consultant']\n            },\n            'Healthcare Tech': {\n                programs: [\n                    { name: 'Health Informatics Certificate', duration: 6, cost: '$5,000', provider: 'University', format: 'Online' },\n                    { name: 'Epic Systems Certification', duration: 2, cost: '$3,000', provider: 'Epic', format: 'In-person' },\n                    { name: 'Healthcare Data Analytics', duration: 4, cost: '$2,500', provider: 'Various', format: 'Online' }\n                ],\n                prerequisites: ['Healthcare experience', 'Basic IT skills', 'Data literacy'],\n                career_paths: ['Health IT Specialist', 'Clinical Informatics', 'Medical Data Analyst']\n            }\n        };\n    }\n\n    /**\n     * Analyze skills gap based on simulation results\n     */\n    analyzeSkillsGap(simulationResults) {\n        const summary = simulationResults.summary;\n        const sectorSummary = summary.sector_summary;\n        const aiImpact = summary.ai_impact;\n\n        // Calculate skill demand changes based on sector impacts\n        const decliningSkills = this.analyzeDecliningSkills(sectorSummary, aiImpact);\n        const growingSkills = this.analyzeGrowingSkills(sectorSummary, aiImpact);\n        const transitionPaths = this.analyzeTransitionPaths(decliningSkills, growingSkills);\n        const trainingRecommendations = this.generateTrainingRecommendations(transitionPaths, aiImpact);\n        const gapMetrics = this.calculateGapMetrics(decliningSkills, growingSkills);\n\n        return {\n            declining_skills: decliningSkills,\n            growing_skills: growingSkills,\n            transition_paths: transitionPaths,\n            training_recommendations: trainingRecommendations,\n            gap_metrics: gapMetrics,\n            sector_skill_needs: this.analyzeSectorSkillNeeds(sectorSummary)\n        };\n    }\n\n    /**\n     * Analyze declining skills with projected impact\n     */\n    analyzeDecliningSkills(sectorSummary, aiImpact) {\n        const results = [];\n        const displacementFactor = aiImpact.cumulative_displacement / 10000000; // Normalize\n\n        for (const [skill, data] of Object.entries(this.skillsData.declining)) {\n            // Find sector impact\n            const sectorImpact = this.getSectorImpact(data.sector, sectorSummary);\n\n            // Calculate projected decline\n            const adjustedDecline = data.decline_rate * (1 + displacementFactor) * (1 + Math.abs(sectorImpact) / 100);\n            const workersAffected = Math.round(data.current_demand * (adjustedDecline / 100));\n\n            results.push({\n                name: skill,\n                current_workers: data.current_demand,\n                decline_rate: Math.round(adjustedDecline),\n                workers_affected: workersAffected,\n                automation_risk: Math.round(data.automation_risk * 100) + '%',\n                sector: data.sector,\n                urgency: adjustedDecline > 12 ? 'Critical' : adjustedDecline > 8 ? 'High' : 'Moderate',\n                transition_options: this.skillsData.transitions[skill] || []\n            });\n        }\n\n        return results.sort((a, b) => b.decline_rate - a.decline_rate);\n    }\n\n    /**\n     * Analyze growing skills with projected demand\n     */\n    analyzeGrowingSkills(sectorSummary, aiImpact) {\n        const results = [];\n        const adoptionFactor = parseFloat(aiImpact.ai_adoption.final) / 100;\n\n        for (const [skill, data] of Object.entries(this.skillsData.growing)) {\n            // AI-related skills grow faster with higher AI adoption\n            let adjustedGrowth = data.growth_rate;\n            if (['AI/ML Engineering', 'Data Science', 'Prompt Engineering', 'Human-AI Collaboration', 'AI Ethics/Governance'].includes(skill)) {\n                adjustedGrowth *= (1 + adoptionFactor * 0.5);\n            }\n\n            const projectedDemand = Math.round(data.current_demand * (1 + adjustedGrowth / 100));\n            const newPositions = projectedDemand - data.current_demand;\n\n            results.push({\n                name: skill,\n                current_demand: data.current_demand,\n                growth_rate: Math.round(adjustedGrowth),\n                projected_demand: projectedDemand,\n                new_positions: newPositions,\n                avg_salary: '$' + data.avg_salary.toLocaleString(),\n                training_months: data.training_months,\n                sector: data.sector,\n                opportunity_score: this.calculateOpportunityScore(adjustedGrowth, data.avg_salary, data.training_months)\n            });\n        }\n\n        return results.sort((a, b) => b.opportunity_score - a.opportunity_score);\n    }\n\n    /**\n     * Analyze transition paths from declining to growing skills\n     */\n    analyzeTransitionPaths(decliningSkills, growingSkills) {\n        const paths = [];\n\n        for (const declining of decliningSkills.slice(0, 5)) { // Top 5 declining\n            const transitions = declining.transition_options;\n\n            for (const targetSkill of transitions) {\n                const growing = growingSkills.find(g => g.name === targetSkill);\n                if (growing) {\n                    const training = this.trainingPrograms[targetSkill];\n                    paths.push({\n                        from_skill: declining.name,\n                        to_skill: targetSkill,\n                        workers_needing_transition: declining.workers_affected,\n                        salary_change: growing.avg_salary,\n                        training_duration: growing.training_months + ' months',\n                        difficulty: this.assessTransitionDifficulty(declining, growing),\n                        recommended_programs: training?.programs?.slice(0, 2) || [],\n                        success_likelihood: this.estimateSuccessLikelihood(declining, growing)\n                    });\n                }\n            }\n        }\n\n        return paths.sort((a, b) => b.success_likelihood - a.success_likelihood);\n    }\n\n    /**\n     * Generate training recommendations\n     */\n    generateTrainingRecommendations(transitionPaths, aiImpact) {\n        const recommendations = [];\n        const urgentSkills = new Set();\n\n        // Identify most urgent training needs\n        for (const path of transitionPaths.slice(0, 10)) {\n            if (!urgentSkills.has(path.to_skill)) {\n                urgentSkills.add(path.to_skill);\n\n                const training = this.trainingPrograms[path.to_skill];\n                if (training) {\n                    recommendations.push({\n                        skill: path.to_skill,\n                        priority: path.difficulty === 'Low' ? 'High' : path.difficulty === 'Medium' ? 'Medium' : 'Low',\n                        workers_to_train: path.workers_needing_transition,\n                        programs: training.programs,\n                        prerequisites: training.prerequisites,\n                        career_outcomes: training.career_paths,\n                        estimated_cost: this.estimateTrainingCost(training.programs, path.workers_needing_transition),\n                        roi_estimate: this.estimateTrainingROI(path)\n                    });\n                }\n            }\n        }\n\n        // Add AI-specific recommendations based on adoption rate\n        const aiAdoption = parseFloat(aiImpact.ai_adoption.final);\n        if (aiAdoption > 50) {\n            recommendations.unshift({\n                skill: 'AI Literacy (All Workers)',\n                priority: 'Critical',\n                workers_to_train: Math.round(aiImpact.cumulative_displacement * 0.8),\n                programs: [\n                    { name: 'AI Fundamentals for Everyone', duration: 1, cost: 'Free', provider: 'Various', format: 'Online' },\n                    { name: 'Working with AI Tools', duration: 2, cost: '$200', provider: 'LinkedIn Learning', format: 'Online' }\n                ],\n                prerequisites: ['Basic computer skills'],\n                career_outcomes: ['Enhanced productivity in any role'],\n                estimated_cost: 'Low',\n                roi_estimate: 'High'\n            });\n        }\n\n        return recommendations;\n    }\n\n    /**\n     * Calculate gap metrics\n     */\n    calculateGapMetrics(decliningSkills, growingSkills) {\n        const totalDecliningWorkers = decliningSkills.reduce((sum, s) => sum + s.workers_affected, 0);\n        const totalNewPositions = growingSkills.reduce((sum, s) => sum + s.new_positions, 0);\n\n        const skillGap = totalDecliningWorkers - totalNewPositions;\n\n        return {\n            workers_needing_reskilling: totalDecliningWorkers,\n            new_positions_available: totalNewPositions,\n            net_skill_gap: skillGap,\n            gap_status: skillGap > 0 ? 'Deficit' : 'Surplus',\n            critical_skills_declining: decliningSkills.filter(s => s.urgency === 'Critical').length,\n            high_opportunity_skills: growingSkills.filter(s => s.opportunity_score > 70).length,\n            avg_retraining_time: Math.round(growingSkills.slice(0, 5).reduce((sum, s) => sum + s.training_months, 0) / 5) + ' months',\n            market_readiness: skillGap > 1000000 ? 'Low' : skillGap > 500000 ? 'Moderate' : 'Good'\n        };\n    }\n\n    /**\n     * Analyze sector-specific skill needs\n     */\n    analyzeSectorSkillNeeds(sectorSummary) {\n        const sectorNeeds = {};\n\n        const sectorSkillMap = {\n            technology: ['AI/ML Engineering', 'Cybersecurity', 'Cloud Architecture', 'Data Science'],\n            healthcare: ['Healthcare Tech', 'Data Science', 'Elder Care', 'Mental Health Services'],\n            manufacturing: ['Robotics Maintenance', 'AI/ML Engineering', 'Project Management'],\n            retail: ['Digital Marketing', 'UX/UI Design', 'Data Science'],\n            finance: ['Data Science', 'Cybersecurity', 'AI Ethics/Governance'],\n            professional_services: ['Prompt Engineering', 'Project Management', 'AI Ethics/Governance']\n        };\n\n        for (const [sector, skills] of Object.entries(sectorSkillMap)) {\n            const impact = this.getSectorImpact(sector, sectorSummary);\n            sectorNeeds[sector] = {\n                impact_level: Math.abs(impact) > 10 ? 'High' : Math.abs(impact) > 5 ? 'Moderate' : 'Low',\n                priority_skills: skills,\n                hiring_outlook: impact > 0 ? 'Growing' : impact < -5 ? 'Declining' : 'Stable'\n            };\n        }\n\n        return sectorNeeds;\n    }\n\n    /**\n     * Helper: Get sector impact from summary\n     */\n    getSectorImpact(sector, sectorSummary) {\n        const found = [...(sectorSummary.most_affected || []), ...(sectorSummary.least_affected || [])]\n            .find(s => s.name === sector);\n        return found ? parseFloat(found.employment_change_percent) : 0;\n    }\n\n    /**\n     * Helper: Calculate opportunity score\n     */\n    calculateOpportunityScore(growthRate, salary, trainingMonths) {\n        const salaryScore = Math.min(100, salary / 1500);\n        const growthScore = Math.min(100, growthRate * 2);\n        const accessibilityScore = Math.max(0, 100 - trainingMonths * 4);\n\n        return Math.round((salaryScore * 0.4 + growthScore * 0.4 + accessibilityScore * 0.2));\n    }\n\n    /**\n     * Helper: Assess transition difficulty\n     */\n    assessTransitionDifficulty(fromSkill, toSkill) {\n        const trainingMonths = toSkill.training_months;\n        if (trainingMonths <= 6) return 'Low';\n        if (trainingMonths <= 12) return 'Medium';\n        return 'High';\n    }\n\n    /**\n     * Helper: Estimate success likelihood\n     */\n    estimateSuccessLikelihood(fromSkill, toSkill) {\n        let likelihood = 70;\n\n        // Shorter training = higher likelihood\n        if (toSkill.training_months <= 6) likelihood += 15;\n        else if (toSkill.training_months > 12) likelihood -= 15;\n\n        // Higher salary growth potential = higher motivation\n        likelihood += toSkill.growth_rate > 20 ? 10 : 0;\n\n        return Math.min(95, Math.max(30, likelihood));\n    }\n\n    /**\n     * Helper: Estimate training cost\n     */\n    estimateTrainingCost(programs, workers) {\n        if (!programs || programs.length === 0) return 'Unknown';\n\n        const avgCost = programs.reduce((sum, p) => {\n            const cost = p.cost.includes('Free') ? 0 :\n                parseInt(p.cost.replace(/[^0-9]/g, '')) || 500;\n            return sum + cost;\n        }, 0) / programs.length;\n\n        const total = avgCost * workers;\n        if (total > 1e9) return '$' + (total / 1e9).toFixed(1) + 'B';\n        if (total > 1e6) return '$' + (total / 1e6).toFixed(1) + 'M';\n        return '$' + total.toLocaleString();\n    }\n\n    /**\n     * Helper: Estimate training ROI\n     */\n    estimateTrainingROI(path) {\n        const salaryNum = parseInt(path.salary_change.replace(/[^0-9]/g, ''));\n        if (salaryNum > 100000) return 'Very High';\n        if (salaryNum > 70000) return 'High';\n        if (salaryNum > 50000) return 'Moderate';\n        return 'Standard';\n    }\n\n    /**\n     * Generate HTML display\n     */\n    generateHTML(analysis) {\n        if (!analysis) return '<p>Skills gap analysis not available.</p>';\n\n        return `\n            <div class=\"skills-gap-analysis\">\n                <!-- Gap Metrics Summary -->\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px; margin-bottom: 24px;\">\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Need Reskilling</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--danger);\">${this.formatNumber(analysis.gap_metrics.workers_needing_reskilling)}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">New Positions</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--secondary);\">${this.formatNumber(analysis.gap_metrics.new_positions_available)}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Net Gap</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: ${analysis.gap_metrics.net_skill_gap > 0 ? 'var(--danger)' : 'var(--secondary)'};\">${this.formatNumber(Math.abs(analysis.gap_metrics.net_skill_gap))}</div>\n                        <div style=\"font-size: 0.7rem; color: var(--gray-400);\">${analysis.gap_metrics.gap_status}</div>\n                    </div>\n                    <div style=\"background: var(--gray-50); padding: 16px; border-radius: 8px; text-align: center;\">\n                        <div style=\"font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase;\">Avg Training</div>\n                        <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--primary);\">${analysis.gap_metrics.avg_retraining_time}</div>\n                    </div>\n                </div>\n\n                <!-- Declining Skills -->\n                <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">\n                    <span style=\"color: var(--danger);\"></span> Declining Skills\n                </h4>\n                <div style=\"display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;\">\n                    ${analysis.declining_skills.slice(0, 6).map(skill => `\n                        <span style=\"padding: 6px 12px; background: #fef2f2; color: #991b1b; border-radius: 16px; font-size: 0.8rem;\">\n                            ${skill.name} <span style=\"opacity: 0.7;\">-${skill.decline_rate}%</span>\n                        </span>\n                    `).join('')}\n                </div>\n\n                <!-- Growing Skills -->\n                <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">\n                    <span style=\"color: var(--secondary);\"></span> In-Demand Skills\n                </h4>\n                <div style=\"display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;\">\n                    ${analysis.growing_skills.slice(0, 6).map(skill => `\n                        <span style=\"padding: 6px 12px; background: #ecfdf5; color: #065f46; border-radius: 16px; font-size: 0.8rem;\">\n                            ${skill.name} <span style=\"opacity: 0.7;\">+${skill.growth_rate}%</span>\n                        </span>\n                    `).join('')}\n                </div>\n\n                <!-- Top Transition Paths -->\n                <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">Recommended Transitions</h4>\n                <div style=\"display: grid; gap: 12px; margin-bottom: 20px;\">\n                    ${analysis.transition_paths.slice(0, 3).map(path => `\n                        <div style=\"padding: 12px; background: var(--gray-50); border-radius: 8px; display: flex; align-items: center; gap: 12px;\">\n                            <div style=\"flex: 1;\">\n                                <div style=\"display: flex; align-items: center; gap: 8px; margin-bottom: 4px;\">\n                                    <span style=\"color: var(--danger); font-weight: 500;\">${path.from_skill}</span>\n                                    <span style=\"color: var(--gray-400);\"></span>\n                                    <span style=\"color: var(--secondary); font-weight: 500;\">${path.to_skill}</span>\n                                </div>\n                                <div style=\"font-size: 0.8rem; color: var(--gray-500);\">\n                                    ${path.training_duration} training  ${path.salary_change} avg salary  ${path.success_likelihood}% success rate\n                                </div>\n                            </div>\n                            <div style=\"padding: 4px 10px; background: ${path.difficulty === 'Low' ? 'var(--secondary)' : path.difficulty === 'Medium' ? 'var(--warning)' : 'var(--danger)'}; color: white; border-radius: 12px; font-size: 0.7rem;\">\n                                ${path.difficulty}\n                            </div>\n                        </div>\n                    `).join('')}\n                </div>\n\n                <!-- Training Recommendations -->\n                <h4 style=\"margin-bottom: 12px; color: var(--text-primary);\">Training Programs</h4>\n                ${analysis.training_recommendations.slice(0, 3).map(rec => `\n                    <div style=\"padding: 12px; background: var(--gray-50); border-radius: 8px; margin-bottom: 12px;\">\n                        <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;\">\n                            <span style=\"font-weight: 600;\">${rec.skill}</span>\n                            <span style=\"padding: 2px 8px; background: ${rec.priority === 'Critical' ? 'var(--danger)' : rec.priority === 'High' ? 'var(--warning)' : 'var(--primary)'}; color: white; border-radius: 10px; font-size: 0.7rem;\">\n                                ${rec.priority} Priority\n                            </span>\n                        </div>\n                        <div style=\"font-size: 0.85rem; color: var(--gray-600);\">\n                            ${rec.programs?.slice(0, 2).map(p => `${p.name} (${p.duration}mo, ${p.cost})`).join('  ') || 'Various programs available'}\n                        </div>\n                    </div>\n                `).join('')}\n            </div>\n        `;\n    }\n\n    /**\n     * Format number helper\n     */\n    formatNumber(n) {\n        if (Math.abs(n) >= 1e6) return (n / 1e6).toFixed(1) + 'M';\n        if (Math.abs(n) >= 1e3) return (n / 1e3).toFixed(0) + 'K';\n        return n.toLocaleString();\n    }\n}\n\n// Global instance\nconst skillsGapAnalyzer = new SkillsGapAnalyzer();\n\n// Export for ES modules\nexport { SkillsGapAnalyzer, skillsGapAnalyzer };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.SkillsGapAnalyzer = SkillsGapAnalyzer;\n    window.skillsGapAnalyzer = skillsGapAnalyzer;\n}\n","/**\n * URL Sharing Service\n * Encodes and decodes scenario parameters in URL for easy sharing\n */\n\nclass URLSharingService {\n    constructor() {\n        // Compact parameter keys for shorter URLs\n        this.paramMap = {\n            // Scenario basics\n            'n': 'name',\n            'sy': 'start_year',\n            'ey': 'end_year',\n            // Targets\n            'ur': 'unemployment_rate',\n            'ai': 'ai_adoption_rate',\n            'ap': 'automation_pace',\n            // AI Parameters\n            'ac': 'adoption_curve',\n            'pd': 'productivity_dispersion',\n            'njm': 'new_job_multiplier',\n            'td': 'transition_delay',\n            // Interventions (encoded as array)\n            'iv': 'interventions'\n        };\n\n        // Reverse map for decoding\n        this.reverseMap = {};\n        for (const [short, long] of Object.entries(this.paramMap)) {\n            this.reverseMap[long] = short;\n        }\n    }\n\n    /**\n     * Encode scenario to URL query string\n     * @param {Object} scenario - The scenario object\n     * @returns {string} URL query string\n     */\n    encodeScenario(scenario) {\n        if (!scenario) return '';\n\n        const params = new URLSearchParams();\n\n        // Encode basic info\n        if (scenario.name) {\n            params.set('n', this.compressString(scenario.name));\n        }\n\n        // Encode timeframe\n        if (scenario.timeframe) {\n            params.set('sy', scenario.timeframe.start_year);\n            params.set('ey', scenario.timeframe.end_year);\n        }\n\n        // Encode targets\n        if (scenario.targets) {\n            params.set('ur', scenario.targets.unemployment_rate);\n            params.set('ai', scenario.targets.ai_adoption_rate);\n            params.set('ap', scenario.targets.automation_pace);\n        }\n\n        // Encode AI parameters\n        if (scenario.ai_parameters) {\n            params.set('ac', this.encodeAdoptionCurve(scenario.ai_parameters.adoption_curve));\n            params.set('pd', scenario.ai_parameters.productivity_dispersion);\n            params.set('njm', scenario.ai_parameters.new_job_multiplier);\n            params.set('td', scenario.ai_parameters.transition_delay);\n        }\n\n        // Encode interventions\n        if (scenario.interventions && scenario.interventions.length > 0) {\n            const ivEncoded = this.encodeInterventions(scenario.interventions);\n            params.set('iv', ivEncoded);\n        }\n\n        return params.toString();\n    }\n\n    /**\n     * Decode URL query string to scenario\n     * @param {string} queryString - URL query string\n     * @returns {Object} Partial scenario object\n     */\n    decodeScenario(queryString) {\n        if (!queryString) return null;\n\n        const params = new URLSearchParams(queryString);\n        const scenario = {};\n\n        // Decode name\n        const name = params.get('n');\n        if (name) {\n            scenario.name = this.decompressString(name);\n        }\n\n        // Decode timeframe\n        const startYear = params.get('sy');\n        const endYear = params.get('ey');\n        if (startYear || endYear) {\n            scenario.timeframe = {\n                start_year: startYear ? parseInt(startYear) : 2024,\n                end_year: endYear ? parseInt(endYear) : 2034\n            };\n        }\n\n        // Decode targets\n        const ur = params.get('ur');\n        const ai = params.get('ai');\n        const ap = params.get('ap');\n        if (ur || ai || ap) {\n            scenario.targets = {\n                unemployment_rate: ur ? parseFloat(ur) : 6,\n                ai_adoption_rate: ai ? parseFloat(ai) : 50,\n                automation_pace: ap || 'moderate'\n            };\n        }\n\n        // Decode AI parameters\n        const ac = params.get('ac');\n        const pd = params.get('pd');\n        const njm = params.get('njm');\n        const td = params.get('td');\n        if (ac || pd || njm || td) {\n            scenario.ai_parameters = {\n                adoption_curve: ac ? this.decodeAdoptionCurve(ac) : 's_curve',\n                productivity_dispersion: pd ? parseFloat(pd) : 0.3,\n                new_job_multiplier: njm ? parseFloat(njm) : 0.4,\n                transition_delay: td ? parseFloat(td) : 2\n            };\n        }\n\n        // Decode interventions\n        const iv = params.get('iv');\n        if (iv) {\n            scenario.interventions = this.decodeInterventions(iv);\n        }\n\n        return Object.keys(scenario).length > 0 ? scenario : null;\n    }\n\n    /**\n     * Encode adoption curve to short code\n     */\n    encodeAdoptionCurve(curve) {\n        const curveMap = {\n            'linear': 'L',\n            'exponential': 'E',\n            's_curve': 'S',\n            'step': 'T'\n        };\n        return curveMap[curve] || 'S';\n    }\n\n    /**\n     * Decode adoption curve from short code\n     */\n    decodeAdoptionCurve(code) {\n        const curveMap = {\n            'L': 'linear',\n            'E': 'exponential',\n            'S': 's_curve',\n            'T': 'step'\n        };\n        return curveMap[code] || 's_curve';\n    }\n\n    /**\n     * Encode interventions array\n     */\n    encodeInterventions(interventions) {\n        if (!interventions || interventions.length === 0) return '';\n\n        const typeMap = {\n            'ubi': 'U',\n            'job_retraining': 'R',\n            'wage_subsidy': 'W',\n            'reduced_workweek': 'H',\n            'robot_tax': 'T',\n            'education_subsidy': 'E'\n        };\n\n        return interventions.map(iv => {\n            const typeCode = typeMap[iv.type] || iv.type.charAt(0).toUpperCase();\n            // Encode key parameters as compact string\n            const params = this.encodeInterventionParams(iv.type, iv.parameters);\n            return typeCode + (params ? ':' + params : '');\n        }).join(',');\n    }\n\n    /**\n     * Encode intervention parameters to compact string\n     */\n    encodeInterventionParams(type, params) {\n        if (!params) return '';\n\n        const parts = [];\n        switch (type) {\n            case 'ubi':\n                if (params.monthly_amount) parts.push('m' + params.monthly_amount);\n                if (params.phase_out_threshold) parts.push('p' + params.phase_out_threshold);\n                break;\n            case 'job_retraining':\n                if (params.funding_per_worker) parts.push('f' + params.funding_per_worker);\n                if (params.success_rate) parts.push('s' + params.success_rate);\n                break;\n            case 'wage_subsidy':\n                if (params.subsidy_rate) parts.push('r' + params.subsidy_rate);\n                if (params.max_wage_covered) parts.push('w' + params.max_wage_covered);\n                break;\n            case 'reduced_workweek':\n                if (params.target_hours) parts.push('h' + params.target_hours);\n                break;\n            case 'robot_tax':\n                if (params.tax_rate) parts.push('t' + params.tax_rate);\n                break;\n            case 'education_subsidy':\n                if (params.funding_increase) parts.push('i' + params.funding_increase);\n                break;\n        }\n        return parts.join('-');\n    }\n\n    /**\n     * Decode interventions from compact string\n     */\n    decodeInterventions(encoded) {\n        if (!encoded) return [];\n\n        const typeMap = {\n            'U': 'ubi',\n            'R': 'job_retraining',\n            'W': 'wage_subsidy',\n            'H': 'reduced_workweek',\n            'T': 'robot_tax',\n            'E': 'education_subsidy'\n        };\n\n        const typeNames = {\n            'ubi': 'Universal Basic Income',\n            'job_retraining': 'Job Retraining',\n            'wage_subsidy': 'Wage Subsidy',\n            'reduced_workweek': 'Reduced Work Week',\n            'robot_tax': 'Robot Tax',\n            'education_subsidy': 'Education Subsidy'\n        };\n\n        return encoded.split(',').map(part => {\n            const typeCode = part.charAt(0);\n            const type = typeMap[typeCode];\n            if (!type) return null;\n\n            const paramsStr = part.includes(':') ? part.split(':')[1] : '';\n            const parameters = this.decodeInterventionParams(type, paramsStr);\n\n            return {\n                type,\n                name: typeNames[type],\n                parameters\n            };\n        }).filter(iv => iv !== null);\n    }\n\n    /**\n     * Decode intervention parameters from compact string\n     */\n    decodeInterventionParams(type, encoded) {\n        const params = {};\n        if (!encoded) return params;\n\n        const parts = encoded.split('-');\n        for (const part of parts) {\n            if (part.length < 2) continue;\n            const key = part.charAt(0);\n            const value = parseFloat(part.substring(1));\n\n            switch (type) {\n                case 'ubi':\n                    if (key === 'm') params.monthly_amount = value;\n                    if (key === 'p') params.phase_out_threshold = value;\n                    break;\n                case 'job_retraining':\n                    if (key === 'f') params.funding_per_worker = value;\n                    if (key === 's') params.success_rate = value;\n                    break;\n                case 'wage_subsidy':\n                    if (key === 'r') params.subsidy_rate = value;\n                    if (key === 'w') params.max_wage_covered = value;\n                    break;\n                case 'reduced_workweek':\n                    if (key === 'h') params.target_hours = value;\n                    break;\n                case 'robot_tax':\n                    if (key === 't') params.tax_rate = value;\n                    break;\n                case 'education_subsidy':\n                    if (key === 'i') params.funding_increase = value;\n                    break;\n            }\n        }\n        return params;\n    }\n\n    /**\n     * Compress string for URL (basic encoding)\n     */\n    compressString(str) {\n        return encodeURIComponent(str.replace(/ /g, '_'));\n    }\n\n    /**\n     * Decompress string from URL\n     */\n    decompressString(str) {\n        return decodeURIComponent(str).replace(/_/g, ' ');\n    }\n\n    /**\n     * Generate shareable URL for current scenario\n     * @param {Object} scenario - The scenario object\n     * @returns {string} Full shareable URL\n     */\n    generateShareableURL(scenario) {\n        const queryString = this.encodeScenario(scenario);\n        const baseURL = window.location.origin + window.location.pathname;\n        return queryString ? `${baseURL}?${queryString}` : baseURL;\n    }\n\n    /**\n     * Check if URL has scenario parameters\n     * @returns {boolean}\n     */\n    hasScenarioInURL() {\n        return window.location.search.length > 1;\n    }\n\n    /**\n     * Load scenario from current URL\n     * @returns {Object|null} Decoded scenario or null\n     */\n    loadFromURL() {\n        if (!this.hasScenarioInURL()) return null;\n        return this.decodeScenario(window.location.search.substring(1));\n    }\n\n    /**\n     * Update URL with current scenario (without page reload)\n     * @param {Object} scenario - The scenario object\n     */\n    updateURL(scenario) {\n        const queryString = this.encodeScenario(scenario);\n        const newURL = queryString\n            ? `${window.location.pathname}?${queryString}`\n            : window.location.pathname;\n\n        window.history.replaceState({ scenario }, '', newURL);\n    }\n\n    /**\n     * Copy shareable URL to clipboard\n     * @param {Object} scenario - The scenario object\n     * @returns {Promise<boolean>} Success status\n     */\n    async copyToClipboard(scenario) {\n        const url = this.generateShareableURL(scenario);\n        try {\n            await navigator.clipboard.writeText(url);\n            return true;\n        } catch (e) {\n            // Fallback for older browsers\n            const textarea = document.createElement('textarea');\n            textarea.value = url;\n            textarea.style.position = 'fixed';\n            textarea.style.opacity = '0';\n            document.body.appendChild(textarea);\n            textarea.select();\n            try {\n                document.execCommand('copy');\n                document.body.removeChild(textarea);\n                return true;\n            } catch (e2) {\n                document.body.removeChild(textarea);\n                return false;\n            }\n        }\n    }\n}\n\n// Global instance\nconst urlSharing = new URLSharingService();\n\n/**\n * Copy current scenario URL to clipboard\n */\nasync function copyScenarioURL() {\n    const scenario = getCurrentScenario();\n    if (!scenario) {\n        showNotification('No scenario configured yet', 'warning');\n        return;\n    }\n\n    const success = await urlSharing.copyToClipboard(scenario);\n    if (success) {\n        showNotification('Shareable URL copied to clipboard!', 'success');\n    } else {\n        // Show URL in modal as fallback\n        const url = urlSharing.generateShareableURL(scenario);\n        showShareURLModal(url);\n    }\n}\n\n/**\n * Show modal with shareable URL\n */\nfunction showShareURLModal(url) {\n    const modal = document.createElement('div');\n    modal.className = 'modal-overlay';\n    modal.style.display = 'flex';\n    modal.innerHTML = `\n        <div class=\"modal\" style=\"max-width: 600px;\">\n            <div class=\"modal-header\">\n                <h3>Share This Scenario</h3>\n                <button class=\"modal-close\" onclick=\"this.closest('.modal-overlay').remove()\">&times;</button>\n            </div>\n            <div class=\"modal-body\">\n                <p style=\"margin-bottom: 16px;\">Copy this URL to share your scenario configuration:</p>\n                <div style=\"display: flex; gap: 8px;\">\n                    <input type=\"text\" id=\"shareUrlInput\" value=\"${url}\" readonly\n                        style=\"flex: 1; padding: 12px; font-size: 0.875rem; border: 1px solid var(--gray-300);\n                               border-radius: var(--radius); background: var(--gray-50);\">\n                    <button class=\"btn btn-primary\" onclick=\"copyShareInput()\">Copy</button>\n                </div>\n                <p style=\"font-size: 0.75rem; color: var(--gray-500); margin-top: 12px;\">\n                    This URL contains your scenario parameters. Anyone with this link can load your exact configuration.\n                </p>\n            </div>\n        </div>\n    `;\n    document.body.appendChild(modal);\n\n    // Select input text\n    setTimeout(() => {\n        document.getElementById('shareUrlInput').select();\n    }, 100);\n}\n\n/**\n * Copy from share input field\n */\nfunction copyShareInput() {\n    const input = document.getElementById('shareUrlInput');\n    input.select();\n    document.execCommand('copy');\n    showNotification('URL copied!', 'success');\n    input.closest('.modal-overlay').remove();\n}\n\n/**\n * Apply scenario from URL on page load\n */\nfunction applyScenarioFromURL() {\n    const scenario = urlSharing.loadFromURL();\n    if (!scenario) return false;\n\n    // Apply to form fields - using correct element IDs from index.html\n    if (scenario.name) {\n        const nameInput = document.getElementById('scenarioName');\n        if (nameInput) nameInput.value = scenario.name;\n    }\n\n    if (scenario.timeframe) {\n        // targetYear is a select element with year options\n        const endInput = document.getElementById('targetYear');\n        if (endInput) endInput.value = scenario.timeframe.end_year;\n    }\n\n    if (scenario.targets) {\n        // targetUR and aiAdoption are range inputs\n        const urInput = document.getElementById('targetUR');\n        const aiInput = document.getElementById('aiAdoption');\n        const apInput = document.getElementById('automationPace');\n\n        if (urInput) {\n            urInput.value = scenario.targets.unemployment_rate;\n            // Also update the displayed value\n            const urValue = document.getElementById('urValue');\n            if (urValue) urValue.textContent = scenario.targets.unemployment_rate;\n        }\n        if (aiInput) {\n            aiInput.value = scenario.targets.ai_adoption_rate;\n            // Also update the displayed value\n            const aiValue = document.getElementById('aiValue');\n            if (aiValue) aiValue.textContent = scenario.targets.ai_adoption_rate;\n        }\n        if (apInput) apInput.value = scenario.targets.automation_pace;\n    }\n\n    if (scenario.ai_parameters) {\n        const acInput = document.getElementById('adoptionCurve');\n        if (acInput) acInput.value = scenario.ai_parameters.adoption_curve;\n    }\n\n    // Apply interventions\n    if (scenario.interventions && scenario.interventions.length > 0 &&\n        typeof interventionSystem !== 'undefined') {\n        scenario.interventions.forEach(iv => {\n            interventionSystem.addIntervention(iv.type, iv.parameters);\n        });\n        if (typeof updateInterventionsList !== 'undefined') {\n            updateInterventionsList();\n        }\n    }\n\n    // Show notification\n    setTimeout(() => {\n        showNotification('Scenario loaded from shared URL', 'success');\n    }, 500);\n\n    return true;\n}\n\n/**\n * Update sliders to match input values\n */\nfunction updateSlidersFromInputs() {\n    const pairs = [\n        ['targetUnemployment', 'targetUnemploymentSlider'],\n        ['targetAIAdoption', 'targetAIAdoptionSlider'],\n        ['productivityDispersion', 'productivityDispersionSlider'],\n        ['newJobMultiplier', 'newJobMultiplierSlider'],\n        ['transitionDelay', 'transitionDelaySlider']\n    ];\n\n    pairs.forEach(([inputId, sliderId]) => {\n        const input = document.getElementById(inputId);\n        const slider = document.getElementById(sliderId);\n        if (input && slider) {\n            slider.value = input.value;\n        }\n    });\n}\n\n// Aliases for backwards compatibility\nconst showShareModal = copyScenarioURL;\nconst hideShareModal = () => {\n    const modal = document.querySelector('.modal-overlay');\n    if (modal) modal.remove();\n};\nconst copyShareUrl = copyScenarioURL;\n\n// Export for ES modules\nexport {\n    URLSharingService,\n    urlSharing,\n    copyScenarioURL,\n    showShareURLModal,\n    copyShareInput,\n    applyScenarioFromURL,\n    updateSlidersFromInputs,\n    showShareModal,\n    hideShareModal,\n    copyShareUrl\n};\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.URLSharingService = URLSharingService;\n    window.urlSharing = urlSharing;\n    window.copyScenarioURL = copyScenarioURL;\n    window.showShareURLModal = showShareURLModal;\n    window.copyShareInput = copyShareInput;\n    window.applyScenarioFromURL = applyScenarioFromURL;\n    window.updateSlidersFromInputs = updateSlidersFromInputs;\n    window.showShareModal = showShareModal;\n    window.hideShareModal = hideShareModal;\n    window.copyShareUrl = copyShareUrl;\n}\n","/**\n * WorkerAgent - Individual worker in the Agent-Based Model\n *\n * Each worker has demographics, skills, employment status, and political opinions.\n * Workers make autonomous decisions about job search, retraining, and relocation.\n */\n\n// Employment status enum\nconst EmploymentStatus = {\n    EMPLOYED: 'employed',\n    UNEMPLOYED: 'unemployed',\n    RETRAINING: 'retraining',\n    OUT_OF_LABOR_FORCE: 'out_of_labor_force'\n};\n\n// Education level enum\nconst EducationLevel = {\n    NO_DEGREE: 'no_degree',\n    HIGH_SCHOOL: 'high_school',\n    SOME_COLLEGE: 'some_college',\n    BACHELORS: 'bachelors',\n    ADVANCED: 'advanced'\n};\n\n// AI experience enum\nconst AIExperience = {\n    POSITIVE: 'positive',\n    NEGATIVE: 'negative',\n    NEUTRAL: 'neutral',\n    NONE: 'none'\n};\n\nclass WorkerAgent {\n    constructor(config = {}) {\n        // Unique identifier\n        this.id = config.id || `worker_${Math.random().toString(36).substr(2, 9)}`;\n\n        // Demographics\n        this.age = config.age || this._randomAge();\n        this.education = config.education || this._randomEducation();\n        this.region = config.region || 1; // Default to region 1\n\n        // Employment\n        this.status = config.status || EmploymentStatus.EMPLOYED;\n        this.occupation = config.occupation || this._randomOccupation();\n        this.industry = config.industry || this._randomIndustry();\n        this.employer = config.employer || null;\n        this.tenure = config.tenure || Math.floor(Math.random() * 120); // 0-10 years in months\n        this.unemploymentDuration = 0; // Months unemployed\n\n        // Skills & Capabilities (0-1 scale)\n        this.skills = config.skills || this._initializeSkills();\n        this.aiAugmentationSkill = config.aiAugmentationSkill || Math.random() * 0.5 + 0.1;\n        this.adaptability = config.adaptability || Math.random() * 0.6 + 0.2;\n\n        // Economics\n        this.wage = config.wage || this._calculateInitialWage();\n        this.savings = config.savings || Math.random() * 12; // 0-12 months of expenses\n        this.reservationWage = this.wage * 0.7; // Minimum acceptable wage\n\n        // Behavioral traits (0-1 scale)\n        this.riskTolerance = config.riskTolerance || Math.random();\n        this.mobilityWillingness = config.mobilityWillingness || Math.random() * 0.5;\n        this.networkSize = config.networkSize || Math.floor(Math.random() * 50) + 5;\n        this.informationLevel = config.informationLevel || Math.random();\n\n        // Network connections (populated during initialization)\n        this.network = [];\n\n        // History\n        this.unemploymentSpells = 0;\n        this.retrainingHistory = [];\n        this.jobHistory = [];\n\n        // Political behavioral factors (initialize BEFORE policy support, since it depends on these)\n        this.politicalEngagement = config.politicalEngagement || Math.random() * 0.6 + 0.2;\n        this.ideologicalPrior = config.ideologicalPrior || (Math.random() * 2 - 1); // -1 to 1\n        this.economicAnxiety = config.economicAnxiety || 0.2;\n        this.trustInGovernment = config.trustInGovernment || Math.random() * 0.5 + 0.25;\n        this.networkPoliticalInfluence = config.networkPoliticalInfluence || Math.random() * 0.5;\n\n        // Political / Policy Support (0-1 scale) - depends on ideologicalPrior above\n        this.policySupport = {\n            ubi: this._initializePolicySupport('ubi'),\n            retraining: this._initializePolicySupport('retraining'),\n            wageSubsidy: this._initializePolicySupport('wageSubsidy'),\n            reducedWorkWeek: this._initializePolicySupport('reducedWorkWeek'),\n            publicWorks: this._initializePolicySupport('publicWorks'),\n            eitcExpansion: this._initializePolicySupport('eitcExpansion'),\n            aiRegulation: this._initializePolicySupport('aiRegulation'),\n            tradeProtection: this._initializePolicySupport('tradeProtection'),\n            educationInvestment: this._initializePolicySupport('educationInvestment')\n        };\n\n        // Experience-based sentiment\n        this.personalAIExperience = AIExperience.NONE;\n        this.benefitedFromIntervention = null;\n        this.harmedByLackOfIntervention = false;\n\n        // Retraining state\n        this.retrainingProgram = null;\n        this.retrainingProgress = 0;\n\n        // Job search state\n        this.activelySearching = false;\n        this.jobApplications = [];\n        this.jobOffers = [];\n    }\n\n    // ========== Initialization Helpers ==========\n\n    _randomAge() {\n        // Distribution weighted toward working-age adults\n        const rand = Math.random();\n        if (rand < 0.15) return Math.floor(Math.random() * 7) + 18; // 18-24\n        if (rand < 0.35) return Math.floor(Math.random() * 10) + 25; // 25-34\n        if (rand < 0.55) return Math.floor(Math.random() * 10) + 35; // 35-44\n        if (rand < 0.75) return Math.floor(Math.random() * 10) + 45; // 45-54\n        if (rand < 0.92) return Math.floor(Math.random() * 10) + 55; // 55-64\n        return Math.floor(Math.random() * 6) + 65; // 65-70\n    }\n\n    _randomEducation() {\n        const rand = Math.random();\n        if (rand < 0.10) return EducationLevel.NO_DEGREE;\n        if (rand < 0.38) return EducationLevel.HIGH_SCHOOL;\n        if (rand < 0.58) return EducationLevel.SOME_COLLEGE;\n        if (rand < 0.85) return EducationLevel.BACHELORS;\n        return EducationLevel.ADVANCED;\n    }\n\n    _randomOccupation() {\n        // Return occupation ID 1-100\n        return Math.floor(Math.random() * 100) + 1;\n    }\n\n    _randomIndustry() {\n        // Return industry ID 1-20\n        return Math.floor(Math.random() * 20) + 1;\n    }\n\n    _initializeSkills() {\n        // 20-dimension skill vector\n        const skills = {};\n        const skillTypes = [\n            'technical', 'analytical', 'communication', 'leadership',\n            'creativity', 'problemSolving', 'dataAnalysis', 'programming',\n            'customerService', 'sales', 'projectManagement', 'writing',\n            'research', 'financial', 'healthcare', 'manufacturing',\n            'logistics', 'marketing', 'legal', 'teaching'\n        ];\n\n        skillTypes.forEach(skill => {\n            // Base skill level influenced by education\n            const educationBonus = this._getEducationBonus();\n            skills[skill] = Math.min(1, Math.random() * 0.6 + educationBonus);\n        });\n\n        return skills;\n    }\n\n    _getEducationBonus() {\n        switch (this.education) {\n            case EducationLevel.ADVANCED: return 0.3;\n            case EducationLevel.BACHELORS: return 0.2;\n            case EducationLevel.SOME_COLLEGE: return 0.1;\n            case EducationLevel.HIGH_SCHOOL: return 0.05;\n            default: return 0;\n        }\n    }\n\n    _calculateInitialWage() {\n        // Base wage influenced by education and age (experience proxy)\n        let baseWage = 3000; // $3000/month base\n\n        // Education multiplier\n        const eduMultipliers = {\n            [EducationLevel.NO_DEGREE]: 0.7,\n            [EducationLevel.HIGH_SCHOOL]: 0.85,\n            [EducationLevel.SOME_COLLEGE]: 1.0,\n            [EducationLevel.BACHELORS]: 1.4,\n            [EducationLevel.ADVANCED]: 1.8\n        };\n\n        baseWage *= eduMultipliers[this.education] || 1;\n\n        // Age/experience bonus (peaks around 50)\n        const experienceMultiplier = 1 + Math.min(0.5, (this.age - 22) * 0.015);\n        baseWage *= experienceMultiplier;\n\n        // Add some randomness\n        baseWage *= (0.8 + Math.random() * 0.4);\n\n        return Math.round(baseWage);\n    }\n\n    _initializePolicySupport(policy) {\n        // Initial support influenced by ideology\n        let baseSupport = 0.5;\n\n        // Left-leaning more supportive of government programs\n        if (this.ideologicalPrior < 0) {\n            if (['ubi', 'retraining', 'publicWorks', 'aiRegulation'].includes(policy)) {\n                baseSupport += Math.abs(this.ideologicalPrior) * 0.2;\n            }\n        } else {\n            // Right-leaning less supportive\n            if (['ubi', 'aiRegulation', 'publicWorks'].includes(policy)) {\n                baseSupport -= this.ideologicalPrior * 0.15;\n            }\n            if (policy === 'educationInvestment') {\n                baseSupport += 0.1; // Generally bipartisan\n            }\n        }\n\n        // Add noise\n        baseSupport += (Math.random() - 0.5) * 0.2;\n\n        return Math.max(0, Math.min(1, baseSupport));\n    }\n\n    // ========== Decision Making ==========\n\n    /**\n     * Main monthly decision function\n     */\n    makeMonthlyDecisions(laborMarket, aiCapability, interventions) {\n        // Calculate current displacement risk\n        const displacementRisk = this._calculateDisplacementRisk(aiCapability);\n\n        switch (this.status) {\n            case EmploymentStatus.EMPLOYED:\n                this._employedDecisions(displacementRisk, laborMarket);\n                break;\n            case EmploymentStatus.UNEMPLOYED:\n                this._unemployedDecisions(laborMarket);\n                break;\n            case EmploymentStatus.RETRAINING:\n                this._retrainingDecisions();\n                break;\n            case EmploymentStatus.OUT_OF_LABOR_FORCE:\n                this._outOfLaborForceDecisions(laborMarket);\n                break;\n        }\n\n        // Update policy support based on current situation\n        this._updatePolicySupport();\n\n        // Age one month\n        this._ageOneMonth();\n    }\n\n    _calculateDisplacementRisk(aiCapability) {\n        // Base risk from occupation automation exposure\n        const occupationExposure = aiCapability.getOccupationExposure(this.occupation);\n\n        // Reduced by AI augmentation skill\n        const personalMitigation = this.aiAugmentationSkill * 0.3;\n\n        // Employer AI adoption increases risk\n        const employerRisk = this.employer ? this.employer.automationLevel * 0.2 : 0;\n\n        // Tenure can be double-edged (experience but also higher cost)\n        const tenureRisk = this.tenure > 60 ? 0.05 : 0;\n\n        return Math.max(0, Math.min(1,\n            occupationExposure - personalMitigation + employerRisk + tenureRisk\n        ));\n    }\n\n    _employedDecisions(displacementRisk, laborMarket) {\n        // Threshold based on risk tolerance\n        const searchThreshold = 0.5 - (this.riskTolerance * 0.2);\n\n        // Consider job search if displacement risk is high\n        if (displacementRisk > searchThreshold) {\n            // More likely to search if have savings cushion\n            const searchProbability = displacementRisk * (0.5 + this.savings / 24);\n\n            if (Math.random() < searchProbability) {\n                this.activelySearching = true;\n            }\n        }\n\n        // Consider retraining if risk is very high and have savings\n        if (displacementRisk > 0.7 && this.savings > 3 && this.age < 55) {\n            const retrainROI = this._calculateRetrainingROI();\n            if (retrainROI > 1.2 && Math.random() < 0.1) {\n                this._considerRetraining();\n            }\n        }\n\n        // Update savings (employed workers save)\n        this.savings = Math.min(24, this.savings + 0.2);\n    }\n\n    _unemployedDecisions(laborMarket) {\n        this.unemploymentDuration++;\n        this.activelySearching = true;\n\n        // Deplete savings\n        this.savings = Math.max(0, this.savings - 1);\n\n        // Increase economic anxiety\n        this.economicAnxiety = Math.min(1, this.economicAnxiety + 0.03);\n\n        // Lower reservation wage over time\n        if (this.unemploymentDuration > 3) {\n            this.reservationWage *= 0.98;\n        }\n\n        // Consider retraining after 6 months\n        if (this.unemploymentDuration > 6 && this.savings > 2 && this.age < 55) {\n            if (Math.random() < 0.15) {\n                this._considerRetraining();\n            }\n        }\n\n        // Consider leaving labor force after 18 months if older\n        if (this.unemploymentDuration > 18 && this.age > 55) {\n            if (Math.random() < 0.05) {\n                this.status = EmploymentStatus.OUT_OF_LABOR_FORCE;\n                this.activelySearching = false;\n            }\n        }\n\n        // Expand job search criteria over time\n        if (this.unemploymentDuration > 6) {\n            // More willing to relocate\n            this.mobilityWillingness = Math.min(1, this.mobilityWillingness + 0.02);\n        }\n    }\n\n    _retrainingDecisions() {\n        if (!this.retrainingProgram) {\n            // Something went wrong, return to job search\n            this.status = EmploymentStatus.UNEMPLOYED;\n            return;\n        }\n\n        this.retrainingProgress++;\n\n        // Check if program is complete\n        if (this.retrainingProgress >= this.retrainingProgram.duration) {\n            this._completeRetraining();\n        }\n\n        // Risk of dropout due to financial pressure\n        if (this.savings <= 0 && Math.random() < 0.1) {\n            this._dropoutRetraining();\n        }\n\n        // Deplete savings during retraining\n        this.savings = Math.max(0, this.savings - 0.8);\n    }\n\n    _outOfLaborForceDecisions(laborMarket) {\n        // Small chance of re-entering labor force\n        if (Math.random() < 0.02) {\n            this.status = EmploymentStatus.UNEMPLOYED;\n            this.unemploymentDuration = 0;\n            this.activelySearching = true;\n        }\n    }\n\n    _considerRetraining() {\n        // Would need to be connected to training program agents\n        // For now, just flag interest\n        this.wantsRetraining = true;\n    }\n\n    _calculateRetrainingROI() {\n        // Simplified ROI calculation\n        const potentialWageIncrease = this.wage * 0.3;\n        const yearsRemaining = Math.max(1, 65 - this.age);\n        const trainingCost = 10000; // Average training cost\n\n        return (potentialWageIncrease * 12 * yearsRemaining) / trainingCost;\n    }\n\n    _completeRetraining() {\n        // Update skills based on program\n        if (this.retrainingProgram.skillsProvided) {\n            Object.entries(this.retrainingProgram.skillsProvided).forEach(([skill, value]) => {\n                this.skills[skill] = Math.min(1, (this.skills[skill] || 0) + value);\n            });\n        }\n\n        // Update AI augmentation skill\n        this.aiAugmentationSkill = Math.min(1, this.aiAugmentationSkill + 0.2);\n\n        // Record in history\n        this.retrainingHistory.push({\n            program: this.retrainingProgram.id,\n            completedMonth: Date.now(),\n            success: true\n        });\n\n        // Return to job search\n        this.status = EmploymentStatus.UNEMPLOYED;\n        this.unemploymentDuration = 0;\n        this.retrainingProgram = null;\n        this.retrainingProgress = 0;\n        this.activelySearching = true;\n\n        // Boost policy support for retraining (it worked!)\n        this.policySupport.retraining = Math.min(1, this.policySupport.retraining + 0.2);\n        this.policySupport.educationInvestment = Math.min(1, this.policySupport.educationInvestment + 0.15);\n        this.trustInGovernment = Math.min(1, this.trustInGovernment + 0.1);\n        this.benefitedFromIntervention = 'retraining';\n    }\n\n    _dropoutRetraining() {\n        this.retrainingHistory.push({\n            program: this.retrainingProgram.id,\n            completedMonth: Date.now(),\n            success: false\n        });\n\n        this.status = EmploymentStatus.UNEMPLOYED;\n        this.retrainingProgram = null;\n        this.retrainingProgress = 0;\n        this.activelySearching = true;\n\n        // Reduced policy support for retraining (didn't work for me)\n        this.policySupport.retraining = Math.max(0, this.policySupport.retraining - 0.15);\n        this.trustInGovernment = Math.max(0, this.trustInGovernment - 0.15);\n\n        // Maybe just give cash instead\n        this.policySupport.ubi = Math.min(1, this.policySupport.ubi + 0.1);\n    }\n\n    _ageOneMonth() {\n        // Simplified - age increases every 12 months\n        // In a real implementation, track actual month count\n    }\n\n    // ========== Job Market Interactions ==========\n\n    /**\n     * Search for and apply to jobs\n     */\n    searchForJobs(laborMarket) {\n        if (!this.activelySearching) return [];\n\n        // Get visible jobs based on network and region\n        const visibleJobs = laborMarket.getVisibleJobs(this);\n\n        // Filter to jobs we're qualified for\n        const suitableJobs = visibleJobs.filter(job => this._isQualifiedFor(job));\n\n        // Apply to top matches (limit based on desperation)\n        const applicationLimit = this.unemploymentDuration > 6 ? 10 : 5;\n        const applications = suitableJobs.slice(0, applicationLimit);\n\n        this.jobApplications = applications.map(job => job.id);\n\n        return applications;\n    }\n\n    _isQualifiedFor(job) {\n        // Check education requirement\n        const eduRank = {\n            [EducationLevel.NO_DEGREE]: 0,\n            [EducationLevel.HIGH_SCHOOL]: 1,\n            [EducationLevel.SOME_COLLEGE]: 2,\n            [EducationLevel.BACHELORS]: 3,\n            [EducationLevel.ADVANCED]: 4\n        };\n\n        if (eduRank[this.education] < eduRank[job.requiredEducation || EducationLevel.NO_DEGREE]) {\n            return false;\n        }\n\n        // Check skill match\n        if (job.requiredSkills) {\n            const skillMatch = Object.entries(job.requiredSkills).every(([skill, level]) => {\n                return (this.skills[skill] || 0) >= level * 0.7; // Allow 70% match\n            });\n            if (!skillMatch) return false;\n        }\n\n        // Check wage expectations (unless desperate)\n        if (this.unemploymentDuration < 6 && job.wage < this.reservationWage) {\n            return false;\n        }\n\n        // Check region (unless willing to relocate)\n        if (job.region !== this.region && this.mobilityWillingness < 0.5) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Evaluate and potentially accept job offers\n     */\n    evaluateOffers() {\n        if (this.jobOffers.length === 0) return null;\n\n        // Score each offer\n        const scoredOffers = this.jobOffers.map(offer => ({\n            offer,\n            score: this._scoreJobOffer(offer)\n        }));\n\n        // Sort by score\n        scoredOffers.sort((a, b) => b.score - a.score);\n\n        const bestOffer = scoredOffers[0];\n\n        // Accept if meets reservation wage or if desperate\n        if (bestOffer.offer.wage >= this.reservationWage || this.unemploymentDuration > 9) {\n            return bestOffer.offer;\n        }\n\n        return null;\n    }\n\n    _scoreJobOffer(offer) {\n        let score = 0;\n\n        // Wage (normalized)\n        score += (offer.wage / this.wage) * 40;\n\n        // Location preference\n        if (offer.region === this.region) {\n            score += 20;\n        } else {\n            score += this.mobilityWillingness * 10;\n        }\n\n        // Job stability (inverse of automation exposure)\n        score += (1 - (offer.automationExposure || 0.5)) * 20;\n\n        // Growth potential\n        score += (offer.growthPotential || 0.5) * 10;\n\n        // AI augmentation opportunity\n        score += (offer.aiAugmentation || 0) * 10;\n\n        return score;\n    }\n\n    /**\n     * Accept a job offer\n     */\n    acceptJob(offer, firm) {\n        // Record previous job in history if employed\n        if (this.status === EmploymentStatus.EMPLOYED && this.employer) {\n            this.jobHistory.push({\n                employer: this.employer.id,\n                occupation: this.occupation,\n                wage: this.wage,\n                tenure: this.tenure,\n                endReason: 'voluntary_quit'\n            });\n        }\n\n        this.status = EmploymentStatus.EMPLOYED;\n        this.employer = firm;\n        this.occupation = offer.occupation;\n        this.industry = firm.industry;\n        this.wage = offer.wage;\n        this.tenure = 0;\n        this.unemploymentDuration = 0;\n        this.activelySearching = false;\n        this.jobOffers = [];\n        this.jobApplications = [];\n\n        // Reset reservation wage\n        this.reservationWage = this.wage * 0.7;\n\n        // Reduce economic anxiety\n        this.economicAnxiety = Math.max(0, this.economicAnxiety - 0.2);\n    }\n\n    /**\n     * Handle being laid off\n     */\n    layOff(reason = 'automation') {\n        // Record in history\n        this.jobHistory.push({\n            employer: this.employer ? this.employer.id : null,\n            occupation: this.occupation,\n            wage: this.wage,\n            tenure: this.tenure,\n            endReason: reason\n        });\n\n        this.status = EmploymentStatus.UNEMPLOYED;\n        this.employer = null;\n        this.tenure = 0;\n        this.unemploymentDuration = 0;\n        this.unemploymentSpells++;\n        this.activelySearching = true;\n\n        // Increase economic anxiety\n        this.economicAnxiety = Math.min(1, this.economicAnxiety + 0.3);\n\n        // Update policy support based on layoff reason\n        this.policySupport.ubi = Math.min(1, this.policySupport.ubi + 0.15);\n        this.policySupport.retraining = Math.min(1, this.policySupport.retraining + 0.12);\n\n        if (reason === 'automation') {\n            this.policySupport.aiRegulation = Math.min(1, this.policySupport.aiRegulation + 0.2);\n            this.personalAIExperience = AIExperience.NEGATIVE;\n            this.harmedByLackOfIntervention = true;\n        }\n\n        // Broadcast anxiety to network\n        this.network.forEach(contact => {\n            if (contact.economicAnxiety !== undefined) {\n                contact.economicAnxiety = Math.min(1, contact.economicAnxiety + 0.05);\n                contact.policySupport.aiRegulation = Math.min(1, contact.policySupport.aiRegulation + 0.03);\n            }\n        });\n    }\n\n    // ========== Policy Support Updates ==========\n\n    _updatePolicySupport() {\n        // Apply network influence\n        this._applyNetworkInfluence();\n\n        // Apply ideology bounds\n        this._applyIdeologyBounds();\n\n        // Apply trust modifier\n        this._applyTrustModifier();\n\n        // Clamp all values\n        Object.keys(this.policySupport).forEach(policy => {\n            this.policySupport[policy] = Math.max(0, Math.min(1, this.policySupport[policy]));\n        });\n    }\n\n    _applyNetworkInfluence() {\n        if (this.network.length === 0) return;\n\n        this.network.forEach(contact => {\n            if (!contact.policySupport) return;\n\n            const influenceWeight = (contact.closeness || 0.5) * this.networkPoliticalInfluence;\n\n            // Opinion convergence\n            Object.keys(this.policySupport).forEach(policy => {\n                if (contact.policySupport[policy] !== undefined) {\n                    const diff = contact.policySupport[policy] - this.policySupport[policy];\n                    this.policySupport[policy] += diff * 0.02 * influenceWeight;\n                }\n            });\n\n            // If contact recently lost job, increase anxiety and UBI support\n            if (contact.status === EmploymentStatus.UNEMPLOYED && contact.unemploymentDuration < 3) {\n                this.policySupport.ubi += 0.03 * influenceWeight;\n                this.economicAnxiety += 0.05 * influenceWeight;\n            }\n        });\n    }\n\n    _applyIdeologyBounds() {\n        // Hardship can override ideology\n        const ideologyWeight = this.economicAnxiety > 0.7 ? 0.5 : 1.0;\n\n        if (this.ideologicalPrior < 0) {\n            // Left-leaning floors\n            this.policySupport.ubi = Math.max(this.policySupport.ubi, 0.3 * ideologyWeight);\n            this.policySupport.retraining = Math.max(this.policySupport.retraining, 0.4 * ideologyWeight);\n            this.policySupport.aiRegulation = Math.max(this.policySupport.aiRegulation, 0.3 * ideologyWeight);\n        } else {\n            // Right-leaning ceilings (can be overridden by hardship)\n            if (this.economicAnxiety < 0.7) {\n                this.policySupport.ubi = Math.min(this.policySupport.ubi, 0.6);\n                this.policySupport.aiRegulation = Math.min(this.policySupport.aiRegulation, 0.5);\n            }\n        }\n    }\n\n    _applyTrustModifier() {\n        if (this.trustInGovernment < 0.3) {\n            // Low trust reduces support for government programs (except UBI - direct cash)\n            ['retraining', 'publicWorks', 'wageSubsidy'].forEach(policy => {\n                this.policySupport[policy] *= 0.7;\n            });\n        } else if (this.trustInGovernment > 0.7) {\n            // High trust boosts support\n            Object.keys(this.policySupport).forEach(policy => {\n                this.policySupport[policy] = Math.min(1, this.policySupport[policy] * 1.1);\n            });\n        }\n    }\n\n    // ========== Intervention Effects ==========\n\n    /**\n     * Receive UBI payment\n     */\n    receiveUBI(amount) {\n        this.savings += amount / this.wage; // Convert to months of expenses\n        this.policySupport.ubi = Math.min(1, this.policySupport.ubi + 0.25);\n        this.economicAnxiety = Math.max(0, this.economicAnxiety - 0.15);\n        this.benefitedFromIntervention = 'ubi';\n\n        // Strong network effect\n        this.network.forEach(contact => {\n            if (contact.policySupport) {\n                contact.policySupport.ubi = Math.min(1, contact.policySupport.ubi + 0.08);\n            }\n        });\n    }\n\n    /**\n     * Start a retraining program\n     */\n    enrollInRetraining(program) {\n        this.status = EmploymentStatus.RETRAINING;\n        this.retrainingProgram = program;\n        this.retrainingProgress = 0;\n        this.activelySearching = false;\n    }\n\n    /**\n     * Experience AI augmentation success\n     */\n    experienceAISuccess(wageIncrease) {\n        this.wage += wageIncrease;\n        this.personalAIExperience = AIExperience.POSITIVE;\n        this.policySupport.aiRegulation = Math.max(0, this.policySupport.aiRegulation - 0.15);\n        this.policySupport.educationInvestment = Math.min(1, this.policySupport.educationInvestment + 0.1);\n        this.economicAnxiety = Math.max(0, this.economicAnxiety - 0.1);\n\n        // Network effect\n        this.network.forEach(contact => {\n            if (contact.policySupport) {\n                contact.policySupport.aiRegulation = Math.max(0, contact.policySupport.aiRegulation - 0.02);\n            }\n        });\n    }\n\n    // ========== Getters ==========\n\n    getAgeGroup() {\n        if (this.age < 25) return '18-24';\n        if (this.age < 35) return '25-34';\n        if (this.age < 45) return '35-44';\n        if (this.age < 55) return '45-54';\n        if (this.age < 65) return '55-64';\n        return '65+';\n    }\n\n    isEmployed() {\n        return this.status === EmploymentStatus.EMPLOYED;\n    }\n\n    isUnemployed() {\n        return this.status === EmploymentStatus.UNEMPLOYED;\n    }\n\n    isInLaborForce() {\n        return this.status !== EmploymentStatus.OUT_OF_LABOR_FORCE;\n    }\n\n    /**\n     * Get summary for aggregation\n     */\n    getSummary() {\n        return {\n            id: this.id,\n            age: this.age,\n            ageGroup: this.getAgeGroup(),\n            education: this.education,\n            region: this.region,\n            status: this.status,\n            occupation: this.occupation,\n            industry: this.industry,\n            wage: this.wage,\n            unemploymentDuration: this.unemploymentDuration,\n            economicAnxiety: this.economicAnxiety,\n            policySupport: { ...this.policySupport }\n        };\n    }\n}\n\n// Export for ES modules\nexport { WorkerAgent, EmploymentStatus, EducationLevel, AIExperience };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.WorkerAgent = WorkerAgent;\n    window.EmploymentStatus = EmploymentStatus;\n    window.EducationLevel = EducationLevel;\n    window.AIExperience = AIExperience;\n}\n","/**\n * FirmAgent - Business entity in the Agent-Based Model\n *\n * Firms make decisions about AI adoption, hiring, layoffs, and wages.\n * They respond to market conditions and competitor behavior.\n */\n\n// AI adoption status enum\nconst AIAdoptionStatus = {\n    NONE: 'none',\n    EXPLORING: 'exploring',\n    PILOTING: 'piloting',\n    SCALING: 'scaling',\n    MATURE: 'mature'\n};\n\n// Firm size enum\nconst FirmSize = {\n    SMALL: 'small',           // < 50 employees\n    MEDIUM: 'medium',         // 50-500 employees\n    LARGE: 'large',           // 500-5000 employees\n    ENTERPRISE: 'enterprise'  // 5000+ employees\n};\n\n// Labor strategy enum\nconst LaborStrategy = {\n    COST_MINIMIZER: 'cost_minimizer',\n    TALENT_INVESTOR: 'talent_investor',\n    BALANCED: 'balanced'\n};\n\nclass FirmAgent {\n    constructor(config = {}) {\n        // Identity\n        this.id = config.id || `firm_${Math.random().toString(36).substr(2, 9)}`;\n        this.industry = config.industry || this._randomIndustry();\n        this.region = config.region || 1;\n        this.size = config.size || this._randomSize();\n\n        // Workforce\n        this.employees = config.employees || [];\n        this.targetHeadcount = config.targetHeadcount || this._getTargetHeadcount();\n        this.openPositions = [];\n\n        // AI Adoption\n        this.aiAdoptionStatus = config.aiAdoptionStatus || AIAdoptionStatus.NONE;\n        this.aiCapabilities = config.aiCapabilities || {};\n        this.automationLevel = config.automationLevel || 0; // 0-1\n        this.aiInvestment = 0;\n        this.aiROI = 0;\n        this.monthsInCurrentStatus = 0;\n\n        // Economics\n        this.revenue = config.revenue || this._calculateInitialRevenue();\n        this.laborCosts = 0;\n        this.profitMargin = config.profitMargin || (0.05 + Math.random() * 0.15);\n\n        // Behavioral\n        this.innovativeness = config.innovativeness || Math.random();\n        this.laborStrategy = config.laborStrategy || this._randomLaborStrategy();\n\n        // Competition\n        this.marketShare = config.marketShare || Math.random() * 0.1;\n        this.competitors = []; // Will be populated during initialization\n        this.competitorAIAdoption = 0; // Observed adoption level of competitors\n\n        // Industry-specific automation potential\n        this.industryAutomationPotential = this._getIndustryAutomationPotential();\n\n        // Wage parameters\n        this.baseWage = this._calculateBaseWage();\n        this.wageAdjustmentRate = 0.02; // Max 2% adjustment per month\n    }\n\n    // ========== Initialization Helpers ==========\n\n    _randomIndustry() {\n        return Math.floor(Math.random() * 20) + 1;\n    }\n\n    _randomSize() {\n        const rand = Math.random();\n        if (rand < 0.70) return FirmSize.SMALL;\n        if (rand < 0.90) return FirmSize.MEDIUM;\n        if (rand < 0.98) return FirmSize.LARGE;\n        return FirmSize.ENTERPRISE;\n    }\n\n    _getTargetHeadcount() {\n        switch (this.size) {\n            case FirmSize.SMALL: return Math.floor(Math.random() * 45) + 5;\n            case FirmSize.MEDIUM: return Math.floor(Math.random() * 450) + 50;\n            case FirmSize.LARGE: return Math.floor(Math.random() * 4500) + 500;\n            case FirmSize.ENTERPRISE: return Math.floor(Math.random() * 10000) + 5000;\n            default: return 25;\n        }\n    }\n\n    _randomLaborStrategy() {\n        const rand = Math.random();\n        if (rand < 0.4) return LaborStrategy.COST_MINIMIZER;\n        if (rand < 0.7) return LaborStrategy.BALANCED;\n        return LaborStrategy.TALENT_INVESTOR;\n    }\n\n    _calculateInitialRevenue() {\n        // Revenue scales with size\n        const sizeMultipliers = {\n            [FirmSize.SMALL]: 1,\n            [FirmSize.MEDIUM]: 10,\n            [FirmSize.LARGE]: 100,\n            [FirmSize.ENTERPRISE]: 1000\n        };\n        return (500000 + Math.random() * 500000) * (sizeMultipliers[this.size] || 1);\n    }\n\n    _calculateBaseWage() {\n        // Industry wage variations\n        const industryWageMultipliers = {\n            1: 1.3,  // Technology\n            2: 1.2,  // Finance\n            3: 1.1,  // Healthcare\n            4: 0.9,  // Retail\n            5: 0.85, // Food service\n            6: 1.0,  // Manufacturing\n            7: 1.15, // Professional services\n            8: 0.95, // Transportation\n            9: 1.05, // Education\n            10: 0.9  // Construction\n        };\n\n        const baseMonthlyWage = 4000;\n        const multiplier = industryWageMultipliers[this.industry] || 1.0;\n\n        return baseMonthlyWage * multiplier;\n    }\n\n    _getIndustryAutomationPotential() {\n        // Different industries have different automation potential\n        const potentials = {\n            1: 0.6,  // Technology - moderate (creates AI too)\n            2: 0.7,  // Finance - high\n            3: 0.4,  // Healthcare - lower (human touch needed)\n            4: 0.8,  // Retail - very high\n            5: 0.75, // Food service - high\n            6: 0.85, // Manufacturing - very high\n            7: 0.5,  // Professional services - moderate\n            8: 0.65, // Transportation - high\n            9: 0.3,  // Education - lower\n            10: 0.4  // Construction - lower (physical)\n        };\n\n        return potentials[this.industry] || 0.5;\n    }\n\n    // ========== Decision Making ==========\n\n    /**\n     * Main monthly decision function\n     */\n    makeMonthlyDecisions(aiCapability, laborMarket, competitors) {\n        // Update competitor observation\n        this._observeCompetitors(competitors);\n\n        // AI adoption decision\n        this._makeAIAdoptionDecision(aiCapability);\n\n        // Workforce decisions\n        this._makeWorkforceDecisions(aiCapability, laborMarket);\n\n        // Wage decisions\n        this._makeWageDecisions(laborMarket);\n\n        // Update financials\n        this._updateFinancials();\n\n        this.monthsInCurrentStatus++;\n    }\n\n    _observeCompetitors(competitors) {\n        if (!competitors || competitors.length === 0) return;\n\n        // Calculate average AI adoption of competitors\n        const adoptionScores = {\n            [AIAdoptionStatus.NONE]: 0,\n            [AIAdoptionStatus.EXPLORING]: 0.2,\n            [AIAdoptionStatus.PILOTING]: 0.4,\n            [AIAdoptionStatus.SCALING]: 0.7,\n            [AIAdoptionStatus.MATURE]: 1.0\n        };\n\n        const totalAdoption = competitors.reduce((sum, comp) => {\n            return sum + (adoptionScores[comp.aiAdoptionStatus] || 0);\n        }, 0);\n\n        this.competitorAIAdoption = totalAdoption / competitors.length;\n    }\n\n    _makeAIAdoptionDecision(aiCapability) {\n        // Calculate AI ROI based on current situation\n        this._calculateAIROI(aiCapability);\n\n        // Threshold varies by innovativeness\n        const adoptionThreshold = 1.0 + (1 - this.innovativeness) * 0.5;\n\n        // Competitive pressure can lower threshold\n        const competitivePressure = this.competitorAIAdoption > 0.3 ? 0.2 : 0;\n        const effectiveThreshold = adoptionThreshold - competitivePressure;\n\n        switch (this.aiAdoptionStatus) {\n            case AIAdoptionStatus.NONE:\n                if (this.aiROI > effectiveThreshold || this.competitorAIAdoption > 0.5) {\n                    this.aiAdoptionStatus = AIAdoptionStatus.EXPLORING;\n                    this.monthsInCurrentStatus = 0;\n                }\n                break;\n\n            case AIAdoptionStatus.EXPLORING:\n                // Move to piloting after 3-6 months of exploration\n                if (this.monthsInCurrentStatus >= 3 + Math.floor(Math.random() * 3)) {\n                    if (this.aiROI > effectiveThreshold * 0.9) {\n                        this.aiAdoptionStatus = AIAdoptionStatus.PILOTING;\n                        this.monthsInCurrentStatus = 0;\n                        this.automationLevel = 0.1;\n                    }\n                }\n                break;\n\n            case AIAdoptionStatus.PILOTING:\n                // Move to scaling after 6-12 months if successful\n                if (this.monthsInCurrentStatus >= 6 + Math.floor(Math.random() * 6)) {\n                    // 80% success rate for pilots\n                    if (Math.random() < 0.8) {\n                        this.aiAdoptionStatus = AIAdoptionStatus.SCALING;\n                        this.monthsInCurrentStatus = 0;\n                        this.automationLevel = 0.3;\n                    } else {\n                        // Failed pilot - go back to exploring\n                        this.aiAdoptionStatus = AIAdoptionStatus.EXPLORING;\n                        this.monthsInCurrentStatus = 0;\n                    }\n                }\n                break;\n\n            case AIAdoptionStatus.SCALING:\n                // Move to mature after 12-24 months\n                if (this.monthsInCurrentStatus >= 12 + Math.floor(Math.random() * 12)) {\n                    this.aiAdoptionStatus = AIAdoptionStatus.MATURE;\n                    this.monthsInCurrentStatus = 0;\n                    this.automationLevel = 0.6 + Math.random() * 0.3;\n                }\n                // Gradually increase automation during scaling\n                this.automationLevel = Math.min(0.6, this.automationLevel + 0.02);\n                break;\n\n            case AIAdoptionStatus.MATURE:\n                // Maintain and optimize\n                this.automationLevel = Math.min(0.9, this.automationLevel + 0.005);\n                break;\n        }\n    }\n\n    _calculateAIROI(aiCapability) {\n        // Potential labor cost savings\n        const potentialSavings = this.laborCosts * this.industryAutomationPotential * 0.3;\n\n        // Implementation costs (vary by size)\n        const sizeMultipliers = {\n            [FirmSize.SMALL]: 0.5,\n            [FirmSize.MEDIUM]: 1,\n            [FirmSize.LARGE]: 2,\n            [FirmSize.ENTERPRISE]: 5\n        };\n        const implementationCost = 100000 * (sizeMultipliers[this.size] || 1);\n\n        // AI capability level affects ROI\n        const capabilityMultiplier = aiCapability ? aiCapability.getCurrentLevel() : 0.5;\n\n        // Calculate annual ROI\n        this.aiROI = (potentialSavings * 12 * capabilityMultiplier) / implementationCost;\n    }\n\n    _makeWorkforceDecisions(aiCapability, laborMarket) {\n        // Calculate labor need based on automation level\n        const automationReduction = this.automationLevel * this.industryAutomationPotential;\n        const effectiveHeadcount = this.targetHeadcount * (1 - automationReduction * 0.5);\n\n        const currentHeadcount = this.employees.length;\n        const headcountGap = effectiveHeadcount - currentHeadcount;\n\n        if (headcountGap > 5) {\n            // Need to hire\n            this._createJobPostings(Math.ceil(headcountGap * 0.3)); // Hire 30% of gap per month\n        } else if (headcountGap < -5) {\n            // Need to reduce workforce\n            this._planLayoffs(Math.ceil(Math.abs(headcountGap) * 0.2)); // Layoff 20% of excess per month\n        }\n\n        // Clear filled positions\n        this.openPositions = this.openPositions.filter(pos => !pos.filled);\n    }\n\n    _createJobPostings(count) {\n        for (let i = 0; i < count; i++) {\n            const posting = {\n                id: `job_${this.id}_${Date.now()}_${i}`,\n                firm: this,\n                firmId: this.id,\n                industry: this.industry,\n                region: this.region,\n                occupation: this._getTypicalOccupation(),\n                wage: this._calculateOfferWage(),\n                requiredEducation: this._getRequiredEducation(),\n                requiredSkills: this._getRequiredSkills(),\n                automationExposure: this.industryAutomationPotential * (1 - this.automationLevel),\n                aiAugmentation: this.automationLevel > 0.3 ? 0.3 : 0,\n                growthPotential: this.aiAdoptionStatus === AIAdoptionStatus.SCALING ? 0.7 : 0.5,\n                posted: Date.now(),\n                filled: false\n            };\n            this.openPositions.push(posting);\n        }\n    }\n\n    _getTypicalOccupation() {\n        // Return a typical occupation ID for this industry\n        // Simplified - would map to actual occupation data\n        return this.industry * 5 + Math.floor(Math.random() * 5);\n    }\n\n    _calculateOfferWage() {\n        let wage = this.baseWage;\n\n        // Adjust based on labor strategy\n        if (this.laborStrategy === LaborStrategy.TALENT_INVESTOR) {\n            wage *= 1.1;\n        } else if (this.laborStrategy === LaborStrategy.COST_MINIMIZER) {\n            wage *= 0.9;\n        }\n\n        // Add some variation\n        wage *= (0.95 + Math.random() * 0.1);\n\n        // AI-adopting firms may offer premium for AI skills\n        if (this.automationLevel > 0.3) {\n            wage *= 1.05;\n        }\n\n        return Math.round(wage);\n    }\n\n    _getRequiredEducation() {\n        // Higher-tech industries need more education\n        if ([1, 2, 7].includes(this.industry)) {\n            return Math.random() < 0.7 ? 'bachelors' : 'some_college';\n        }\n        return Math.random() < 0.5 ? 'high_school' : 'some_college';\n    }\n\n    _getRequiredSkills() {\n        // Return skill requirements based on industry\n        const skills = {};\n\n        // Industry-specific skills\n        const industrySkills = {\n            1: ['technical', 'programming', 'problemSolving'],\n            2: ['financial', 'analytical', 'dataAnalysis'],\n            3: ['healthcare', 'communication', 'problemSolving'],\n            4: ['customerService', 'sales', 'communication'],\n            5: ['customerService', 'communication'],\n            6: ['manufacturing', 'technical', 'problemSolving'],\n            7: ['analytical', 'communication', 'projectManagement'],\n            8: ['logistics', 'technical'],\n            9: ['teaching', 'communication', 'research'],\n            10: ['technical', 'manufacturing']\n        };\n\n        const relevantSkills = industrySkills[this.industry] || ['communication'];\n        relevantSkills.forEach(skill => {\n            skills[skill] = 0.3 + Math.random() * 0.3;\n        });\n\n        // AI-adopting firms need AI skills\n        if (this.automationLevel > 0.3) {\n            skills['dataAnalysis'] = 0.4;\n        }\n\n        return skills;\n    }\n\n    _planLayoffs(count) {\n        if (this.employees.length === 0) return;\n\n        // Sort employees by layoff priority\n        const sortedEmployees = [...this.employees].sort((a, b) => {\n            // Prioritize laying off based on strategy\n            let scoreA = 0, scoreB = 0;\n\n            // Higher cost = higher priority for layoff (especially for cost minimizers)\n            if (this.laborStrategy === LaborStrategy.COST_MINIMIZER) {\n                scoreA += (a.wage || 0) / 10000;\n                scoreB += (b.wage || 0) / 10000;\n            }\n\n            // More automatable roles = higher priority\n            scoreA += (a.automationExposure || 0.5);\n            scoreB += (b.automationExposure || 0.5);\n\n            // Lower tenure = higher priority (last in, first out)\n            scoreA += Math.max(0, 1 - (a.tenure || 0) / 120);\n            scoreB += Math.max(0, 1 - (b.tenure || 0) / 120);\n\n            return scoreB - scoreA;\n        });\n\n        // Mark employees for layoff\n        const toLay = sortedEmployees.slice(0, Math.min(count, sortedEmployees.length));\n        toLay.forEach(employee => {\n            employee.markedForLayoff = true;\n            employee.layoffReason = this.automationLevel > 0.3 ? 'automation' : 'downsizing';\n        });\n    }\n\n    _makeWageDecisions(laborMarket) {\n        // Get market wage info\n        const marketWage = laborMarket ? laborMarket.getMarketWage(this.industry, this.region) : this.baseWage;\n\n        // Adjust base wage toward market\n        if (this.baseWage < marketWage * 0.9) {\n            // Below market - raise wages\n            this.baseWage *= (1 + this.wageAdjustmentRate);\n        } else if (this.baseWage > marketWage * 1.1 && this.laborStrategy !== LaborStrategy.TALENT_INVESTOR) {\n            // Above market - can lower wages\n            this.baseWage *= (1 - this.wageAdjustmentRate * 0.5);\n        }\n\n        // AI adoption can suppress wages (less labor needed)\n        if (this.automationLevel > 0.5) {\n            this.baseWage *= 0.998; // Slight downward pressure\n        }\n    }\n\n    _updateFinancials() {\n        // Calculate labor costs\n        this.laborCosts = this.employees.reduce((sum, emp) => sum + (emp.wage || 0), 0);\n\n        // AI investment costs\n        if (this.aiAdoptionStatus !== AIAdoptionStatus.NONE) {\n            const investmentRates = {\n                [AIAdoptionStatus.EXPLORING]: 0.001,\n                [AIAdoptionStatus.PILOTING]: 0.005,\n                [AIAdoptionStatus.SCALING]: 0.01,\n                [AIAdoptionStatus.MATURE]: 0.003\n            };\n            this.aiInvestment = this.revenue * (investmentRates[this.aiAdoptionStatus] || 0);\n        }\n\n        // Update profit margin based on automation\n        const automationSavings = this.laborCosts * this.automationLevel * 0.2;\n        this.profitMargin = Math.min(0.3, this.profitMargin + automationSavings / this.revenue * 0.1);\n    }\n\n    // ========== Hiring Interface ==========\n\n    /**\n     * Get current job postings\n     */\n    getOpenPositions() {\n        return this.openPositions.filter(pos => !pos.filled);\n    }\n\n    /**\n     * Receive and rank job applicants\n     */\n    rankApplicants(applicants, position) {\n        return applicants.map(applicant => ({\n            applicant,\n            score: this._scoreApplicant(applicant, position)\n        })).sort((a, b) => b.score - a.score);\n    }\n\n    _scoreApplicant(applicant, position) {\n        let score = 0;\n\n        // Skill match\n        if (position.requiredSkills && applicant.skills) {\n            const skillMatches = Object.entries(position.requiredSkills).map(([skill, required]) => {\n                const has = applicant.skills[skill] || 0;\n                return Math.min(1, has / required);\n            });\n            score += (skillMatches.reduce((a, b) => a + b, 0) / skillMatches.length) * 40;\n        }\n\n        // Education match\n        const eduRank = { 'no_degree': 0, 'high_school': 1, 'some_college': 2, 'bachelors': 3, 'advanced': 4 };\n        const requiredRank = eduRank[position.requiredEducation] || 0;\n        const applicantRank = eduRank[applicant.education] || 0;\n        if (applicantRank >= requiredRank) {\n            score += 20 + Math.min(10, (applicantRank - requiredRank) * 5);\n        }\n\n        // AI augmentation skill (valued by AI-adopting firms)\n        if (this.automationLevel > 0.3) {\n            score += (applicant.aiAugmentationSkill || 0) * 20;\n        }\n\n        // Lower wage expectations = better for cost minimizers\n        if (this.laborStrategy === LaborStrategy.COST_MINIMIZER) {\n            const wageRatio = (applicant.reservationWage || position.wage) / position.wage;\n            score += (2 - wageRatio) * 10;\n        }\n\n        // Local candidates preferred\n        if (applicant.region === this.region) {\n            score += 10;\n        }\n\n        return score;\n    }\n\n    /**\n     * Make job offers to top candidates\n     */\n    makeOffers(rankedApplicants, position) {\n        const offers = [];\n        const maxOffers = Math.min(3, rankedApplicants.length); // Make up to 3 offers per position\n\n        for (let i = 0; i < maxOffers; i++) {\n            const { applicant, score } = rankedApplicants[i];\n\n            // Adjust offer based on score\n            let offerWage = position.wage;\n            if (score > 80 && this.laborStrategy === LaborStrategy.TALENT_INVESTOR) {\n                offerWage *= 1.1; // Premium for top talent\n            }\n\n            offers.push({\n                firm: this,\n                position,\n                applicant,\n                wage: Math.round(offerWage),\n                score\n            });\n        }\n\n        return offers;\n    }\n\n    /**\n     * Hire a worker\n     */\n    hire(worker, position) {\n        this.employees.push(worker);\n        position.filled = true;\n\n        // Update worker's employer reference\n        worker.employer = this;\n    }\n\n    /**\n     * Execute planned layoffs\n     */\n    executeLayoffs() {\n        const laidOff = [];\n\n        this.employees = this.employees.filter(emp => {\n            if (emp.markedForLayoff) {\n                laidOff.push({\n                    worker: emp,\n                    reason: emp.layoffReason || 'downsizing'\n                });\n                return false;\n            }\n            return true;\n        });\n\n        return laidOff;\n    }\n\n    // ========== Getters ==========\n\n    getHeadcount() {\n        return this.employees.length;\n    }\n\n    getAverageWage() {\n        if (this.employees.length === 0) return this.baseWage;\n        return this.employees.reduce((sum, emp) => sum + (emp.wage || 0), 0) / this.employees.length;\n    }\n\n    isAdoptingAI() {\n        return this.aiAdoptionStatus !== AIAdoptionStatus.NONE;\n    }\n\n    /**\n     * Get summary for aggregation\n     */\n    getSummary() {\n        return {\n            id: this.id,\n            industry: this.industry,\n            region: this.region,\n            size: this.size,\n            headcount: this.employees.length,\n            targetHeadcount: this.targetHeadcount,\n            openPositions: this.openPositions.filter(p => !p.filled).length,\n            aiAdoptionStatus: this.aiAdoptionStatus,\n            automationLevel: this.automationLevel,\n            averageWage: this.getAverageWage(),\n            laborCosts: this.laborCosts,\n            profitMargin: this.profitMargin\n        };\n    }\n}\n\n// Export for ES modules\nexport { FirmAgent, AIAdoptionStatus, FirmSize, LaborStrategy };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.FirmAgent = FirmAgent;\n    window.AIAdoptionStatus = AIAdoptionStatus;\n    window.FirmSize = FirmSize;\n    window.LaborStrategy = LaborStrategy;\n}\n","/**\n * TrainingProgramAgent - Training program in the Agent-Based Model\n *\n * Each training program has capacity, curriculum, completion rates, and costs.\n * Programs enroll workers, track progress, and graduate students with new skills.\n */\n\n// Program type enum\nconst ProgramType = {\n    BOOTCAMP: 'bootcamp',\n    COMMUNITY_COLLEGE: 'community_college',\n    UNIVERSITY: 'university',\n    EMPLOYER_SPONSORED: 'employer_sponsored',\n    ONLINE: 'online'\n};\n\n// Program status enum\nconst ProgramStatus = {\n    ACTIVE: 'active',\n    FULL: 'full',\n    SUSPENDED: 'suspended',\n    CLOSED: 'closed'\n};\n\nclass TrainingProgramAgent {\n    constructor(config = {}) {\n        // Unique identifier\n        this.id = config.id || `prog_${Math.random().toString(36).substr(2, 9)}`;\n\n        // Program type and location\n        this.type = config.type || this._randomType();\n        this.region = config.region || 1;\n        this.name = config.name || this._generateName();\n\n        // Capacity management\n        this.maxEnrollment = config.maxEnrollment || this._getDefaultCapacity();\n        this.currentEnrollment = 0;\n        this.waitlist = [];\n        this.enrolledWorkers = [];\n\n        // Program details\n        this.targetOccupations = config.targetOccupations || this._getDefaultTargetOccupations();\n        this.skillsProvided = config.skillsProvided || this._getDefaultSkills();\n        this.duration = config.duration || this._getDefaultDuration(); // Months\n        this.cost = config.cost || this._getDefaultCost();\n        this.subsidyAvailable = config.subsidyAvailable || 0; // Percentage covered by government\n\n        // Quality metrics\n        this.qualityScore = config.qualityScore || (0.5 + Math.random() * 0.4); // 0.5-0.9\n        this.completionRate = config.completionRate || this._calculateInitialCompletionRate();\n        this.jobPlacementRate = config.jobPlacementRate || this._calculateInitialPlacementRate();\n        this.reputation = config.reputation || this.qualityScore * 0.8 + Math.random() * 0.2;\n\n        // Historical tracking\n        this.totalGraduates = 0;\n        this.totalDropouts = 0;\n        this.placementsThisYear = 0;\n        this.graduatesThisYear = 0;\n\n        // Monthly tracking for students\n        this.studentProgress = new Map(); // workerId -> { enrolledMonth, currentMonth, progress }\n\n        // Program status\n        this.status = ProgramStatus.ACTIVE;\n\n        // Financial\n        this.revenue = 0;\n        this.operatingCosts = this._calculateOperatingCosts();\n    }\n\n    // ========== Initialization Helpers ==========\n\n    _randomType() {\n        const rand = Math.random();\n        if (rand < 0.25) return ProgramType.BOOTCAMP;\n        if (rand < 0.45) return ProgramType.COMMUNITY_COLLEGE;\n        if (rand < 0.60) return ProgramType.UNIVERSITY;\n        if (rand < 0.80) return ProgramType.EMPLOYER_SPONSORED;\n        return ProgramType.ONLINE;\n    }\n\n    _generateName() {\n        const prefixes = {\n            [ProgramType.BOOTCAMP]: ['Tech', 'Code', 'Data', 'Digital', 'Cyber'],\n            [ProgramType.COMMUNITY_COLLEGE]: ['Central', 'Metro', 'Valley', 'Regional', 'State'],\n            [ProgramType.UNIVERSITY]: ['State', 'National', 'Metro', 'Technical', 'Applied'],\n            [ProgramType.EMPLOYER_SPONSORED]: ['Corporate', 'Industry', 'Professional', 'Enterprise', 'Business'],\n            [ProgramType.ONLINE]: ['Virtual', 'Online', 'Digital', 'Remote', 'eLearning']\n        };\n\n        const suffixes = {\n            [ProgramType.BOOTCAMP]: ['Bootcamp', 'Academy', 'Institute', 'School', 'Lab'],\n            [ProgramType.COMMUNITY_COLLEGE]: ['Community College', 'Technical College', 'College'],\n            [ProgramType.UNIVERSITY]: ['University', 'Institute of Technology', 'Polytechnic'],\n            [ProgramType.EMPLOYER_SPONSORED]: ['Training Center', 'Skills Program', 'Development Program'],\n            [ProgramType.ONLINE]: ['Academy', 'Learning Platform', 'Skills Center']\n        };\n\n        const prefix = prefixes[this.type][Math.floor(Math.random() * prefixes[this.type].length)];\n        const suffix = suffixes[this.type][Math.floor(Math.random() * suffixes[this.type].length)];\n\n        return `${prefix} ${suffix}`;\n    }\n\n    _getDefaultCapacity() {\n        const capacities = {\n            [ProgramType.BOOTCAMP]: Math.floor(Math.random() * 30) + 20,           // 20-50\n            [ProgramType.COMMUNITY_COLLEGE]: Math.floor(Math.random() * 200) + 100, // 100-300\n            [ProgramType.UNIVERSITY]: Math.floor(Math.random() * 500) + 200,        // 200-700\n            [ProgramType.EMPLOYER_SPONSORED]: Math.floor(Math.random() * 50) + 10,  // 10-60\n            [ProgramType.ONLINE]: Math.floor(Math.random() * 1000) + 500            // 500-1500 (scalable)\n        };\n        return capacities[this.type];\n    }\n\n    _getDefaultDuration() {\n        const durations = {\n            [ProgramType.BOOTCAMP]: Math.floor(Math.random() * 3) + 3,              // 3-6 months\n            [ProgramType.COMMUNITY_COLLEGE]: Math.floor(Math.random() * 12) + 12,   // 12-24 months\n            [ProgramType.UNIVERSITY]: Math.floor(Math.random() * 24) + 24,          // 24-48 months\n            [ProgramType.EMPLOYER_SPONSORED]: Math.floor(Math.random() * 4) + 2,    // 2-6 months\n            [ProgramType.ONLINE]: Math.floor(Math.random() * 6) + 3                 // 3-9 months\n        };\n        return durations[this.type];\n    }\n\n    _getDefaultCost() {\n        // Monthly cost to student\n        const costs = {\n            [ProgramType.BOOTCAMP]: Math.floor(Math.random() * 2000) + 2000,        // $2000-4000/month\n            [ProgramType.COMMUNITY_COLLEGE]: Math.floor(Math.random() * 500) + 300,  // $300-800/month\n            [ProgramType.UNIVERSITY]: Math.floor(Math.random() * 1500) + 1000,       // $1000-2500/month\n            [ProgramType.EMPLOYER_SPONSORED]: 0,                                      // Free to employee\n            [ProgramType.ONLINE]: Math.floor(Math.random() * 200) + 50               // $50-250/month\n        };\n        return costs[this.type];\n    }\n\n    _getDefaultTargetOccupations() {\n        // Return array of occupation IDs this program trains for\n        const baseOccupations = [];\n        const numOccupations = Math.floor(Math.random() * 5) + 3; // 3-8 occupations\n\n        for (let i = 0; i < numOccupations; i++) {\n            baseOccupations.push(Math.floor(Math.random() * 100) + 1);\n        }\n\n        return baseOccupations;\n    }\n\n    _getDefaultSkills() {\n        // Skills provided based on program type\n        const skillSets = {\n            [ProgramType.BOOTCAMP]: {\n                programming: 0.4 + Math.random() * 0.2,\n                dataAnalysis: 0.3 + Math.random() * 0.2,\n                technical: 0.3 + Math.random() * 0.2,\n                problemSolving: 0.2 + Math.random() * 0.1\n            },\n            [ProgramType.COMMUNITY_COLLEGE]: {\n                technical: 0.3 + Math.random() * 0.2,\n                communication: 0.2 + Math.random() * 0.1,\n                customerService: 0.2 + Math.random() * 0.1,\n                manufacturing: 0.2 + Math.random() * 0.2,\n                healthcare: 0.15 + Math.random() * 0.15\n            },\n            [ProgramType.UNIVERSITY]: {\n                analytical: 0.3 + Math.random() * 0.2,\n                research: 0.3 + Math.random() * 0.2,\n                writing: 0.25 + Math.random() * 0.15,\n                leadership: 0.2 + Math.random() * 0.1,\n                problemSolving: 0.25 + Math.random() * 0.15\n            },\n            [ProgramType.EMPLOYER_SPONSORED]: {\n                technical: 0.35 + Math.random() * 0.2,\n                projectManagement: 0.2 + Math.random() * 0.15,\n                communication: 0.15 + Math.random() * 0.1\n            },\n            [ProgramType.ONLINE]: {\n                programming: 0.3 + Math.random() * 0.2,\n                dataAnalysis: 0.25 + Math.random() * 0.15,\n                marketing: 0.2 + Math.random() * 0.1,\n                technical: 0.2 + Math.random() * 0.15\n            }\n        };\n\n        return skillSets[this.type];\n    }\n\n    _calculateInitialCompletionRate() {\n        // Completion rates vary by program type\n        const baseRates = {\n            [ProgramType.BOOTCAMP]: 0.70,\n            [ProgramType.COMMUNITY_COLLEGE]: 0.55,\n            [ProgramType.UNIVERSITY]: 0.60,\n            [ProgramType.EMPLOYER_SPONSORED]: 0.85,\n            [ProgramType.ONLINE]: 0.35\n        };\n\n        const base = baseRates[this.type] || 0.6;\n        return base + (Math.random() * 0.2 - 0.1); // +/- 10%\n    }\n\n    _calculateInitialPlacementRate() {\n        // Job placement rates (of completers)\n        const baseRates = {\n            [ProgramType.BOOTCAMP]: 0.75,\n            [ProgramType.COMMUNITY_COLLEGE]: 0.70,\n            [ProgramType.UNIVERSITY]: 0.80,\n            [ProgramType.EMPLOYER_SPONSORED]: 0.95,  // Often guaranteed placement\n            [ProgramType.ONLINE]: 0.50\n        };\n\n        const base = baseRates[this.type] || 0.65;\n        return base + (Math.random() * 0.15 - 0.05); // +/- variation\n    }\n\n    _calculateOperatingCosts() {\n        // Monthly operating costs\n        const costs = {\n            [ProgramType.BOOTCAMP]: 50000,\n            [ProgramType.COMMUNITY_COLLEGE]: 200000,\n            [ProgramType.UNIVERSITY]: 500000,\n            [ProgramType.EMPLOYER_SPONSORED]: 30000,\n            [ProgramType.ONLINE]: 20000\n        };\n\n        return costs[this.type] || 50000;\n    }\n\n    // ========== Enrollment Management ==========\n\n    /**\n     * Check if a worker can enroll in this program\n     */\n    canEnroll(worker) {\n        // Check if program is accepting students\n        if (this.status !== ProgramStatus.ACTIVE) {\n            return { eligible: false, reason: 'Program not accepting students' };\n        }\n\n        // Check capacity\n        if (this.currentEnrollment >= this.maxEnrollment) {\n            return { eligible: false, reason: 'Program at capacity', canWaitlist: true };\n        }\n\n        // Check if worker is already enrolled somewhere\n        if (worker.retrainingProgram) {\n            return { eligible: false, reason: 'Already enrolled in a program' };\n        }\n\n        // Check age (some programs have limits)\n        if (this.type === ProgramType.UNIVERSITY && worker.age > 55) {\n            return { eligible: false, reason: 'Age restriction' };\n        }\n\n        // Check financial ability (unless subsidized or free)\n        const effectiveCost = this.cost * (1 - this.subsidyAvailable);\n        if (effectiveCost > 0 && worker.savings < (effectiveCost / worker.wage) * this.duration * 0.5) {\n            return { eligible: false, reason: 'Insufficient funds' };\n        }\n\n        // Check education prerequisites\n        if (this.type === ProgramType.UNIVERSITY) {\n            const eduRequired = ['high_school', 'some_college', 'bachelors', 'advanced'];\n            if (!eduRequired.includes(worker.education)) {\n                return { eligible: false, reason: 'Education requirements not met' };\n            }\n        }\n\n        return { eligible: true };\n    }\n\n    /**\n     * Enroll a worker in the program\n     */\n    enrollWorker(worker, currentMonth) {\n        const eligibility = this.canEnroll(worker);\n\n        if (!eligibility.eligible) {\n            if (eligibility.canWaitlist) {\n                this.addToWaitlist(worker);\n            }\n            return { success: false, reason: eligibility.reason };\n        }\n\n        // Enroll the worker\n        this.enrolledWorkers.push(worker);\n        this.currentEnrollment++;\n\n        // Track student progress\n        this.studentProgress.set(worker.id, {\n            enrolledMonth: currentMonth,\n            currentProgress: 0,\n            expectedGraduation: currentMonth + this.duration,\n            monthlyProgress: 1 / this.duration\n        });\n\n        // Calculate actual cost to worker\n        const effectiveCost = this.cost * (1 - this.subsidyAvailable);\n\n        // Update worker state\n        worker.enrollInRetraining({\n            id: this.id,\n            name: this.name,\n            type: this.type,\n            duration: this.duration,\n            skillsProvided: this.skillsProvided,\n            monthlyCost: effectiveCost,\n            qualityScore: this.qualityScore\n        });\n\n        // Track revenue\n        this.revenue += effectiveCost;\n\n        // Update status if at capacity\n        if (this.currentEnrollment >= this.maxEnrollment) {\n            this.status = ProgramStatus.FULL;\n        }\n\n        return { success: true, program: this };\n    }\n\n    /**\n     * Add worker to waitlist\n     */\n    addToWaitlist(worker) {\n        if (!this.waitlist.find(w => w.id === worker.id)) {\n            this.waitlist.push({\n                worker,\n                addedMonth: worker.unemploymentDuration || 0,\n                priority: this._calculateWaitlistPriority(worker)\n            });\n\n            // Sort by priority\n            this.waitlist.sort((a, b) => b.priority - a.priority);\n        }\n    }\n\n    _calculateWaitlistPriority(worker) {\n        let priority = 0;\n\n        // Higher priority for unemployed\n        if (worker.status === 'unemployed') {\n            priority += 30;\n            priority += Math.min(20, worker.unemploymentDuration * 2);\n        }\n\n        // Higher priority for younger workers (more years to benefit)\n        priority += Math.max(0, (60 - worker.age) / 2);\n\n        // Higher priority for those with lower savings (more urgent need)\n        priority += Math.max(0, 10 - worker.savings);\n\n        return priority;\n    }\n\n    // ========== Monthly Operations ==========\n\n    /**\n     * Process monthly program operations\n     */\n    processMonth(currentMonth, interventions = {}) {\n        const results = {\n            graduates: [],\n            dropouts: [],\n            newEnrollments: [],\n            waitlistProcessed: 0\n        };\n\n        // Update student progress\n        const studentsToProcess = [...this.enrolledWorkers];\n\n        studentsToProcess.forEach(worker => {\n            const progress = this.studentProgress.get(worker.id);\n            if (!progress) return;\n\n            // Advance progress\n            progress.currentProgress += progress.monthlyProgress;\n\n            // Check for graduation\n            if (progress.currentProgress >= 1.0) {\n                const graduated = this._graduateStudent(worker, currentMonth);\n                if (graduated) {\n                    results.graduates.push(worker);\n                }\n            }\n            // Check for dropout\n            else if (this._shouldDropout(worker, progress)) {\n                this._handleDropout(worker, currentMonth);\n                results.dropouts.push(worker);\n            }\n        });\n\n        // Process waitlist if spots available\n        if (this.currentEnrollment < this.maxEnrollment && this.waitlist.length > 0) {\n            results.waitlistProcessed = this._processWaitlist(currentMonth);\n        }\n\n        // Update quality metrics based on outcomes\n        this._updateQualityMetrics();\n\n        // Update status\n        if (this.currentEnrollment < this.maxEnrollment && this.status === ProgramStatus.FULL) {\n            this.status = ProgramStatus.ACTIVE;\n        }\n\n        return results;\n    }\n\n    _graduateStudent(worker, currentMonth) {\n        // Remove from enrollment\n        this.enrolledWorkers = this.enrolledWorkers.filter(w => w.id !== worker.id);\n        this.studentProgress.delete(worker.id);\n        this.currentEnrollment--;\n\n        // Update program stats\n        this.totalGraduates++;\n        this.graduatesThisYear++;\n\n        // Apply skills to worker\n        if (worker.skills && this.skillsProvided) {\n            Object.entries(this.skillsProvided).forEach(([skill, value]) => {\n                const currentSkill = worker.skills[skill] || 0;\n                // Quality affects how much skill is gained\n                const effectiveGain = value * this.qualityScore;\n                worker.skills[skill] = Math.min(1, currentSkill + effectiveGain);\n            });\n        }\n\n        // Boost AI augmentation skill\n        if (worker.aiAugmentationSkill !== undefined) {\n            worker.aiAugmentationSkill = Math.min(1, worker.aiAugmentationSkill + 0.15 * this.qualityScore);\n        }\n\n        // Update worker state\n        if (typeof worker._completeRetraining === 'function') {\n            worker._completeRetraining();\n        } else {\n            // Manual completion if method doesn't exist\n            worker.status = 'unemployed';\n            worker.retrainingProgram = null;\n            worker.retrainingProgress = 0;\n            worker.activelySearching = true;\n        }\n\n        // Track placement (simplified - actual placement tracked by labor market)\n        if (Math.random() < this.jobPlacementRate) {\n            this.placementsThisYear++;\n        }\n\n        return true;\n    }\n\n    _shouldDropout(worker, progress) {\n        // Base dropout probability per month\n        let dropoutProb = (1 - this.completionRate) / this.duration;\n\n        // Financial pressure increases dropout\n        if (worker.savings <= 0) {\n            dropoutProb *= 3;\n        } else if (worker.savings < 2) {\n            dropoutProb *= 1.5;\n        }\n\n        // Online programs have higher dropout\n        if (this.type === ProgramType.ONLINE) {\n            dropoutProb *= 1.5;\n        }\n\n        // Quality programs have lower dropout\n        dropoutProb *= (1.5 - this.qualityScore);\n\n        // Longer unemployment before enrollment reduces dropout (more motivated)\n        if (worker.unemploymentSpells > 0) {\n            dropoutProb *= 0.8;\n        }\n\n        return Math.random() < dropoutProb;\n    }\n\n    _handleDropout(worker, currentMonth) {\n        // Remove from enrollment\n        this.enrolledWorkers = this.enrolledWorkers.filter(w => w.id !== worker.id);\n        this.studentProgress.delete(worker.id);\n        this.currentEnrollment--;\n\n        // Update program stats\n        this.totalDropouts++;\n\n        // Update worker state\n        if (typeof worker._dropoutRetraining === 'function') {\n            worker._dropoutRetraining();\n        } else {\n            worker.status = 'unemployed';\n            worker.retrainingProgram = null;\n            worker.retrainingProgress = 0;\n            worker.activelySearching = true;\n        }\n    }\n\n    _processWaitlist(currentMonth) {\n        let processed = 0;\n        const spotsAvailable = this.maxEnrollment - this.currentEnrollment;\n\n        while (this.waitlist.length > 0 && processed < spotsAvailable) {\n            const entry = this.waitlist.shift();\n            const worker = entry.worker;\n\n            // Check if worker is still eligible\n            if (worker.status === 'unemployed' || worker.wantsRetraining) {\n                const result = this.enrollWorker(worker, currentMonth);\n                if (result.success) {\n                    processed++;\n                }\n            }\n        }\n\n        return processed;\n    }\n\n    _updateQualityMetrics() {\n        // Update completion rate based on recent performance\n        if (this.totalGraduates + this.totalDropouts > 10) {\n            const recentCompletion = this.totalGraduates / (this.totalGraduates + this.totalDropouts);\n            // Smooth update\n            this.completionRate = this.completionRate * 0.9 + recentCompletion * 0.1;\n        }\n\n        // Update reputation based on quality and outcomes\n        const outcomeScore = (this.completionRate + this.jobPlacementRate) / 2;\n        this.reputation = this.reputation * 0.95 + outcomeScore * 0.05;\n    }\n\n    // ========== Program Adjustments ==========\n\n    /**\n     * Update program based on market conditions\n     */\n    respondToMarket(marketConditions) {\n        const { demandedSkills, unemploymentRate, aiAdoptionRate } = marketConditions;\n\n        // If high unemployment, increase capacity if possible\n        if (unemploymentRate > 0.08 && this.currentEnrollment > this.maxEnrollment * 0.8) {\n            // Try to expand\n            this.maxEnrollment = Math.floor(this.maxEnrollment * 1.1);\n        }\n\n        // Adjust skills offered based on demand\n        if (demandedSkills && aiAdoptionRate > 0.3) {\n            // Increase AI-related skills\n            if (this.skillsProvided.programming) {\n                this.skillsProvided.programming = Math.min(1, this.skillsProvided.programming * 1.05);\n            }\n            if (this.skillsProvided.dataAnalysis) {\n                this.skillsProvided.dataAnalysis = Math.min(1, this.skillsProvided.dataAnalysis * 1.05);\n            }\n        }\n    }\n\n    /**\n     * Apply government intervention (e.g., increased funding)\n     */\n    receiveSubsidy(subsidyLevel) {\n        this.subsidyAvailable = Math.min(1, subsidyLevel);\n\n        // With more subsidy, can potentially expand capacity\n        if (subsidyLevel > 0.5) {\n            this.maxEnrollment = Math.floor(this.maxEnrollment * 1.2);\n        }\n    }\n\n    // ========== Getters ==========\n\n    /**\n     * Get program summary for reporting\n     */\n    getSummary() {\n        return {\n            id: this.id,\n            name: this.name,\n            type: this.type,\n            region: this.region,\n            status: this.status,\n            enrollment: {\n                current: this.currentEnrollment,\n                max: this.maxEnrollment,\n                waitlist: this.waitlist.length\n            },\n            metrics: {\n                completionRate: this.completionRate,\n                jobPlacementRate: this.jobPlacementRate,\n                qualityScore: this.qualityScore,\n                reputation: this.reputation\n            },\n            program: {\n                duration: this.duration,\n                cost: this.cost,\n                subsidyAvailable: this.subsidyAvailable,\n                effectiveCost: this.cost * (1 - this.subsidyAvailable)\n            },\n            outcomes: {\n                totalGraduates: this.totalGraduates,\n                totalDropouts: this.totalDropouts,\n                graduatesThisYear: this.graduatesThisYear,\n                placementsThisYear: this.placementsThisYear\n            },\n            skillsProvided: this.skillsProvided\n        };\n    }\n\n    /**\n     * Get available capacity\n     */\n    getAvailableCapacity() {\n        return Math.max(0, this.maxEnrollment - this.currentEnrollment);\n    }\n\n    /**\n     * Check if accepting applications\n     */\n    isAcceptingApplications() {\n        return this.status === ProgramStatus.ACTIVE && this.currentEnrollment < this.maxEnrollment;\n    }\n\n    /**\n     * Get effective cost for a worker (accounting for subsidies)\n     */\n    getEffectiveCost() {\n        return this.cost * (1 - this.subsidyAvailable);\n    }\n\n    /**\n     * Calculate expected ROI for a worker\n     */\n    calculateROIForWorker(worker) {\n        const totalCost = this.getEffectiveCost() * this.duration;\n        const expectedWageIncrease = worker.wage * 0.25 * this.qualityScore; // Assume 25% wage boost * quality\n        const yearsRemaining = Math.max(1, 65 - worker.age - (this.duration / 12));\n        const successProbability = this.completionRate * this.jobPlacementRate;\n\n        const expectedBenefit = expectedWageIncrease * 12 * yearsRemaining * successProbability;\n\n        return {\n            cost: totalCost,\n            expectedBenefit,\n            roi: totalCost > 0 ? expectedBenefit / totalCost : Infinity,\n            paybackYears: expectedWageIncrease > 0 ? totalCost / (expectedWageIncrease * 12) : Infinity,\n            successProbability\n        };\n    }\n}\n\n// Export for ES modules\nexport { TrainingProgramAgent, ProgramType, ProgramStatus };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.TrainingProgramAgent = TrainingProgramAgent;\n    window.ProgramType = ProgramType;\n    window.ProgramStatus = ProgramStatus;\n}\n","/**\n * LaborMarket - Matching mechanism between workers and firms\n *\n * Handles job postings, applications, and hiring decisions.\n * Tracks market-level statistics like wages and unemployment.\n */\n\nclass LaborMarket {\n    constructor(config = {}) {\n        this.workers = config.workers || [];\n        this.firms = config.firms || [];\n\n        // Market state\n        this.jobPostings = [];\n        this.applications = [];\n        this.hires = [];\n        this.layoffs = [];\n\n        // Market statistics (by region and industry)\n        this.marketWages = {}; // { region: { industry: wage } }\n        this.unemploymentRates = {}; // { region: rate }\n\n        // Configuration\n        this.searchRadius = config.searchRadius || 1; // How many regions away workers search\n        this.networkBonus = config.networkBonus || 0.2; // Bonus for network connections\n    }\n\n    /**\n     * Set the worker and firm populations\n     */\n    setPopulations(workers, firms) {\n        this.workers = workers;\n        this.firms = firms;\n        this._updateMarketStatistics();\n    }\n\n    /**\n     * Run the monthly matching process\n     */\n    runMonthlyMatching() {\n        // Reset monthly tracking\n        this.applications = [];\n        this.hires = [];\n        this.layoffs = [];\n\n        // 1. Collect all job postings from firms\n        this._collectJobPostings();\n\n        // 2. Workers search and apply\n        this._workerApplicationPhase();\n\n        // 3. Firms evaluate applicants and make offers\n        this._firmSelectionPhase();\n\n        // 4. Workers evaluate offers and accept\n        this._workerAcceptancePhase();\n\n        // 5. Execute layoffs\n        this._executeLayoffs();\n\n        // 6. Update market statistics\n        this._updateMarketStatistics();\n\n        return {\n            hires: this.hires.length,\n            layoffs: this.layoffs.length,\n            openPositions: this.jobPostings.filter(p => !p.filled).length,\n            applications: this.applications.length\n        };\n    }\n\n    _collectJobPostings() {\n        this.jobPostings = [];\n        this.firms.forEach(firm => {\n            const positions = firm.getOpenPositions();\n            this.jobPostings.push(...positions);\n        });\n    }\n\n    _workerApplicationPhase() {\n        // Get all unemployed workers and employed workers who are searching\n        const searchingWorkers = this.workers.filter(w =>\n            w.activelySearching || w.status === 'unemployed'\n        );\n\n        searchingWorkers.forEach(worker => {\n            // Get jobs visible to this worker\n            const visibleJobs = this.getVisibleJobs(worker);\n\n            // Worker applies to suitable jobs\n            const applications = worker.searchForJobs({ getVisibleJobs: () => visibleJobs });\n\n            applications.forEach(job => {\n                this.applications.push({\n                    worker,\n                    job,\n                    timestamp: Date.now()\n                });\n            });\n        });\n    }\n\n    _firmSelectionPhase() {\n        // Group applications by job posting\n        const applicationsByJob = {};\n        this.applications.forEach(app => {\n            if (!applicationsByJob[app.job.id]) {\n                applicationsByJob[app.job.id] = [];\n            }\n            applicationsByJob[app.job.id].push(app.worker);\n        });\n\n        // Each firm processes applications for their postings\n        this.firms.forEach(firm => {\n            firm.getOpenPositions().forEach(position => {\n                const applicants = applicationsByJob[position.id] || [];\n\n                if (applicants.length === 0) return;\n\n                // Firm ranks applicants\n                const ranked = firm.rankApplicants(applicants, position);\n\n                // Firm makes offers to top candidates\n                const offers = firm.makeOffers(ranked, position);\n\n                // Add offers to workers\n                offers.forEach(offer => {\n                    if (!offer.applicant.jobOffers) {\n                        offer.applicant.jobOffers = [];\n                    }\n                    offer.applicant.jobOffers.push(offer);\n                });\n            });\n        });\n    }\n\n    _workerAcceptancePhase() {\n        // Workers with offers evaluate and accept\n        const workersWithOffers = this.workers.filter(w =>\n            w.jobOffers && w.jobOffers.length > 0\n        );\n\n        workersWithOffers.forEach(worker => {\n            const acceptedOffer = worker.evaluateOffers();\n\n            if (acceptedOffer) {\n                // Worker accepts the job\n                worker.acceptJob(acceptedOffer, acceptedOffer.firm);\n\n                // Firm records the hire\n                acceptedOffer.firm.hire(worker, acceptedOffer.position);\n\n                // Track the hire\n                this.hires.push({\n                    worker,\n                    firm: acceptedOffer.firm,\n                    position: acceptedOffer.position,\n                    wage: acceptedOffer.wage\n                });\n            }\n\n            // Clear offers for next round\n            worker.jobOffers = [];\n        });\n    }\n\n    _executeLayoffs() {\n        this.firms.forEach(firm => {\n            const laidOff = firm.executeLayoffs();\n\n            laidOff.forEach(({ worker, reason }) => {\n                // Worker handles being laid off\n                worker.layOff(reason);\n\n                // Track the layoff\n                this.layoffs.push({\n                    worker,\n                    firm,\n                    reason\n                });\n            });\n        });\n    }\n\n    _updateMarketStatistics() {\n        // Calculate unemployment rates by region\n        const regionStats = {};\n\n        this.workers.forEach(worker => {\n            if (!regionStats[worker.region]) {\n                regionStats[worker.region] = {\n                    employed: 0,\n                    unemployed: 0,\n                    laborForce: 0,\n                    totalWages: 0,\n                    wageCount: 0\n                };\n            }\n\n            if (worker.isInLaborForce()) {\n                regionStats[worker.region].laborForce++;\n\n                if (worker.isEmployed()) {\n                    regionStats[worker.region].employed++;\n                    regionStats[worker.region].totalWages += worker.wage;\n                    regionStats[worker.region].wageCount++;\n                } else if (worker.isUnemployed()) {\n                    regionStats[worker.region].unemployed++;\n                }\n            }\n        });\n\n        // Calculate rates\n        Object.entries(regionStats).forEach(([region, stats]) => {\n            this.unemploymentRates[region] = stats.laborForce > 0\n                ? stats.unemployed / stats.laborForce\n                : 0;\n        });\n\n        // Calculate market wages by region and industry\n        this.marketWages = {};\n        this.firms.forEach(firm => {\n            if (!this.marketWages[firm.region]) {\n                this.marketWages[firm.region] = {};\n            }\n            if (!this.marketWages[firm.region][firm.industry]) {\n                this.marketWages[firm.region][firm.industry] = {\n                    total: 0,\n                    count: 0\n                };\n            }\n\n            const avgWage = firm.getAverageWage();\n            this.marketWages[firm.region][firm.industry].total += avgWage;\n            this.marketWages[firm.region][firm.industry].count++;\n        });\n    }\n\n    // ========== Query Methods ==========\n\n    /**\n     * Get jobs visible to a worker (based on region and network)\n     */\n    getVisibleJobs(worker) {\n        const visibleJobs = [];\n\n        this.jobPostings.forEach(job => {\n            if (job.filled) return;\n\n            let visibility = 0;\n\n            // Jobs in same region are visible\n            if (job.region === worker.region) {\n                visibility = 1;\n            }\n            // Jobs in nearby regions are partially visible\n            else if (Math.abs(job.region - worker.region) <= this.searchRadius) {\n                visibility = 0.5 * worker.mobilityWillingness;\n            }\n\n            // Network bonus - check if worker has connections at the firm\n            if (worker.network && worker.network.length > 0) {\n                const hasConnection = worker.network.some(contact =>\n                    contact.employer && contact.employer.id === job.firmId\n                );\n                if (hasConnection) {\n                    visibility += this.networkBonus;\n                }\n            }\n\n            // Information level affects visibility\n            visibility *= (0.5 + worker.informationLevel * 0.5);\n\n            // Random factor (not all jobs are seen even if available)\n            if (Math.random() < visibility) {\n                visibleJobs.push(job);\n            }\n        });\n\n        // Sort by relevance\n        return visibleJobs.sort((a, b) => {\n            // Prefer jobs in same region\n            const regionScoreA = a.region === worker.region ? 1 : 0;\n            const regionScoreB = b.region === worker.region ? 1 : 0;\n            if (regionScoreA !== regionScoreB) return regionScoreB - regionScoreA;\n\n            // Prefer higher wages\n            return (b.wage || 0) - (a.wage || 0);\n        });\n    }\n\n    /**\n     * Get market wage for industry/region\n     */\n    getMarketWage(industry, region) {\n        if (this.marketWages[region] && this.marketWages[region][industry]) {\n            const data = this.marketWages[region][industry];\n            return data.count > 0 ? data.total / data.count : 4000;\n        }\n        return 4000; // Default wage\n    }\n\n    /**\n     * Get unemployment rate for a region\n     */\n    getUnemploymentRate(region) {\n        return this.unemploymentRates[region] || 0;\n    }\n\n    /**\n     * Get overall market statistics\n     */\n    getMarketStatistics() {\n        const totalWorkers = this.workers.length;\n        const inLaborForce = this.workers.filter(w => w.isInLaborForce()).length;\n        const employed = this.workers.filter(w => w.isEmployed()).length;\n        const unemployed = this.workers.filter(w => w.isUnemployed()).length;\n        const retraining = this.workers.filter(w => w.status === 'retraining').length;\n\n        const totalFirms = this.firms.length;\n        const firmsAdoptingAI = this.firms.filter(f => f.isAdoptingAI()).length;\n        const openPositions = this.jobPostings.filter(p => !p.filled).length;\n\n        // Calculate wage statistics\n        const wages = this.workers\n            .filter(w => w.isEmployed() && w.wage > 0)\n            .map(w => w.wage)\n            .sort((a, b) => a - b);\n\n        const medianWage = wages.length > 0\n            ? wages[Math.floor(wages.length / 2)]\n            : 0;\n\n        const avgWage = wages.length > 0\n            ? wages.reduce((a, b) => a + b, 0) / wages.length\n            : 0;\n\n        return {\n            totalWorkers,\n            inLaborForce,\n            employed,\n            unemployed,\n            retraining,\n            outOfLaborForce: totalWorkers - inLaborForce,\n            unemploymentRate: inLaborForce > 0 ? unemployed / inLaborForce : 0,\n            laborForceParticipation: totalWorkers > 0 ? inLaborForce / totalWorkers : 0,\n\n            totalFirms,\n            firmsAdoptingAI,\n            aiAdoptionRate: totalFirms > 0 ? firmsAdoptingAI / totalFirms : 0,\n            openPositions,\n\n            medianWage,\n            avgWage,\n\n            monthlyHires: this.hires.length,\n            monthlyLayoffs: this.layoffs.length,\n            netJobChange: this.hires.length - this.layoffs.length,\n\n            regionalUnemployment: { ...this.unemploymentRates }\n        };\n    }\n\n    /**\n     * Get policy support aggregates\n     */\n    getPolicySupportStatistics() {\n        const policies = ['ubi', 'retraining', 'wageSubsidy', 'reducedWorkWeek',\n            'publicWorks', 'eitcExpansion', 'aiRegulation', 'tradeProtection', 'educationInvestment'];\n\n        const stats = {};\n\n        policies.forEach(policy => {\n            const supportLevels = this.workers\n                .filter(w => w.policySupport && w.policySupport[policy] !== undefined)\n                .map(w => w.policySupport[policy]);\n\n            if (supportLevels.length === 0) {\n                stats[policy] = { mean: 0.5, median: 0.5, strongSupport: 0, strongOppose: 0 };\n                return;\n            }\n\n            const sorted = [...supportLevels].sort((a, b) => a - b);\n            const mean = supportLevels.reduce((a, b) => a + b, 0) / supportLevels.length;\n            const median = sorted[Math.floor(sorted.length / 2)];\n            const strongSupport = supportLevels.filter(s => s > 0.7).length / supportLevels.length;\n            const strongOppose = supportLevels.filter(s => s < 0.3).length / supportLevels.length;\n\n            stats[policy] = {\n                mean: Math.round(mean * 100) / 100,\n                median: Math.round(median * 100) / 100,\n                strongSupport: Math.round(strongSupport * 100) / 100,\n                strongOppose: Math.round(strongOppose * 100) / 100,\n                feasibilityScore: Math.round((mean * 0.5 + (1 - strongOppose) * 0.3 + strongSupport * 0.2) * 100)\n            };\n        });\n\n        return stats;\n    }\n\n    /**\n     * Get demographic breakdown of policy support\n     */\n    getPolicySupportByDemographic(policy) {\n        const byAge = {};\n        const byEducation = {};\n        const byStatus = {};\n\n        this.workers.forEach(worker => {\n            if (!worker.policySupport || worker.policySupport[policy] === undefined) return;\n\n            const support = worker.policySupport[policy];\n\n            // By age group\n            const ageGroup = worker.getAgeGroup();\n            if (!byAge[ageGroup]) byAge[ageGroup] = { total: 0, count: 0 };\n            byAge[ageGroup].total += support;\n            byAge[ageGroup].count++;\n\n            // By education\n            if (!byEducation[worker.education]) byEducation[worker.education] = { total: 0, count: 0 };\n            byEducation[worker.education].total += support;\n            byEducation[worker.education].count++;\n\n            // By employment status\n            if (!byStatus[worker.status]) byStatus[worker.status] = { total: 0, count: 0 };\n            byStatus[worker.status].total += support;\n            byStatus[worker.status].count++;\n        });\n\n        // Calculate averages\n        const calcAvg = (obj) => {\n            const result = {};\n            Object.entries(obj).forEach(([key, val]) => {\n                result[key] = val.count > 0 ? Math.round(val.total / val.count * 100) / 100 : 0;\n            });\n            return result;\n        };\n\n        return {\n            byAge: calcAvg(byAge),\n            byEducation: calcAvg(byEducation),\n            byStatus: calcAvg(byStatus)\n        };\n    }\n}\n\n// Export for ES modules\nexport { LaborMarket };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.LaborMarket = LaborMarket;\n}\n","/**\n * WageDynamics - Wage determination and adjustment mechanisms\n *\n * Models how wages evolve based on supply/demand, productivity,\n * AI impact, and market conditions.\n */\n\nclass WageDynamics {\n    constructor(config = {}) {\n        // Base national wage parameters\n        this.nationalMedianWage = config.nationalMedianWage || 4500; // Monthly\n        this.nationalMeanWage = config.nationalMeanWage || 5200;\n        this.minimumWage = config.minimumWage || 1260; // ~$7.25/hr * 173 hrs\n\n        // Wage adjustment speeds\n        this.upwardStickiness = config.upwardStickiness || 0.02; // Slow to rise\n        this.downwardStickiness = config.downwardStickiness || 0.01; // Even slower to fall\n\n        // Market parameters\n        this.supplyElasticity = config.supplyElasticity || 0.3;\n        this.demandElasticity = config.demandElasticity || 0.4;\n\n        // AI impact parameters\n        this.aiWagePremium = config.aiWagePremium || 0.15; // Premium for AI skills\n        this.automationWageDiscount = config.automationWageDiscount || 0.10; // Reduction for automatable roles\n\n        // Tracking\n        this.wageHistory = [];\n        this.industryWages = {};\n        this.regionWages = {};\n        this.skillPremiums = {};\n    }\n\n    /**\n     * Calculate market-clearing wage for a job\n     */\n    calculateJobWage(job, market, region) {\n        let wage = this.nationalMedianWage;\n\n        // Industry adjustment\n        const industryMultiplier = this._getIndustryMultiplier(job.industry);\n        wage *= industryMultiplier;\n\n        // Regional cost of living adjustment\n        if (region?.costOfLiving) {\n            wage *= region.costOfLiving;\n        }\n\n        // Skill requirements\n        if (job.requiredSkills) {\n            const skillPremium = this._calculateSkillPremium(job.requiredSkills);\n            wage *= (1 + skillPremium);\n        }\n\n        // Education requirements\n        const eduMultiplier = this._getEducationMultiplier(job.requiredEducation);\n        wage *= eduMultiplier;\n\n        // AI-related adjustments\n        if (job.aiAugmentation) {\n            wage *= (1 + this.aiWagePremium * job.aiAugmentation);\n        }\n\n        // Automation exposure discount\n        if (job.automationExposure) {\n            wage *= (1 - this.automationWageDiscount * job.automationExposure);\n        }\n\n        // Market tightness adjustment\n        const tightness = this._calculateMarketTightness(market, job);\n        wage *= (1 + tightness * 0.1);\n\n        // Apply minimum wage floor\n        wage = Math.max(wage, this.minimumWage);\n\n        return Math.round(wage);\n    }\n\n    /**\n     * Adjust wages based on market conditions\n     */\n    adjustMarketWages(workers, firms, laborMarket) {\n        const adjustments = {\n            byIndustry: {},\n            byRegion: {},\n            bySkill: {},\n            overall: 0\n        };\n\n        // Calculate overall supply/demand ratio\n        const laborSupply = workers.filter(w =>\n            w.status === 'unemployed' || w.activelySearching\n        ).length;\n        const laborDemand = firms.reduce((sum, f) =>\n            sum + (f.openPositions?.length || 0), 0\n        );\n\n        const supplyDemandRatio = laborDemand > 0\n            ? laborSupply / laborDemand\n            : 2.0; // High ratio means loose labor market\n\n        // Determine wage pressure\n        let wagePressure = 0;\n        if (supplyDemandRatio < 1.0) {\n            // Tight labor market - upward pressure\n            wagePressure = (1 - supplyDemandRatio) * this.upwardStickiness;\n        } else if (supplyDemandRatio > 1.5) {\n            // Loose labor market - downward pressure\n            wagePressure = -(supplyDemandRatio - 1.5) * this.downwardStickiness;\n        }\n\n        adjustments.overall = wagePressure;\n\n        // Calculate industry-specific adjustments\n        this._calculateIndustryWageAdjustments(workers, firms, adjustments);\n\n        // Calculate region-specific adjustments\n        this._calculateRegionWageAdjustments(workers, firms, adjustments);\n\n        // Calculate skill premium adjustments\n        this._calculateSkillPremiumAdjustments(workers, firms, adjustments);\n\n        // Apply adjustments to employed workers\n        this._applyWageAdjustments(workers, adjustments);\n\n        // Record history\n        this.wageHistory.push({\n            month: this.wageHistory.length,\n            medianWage: this._calculateMedianWage(workers),\n            meanWage: this._calculateMeanWage(workers),\n            adjustments: { ...adjustments }\n        });\n\n        return adjustments;\n    }\n\n    _calculateIndustryWageAdjustments(workers, firms, adjustments) {\n        // Group by industry\n        const industries = {};\n\n        workers.filter(w => w.status === 'employed').forEach(worker => {\n            const ind = worker.industry;\n            if (!industries[ind]) {\n                industries[ind] = { employed: 0, totalWage: 0 };\n            }\n            industries[ind].employed++;\n            industries[ind].totalWage += worker.wage;\n        });\n\n        firms.forEach(firm => {\n            const ind = firm.industry;\n            if (!industries[ind]) {\n                industries[ind] = { employed: 0, totalWage: 0, openings: 0 };\n            }\n            industries[ind].openings = (industries[ind].openings || 0) +\n                (firm.openPositions?.length || 0);\n        });\n\n        // Calculate adjustment for each industry\n        Object.keys(industries).forEach(industry => {\n            const data = industries[industry];\n            const avgWage = data.employed > 0 ? data.totalWage / data.employed : this.nationalMedianWage;\n\n            // Vacancy rate affects wages\n            const vacancyRate = data.openings / Math.max(1, data.employed);\n\n            let adjustment = 0;\n            if (vacancyRate > 0.1) {\n                // High vacancies - wage pressure up\n                adjustment = Math.min(0.05, (vacancyRate - 0.1) * this.upwardStickiness);\n            } else if (vacancyRate < 0.02) {\n                // Low vacancies - wage pressure down\n                adjustment = Math.max(-0.02, (vacancyRate - 0.02) * this.downwardStickiness);\n            }\n\n            adjustments.byIndustry[industry] = adjustment;\n            this.industryWages[industry] = avgWage * (1 + adjustment);\n        });\n    }\n\n    _calculateRegionWageAdjustments(workers, firms, adjustments) {\n        // Group by region\n        const regions = {};\n\n        workers.forEach(worker => {\n            const region = worker.region;\n            if (!regions[region]) {\n                regions[region] = {\n                    employed: 0,\n                    unemployed: 0,\n                    totalWage: 0\n                };\n            }\n\n            if (worker.status === 'employed') {\n                regions[region].employed++;\n                regions[region].totalWage += worker.wage;\n            } else if (worker.status === 'unemployed') {\n                regions[region].unemployed++;\n            }\n        });\n\n        // Calculate regional adjustments\n        Object.keys(regions).forEach(region => {\n            const data = regions[region];\n            const localUR = data.employed + data.unemployed > 0\n                ? data.unemployed / (data.employed + data.unemployed)\n                : 0.05;\n\n            let adjustment = 0;\n            if (localUR < 0.04) {\n                // Very tight local market\n                adjustment = (0.04 - localUR) * this.upwardStickiness * 2;\n            } else if (localUR > 0.08) {\n                // Loose local market\n                adjustment = -(localUR - 0.08) * this.downwardStickiness * 2;\n            }\n\n            adjustments.byRegion[region] = adjustment;\n            this.regionWages[region] = data.employed > 0\n                ? (data.totalWage / data.employed) * (1 + adjustment)\n                : this.nationalMedianWage;\n        });\n    }\n\n    _calculateSkillPremiumAdjustments(workers, firms, adjustments) {\n        const skills = [\n            'programming', 'dataAnalysis', 'aiAugmentationSkill',\n            'technical', 'leadership', 'healthcare'\n        ];\n\n        skills.forEach(skill => {\n            // Count workers with high skill level\n            const skilledWorkers = workers.filter(w => {\n                if (skill === 'aiAugmentationSkill') {\n                    return w.aiAugmentationSkill > 0.6;\n                }\n                return w.skills?.[skill] > 0.6;\n            });\n\n            const totalWorkers = workers.length;\n            const skillShare = skilledWorkers.length / Math.max(1, totalWorkers);\n\n            // Scarcity drives premiums\n            let premium = 0;\n            if (skillShare < 0.1) {\n                premium = 0.2; // High premium for scarce skills\n            } else if (skillShare < 0.2) {\n                premium = 0.1;\n            } else if (skillShare < 0.3) {\n                premium = 0.05;\n            }\n\n            // AI-related skills get extra premium in high AI adoption environments\n            if (['programming', 'dataAnalysis', 'aiAugmentationSkill'].includes(skill)) {\n                premium *= 1.2;\n            }\n\n            adjustments.bySkill[skill] = premium;\n            this.skillPremiums[skill] = premium;\n        });\n    }\n\n    _applyWageAdjustments(workers, adjustments) {\n        workers.filter(w => w.status === 'employed').forEach(worker => {\n            let totalAdjustment = adjustments.overall;\n\n            // Add industry adjustment\n            if (adjustments.byIndustry[worker.industry]) {\n                totalAdjustment += adjustments.byIndustry[worker.industry];\n            }\n\n            // Add regional adjustment\n            if (adjustments.byRegion[worker.region]) {\n                totalAdjustment += adjustments.byRegion[worker.region];\n            }\n\n            // Limit adjustment magnitude per month\n            totalAdjustment = Math.max(-0.02, Math.min(0.05, totalAdjustment));\n\n            // Apply adjustment\n            if (totalAdjustment !== 0) {\n                worker.wage = Math.round(worker.wage * (1 + totalAdjustment));\n                worker.wage = Math.max(this.minimumWage, worker.wage);\n            }\n        });\n    }\n\n    // ========== Helper Methods ==========\n\n    _getIndustryMultiplier(industry) {\n        const multipliers = {\n            1: 1.40,  // Technology\n            2: 1.20,  // Healthcare\n            3: 1.35,  // Finance\n            4: 0.75,  // Retail\n            5: 1.00,  // Manufacturing\n            6: 0.90,  // Transportation\n            7: 0.95,  // Education\n            8: 1.05,  // Government\n            9: 1.00,  // Construction\n            10: 1.25, // Professional Services\n            11: 0.70, // Hospitality\n            12: 0.80, // Agriculture\n            13: 1.15, // Energy\n            14: 1.10, // Media\n            15: 1.05, // Real Estate\n            16: 1.10, // Utilities\n            17: 1.15, // Telecom\n            18: 1.30, // Pharma\n            19: 0.95, // Logistics\n            20: 0.85  // Administrative\n        };\n\n        return multipliers[industry] || 1.0;\n    }\n\n    _getEducationMultiplier(education) {\n        const multipliers = {\n            'no_degree': 0.70,\n            'high_school': 0.85,\n            'some_college': 1.00,\n            'bachelors': 1.35,\n            'advanced': 1.70\n        };\n\n        return multipliers[education] || 1.0;\n    }\n\n    _calculateSkillPremium(requiredSkills) {\n        if (!requiredSkills) return 0;\n\n        let totalPremium = 0;\n        let skillCount = 0;\n\n        Object.entries(requiredSkills).forEach(([skill, level]) => {\n            const basePremium = this.skillPremiums[skill] || 0;\n            totalPremium += basePremium * level;\n            skillCount++;\n        });\n\n        return skillCount > 0 ? totalPremium / skillCount : 0;\n    }\n\n    _calculateMarketTightness(market, job) {\n        if (!market) return 0;\n\n        // Get unemployment rate for job's region/industry\n        const stats = market.getMarketStatistics?.() || {};\n        const unemploymentRate = stats.unemploymentRate || 0.05;\n\n        // Tight market (low unemployment) = positive tightness\n        // Loose market (high unemployment) = negative tightness\n        return 0.05 - unemploymentRate;\n    }\n\n    _calculateMedianWage(workers) {\n        const wages = workers\n            .filter(w => w.status === 'employed' && w.wage > 0)\n            .map(w => w.wage)\n            .sort((a, b) => a - b);\n\n        if (wages.length === 0) return this.nationalMedianWage;\n\n        const mid = Math.floor(wages.length / 2);\n        return wages.length % 2 !== 0\n            ? wages[mid]\n            : (wages[mid - 1] + wages[mid]) / 2;\n    }\n\n    _calculateMeanWage(workers) {\n        const employed = workers.filter(w => w.status === 'employed' && w.wage > 0);\n        if (employed.length === 0) return this.nationalMeanWage;\n\n        return employed.reduce((sum, w) => sum + w.wage, 0) / employed.length;\n    }\n\n    // ========== Analysis Methods ==========\n\n    /**\n     * Calculate wage distribution statistics\n     */\n    getWageDistribution(workers) {\n        const wages = workers\n            .filter(w => w.status === 'employed' && w.wage > 0)\n            .map(w => w.wage)\n            .sort((a, b) => a - b);\n\n        if (wages.length === 0) {\n            return {\n                min: 0,\n                p10: 0,\n                p25: 0,\n                median: 0,\n                p75: 0,\n                p90: 0,\n                max: 0,\n                mean: 0,\n                stdDev: 0,\n                gini: 0\n            };\n        }\n\n        const n = wages.length;\n        const mean = wages.reduce((a, b) => a + b, 0) / n;\n        const variance = wages.reduce((sum, w) => sum + Math.pow(w - mean, 2), 0) / n;\n\n        return {\n            min: wages[0],\n            p10: wages[Math.floor(n * 0.1)],\n            p25: wages[Math.floor(n * 0.25)],\n            median: wages[Math.floor(n * 0.5)],\n            p75: wages[Math.floor(n * 0.75)],\n            p90: wages[Math.floor(n * 0.9)],\n            max: wages[n - 1],\n            mean: Math.round(mean),\n            stdDev: Math.round(Math.sqrt(variance)),\n            gini: this._calculateGini(wages)\n        };\n    }\n\n    _calculateGini(wages) {\n        if (wages.length === 0) return 0;\n\n        const n = wages.length;\n        let sumOfDifferences = 0;\n        const total = wages.reduce((a, b) => a + b, 0);\n\n        for (let i = 0; i < n; i++) {\n            for (let j = 0; j < n; j++) {\n                sumOfDifferences += Math.abs(wages[i] - wages[j]);\n            }\n        }\n\n        return sumOfDifferences / (2 * n * total);\n    }\n\n    /**\n     * Calculate wage polarization (hollowing of middle class)\n     */\n    getWagePolarization(workers) {\n        const distribution = this.getWageDistribution(workers);\n\n        // Define income groups\n        const lowWage = distribution.p25;\n        const highWage = distribution.p75;\n\n        const wages = workers\n            .filter(w => w.status === 'employed' && w.wage > 0)\n            .map(w => w.wage);\n\n        const lowShare = wages.filter(w => w < lowWage).length / wages.length;\n        const midShare = wages.filter(w => w >= lowWage && w <= highWage).length / wages.length;\n        const highShare = wages.filter(w => w > highWage).length / wages.length;\n\n        // Polarization ratio: (low + high) / middle\n        const polarizationRatio = midShare > 0\n            ? (lowShare + highShare) / midShare\n            : 0;\n\n        return {\n            lowShare,\n            midShare,\n            highShare,\n            polarizationRatio,\n            isPolarizing: polarizationRatio > 1.5\n        };\n    }\n\n    /**\n     * Get AI-related wage analysis\n     */\n    getAIWageImpact(workers) {\n        const employed = workers.filter(w => w.status === 'employed' && w.wage > 0);\n\n        // High AI skill workers\n        const highAISkill = employed.filter(w => w.aiAugmentationSkill > 0.6);\n        const lowAISkill = employed.filter(w => w.aiAugmentationSkill <= 0.6);\n\n        const highAIAvgWage = highAISkill.length > 0\n            ? highAISkill.reduce((sum, w) => sum + w.wage, 0) / highAISkill.length\n            : 0;\n\n        const lowAIAvgWage = lowAISkill.length > 0\n            ? lowAISkill.reduce((sum, w) => sum + w.wage, 0) / lowAISkill.length\n            : 0;\n\n        const premium = lowAIAvgWage > 0\n            ? (highAIAvgWage - lowAIAvgWage) / lowAIAvgWage\n            : 0;\n\n        return {\n            highAISkillCount: highAISkill.length,\n            lowAISkillCount: lowAISkill.length,\n            highAIAvgWage: Math.round(highAIAvgWage),\n            lowAIAvgWage: Math.round(lowAIAvgWage),\n            aiSkillPremium: premium,\n            premiumPercent: (premium * 100).toFixed(1) + '%'\n        };\n    }\n\n    /**\n     * Get current summary\n     */\n    getSummary(workers) {\n        return {\n            distribution: this.getWageDistribution(workers),\n            polarization: this.getWagePolarization(workers),\n            aiImpact: this.getAIWageImpact(workers),\n            industryWages: { ...this.industryWages },\n            skillPremiums: { ...this.skillPremiums },\n            historyLength: this.wageHistory.length\n        };\n    }\n}\n\n// Export for ES modules\nexport { WageDynamics };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.WageDynamics = WageDynamics;\n}\n","/**\n * InformationDiffusion - Models how information spreads through worker networks\n *\n * Tracks awareness of AI trends, job opportunities, policy changes,\n * and how opinions/behaviors cascade through social networks.\n */\n\n// Information types that diffuse through networks\nconst InformationType = {\n    AI_AWARENESS: 'ai_awareness',           // Knowledge about AI impact\n    JOB_OPPORTUNITIES: 'job_opportunities', // Job market information\n    RETRAINING_OPTIONS: 'retraining_options', // Training program awareness\n    POLICY_NEWS: 'policy_news',             // Policy changes/proposals\n    LAYOFF_NEWS: 'layoff_news',             // Layoff announcements\n    SUCCESS_STORIES: 'success_stories',     // Positive outcomes from adaptation\n    FAILURE_STORIES: 'failure_stories'      // Negative outcomes\n};\n\n// Media event types that trigger broad information spread\nconst MediaEventType = {\n    MASS_LAYOFF: 'mass_layoff',\n    BREAKTHROUGH: 'ai_breakthrough',\n    POLICY_ANNOUNCEMENT: 'policy_announcement',\n    STUDY_RELEASE: 'study_release',\n    COMPANY_NEWS: 'company_news'\n};\n\nclass InformationDiffusion {\n    constructor(config = {}) {\n        // Base diffusion rates\n        this.baseSpreadRate = config.baseSpreadRate || 0.05;\n        this.networkWeight = config.networkWeight || 0.3;\n        this.mediaWeight = config.mediaWeight || 0.2;\n\n        // Information decay (people forget over time)\n        this.decayRate = config.decayRate || 0.02;\n\n        // Current global information levels (0-1)\n        this.globalAwareness = {\n            [InformationType.AI_AWARENESS]: 0.3,\n            [InformationType.JOB_OPPORTUNITIES]: 0.5,\n            [InformationType.RETRAINING_OPTIONS]: 0.2,\n            [InformationType.POLICY_NEWS]: 0.3,\n            [InformationType.LAYOFF_NEWS]: 0.2,\n            [InformationType.SUCCESS_STORIES]: 0.2,\n            [InformationType.FAILURE_STORIES]: 0.1\n        };\n\n        // Media event queue\n        this.mediaEvents = [];\n        this.mediaEventHistory = [];\n\n        // Tracking\n        this.diffusionHistory = [];\n    }\n\n    /**\n     * Process monthly information diffusion\n     */\n    processMonth(workers, firms, month, marketConditions = {}) {\n        const results = {\n            month,\n            networkDiffusion: 0,\n            mediaEvents: [],\n            awarenessChanges: {}\n        };\n\n        // Generate media events based on market conditions\n        this._generateMediaEvents(marketConditions, month);\n\n        // Process any queued media events\n        results.mediaEvents = this._processMediaEvents(workers, month);\n\n        // Network-based diffusion\n        results.networkDiffusion = this._processNetworkDiffusion(workers);\n\n        // Apply information decay\n        this._applyDecay(workers);\n\n        // Update global awareness levels\n        this._updateGlobalAwareness(workers);\n\n        // Track changes\n        Object.keys(this.globalAwareness).forEach(type => {\n            results.awarenessChanges[type] = this.globalAwareness[type];\n        });\n\n        // Record history\n        this.diffusionHistory.push(results);\n\n        return results;\n    }\n\n    _generateMediaEvents(marketConditions, month) {\n        const { unemploymentRate, layoffCount, aiAdoptionRate, policyChanges } = marketConditions;\n\n        // Mass layoff event\n        if (layoffCount && layoffCount > 5000) {\n            this.queueMediaEvent({\n                type: MediaEventType.MASS_LAYOFF,\n                month,\n                magnitude: Math.min(1, layoffCount / 50000),\n                affectedIndustry: marketConditions.mostAffectedIndustry,\n                description: `Major layoffs: ${layoffCount.toLocaleString()} jobs lost`\n            });\n        }\n\n        // AI breakthrough (random, more likely with high adoption)\n        if (Math.random() < 0.02 * (1 + aiAdoptionRate)) {\n            this.queueMediaEvent({\n                type: MediaEventType.BREAKTHROUGH,\n                month,\n                magnitude: 0.3 + Math.random() * 0.4,\n                description: 'Major AI capability breakthrough announced'\n            });\n        }\n\n        // Policy announcements\n        if (policyChanges && policyChanges.length > 0) {\n            policyChanges.forEach(policy => {\n                this.queueMediaEvent({\n                    type: MediaEventType.POLICY_ANNOUNCEMENT,\n                    month,\n                    magnitude: 0.4,\n                    policy: policy.type,\n                    description: `New ${policy.type} policy announced`\n                });\n            });\n        }\n\n        // Periodic study releases\n        if (month % 6 === 0) {\n            this.queueMediaEvent({\n                type: MediaEventType.STUDY_RELEASE,\n                month,\n                magnitude: 0.2,\n                description: 'New study on AI employment impact released'\n            });\n        }\n    }\n\n    /**\n     * Queue a media event for processing\n     */\n    queueMediaEvent(event) {\n        this.mediaEvents.push(event);\n    }\n\n    _processMediaEvents(workers, month) {\n        const processedEvents = [];\n\n        while (this.mediaEvents.length > 0) {\n            const event = this.mediaEvents.shift();\n            const affected = this._applyMediaEvent(workers, event);\n\n            processedEvents.push({\n                ...event,\n                workersAffected: affected\n            });\n\n            this.mediaEventHistory.push(event);\n        }\n\n        return processedEvents;\n    }\n\n    _applyMediaEvent(workers, event) {\n        let affectedCount = 0;\n\n        workers.forEach(worker => {\n            // Probability of being exposed to news\n            const exposureProbability = this._calculateMediaExposure(worker, event);\n\n            if (Math.random() < exposureProbability) {\n                this._updateWorkerFromMedia(worker, event);\n                affectedCount++;\n            }\n        });\n\n        return affectedCount;\n    }\n\n    _calculateMediaExposure(worker, event) {\n        // Base exposure probability\n        let exposure = 0.3;\n\n        // Information-aware workers more likely to see news\n        exposure += worker.informationLevel * 0.3;\n\n        // Event magnitude increases reach\n        exposure *= event.magnitude;\n\n        // Industry-specific events more likely seen by those in industry\n        if (event.affectedIndustry && worker.industry === event.affectedIndustry) {\n            exposure *= 1.5;\n        }\n\n        // Employed vs unemployed (unemployed more attentive to job news)\n        if (worker.status === 'unemployed') {\n            if ([MediaEventType.MASS_LAYOFF, MediaEventType.POLICY_ANNOUNCEMENT].includes(event.type)) {\n                exposure *= 1.3;\n            }\n        }\n\n        return Math.min(0.9, exposure);\n    }\n\n    _updateWorkerFromMedia(worker, event) {\n        switch (event.type) {\n            case MediaEventType.MASS_LAYOFF:\n                // Increase AI awareness and anxiety\n                worker.informationLevel = Math.min(1, worker.informationLevel + 0.1 * event.magnitude);\n                worker.economicAnxiety = Math.min(1, worker.economicAnxiety + 0.08 * event.magnitude);\n\n                // Shift policy support\n                if (worker.policySupport) {\n                    worker.policySupport.ubi = Math.min(1, worker.policySupport.ubi + 0.05 * event.magnitude);\n                    worker.policySupport.aiRegulation = Math.min(1, worker.policySupport.aiRegulation + 0.04 * event.magnitude);\n                }\n                break;\n\n            case MediaEventType.BREAKTHROUGH:\n                // Increase AI awareness significantly\n                worker.informationLevel = Math.min(1, worker.informationLevel + 0.15 * event.magnitude);\n\n                // Mixed effect on anxiety (depends on current situation)\n                if (worker.status === 'employed' && worker.aiAugmentationSkill > 0.5) {\n                    // Tech-savvy see opportunity\n                    worker.economicAnxiety = Math.max(0, worker.economicAnxiety - 0.03);\n                } else {\n                    // Others see threat\n                    worker.economicAnxiety = Math.min(1, worker.economicAnxiety + 0.05 * event.magnitude);\n                }\n                break;\n\n            case MediaEventType.POLICY_ANNOUNCEMENT:\n                // Increase awareness of policy\n                worker.informationLevel = Math.min(1, worker.informationLevel + 0.08);\n\n                // Slightly reduce anxiety (help is coming)\n                if (worker.economicAnxiety > 0.3) {\n                    worker.economicAnxiety = Math.max(0, worker.economicAnxiety - 0.02);\n                }\n\n                // Increase trust in government\n                worker.trustInGovernment = Math.min(1, worker.trustInGovernment + 0.03);\n                break;\n\n            case MediaEventType.STUDY_RELEASE:\n                // Modest increase in awareness\n                worker.informationLevel = Math.min(1, worker.informationLevel + 0.05);\n                break;\n        }\n    }\n\n    _processNetworkDiffusion(workers) {\n        let totalDiffusion = 0;\n\n        workers.forEach(worker => {\n            if (!worker.network || worker.network.length === 0) return;\n\n            // Calculate information received from network\n            const networkInfo = this._calculateNetworkInformation(worker);\n\n            // Update worker's information level (moves toward network average)\n            const infoDiff = networkInfo.averageInfoLevel - worker.informationLevel;\n            const infoChange = infoDiff * this.baseSpreadRate * this.networkWeight;\n            worker.informationLevel = Math.max(0, Math.min(1, worker.informationLevel + infoChange));\n\n            // Spread job opportunity information\n            if (networkInfo.hasJobInfo && worker.status === 'unemployed') {\n                worker.jobSearchEffectiveness = Math.min(1,\n                    (worker.jobSearchEffectiveness || 0.5) + 0.05\n                );\n            }\n\n            // Spread anxiety through network\n            const anxietyDiff = networkInfo.averageAnxiety - worker.economicAnxiety;\n            const anxietyChange = anxietyDiff * this.baseSpreadRate * this.networkWeight * 0.5;\n            worker.economicAnxiety = Math.max(0, Math.min(1, worker.economicAnxiety + anxietyChange));\n\n            // Spread retraining awareness\n            if (networkInfo.retrainingSuccess) {\n                worker.informationLevel = Math.min(1, worker.informationLevel + 0.02);\n                if (worker.policySupport) {\n                    worker.policySupport.retraining = Math.min(1, worker.policySupport.retraining + 0.02);\n                }\n            }\n\n            totalDiffusion += Math.abs(infoChange);\n        });\n\n        return totalDiffusion;\n    }\n\n    _calculateNetworkInformation(worker) {\n        const network = worker.network;\n\n        let totalInfoLevel = 0;\n        let totalAnxiety = 0;\n        let hasJobInfo = false;\n        let retrainingSuccess = false;\n\n        network.forEach(contact => {\n            const closeness = contact.closeness || 0.5;\n\n            // Information level\n            totalInfoLevel += (contact.informationLevel || 0.5) * closeness;\n\n            // Economic anxiety\n            totalAnxiety += (contact.economicAnxiety || 0.2) * closeness;\n\n            // Job information (recently employed contacts)\n            if (contact.status === 'employed' && contact.tenure < 3) {\n                hasJobInfo = true;\n            }\n\n            // Retraining success stories\n            if (contact.benefitedFromIntervention === 'retraining') {\n                retrainingSuccess = true;\n            }\n        });\n\n        const totalCloseness = network.reduce((sum, c) => sum + (c.closeness || 0.5), 0);\n\n        return {\n            averageInfoLevel: totalCloseness > 0 ? totalInfoLevel / totalCloseness : 0.5,\n            averageAnxiety: totalCloseness > 0 ? totalAnxiety / totalCloseness : 0.2,\n            hasJobInfo,\n            retrainingSuccess\n        };\n    }\n\n    _applyDecay(workers) {\n        // Information decays over time (people forget, news becomes stale)\n        workers.forEach(worker => {\n            // Very slight decay on information level\n            if (worker.informationLevel > 0.3) {\n                worker.informationLevel = Math.max(0.3,\n                    worker.informationLevel - this.decayRate * 0.1\n                );\n            }\n\n            // Anxiety decays if situation is stable\n            if (worker.status === 'employed' && worker.tenure > 6) {\n                worker.economicAnxiety = Math.max(0.1,\n                    worker.economicAnxiety - this.decayRate * 0.5\n                );\n            }\n        });\n    }\n\n    _updateGlobalAwareness(workers) {\n        const n = workers.length;\n        if (n === 0) return;\n\n        // Calculate average awareness levels\n        this.globalAwareness[InformationType.AI_AWARENESS] =\n            workers.reduce((sum, w) => sum + (w.informationLevel || 0.3), 0) / n;\n\n        // Job opportunities awareness based on job search activity\n        const searchingWorkers = workers.filter(w => w.activelySearching);\n        this.globalAwareness[InformationType.JOB_OPPORTUNITIES] =\n            searchingWorkers.length > 0\n                ? searchingWorkers.reduce((sum, w) => sum + (w.jobSearchEffectiveness || 0.5), 0) / searchingWorkers.length\n                : 0.5;\n\n        // Retraining awareness\n        const retrainingWorkers = workers.filter(w => w.status === 'retraining' || w.benefitedFromIntervention === 'retraining');\n        this.globalAwareness[InformationType.RETRAINING_OPTIONS] =\n            Math.min(0.8, 0.2 + (retrainingWorkers.length / n) * 2);\n    }\n\n    // ========== Echo Chamber Detection ==========\n\n    /**\n     * Detect echo chambers in network (clusters with similar opinions)\n     */\n    detectEchoChambers(workers) {\n        const chambers = [];\n\n        // Sample workers for analysis\n        const sampleSize = Math.min(100, workers.length);\n        const sampled = workers\n            .filter(w => w.network && w.network.length >= 5)\n            .sort(() => Math.random() - 0.5)\n            .slice(0, sampleSize);\n\n        sampled.forEach(worker => {\n            // Calculate opinion similarity with network\n            const similarities = worker.network.map(contact => {\n                if (!contact.policySupport || !worker.policySupport) return 0.5;\n\n                let similarity = 0;\n                let count = 0;\n\n                Object.keys(worker.policySupport).forEach(policy => {\n                    if (contact.policySupport[policy] !== undefined) {\n                        const diff = Math.abs(worker.policySupport[policy] - contact.policySupport[policy]);\n                        similarity += (1 - diff);\n                        count++;\n                    }\n                });\n\n                return count > 0 ? similarity / count : 0.5;\n            });\n\n            const avgSimilarity = similarities.reduce((a, b) => a + b, 0) / similarities.length;\n\n            // High similarity (>0.8) indicates echo chamber\n            if (avgSimilarity > 0.8) {\n                chambers.push({\n                    worker: worker.id,\n                    similarity: avgSimilarity,\n                    networkSize: worker.network.length,\n                    dominantView: this._getDominantView(worker)\n                });\n            }\n        });\n\n        return {\n            echoChamberCount: chambers.length,\n            percentage: (chambers.length / sampleSize * 100).toFixed(1),\n            chambers: chambers.slice(0, 10) // Top 10 examples\n        };\n    }\n\n    _getDominantView(worker) {\n        if (!worker.policySupport) return 'neutral';\n\n        const policies = Object.entries(worker.policySupport);\n        const strongSupport = policies.filter(([_, v]) => v > 0.7);\n        const strongOppose = policies.filter(([_, v]) => v < 0.3);\n\n        if (strongSupport.length > strongOppose.length) {\n            return `pro-intervention (${strongSupport.map(p => p[0]).join(', ')})`;\n        } else if (strongOppose.length > strongSupport.length) {\n            return `anti-intervention`;\n        }\n        return 'mixed';\n    }\n\n    // ========== Cascade Detection ==========\n\n    /**\n     * Detect opinion cascades (rapid spread of views)\n     */\n    detectCascades() {\n        if (this.diffusionHistory.length < 2) return [];\n\n        const cascades = [];\n        const current = this.diffusionHistory[this.diffusionHistory.length - 1];\n        const previous = this.diffusionHistory[this.diffusionHistory.length - 2];\n\n        Object.keys(current.awarenessChanges).forEach(type => {\n            const change = current.awarenessChanges[type] - previous.awarenessChanges[type];\n\n            // Significant change (>5%) indicates cascade\n            if (Math.abs(change) > 0.05) {\n                cascades.push({\n                    type,\n                    change,\n                    direction: change > 0 ? 'increasing' : 'decreasing',\n                    magnitude: Math.abs(change),\n                    month: current.month\n                });\n            }\n        });\n\n        return cascades;\n    }\n\n    // ========== Getters ==========\n\n    getGlobalAwareness() {\n        return { ...this.globalAwareness };\n    }\n\n    getMediaEventHistory() {\n        return [...this.mediaEventHistory];\n    }\n\n    getSummary() {\n        return {\n            globalAwareness: this.getGlobalAwareness(),\n            mediaEventsTotal: this.mediaEventHistory.length,\n            recentMediaEvents: this.mediaEventHistory.slice(-5),\n            monthsProcessed: this.diffusionHistory.length,\n            cascadesDetected: this.detectCascades()\n        };\n    }\n}\n\n// Export for ES modules\nexport { InformationDiffusion, InformationType, MediaEventType };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.InformationDiffusion = InformationDiffusion;\n    window.InformationType = InformationType;\n    window.MediaEventType = MediaEventType;\n}\n","/**\n * AICapabilityFrontier - Tracks AI capabilities and automation potential over time\n *\n * Models the advancement of AI capabilities across different task types,\n * occupations, and industries. Determines what can be automated and when.\n */\n\n// Task categories that AI can affect\nconst TaskCategories = {\n    ROUTINE_COGNITIVE: 'routine_cognitive',      // Data entry, scheduling, basic analysis\n    ROUTINE_MANUAL: 'routine_manual',            // Assembly, packaging, driving\n    NON_ROUTINE_COGNITIVE: 'non_routine_cognitive', // Problem-solving, creativity, strategy\n    NON_ROUTINE_MANUAL: 'non_routine_manual',    // Craftsmanship, surgery, repairs\n    INTERPERSONAL: 'interpersonal',              // Sales, teaching, therapy, management\n    CREATIVE: 'creative'                         // Art, writing, design, innovation\n};\n\n// Occupation automation exposure data (based on research)\nconst OCCUPATION_AUTOMATION_DATA = {\n    // High exposure (>70%)\n    1: { name: 'Data Entry Clerk', exposure: 0.95, category: TaskCategories.ROUTINE_COGNITIVE },\n    2: { name: 'Bookkeeper', exposure: 0.90, category: TaskCategories.ROUTINE_COGNITIVE },\n    3: { name: 'Cashier', exposure: 0.85, category: TaskCategories.ROUTINE_MANUAL },\n    4: { name: 'Telemarketer', exposure: 0.90, category: TaskCategories.ROUTINE_COGNITIVE },\n    5: { name: 'Assembly Worker', exposure: 0.80, category: TaskCategories.ROUTINE_MANUAL },\n    6: { name: 'Truck Driver', exposure: 0.75, category: TaskCategories.ROUTINE_MANUAL },\n    7: { name: 'Warehouse Worker', exposure: 0.78, category: TaskCategories.ROUTINE_MANUAL },\n    8: { name: 'Fast Food Worker', exposure: 0.72, category: TaskCategories.ROUTINE_MANUAL },\n\n    // Medium exposure (40-70%)\n    20: { name: 'Accountant', exposure: 0.65, category: TaskCategories.ROUTINE_COGNITIVE },\n    21: { name: 'Paralegal', exposure: 0.60, category: TaskCategories.ROUTINE_COGNITIVE },\n    22: { name: 'Insurance Underwriter', exposure: 0.65, category: TaskCategories.ROUTINE_COGNITIVE },\n    23: { name: 'Loan Officer', exposure: 0.55, category: TaskCategories.ROUTINE_COGNITIVE },\n    24: { name: 'Customer Service Rep', exposure: 0.50, category: TaskCategories.INTERPERSONAL },\n    25: { name: 'Radiologist', exposure: 0.55, category: TaskCategories.NON_ROUTINE_COGNITIVE },\n    26: { name: 'Financial Analyst', exposure: 0.50, category: TaskCategories.NON_ROUTINE_COGNITIVE },\n    27: { name: 'Journalist', exposure: 0.45, category: TaskCategories.CREATIVE },\n    28: { name: 'Translator', exposure: 0.55, category: TaskCategories.NON_ROUTINE_COGNITIVE },\n\n    // Low exposure (<40%)\n    40: { name: 'Software Developer', exposure: 0.35, category: TaskCategories.NON_ROUTINE_COGNITIVE },\n    41: { name: 'Nurse', exposure: 0.25, category: TaskCategories.INTERPERSONAL },\n    42: { name: 'Teacher', exposure: 0.20, category: TaskCategories.INTERPERSONAL },\n    43: { name: 'Therapist', exposure: 0.15, category: TaskCategories.INTERPERSONAL },\n    44: { name: 'Surgeon', exposure: 0.20, category: TaskCategories.NON_ROUTINE_MANUAL },\n    45: { name: 'CEO', exposure: 0.15, category: TaskCategories.NON_ROUTINE_COGNITIVE },\n    46: { name: 'Sales Manager', exposure: 0.25, category: TaskCategories.INTERPERSONAL },\n    47: { name: 'HR Manager', exposure: 0.30, category: TaskCategories.INTERPERSONAL },\n    48: { name: 'Plumber', exposure: 0.20, category: TaskCategories.NON_ROUTINE_MANUAL },\n    49: { name: 'Electrician', exposure: 0.22, category: TaskCategories.NON_ROUTINE_MANUAL },\n    50: { name: 'Artist', exposure: 0.40, category: TaskCategories.CREATIVE }\n};\n\n// Industry automation potential\nconst INDUSTRY_AUTOMATION = {\n    1: { name: 'Technology', potential: 0.35, aiAdoptionSpeed: 'fast' },\n    2: { name: 'Healthcare', potential: 0.40, aiAdoptionSpeed: 'moderate' },\n    3: { name: 'Finance', potential: 0.55, aiAdoptionSpeed: 'fast' },\n    4: { name: 'Retail', potential: 0.70, aiAdoptionSpeed: 'moderate' },\n    5: { name: 'Manufacturing', potential: 0.75, aiAdoptionSpeed: 'moderate' },\n    6: { name: 'Transportation', potential: 0.70, aiAdoptionSpeed: 'slow' },\n    7: { name: 'Education', potential: 0.30, aiAdoptionSpeed: 'slow' },\n    8: { name: 'Government', potential: 0.40, aiAdoptionSpeed: 'slow' },\n    9: { name: 'Construction', potential: 0.45, aiAdoptionSpeed: 'slow' },\n    10: { name: 'Professional Services', potential: 0.50, aiAdoptionSpeed: 'fast' },\n    11: { name: 'Hospitality', potential: 0.60, aiAdoptionSpeed: 'moderate' },\n    12: { name: 'Agriculture', potential: 0.65, aiAdoptionSpeed: 'slow' },\n    13: { name: 'Energy', potential: 0.50, aiAdoptionSpeed: 'moderate' },\n    14: { name: 'Media', potential: 0.55, aiAdoptionSpeed: 'fast' },\n    15: { name: 'Real Estate', potential: 0.40, aiAdoptionSpeed: 'moderate' },\n    16: { name: 'Utilities', potential: 0.50, aiAdoptionSpeed: 'slow' },\n    17: { name: 'Telecom', potential: 0.55, aiAdoptionSpeed: 'fast' },\n    18: { name: 'Pharma', potential: 0.45, aiAdoptionSpeed: 'moderate' },\n    19: { name: 'Logistics', potential: 0.70, aiAdoptionSpeed: 'fast' },\n    20: { name: 'Administrative', potential: 0.80, aiAdoptionSpeed: 'fast' }\n};\n\nclass AICapabilityFrontier {\n    constructor(scenario = {}) {\n        this.scenario = scenario;\n\n        // Current AI capability level (0-1 scale)\n        this.currentLevel = scenario.initialAILevel || 0.30;\n\n        // Adoption curve type\n        this.adoptionCurve = scenario.adoptionCurve || 's_curve';\n\n        // Automation pace\n        this.automationPace = scenario.automationPace || 'moderate';\n\n        // Capability levels by task category\n        this.taskCapabilities = this._initializeTaskCapabilities();\n\n        // Occupation-specific exposure (memoized calculations)\n        this.occupationExposure = {};\n\n        // Industry AI adoption levels\n        this.industryAdoption = {};\n\n        // Historical tracking\n        this.history = [];\n\n        // Breakthrough events (random significant advances)\n        this.breakthroughs = [];\n\n        // Cost-effectiveness threshold (when AI becomes cheaper than humans)\n        this.costThreshold = scenario.costThreshold || 0.6;\n    }\n\n    _initializeTaskCapabilities() {\n        return {\n            [TaskCategories.ROUTINE_COGNITIVE]: 0.7,     // Already quite capable\n            [TaskCategories.ROUTINE_MANUAL]: 0.5,        // Moderate capability\n            [TaskCategories.NON_ROUTINE_COGNITIVE]: 0.4, // Improving rapidly\n            [TaskCategories.NON_ROUTINE_MANUAL]: 0.2,    // Still limited\n            [TaskCategories.INTERPERSONAL]: 0.2,         // Limited\n            [TaskCategories.CREATIVE]: 0.35              // Surprisingly capable (LLMs, diffusion)\n        };\n    }\n\n    /**\n     * Advance AI capabilities by one month\n     */\n    advance(month, scenario = {}) {\n        const paceMultipliers = {\n            slow: 0.5,\n            moderate: 1.0,\n            fast: 1.5,\n            accelerating: 2.0\n        };\n\n        const pace = paceMultipliers[this.automationPace] || 1.0;\n\n        // Calculate capability growth based on curve type\n        let growth = 0;\n\n        switch (this.adoptionCurve) {\n            case 'linear':\n                growth = 0.005 * pace;\n                break;\n\n            case 'exponential':\n                growth = this.currentLevel * 0.01 * pace;\n                break;\n\n            case 's_curve':\n            default:\n                // S-curve: slow start, fast middle, slow end\n                const midpoint = 60; // Peak growth around month 60\n                const steepness = 0.05;\n                growth = 0.015 * pace / (1 + Math.exp(-steepness * (month - midpoint)));\n                break;\n\n            case 'step':\n                // Step function with occasional jumps\n                if (month % 24 === 0) {\n                    growth = 0.15 * pace;\n                    this._recordBreakthrough(month, growth);\n                } else {\n                    growth = 0.002 * pace;\n                }\n                break;\n        }\n\n        // Apply growth\n        this.currentLevel = Math.min(0.95, this.currentLevel + growth);\n\n        // Update task-specific capabilities\n        this._updateTaskCapabilities(month, pace);\n\n        // Check for random breakthroughs (1% chance per month in fast scenarios)\n        if (Math.random() < 0.01 * pace) {\n            this._generateBreakthrough(month);\n        }\n\n        // Record history\n        this.history.push({\n            month,\n            level: this.currentLevel,\n            taskCapabilities: { ...this.taskCapabilities },\n            breakthrough: this.breakthroughs.length > 0 &&\n                this.breakthroughs[this.breakthroughs.length - 1].month === month\n        });\n\n        return this.currentLevel;\n    }\n\n    _updateTaskCapabilities(month, pace) {\n        // Different task categories advance at different rates\n        const advanceRates = {\n            [TaskCategories.ROUTINE_COGNITIVE]: 0.008 * pace,\n            [TaskCategories.ROUTINE_MANUAL]: 0.005 * pace,\n            [TaskCategories.NON_ROUTINE_COGNITIVE]: 0.007 * pace,  // LLMs advancing fast\n            [TaskCategories.NON_ROUTINE_MANUAL]: 0.003 * pace,      // Robotics slower\n            [TaskCategories.INTERPERSONAL]: 0.002 * pace,           // Hardest to automate\n            [TaskCategories.CREATIVE]: 0.006 * pace                 // Generative AI\n        };\n\n        Object.keys(this.taskCapabilities).forEach(category => {\n            const rate = advanceRates[category] || 0.004;\n            this.taskCapabilities[category] = Math.min(0.95, this.taskCapabilities[category] + rate);\n        });\n    }\n\n    _recordBreakthrough(month, impact) {\n        this.breakthroughs.push({\n            month,\n            impact,\n            type: 'scheduled'\n        });\n    }\n\n    _generateBreakthrough(month) {\n        // Random breakthrough affects specific capability\n        const categories = Object.keys(this.taskCapabilities);\n        const affectedCategory = categories[Math.floor(Math.random() * categories.length)];\n\n        const impact = 0.05 + Math.random() * 0.1;\n        this.taskCapabilities[affectedCategory] = Math.min(0.95,\n            this.taskCapabilities[affectedCategory] + impact\n        );\n\n        this.breakthroughs.push({\n            month,\n            impact,\n            category: affectedCategory,\n            type: 'random',\n            description: `Breakthrough in ${affectedCategory.replace('_', ' ')} automation`\n        });\n\n        return this.breakthroughs[this.breakthroughs.length - 1];\n    }\n\n    // ========== Exposure Calculations ==========\n\n    /**\n     * Get automation exposure for a specific occupation\n     */\n    getOccupationExposure(occupation) {\n        // Check cache\n        if (this.occupationExposure[occupation] !== undefined) {\n            return this.occupationExposure[occupation] * this.currentLevel;\n        }\n\n        // Get occupation data or generate\n        const occData = OCCUPATION_AUTOMATION_DATA[occupation];\n\n        let baseExposure;\n        if (occData) {\n            baseExposure = occData.exposure;\n        } else {\n            // Generate exposure for unknown occupation based on ID pattern\n            // Higher IDs tend to be newer, potentially AI-related jobs\n            const idNormalized = (occupation % 100) / 100;\n            baseExposure = 0.3 + Math.random() * 0.4;\n\n            // Some randomness based on occupation ID\n            if (occupation > 80) {\n                baseExposure *= 0.7; // Newer jobs less automatable\n            }\n        }\n\n        // Cache the result\n        this.occupationExposure[occupation] = baseExposure;\n\n        // Return current effective exposure (base * current AI level)\n        return baseExposure * this.currentLevel;\n    }\n\n    /**\n     * Get industry-level automation metrics\n     */\n    getIndustryAutomation(industry) {\n        const indData = INDUSTRY_AUTOMATION[industry];\n\n        if (!indData) {\n            return {\n                potential: 0.5,\n                currentExposure: 0.5 * this.currentLevel,\n                adoptionSpeed: 'moderate'\n            };\n        }\n\n        // Apply adoption speed modifier\n        const speedModifiers = {\n            slow: 0.7,\n            moderate: 1.0,\n            fast: 1.3\n        };\n\n        const modifier = speedModifiers[indData.aiAdoptionSpeed] || 1.0;\n\n        return {\n            name: indData.name,\n            potential: indData.potential,\n            currentExposure: indData.potential * this.currentLevel * modifier,\n            adoptionSpeed: indData.aiAdoptionSpeed\n        };\n    }\n\n    /**\n     * Calculate task-weighted exposure for a worker\n     */\n    getWorkerExposure(worker) {\n        // Base occupation exposure\n        let exposure = this.getOccupationExposure(worker.occupation);\n\n        // Adjust for AI augmentation skill (higher skill = lower risk)\n        const skillMitigation = (worker.aiAugmentationSkill || 0) * 0.3;\n        exposure = exposure * (1 - skillMitigation);\n\n        // Adjust for education (higher education = more adaptable)\n        const eduMitigation = this._getEducationMitigation(worker.education);\n        exposure = exposure * (1 - eduMitigation);\n\n        // Age factor (older workers may face more displacement)\n        if (worker.age > 50) {\n            exposure *= 1.1;\n        }\n\n        return Math.min(1, Math.max(0, exposure));\n    }\n\n    _getEducationMitigation(education) {\n        const mitigations = {\n            'no_degree': 0.0,\n            'high_school': 0.05,\n            'some_college': 0.10,\n            'bachelors': 0.15,\n            'advanced': 0.20\n        };\n\n        return mitigations[education] || 0.05;\n    }\n\n    /**\n     * Determine if a task can be cost-effectively automated\n     */\n    canAutomate(taskCategory, wage) {\n        // AI capability for this task type\n        const capability = this.taskCapabilities[taskCategory] || 0.3;\n\n        // Base automation cost (decreases as AI advances)\n        const automationCost = 3000 / (capability + 0.1); // Simplified cost model\n\n        // Can automate if AI is capable enough AND cost-effective\n        return capability >= this.costThreshold && automationCost < wage;\n    }\n\n    /**\n     * Calculate augmentation potential (AI helping, not replacing)\n     */\n    getAugmentationPotential(occupation) {\n        const exposure = this.getOccupationExposure(occupation);\n\n        // Mid-exposure jobs often have highest augmentation potential\n        // Too high = replacement, too low = limited AI applicability\n        if (exposure > 0.7) {\n            return 0.3; // High exposure = mostly replacement\n        } else if (exposure < 0.2) {\n            return 0.4; // Low exposure = limited AI benefit\n        } else {\n            return 0.7; // Sweet spot for augmentation\n        }\n    }\n\n    // ========== Analysis Methods ==========\n\n    /**\n     * Get jobs at high risk in current state\n     */\n    getHighRiskOccupations(threshold = 0.5) {\n        const highRisk = [];\n\n        Object.entries(OCCUPATION_AUTOMATION_DATA).forEach(([id, data]) => {\n            const currentExposure = data.exposure * this.currentLevel;\n            if (currentExposure >= threshold) {\n                highRisk.push({\n                    id: parseInt(id),\n                    name: data.name,\n                    exposure: currentExposure,\n                    category: data.category\n                });\n            }\n        });\n\n        return highRisk.sort((a, b) => b.exposure - a.exposure);\n    }\n\n    /**\n     * Get industries by automation risk\n     */\n    getIndustryRiskRanking() {\n        const rankings = [];\n\n        Object.entries(INDUSTRY_AUTOMATION).forEach(([id, data]) => {\n            const metrics = this.getIndustryAutomation(parseInt(id));\n            rankings.push({\n                id: parseInt(id),\n                ...data,\n                currentExposure: metrics.currentExposure\n            });\n        });\n\n        return rankings.sort((a, b) => b.currentExposure - a.currentExposure);\n    }\n\n    /**\n     * Estimate jobs at risk\n     */\n    estimateJobsAtRisk(workers, threshold = 0.5) {\n        let atRisk = 0;\n        let highRisk = 0;\n\n        workers.forEach(worker => {\n            if (worker.status !== 'employed') return;\n\n            const exposure = this.getWorkerExposure(worker);\n\n            if (exposure >= threshold) {\n                atRisk++;\n            }\n            if (exposure >= 0.7) {\n                highRisk++;\n            }\n        });\n\n        return {\n            atRisk,\n            highRisk,\n            atRiskPercent: workers.length > 0 ? (atRisk / workers.length * 100).toFixed(1) : 0,\n            highRiskPercent: workers.length > 0 ? (highRisk / workers.length * 100).toFixed(1) : 0\n        };\n    }\n\n    /**\n     * Project future capability levels\n     */\n    projectCapabilities(monthsAhead) {\n        const projections = [];\n        let projectedLevel = this.currentLevel;\n\n        for (let m = 1; m <= monthsAhead; m++) {\n            // Simplified projection using current curve\n            switch (this.adoptionCurve) {\n                case 'linear':\n                    projectedLevel += 0.005;\n                    break;\n                case 'exponential':\n                    projectedLevel *= 1.01;\n                    break;\n                case 's_curve':\n                default:\n                    const currentMonth = this.history.length + m;\n                    const growth = 0.015 / (1 + Math.exp(-0.05 * (currentMonth - 60)));\n                    projectedLevel += growth;\n                    break;\n            }\n\n            projectedLevel = Math.min(0.95, projectedLevel);\n\n            if (m % 12 === 0) {\n                projections.push({\n                    month: m,\n                    year: Math.floor(m / 12),\n                    level: projectedLevel\n                });\n            }\n        }\n\n        return projections;\n    }\n\n    // ========== Getters ==========\n\n    getCurrentLevel() {\n        return this.currentLevel;\n    }\n\n    getTaskCapabilities() {\n        return { ...this.taskCapabilities };\n    }\n\n    getBreakthroughs() {\n        return [...this.breakthroughs];\n    }\n\n    getSummary() {\n        return {\n            currentLevel: this.currentLevel,\n            adoptionCurve: this.adoptionCurve,\n            automationPace: this.automationPace,\n            taskCapabilities: this.getTaskCapabilities(),\n            breakthroughCount: this.breakthroughs.length,\n            monthsSimulated: this.history.length,\n            highRiskOccupations: this.getHighRiskOccupations(0.5).length\n        };\n    }\n}\n\n// Export for ES modules\nexport { AICapabilityFrontier, TaskCategories, OCCUPATION_AUTOMATION_DATA, INDUSTRY_AUTOMATION };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.AICapabilityFrontier = AICapabilityFrontier;\n    window.TaskCategories = TaskCategories;\n    window.OCCUPATION_AUTOMATION_DATA = OCCUPATION_AUTOMATION_DATA;\n    window.INDUSTRY_AUTOMATION = INDUSTRY_AUTOMATION;\n}\n","/**\n * Regional Market System - Geographic economic zones in the ABM\n *\n * Each region has unique economic characteristics, industry mix,\n * cost of living, and labor market conditions.\n */\n\n// US State/Region data based on real economic characteristics\nconst US_REGIONS = [\n    { id: 1, name: 'California', abbrev: 'CA', population: 39.5, costOfLiving: 1.50, techHub: true },\n    { id: 2, name: 'Texas', abbrev: 'TX', population: 29.1, costOfLiving: 0.92, techHub: true },\n    { id: 3, name: 'Florida', abbrev: 'FL', population: 21.5, costOfLiving: 1.00, techHub: false },\n    { id: 4, name: 'New York', abbrev: 'NY', population: 20.2, costOfLiving: 1.40, techHub: true },\n    { id: 5, name: 'Pennsylvania', abbrev: 'PA', population: 13.0, costOfLiving: 0.98, techHub: false },\n    { id: 6, name: 'Illinois', abbrev: 'IL', population: 12.8, costOfLiving: 1.02, techHub: false },\n    { id: 7, name: 'Ohio', abbrev: 'OH', population: 11.8, costOfLiving: 0.88, techHub: false },\n    { id: 8, name: 'Georgia', abbrev: 'GA', population: 10.7, costOfLiving: 0.95, techHub: true },\n    { id: 9, name: 'North Carolina', abbrev: 'NC', population: 10.4, costOfLiving: 0.92, techHub: true },\n    { id: 10, name: 'Michigan', abbrev: 'MI', population: 10.0, costOfLiving: 0.90, techHub: false },\n    { id: 11, name: 'New Jersey', abbrev: 'NJ', population: 9.3, costOfLiving: 1.25, techHub: false },\n    { id: 12, name: 'Virginia', abbrev: 'VA', population: 8.6, costOfLiving: 1.05, techHub: true },\n    { id: 13, name: 'Washington', abbrev: 'WA', population: 7.6, costOfLiving: 1.20, techHub: true },\n    { id: 14, name: 'Arizona', abbrev: 'AZ', population: 7.3, costOfLiving: 0.98, techHub: true },\n    { id: 15, name: 'Massachusetts', abbrev: 'MA', population: 7.0, costOfLiving: 1.35, techHub: true },\n    { id: 16, name: 'Tennessee', abbrev: 'TN', population: 6.9, costOfLiving: 0.88, techHub: false },\n    { id: 17, name: 'Indiana', abbrev: 'IN', population: 6.8, costOfLiving: 0.85, techHub: false },\n    { id: 18, name: 'Maryland', abbrev: 'MD', population: 6.2, costOfLiving: 1.12, techHub: true },\n    { id: 19, name: 'Missouri', abbrev: 'MO', population: 6.2, costOfLiving: 0.85, techHub: false },\n    { id: 20, name: 'Wisconsin', abbrev: 'WI', population: 5.9, costOfLiving: 0.90, techHub: false },\n    { id: 21, name: 'Colorado', abbrev: 'CO', population: 5.8, costOfLiving: 1.10, techHub: true },\n    { id: 22, name: 'Minnesota', abbrev: 'MN', population: 5.7, costOfLiving: 0.98, techHub: false },\n    { id: 23, name: 'South Carolina', abbrev: 'SC', population: 5.1, costOfLiving: 0.88, techHub: false },\n    { id: 24, name: 'Alabama', abbrev: 'AL', population: 5.0, costOfLiving: 0.85, techHub: false },\n    { id: 25, name: 'Louisiana', abbrev: 'LA', population: 4.7, costOfLiving: 0.90, techHub: false },\n    { id: 26, name: 'Kentucky', abbrev: 'KY', population: 4.5, costOfLiving: 0.85, techHub: false },\n    { id: 27, name: 'Oregon', abbrev: 'OR', population: 4.2, costOfLiving: 1.12, techHub: true },\n    { id: 28, name: 'Oklahoma', abbrev: 'OK', population: 4.0, costOfLiving: 0.85, techHub: false },\n    { id: 29, name: 'Connecticut', abbrev: 'CT', population: 3.6, costOfLiving: 1.20, techHub: false },\n    { id: 30, name: 'Utah', abbrev: 'UT', population: 3.3, costOfLiving: 0.98, techHub: true },\n    { id: 31, name: 'Iowa', abbrev: 'IA', population: 3.2, costOfLiving: 0.85, techHub: false },\n    { id: 32, name: 'Nevada', abbrev: 'NV', population: 3.1, costOfLiving: 1.02, techHub: false },\n    { id: 33, name: 'Arkansas', abbrev: 'AR', population: 3.0, costOfLiving: 0.82, techHub: false },\n    { id: 34, name: 'Mississippi', abbrev: 'MS', population: 3.0, costOfLiving: 0.80, techHub: false },\n    { id: 35, name: 'Kansas', abbrev: 'KS', population: 2.9, costOfLiving: 0.85, techHub: false },\n    { id: 36, name: 'New Mexico', abbrev: 'NM', population: 2.1, costOfLiving: 0.90, techHub: false },\n    { id: 37, name: 'Nebraska', abbrev: 'NE', population: 2.0, costOfLiving: 0.88, techHub: false },\n    { id: 38, name: 'Idaho', abbrev: 'ID', population: 1.9, costOfLiving: 0.95, techHub: false },\n    { id: 39, name: 'West Virginia', abbrev: 'WV', population: 1.8, costOfLiving: 0.82, techHub: false },\n    { id: 40, name: 'Hawaii', abbrev: 'HI', population: 1.5, costOfLiving: 1.85, techHub: false },\n    { id: 41, name: 'New Hampshire', abbrev: 'NH', population: 1.4, costOfLiving: 1.10, techHub: false },\n    { id: 42, name: 'Maine', abbrev: 'ME', population: 1.4, costOfLiving: 1.00, techHub: false },\n    { id: 43, name: 'Montana', abbrev: 'MT', population: 1.1, costOfLiving: 0.95, techHub: false },\n    { id: 44, name: 'Rhode Island', abbrev: 'RI', population: 1.1, costOfLiving: 1.08, techHub: false },\n    { id: 45, name: 'Delaware', abbrev: 'DE', population: 1.0, costOfLiving: 1.02, techHub: false },\n    { id: 46, name: 'South Dakota', abbrev: 'SD', population: 0.9, costOfLiving: 0.88, techHub: false },\n    { id: 47, name: 'North Dakota', abbrev: 'ND', population: 0.8, costOfLiving: 0.90, techHub: false },\n    { id: 48, name: 'Alaska', abbrev: 'AK', population: 0.7, costOfLiving: 1.25, techHub: false },\n    { id: 49, name: 'Vermont', abbrev: 'VT', population: 0.6, costOfLiving: 1.05, techHub: false },\n    { id: 50, name: 'Wyoming', abbrev: 'WY', population: 0.6, costOfLiving: 0.92, techHub: false }\n];\n\n// Industry sectors\nconst INDUSTRY_SECTORS = {\n    1: { name: 'Technology', automationExposure: 0.3, aiAdoptionRate: 0.7, growthRate: 0.05 },\n    2: { name: 'Healthcare', automationExposure: 0.4, aiAdoptionRate: 0.4, growthRate: 0.04 },\n    3: { name: 'Finance', automationExposure: 0.5, aiAdoptionRate: 0.6, growthRate: 0.02 },\n    4: { name: 'Retail', automationExposure: 0.7, aiAdoptionRate: 0.5, growthRate: -0.01 },\n    5: { name: 'Manufacturing', automationExposure: 0.8, aiAdoptionRate: 0.5, growthRate: -0.02 },\n    6: { name: 'Transportation', automationExposure: 0.75, aiAdoptionRate: 0.4, growthRate: 0.01 },\n    7: { name: 'Education', automationExposure: 0.35, aiAdoptionRate: 0.3, growthRate: 0.02 },\n    8: { name: 'Government', automationExposure: 0.4, aiAdoptionRate: 0.2, growthRate: 0.01 },\n    9: { name: 'Construction', automationExposure: 0.5, aiAdoptionRate: 0.2, growthRate: 0.02 },\n    10: { name: 'Professional Services', automationExposure: 0.45, aiAdoptionRate: 0.55, growthRate: 0.03 },\n    11: { name: 'Hospitality', automationExposure: 0.6, aiAdoptionRate: 0.3, growthRate: 0.02 },\n    12: { name: 'Agriculture', automationExposure: 0.65, aiAdoptionRate: 0.3, growthRate: -0.01 },\n    13: { name: 'Energy', automationExposure: 0.55, aiAdoptionRate: 0.4, growthRate: 0.01 },\n    14: { name: 'Media & Entertainment', automationExposure: 0.5, aiAdoptionRate: 0.5, growthRate: 0.02 },\n    15: { name: 'Real Estate', automationExposure: 0.4, aiAdoptionRate: 0.35, growthRate: 0.01 },\n    16: { name: 'Utilities', automationExposure: 0.5, aiAdoptionRate: 0.35, growthRate: 0.00 },\n    17: { name: 'Telecommunications', automationExposure: 0.55, aiAdoptionRate: 0.5, growthRate: 0.01 },\n    18: { name: 'Pharmaceuticals', automationExposure: 0.45, aiAdoptionRate: 0.5, growthRate: 0.04 },\n    19: { name: 'Logistics', automationExposure: 0.7, aiAdoptionRate: 0.45, growthRate: 0.03 },\n    20: { name: 'Administrative', automationExposure: 0.8, aiAdoptionRate: 0.5, growthRate: -0.02 }\n};\n\n// Regional industry distribution (what % of region's economy is each industry)\nconst REGIONAL_INDUSTRY_MIX = {\n    // Tech hubs\n    'CA': { 1: 0.20, 2: 0.10, 3: 0.08, 10: 0.15, 14: 0.12 },\n    'WA': { 1: 0.25, 2: 0.08, 10: 0.12, 19: 0.10 },\n    'TX': { 1: 0.12, 3: 0.08, 5: 0.10, 13: 0.15, 2: 0.12 },\n    'NY': { 3: 0.20, 10: 0.15, 14: 0.10, 2: 0.10 },\n    'MA': { 1: 0.15, 2: 0.18, 7: 0.12, 18: 0.10 },\n\n    // Manufacturing belt\n    'MI': { 5: 0.25, 6: 0.12, 2: 0.10 },\n    'OH': { 5: 0.20, 2: 0.12, 3: 0.08 },\n    'IN': { 5: 0.22, 19: 0.12, 2: 0.10 },\n    'WI': { 5: 0.18, 12: 0.10, 2: 0.12 },\n\n    // Service economies\n    'FL': { 11: 0.15, 2: 0.12, 15: 0.10, 4: 0.12 },\n    'NV': { 11: 0.25, 15: 0.10, 9: 0.08 },\n\n    // Energy states\n    'LA': { 13: 0.20, 5: 0.10, 6: 0.08 },\n    'OK': { 13: 0.18, 12: 0.10 },\n    'WY': { 13: 0.25, 12: 0.15 },\n    'ND': { 13: 0.20, 12: 0.25 },\n\n    // Agriculture\n    'IA': { 12: 0.25, 5: 0.12 },\n    'NE': { 12: 0.22, 5: 0.10 },\n    'KS': { 12: 0.20, 13: 0.08 }\n};\n\nclass Region {\n    constructor(config) {\n        this.id = config.id;\n        this.name = config.name;\n        this.abbrev = config.abbrev || config.name.substring(0, 2).toUpperCase();\n        this.population = config.population || 5.0; // Millions\n        this.costOfLiving = config.costOfLiving || 1.0; // Index (1.0 = national average)\n        this.techHub = config.techHub || false;\n\n        // Economic characteristics\n        this.industryMix = this._initializeIndustryMix();\n        this.unemploymentRate = config.initialUnemploymentRate || 0.04 + (Math.random() * 0.02 - 0.01);\n        this.averageWage = this._calculateAverageWage();\n        this.laborForceParticipation = 0.60 + Math.random() * 0.08;\n\n        // Labor market dynamics\n        this.localWorkers = [];\n        this.localFirms = [];\n        this.localTrainingPrograms = [];\n        this.jobPostings = [];\n\n        // Migration tracking\n        this.inMigration = 0;\n        this.outMigration = 0;\n\n        // Regional attractiveness (affects migration)\n        this.attractiveness = this._calculateAttractiveness();\n\n        // AI adoption level in region\n        this.regionalAIAdoption = this.techHub ? 0.25 + Math.random() * 0.15 : 0.10 + Math.random() * 0.10;\n\n        // Policy support averages\n        this.policySupport = {\n            ubi: 0.5,\n            retraining: 0.5,\n            aiRegulation: 0.5\n        };\n    }\n\n    _initializeIndustryMix() {\n        const mix = {};\n        const regionMix = REGIONAL_INDUSTRY_MIX[this.abbrev] || {};\n\n        // Start with regional specializations\n        Object.entries(regionMix).forEach(([industry, share]) => {\n            mix[industry] = share;\n        });\n\n        // Fill in remaining industries with smaller shares\n        let totalShare = Object.values(mix).reduce((sum, s) => sum + s, 0);\n\n        Object.keys(INDUSTRY_SECTORS).forEach(industry => {\n            if (!mix[industry]) {\n                const remainingShare = Math.max(0.02, (1 - totalShare) / 15);\n                mix[industry] = remainingShare * (0.5 + Math.random());\n            }\n        });\n\n        // Normalize to 1.0\n        totalShare = Object.values(mix).reduce((sum, s) => sum + s, 0);\n        Object.keys(mix).forEach(industry => {\n            mix[industry] = mix[industry] / totalShare;\n        });\n\n        return mix;\n    }\n\n    _calculateAverageWage() {\n        // Base national average wage\n        const nationalAverage = 4500; // Monthly\n\n        // Adjust for cost of living\n        let wage = nationalAverage * this.costOfLiving;\n\n        // Tech hubs have higher wages\n        if (this.techHub) {\n            wage *= 1.15;\n        }\n\n        // Add some randomness\n        wage *= (0.95 + Math.random() * 0.1);\n\n        return Math.round(wage);\n    }\n\n    _calculateAttractiveness() {\n        let score = 50; // Base score\n\n        // Economic opportunity\n        score += (1 - this.unemploymentRate) * 20;\n\n        // Wage vs cost of living ratio\n        const wageToCost = this.averageWage / (4500 * this.costOfLiving);\n        score += wageToCost * 10;\n\n        // Tech hub bonus\n        if (this.techHub) {\n            score += 10;\n        }\n\n        // Cost of living penalty (high cost = less attractive for migration)\n        if (this.costOfLiving > 1.2) {\n            score -= (this.costOfLiving - 1.2) * 20;\n        } else if (this.costOfLiving < 0.9) {\n            score += (0.9 - this.costOfLiving) * 10;\n        }\n\n        return Math.max(0, Math.min(100, score));\n    }\n\n    // ========== Monthly Updates ==========\n\n    updateMonth(workers, firms, globalConditions = {}) {\n        // Update local references\n        this.localWorkers = workers.filter(w => w.region === this.id);\n        this.localFirms = firms.filter(f => f.region === this.id);\n\n        // Recalculate unemployment rate\n        const laborForce = this.localWorkers.filter(w => w.status !== 'out_of_labor_force');\n        const unemployed = laborForce.filter(w => w.status === 'unemployed');\n        this.unemploymentRate = laborForce.length > 0 ? unemployed.length / laborForce.length : 0;\n\n        // Update average wage\n        const employedWorkers = this.localWorkers.filter(w => w.status === 'employed' && w.wage > 0);\n        if (employedWorkers.length > 0) {\n            this.averageWage = Math.round(\n                employedWorkers.reduce((sum, w) => sum + w.wage, 0) / employedWorkers.length\n            );\n        }\n\n        // Update AI adoption level\n        const aiAdoptingFirms = this.localFirms.filter(f =>\n            ['piloting', 'scaling', 'mature'].includes(f.aiAdoptionStatus)\n        );\n        this.regionalAIAdoption = this.localFirms.length > 0\n            ? aiAdoptingFirms.length / this.localFirms.length\n            : 0;\n\n        // Update policy support averages\n        this._updatePolicySupport();\n\n        // Recalculate attractiveness\n        this.attractiveness = this._calculateAttractiveness();\n\n        return this.getSnapshot();\n    }\n\n    _updatePolicySupport() {\n        if (this.localWorkers.length === 0) return;\n\n        const policies = ['ubi', 'retraining', 'aiRegulation'];\n\n        policies.forEach(policy => {\n            const totalSupport = this.localWorkers.reduce((sum, w) =>\n                sum + (w.policySupport?.[policy] || 0.5), 0\n            );\n            this.policySupport[policy] = totalSupport / this.localWorkers.length;\n        });\n    }\n\n    // ========== Migration ==========\n\n    calculateMigrationPressure(otherRegions) {\n        // Workers in this region may want to leave if:\n        // - High unemployment\n        // - Lower wages relative to other regions\n        // - Other regions are more attractive\n\n        const avgOtherAttractiveness = otherRegions.reduce((sum, r) => sum + r.attractiveness, 0) / otherRegions.length;\n\n        let outPressure = 0;\n\n        // High unemployment pushes people out\n        if (this.unemploymentRate > 0.06) {\n            outPressure += (this.unemploymentRate - 0.06) * 50;\n        }\n\n        // Low attractiveness relative to average\n        if (this.attractiveness < avgOtherAttractiveness) {\n            outPressure += (avgOtherAttractiveness - this.attractiveness) * 0.5;\n        }\n\n        // Calculate in-migration pressure (opposite factors)\n        let inPressure = 0;\n\n        if (this.attractiveness > avgOtherAttractiveness) {\n            inPressure += (this.attractiveness - avgOtherAttractiveness) * 0.5;\n        }\n\n        if (this.unemploymentRate < 0.04) {\n            inPressure += (0.04 - this.unemploymentRate) * 30;\n        }\n\n        return {\n            outPressure: Math.max(0, outPressure),\n            inPressure: Math.max(0, inPressure)\n        };\n    }\n\n    processMigration(workers, destinationRegion) {\n        // Called when workers migrate away\n        this.outMigration++;\n    }\n\n    receiveMigrant(worker) {\n        // Called when workers migrate here\n        this.inMigration++;\n    }\n\n    // ========== Industry Analysis ==========\n\n    getIndustryEmployment() {\n        const employment = {};\n\n        Object.keys(INDUSTRY_SECTORS).forEach(industryId => {\n            const industryWorkers = this.localWorkers.filter(w =>\n                w.industry === parseInt(industryId) && w.status === 'employed'\n            );\n            employment[industryId] = {\n                name: INDUSTRY_SECTORS[industryId].name,\n                employed: industryWorkers.length,\n                share: this.localWorkers.length > 0\n                    ? industryWorkers.length / this.localWorkers.length\n                    : 0\n            };\n        });\n\n        return employment;\n    }\n\n    getAutomationExposure() {\n        // Weighted average automation exposure based on industry mix\n        let totalExposure = 0;\n        let totalWeight = 0;\n\n        Object.entries(this.industryMix).forEach(([industry, share]) => {\n            const sector = INDUSTRY_SECTORS[industry];\n            if (sector) {\n                totalExposure += sector.automationExposure * share;\n                totalWeight += share;\n            }\n        });\n\n        return totalWeight > 0 ? totalExposure / totalWeight : 0.5;\n    }\n\n    // ========== Getters ==========\n\n    getSnapshot() {\n        return {\n            id: this.id,\n            name: this.name,\n            abbrev: this.abbrev,\n            population: this.population,\n            laborForce: this.localWorkers.filter(w => w.status !== 'out_of_labor_force').length,\n            employed: this.localWorkers.filter(w => w.status === 'employed').length,\n            unemployed: this.localWorkers.filter(w => w.status === 'unemployed').length,\n            unemploymentRate: this.unemploymentRate,\n            averageWage: this.averageWage,\n            costOfLiving: this.costOfLiving,\n            techHub: this.techHub,\n            aiAdoptionRate: this.regionalAIAdoption,\n            attractiveness: this.attractiveness,\n            automationExposure: this.getAutomationExposure(),\n            policySupport: { ...this.policySupport },\n            migration: {\n                in: this.inMigration,\n                out: this.outMigration,\n                net: this.inMigration - this.outMigration\n            }\n        };\n    }\n\n    getTopIndustries(count = 5) {\n        const sorted = Object.entries(this.industryMix)\n            .map(([id, share]) => ({\n                id: parseInt(id),\n                name: INDUSTRY_SECTORS[id]?.name || 'Unknown',\n                share,\n                automationExposure: INDUSTRY_SECTORS[id]?.automationExposure || 0.5\n            }))\n            .sort((a, b) => b.share - a.share);\n\n        return sorted.slice(0, count);\n    }\n}\n\n/**\n * RegionalMarketSystem - Manages all regions\n */\nclass RegionalMarketSystem {\n    constructor(numRegions = 50) {\n        this.regions = [];\n        this.numRegions = Math.min(numRegions, US_REGIONS.length);\n\n        this._initializeRegions();\n    }\n\n    _initializeRegions() {\n        // Use real US state data for regions\n        for (let i = 0; i < this.numRegions; i++) {\n            const regionData = US_REGIONS[i];\n            this.regions.push(new Region(regionData));\n        }\n    }\n\n    getRegion(id) {\n        return this.regions.find(r => r.id === id);\n    }\n\n    getRegionByAbbrev(abbrev) {\n        return this.regions.find(r => r.abbrev === abbrev);\n    }\n\n    /**\n     * Update all regions for a month\n     */\n    updateAllRegions(workers, firms) {\n        const snapshots = [];\n\n        this.regions.forEach(region => {\n            const snapshot = region.updateMonth(workers, firms);\n            snapshots.push(snapshot);\n        });\n\n        return snapshots;\n    }\n\n    /**\n     * Get population-weighted distribution for worker assignment\n     */\n    getPopulationDistribution() {\n        const totalPop = this.regions.reduce((sum, r) => sum + r.population, 0);\n        return this.regions.map(r => ({\n            id: r.id,\n            weight: r.population / totalPop\n        }));\n    }\n\n    /**\n     * Select a region based on population distribution\n     */\n    selectRegionByPopulation() {\n        const distribution = this.getPopulationDistribution();\n        const rand = Math.random();\n        let cumulative = 0;\n\n        for (const { id, weight } of distribution) {\n            cumulative += weight;\n            if (rand <= cumulative) {\n                return id;\n            }\n        }\n\n        return this.regions[0].id;\n    }\n\n    /**\n     * Get national statistics\n     */\n    getNationalStats() {\n        const allWorkers = this.regions.reduce((sum, r) => sum + r.localWorkers.length, 0);\n        const allUnemployed = this.regions.reduce((sum, r) =>\n            sum + r.localWorkers.filter(w => w.status === 'unemployed').length, 0\n        );\n        const allEmployed = this.regions.reduce((sum, r) =>\n            sum + r.localWorkers.filter(w => w.status === 'employed').length, 0\n        );\n\n        const laborForce = allEmployed + allUnemployed;\n\n        return {\n            totalWorkers: allWorkers,\n            laborForce,\n            employed: allEmployed,\n            unemployed: allUnemployed,\n            unemploymentRate: laborForce > 0 ? allUnemployed / laborForce : 0,\n            averageWage: this.regions.reduce((sum, r) => sum + r.averageWage, 0) / this.regions.length,\n            regionalVariation: this._calculateRegionalVariation()\n        };\n    }\n\n    _calculateRegionalVariation() {\n        const rates = this.regions.map(r => r.unemploymentRate);\n        const mean = rates.reduce((sum, r) => sum + r, 0) / rates.length;\n        const variance = rates.reduce((sum, r) => sum + Math.pow(r - mean, 2), 0) / rates.length;\n\n        return {\n            min: Math.min(...rates),\n            max: Math.max(...rates),\n            mean,\n            stdDev: Math.sqrt(variance)\n        };\n    }\n\n    /**\n     * Get regions sorted by a metric\n     */\n    getRankedRegions(metric = 'unemploymentRate', ascending = true) {\n        const sorted = [...this.regions].sort((a, b) => {\n            const aVal = a[metric] || 0;\n            const bVal = b[metric] || 0;\n            return ascending ? aVal - bVal : bVal - aVal;\n        });\n\n        return sorted.map(r => ({\n            id: r.id,\n            name: r.name,\n            abbrev: r.abbrev,\n            value: r[metric]\n        }));\n    }\n\n    /**\n     * Get summary for all regions\n     */\n    getAllRegionSnapshots() {\n        return this.regions.map(r => r.getSnapshot());\n    }\n}\n\n// Export for ES modules\nexport { Region, RegionalMarketSystem, US_REGIONS, INDUSTRY_SECTORS };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.Region = Region;\n    window.RegionalMarketSystem = RegionalMarketSystem;\n    window.US_REGIONS = US_REGIONS;\n    window.INDUSTRY_SECTORS = INDUSTRY_SECTORS;\n}\n","/**\n * ABM Simulation Engine\n *\n * Main engine that orchestrates the agent-based labor market simulation.\n * Coordinates workers, firms, training programs, and market dynamics over time.\n */\n\n// Import agent classes in Node.js environment\n// In browser, these are loaded via script tags before this file\nif (typeof module !== 'undefined' && module.exports) {\n    try {\n        const { WorkerAgent: WA } = require('./agents/worker.js');\n        const { FirmAgent: FA } = require('./agents/firm.js');\n        const { TrainingProgramAgent: TPA } = require('./agents/training-program.js');\n        const { LaborMarket: LM } = require('./market/labor-market.js');\n        const { WageDynamics: WD } = require('./market/wage-dynamics.js');\n        const { InformationDiffusion: ID } = require('./market/information.js');\n        const { AICapabilityFrontier: AICF } = require('./environment/ai-frontier.js');\n        const { RegionalMarketSystem: RMS } = require('./environment/regions.js');\n        global.WorkerAgent = WA;\n        global.FirmAgent = FA;\n        global.TrainingProgramAgent = TPA;\n        global.LaborMarket = LM;\n        global.WageDynamics = WD;\n        global.InformationDiffusion = ID;\n        global.AICapabilityFrontier = AICF;\n        global.RegionalMarketSystem = RMS;\n    } catch (e) {\n        console.warn('Some ABM classes not available:', e.message);\n    }\n}\n\nclass ABMSimulationEngine {\n    constructor(config = {}) {\n        this.config = {\n            numWorkers: config.numWorkers || 10000,      // Default 10K for performance\n            numFirms: config.numFirms || 500,\n            numRegions: config.numRegions || 10,\n            numTrainingPrograms: config.numTrainingPrograms || 50,\n            durationMonths: config.durationMonths || 60, // 5 years default\n            ...config\n        };\n\n        // Agent populations\n        this.workers = [];\n        this.firms = [];\n        this.trainingPrograms = [];\n\n        // Market mechanisms\n        this.laborMarket = null;\n        this.wageDynamics = null;\n        this.informationDiffusion = null;\n\n        // Environment\n        this.aiCapability = null;\n        this.regionalSystem = null;\n\n        // Results collection\n        this.results = {\n            monthly: [],\n            monthlyData: [], // Alias for monthly (for compatibility with display functions)\n            summary: null,\n            policySupport: [],\n            emergentPatterns: [],\n            regionalSnapshots: [],\n            wageDistribution: []\n        };\n\n        // Simulation state\n        this.currentMonth = 0;\n        this.isRunning = false;\n        this.isPaused = false;\n\n        // Callbacks\n        this.onProgress = config.onProgress || null;\n        this.onComplete = config.onComplete || null;\n    }\n\n    /**\n     * Initialize the simulation with agents\n     */\n    async initialize(scenario = {}) {\n        console.log('Initializing ABM simulation...');\n\n        // Create AI capability tracker (use new separate module if available)\n        if (typeof AICapabilityFrontier !== 'undefined') {\n            this.aiCapability = new AICapabilityFrontier(scenario);\n        } else {\n            // Fallback to inline implementation\n            this.aiCapability = new AICapabilityFrontierInline(scenario);\n        }\n\n        // Initialize regional system (use new module if available)\n        if (typeof RegionalMarketSystem !== 'undefined') {\n            this.regionalSystem = new RegionalMarketSystem(this.config.numRegions);\n        }\n\n        // Generate worker population\n        this.workers = this._generateWorkers(this.config.numWorkers, scenario);\n        console.log(`Created ${this.workers.length} worker agents`);\n\n        // Generate firm population\n        this.firms = this._generateFirms(this.config.numFirms, scenario);\n        console.log(`Created ${this.firms.length} firm agents`);\n\n        // Generate training programs\n        this.trainingPrograms = this._generateTrainingPrograms(this.config.numTrainingPrograms, scenario);\n        console.log(`Created ${this.trainingPrograms.length} training program agents`);\n\n        // Assign workers to firms (initial employment)\n        this._assignInitialEmployment();\n\n        // Build worker networks\n        this._buildWorkerNetworks();\n\n        // Set competitors for firms\n        this._setFirmCompetitors();\n\n        // Initialize labor market\n        this.laborMarket = new LaborMarket({\n            workers: this.workers,\n            firms: this.firms,\n            searchRadius: 2\n        });\n\n        // Initialize wage dynamics (if available)\n        if (typeof WageDynamics !== 'undefined') {\n            this.wageDynamics = new WageDynamics();\n        }\n\n        // Initialize information diffusion (if available)\n        if (typeof InformationDiffusion !== 'undefined') {\n            this.informationDiffusion = new InformationDiffusion();\n        }\n\n        // Reset state\n        this.currentMonth = 0;\n        this.results = {\n            monthly: [],\n            monthlyData: [], // Alias for monthly (for compatibility)\n            summary: null,\n            policySupport: [],\n            emergentPatterns: [],\n            regionalSnapshots: [],\n            wageDistribution: []\n        };\n\n        console.log('ABM initialization complete');\n        return this;\n    }\n\n    /**\n     * Run the full simulation\n     */\n    async runSimulation(scenario = {}) {\n        if (this.workers.length === 0) {\n            await this.initialize(scenario);\n        }\n\n        this.isRunning = true;\n        this.isPaused = false;\n\n        const startTime = Date.now();\n\n        try {\n            for (let month = 0; month < this.config.durationMonths; month++) {\n                if (!this.isRunning || this.isPaused) break;\n\n                // Run one month of simulation\n                await this._runMonth(month, scenario);\n\n                // Collect monthly results\n                this._collectMonthlyResults(month);\n\n                // Progress callback\n                if (this.onProgress) {\n                    this.onProgress({\n                        month,\n                        totalMonths: this.config.durationMonths,\n                        progress: (month + 1) / this.config.durationMonths,\n                        currentStats: this.results.monthly[this.results.monthly.length - 1]\n                    });\n                }\n\n                // Allow UI to update (yield to event loop)\n                if (month % 12 === 0) {\n                    await new Promise(resolve => setTimeout(resolve, 0));\n                }\n            }\n\n            // Finalize results\n            this._finalizeResults();\n\n            this.isRunning = false;\n\n            const duration = (Date.now() - startTime) / 1000;\n            console.log(`Simulation complete in ${duration.toFixed(2)}s`);\n\n            if (this.onComplete) {\n                this.onComplete(this.results);\n            }\n\n            return this.results;\n\n        } catch (error) {\n            this.isRunning = false;\n            console.error('Simulation error:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Run a single month of simulation\n     */\n    async _runMonth(month, scenario) {\n        this.currentMonth = month;\n\n        // 1. Advance AI capabilities\n        this.aiCapability.advance(month, scenario);\n\n        // 2. Firms make AI adoption decisions\n        this.firms.forEach(firm => {\n            const competitors = this._getCompetitors(firm);\n            firm.makeMonthlyDecisions(this.aiCapability, this.laborMarket, competitors);\n        });\n\n        // 3. Workers evaluate their situations and make decisions\n        this.workers.forEach(worker => {\n            worker.makeMonthlyDecisions(this.laborMarket, this.aiCapability, scenario.interventions);\n        });\n\n        // 4. Training programs process enrollments and graduations\n        this._processTrainingPrograms(month);\n\n        // 5. Labor market matching\n        const matchingResults = this.laborMarket.runMonthlyMatching();\n\n        // 6. Wage dynamics adjustment\n        if (this.wageDynamics) {\n            this.wageDynamics.adjustMarketWages(this.workers, this.firms, this.laborMarket);\n        }\n\n        // 7. Apply interventions\n        if (scenario.interventions) {\n            this._applyInterventions(scenario.interventions, month);\n        }\n\n        // 8. Information diffusion\n        this._diffuseInformation(month, matchingResults);\n\n        // 9. Update regional statistics\n        if (this.regionalSystem) {\n            this.regionalSystem.updateAllRegions(this.workers, this.firms);\n        }\n\n        // 10. Detect emergent patterns\n        if (month > 0 && month % 6 === 0) {\n            this._detectPatterns(month);\n        }\n\n        return matchingResults;\n    }\n\n    _generateWorkers(count, scenario) {\n        const workers = [];\n\n        // Use regional system for population distribution if available\n        const selectRegion = this.regionalSystem\n            ? () => this.regionalSystem.selectRegionByPopulation()\n            : (regionPops) => this._selectRegion(regionPops);\n\n        const regionPopulations = this._getRegionPopulations(this.config.numRegions);\n\n        for (let i = 0; i < count; i++) {\n            // Select region\n            const region = this.regionalSystem\n                ? this.regionalSystem.selectRegionByPopulation()\n                : this._selectRegion(regionPopulations);\n\n            const worker = new WorkerAgent({\n                id: `w_${i}`,\n                region,\n                // Initial unemployment rate based on scenario\n                status: Math.random() < (scenario.initialUnemploymentRate || 0.04)\n                    ? 'unemployed'\n                    : 'employed'\n            });\n\n            workers.push(worker);\n        }\n\n        return workers;\n    }\n\n    _generateFirms(count, scenario) {\n        const firms = [];\n\n        for (let i = 0; i < count; i++) {\n            const region = this.regionalSystem\n                ? this.regionalSystem.selectRegionByPopulation()\n                : Math.floor(Math.random() * this.config.numRegions) + 1;\n\n            const firm = new FirmAgent({\n                id: `f_${i}`,\n                region\n            });\n\n            // Initial AI adoption based on scenario\n            if (scenario.initialAIAdoption && Math.random() < scenario.initialAIAdoption) {\n                firm.aiAdoptionStatus = 'exploring';\n            }\n\n            firms.push(firm);\n        }\n\n        return firms;\n    }\n\n    _generateTrainingPrograms(count, scenario) {\n        const programs = [];\n\n        // Only generate if TrainingProgramAgent is available\n        if (typeof TrainingProgramAgent === 'undefined') {\n            return programs;\n        }\n\n        for (let i = 0; i < count; i++) {\n            const region = this.regionalSystem\n                ? this.regionalSystem.selectRegionByPopulation()\n                : Math.floor(Math.random() * this.config.numRegions) + 1;\n\n            const program = new TrainingProgramAgent({\n                id: `prog_${i}`,\n                region,\n                subsidyAvailable: scenario.trainingSubsidy || 0.3\n            });\n\n            programs.push(program);\n        }\n\n        return programs;\n    }\n\n    _processTrainingPrograms(month) {\n        if (this.trainingPrograms.length === 0) return;\n\n        // Process each training program\n        this.trainingPrograms.forEach(program => {\n            program.processMonth(month);\n        });\n\n        // Enroll workers who want retraining\n        const workersWantingRetraining = this.workers.filter(w =>\n            w.wantsRetraining &&\n            !w.retrainingProgram &&\n            w.age < 60\n        );\n\n        // Match workers to programs\n        workersWantingRetraining.forEach(worker => {\n            // Find suitable program in same region (or nearby)\n            const suitablePrograms = this.trainingPrograms.filter(p =>\n                p.isAcceptingApplications() &&\n                (p.region === worker.region || Math.random() < 0.2) // 20% chance to consider other regions\n            );\n\n            if (suitablePrograms.length > 0) {\n                // Sort by best fit (ROI, quality, etc.)\n                suitablePrograms.sort((a, b) => {\n                    const roiA = a.calculateROIForWorker(worker);\n                    const roiB = b.calculateROIForWorker(worker);\n                    return roiB.roi - roiA.roi;\n                });\n\n                // Try to enroll in best program\n                const result = suitablePrograms[0].enrollWorker(worker, month);\n                if (result.success) {\n                    worker.wantsRetraining = false;\n                }\n            }\n        });\n    }\n\n    _assignInitialEmployment() {\n        // Get employed workers\n        const employedWorkers = this.workers.filter(w => w.status === 'employed');\n\n        // Shuffle and assign to firms\n        const shuffled = employedWorkers.sort(() => Math.random() - 0.5);\n\n        let workerIndex = 0;\n        this.firms.forEach(firm => {\n            const targetEmployees = firm.targetHeadcount;\n\n            for (let i = 0; i < targetEmployees && workerIndex < shuffled.length; i++) {\n                const worker = shuffled[workerIndex++];\n                worker.employer = firm;\n                worker.industry = firm.industry;\n                firm.employees.push(worker);\n            }\n        });\n    }\n\n    _buildWorkerNetworks() {\n        // Simple network: each worker connected to ~10-50 other workers\n        this.workers.forEach(worker => {\n            const networkSize = worker.networkSize;\n            const potentialContacts = this.workers.filter(w =>\n                w.id !== worker.id &&\n                (w.region === worker.region || Math.random() < 0.1) // Same region or random\n            );\n\n            // Shuffle and select\n            const shuffled = potentialContacts.sort(() => Math.random() - 0.5);\n            worker.network = shuffled.slice(0, Math.min(networkSize, shuffled.length));\n\n            // Add closeness scores\n            worker.network.forEach(contact => {\n                contact.closeness = Math.random() * 0.5 + 0.3; // 0.3-0.8\n            });\n        });\n    }\n\n    _setFirmCompetitors() {\n        // Group firms by industry\n        const byIndustry = {};\n        this.firms.forEach(firm => {\n            if (!byIndustry[firm.industry]) {\n                byIndustry[firm.industry] = [];\n            }\n            byIndustry[firm.industry].push(firm);\n        });\n\n        // Assign competitors (firms in same industry)\n        this.firms.forEach(firm => {\n            const sameindustry = byIndustry[firm.industry] || [];\n            firm.competitors = sameindustry\n                .filter(f => f.id !== firm.id)\n                .slice(0, 10); // Max 10 competitors to track\n        });\n    }\n\n    _getCompetitors(firm) {\n        return firm.competitors || [];\n    }\n\n    _getRegionPopulations(numRegions) {\n        // Simplified population distribution\n        const populations = [];\n        let total = 0;\n\n        for (let i = 0; i < numRegions; i++) {\n            // Some variation in region sizes\n            const pop = 0.5 + Math.random() * 1.5;\n            populations.push(pop);\n            total += pop;\n        }\n\n        // Normalize\n        return populations.map(p => p / total);\n    }\n\n    _selectRegion(regionPopulations) {\n        const rand = Math.random();\n        let cumulative = 0;\n\n        for (let i = 0; i < regionPopulations.length; i++) {\n            cumulative += regionPopulations[i];\n            if (rand <= cumulative) {\n                return i + 1;\n            }\n        }\n\n        return regionPopulations.length;\n    }\n\n    _applyInterventions(interventions, month) {\n        if (!interventions || !Array.isArray(interventions)) return;\n\n        interventions.forEach(intervention => {\n            if (!intervention.active) return;\n\n            switch (intervention.type) {\n                case 'ubi':\n                    this._applyUBI(intervention, month);\n                    break;\n                case 'retraining':\n                    this._applyRetraining(intervention, month);\n                    break;\n                case 'wage_subsidy':\n                    this._applyWageSubsidy(intervention, month);\n                    break;\n                // Add more intervention types as needed\n            }\n        });\n    }\n\n    _applyUBI(intervention, month) {\n        const amount = intervention.amount || 1000;\n        const eligibleWorkers = this.workers.filter(w =>\n            w.status === 'unemployed' || intervention.universal\n        );\n\n        eligibleWorkers.forEach(worker => {\n            worker.receiveUBI(amount);\n        });\n    }\n\n    _applyRetraining(intervention, month) {\n        // If we have training programs, use them\n        if (this.trainingPrograms.length > 0) {\n            // Increase subsidies for training programs\n            this.trainingPrograms.forEach(program => {\n                program.receiveSubsidy(intervention.subsidyLevel || 0.5);\n            });\n            return;\n        }\n\n        // Fallback: direct enrollment (old behavior)\n        const eligibleWorkers = this.workers.filter(w =>\n            (w.status === 'unemployed' || w.wantsRetraining) &&\n            w.age < 60 &&\n            !w.retrainingProgram\n        );\n\n        const spotsAvailable = intervention.capacity || 1000;\n        const enrolled = eligibleWorkers.slice(0, spotsAvailable);\n\n        enrolled.forEach(worker => {\n            worker.enrollInRetraining({\n                id: `retrain_${month}_${worker.id}`,\n                duration: intervention.duration || 6,\n                skillsProvided: intervention.skills || {\n                    dataAnalysis: 0.3,\n                    programming: 0.2,\n                    technical: 0.2\n                }\n            });\n            worker.wantsRetraining = false;\n        });\n    }\n\n    _applyWageSubsidy(intervention, month) {\n        // Firms receive subsidy for maintaining employment\n        this.firms.forEach(firm => {\n            if (firm.employees.length > 0) {\n                const subsidy = intervention.amountPerWorker || 500;\n                firm.employees.forEach(worker => {\n                    // Worker knows their job was protected\n                    if (worker.markedForLayoff) {\n                        worker.markedForLayoff = false;\n                        worker.policySupport.wageSubsidy = Math.min(1,\n                            worker.policySupport.wageSubsidy + 0.15);\n                        worker.benefitedFromIntervention = 'wageSubsidy';\n                    }\n                });\n            }\n        });\n    }\n\n    _diffuseInformation(month, matchingResults = {}) {\n        // Use advanced information diffusion if available\n        if (this.informationDiffusion) {\n            const marketConditions = {\n                unemploymentRate: this.laborMarket.getMarketStatistics()?.unemploymentRate || 0.05,\n                layoffCount: matchingResults.layoffs || 0,\n                aiAdoptionRate: this.aiCapability.getCurrentLevel(),\n                policyChanges: [] // Could track policy changes here\n            };\n\n            this.informationDiffusion.processMonth(this.workers, this.firms, month, marketConditions);\n            return;\n        }\n\n        // Fallback: simple information diffusion\n        this.workers.forEach(worker => {\n            if (worker.network.length === 0) return;\n\n            // Average information level of network\n            const networkInfo = worker.network.reduce((sum, contact) =>\n                sum + (contact.informationLevel || 0.5), 0) / worker.network.length;\n\n            // Worker's info level moves toward network average\n            const diff = networkInfo - worker.informationLevel;\n            worker.informationLevel += diff * 0.05;\n        });\n    }\n\n    _detectPatterns(month) {\n        const stats = this.laborMarket.getMarketStatistics();\n        const prevStats = this.results.monthly[this.results.monthly.length - 6];\n\n        if (!prevStats) return;\n\n        // Check for tipping points\n        const unemploymentChange = stats.unemploymentRate - prevStats.unemploymentRate;\n        if (Math.abs(unemploymentChange) > 0.02) {\n            this.results.emergentPatterns.push({\n                type: 'tipping_point',\n                month,\n                description: unemploymentChange > 0\n                    ? `Unemployment spiked ${(unemploymentChange * 100).toFixed(1)}% in 6 months`\n                    : `Rapid recovery: unemployment dropped ${(Math.abs(unemploymentChange) * 100).toFixed(1)}%`,\n                metrics: { unemploymentChange }\n            });\n        }\n\n        // Check for AI adoption cascade\n        const aiAdoptionChange = stats.aiAdoptionRate - prevStats.aiAdoptionRate;\n        if (aiAdoptionChange > 0.1) {\n            this.results.emergentPatterns.push({\n                type: 'feedback_loop',\n                month,\n                description: `AI adoption accelerated - ${(aiAdoptionChange * 100).toFixed(0)}% more firms adopting`,\n                effect: 'Competitive pressure cascade'\n            });\n        }\n\n        // Check information diffusion cascades\n        if (this.informationDiffusion) {\n            const cascades = this.informationDiffusion.detectCascades();\n            cascades.forEach(cascade => {\n                this.results.emergentPatterns.push({\n                    type: 'information_cascade',\n                    month,\n                    description: `${cascade.type} ${cascade.direction} by ${(cascade.magnitude * 100).toFixed(1)}%`,\n                    metrics: cascade\n                });\n            });\n        }\n\n        // Check for regional divergence\n        if (this.regionalSystem) {\n            const nationalStats = this.regionalSystem.getNationalStats();\n            if (nationalStats.regionalVariation.stdDev > 0.03) {\n                this.results.emergentPatterns.push({\n                    type: 'regional_divergence',\n                    month,\n                    description: `Regional unemployment diverging (std dev: ${(nationalStats.regionalVariation.stdDev * 100).toFixed(1)}%)`,\n                    metrics: nationalStats.regionalVariation\n                });\n            }\n        }\n    }\n\n    _collectMonthlyResults(month) {\n        const stats = this.laborMarket.getMarketStatistics();\n        const policyStats = this.laborMarket.getPolicySupportStatistics();\n\n        // AI adoption by status\n        const aiAdoptionByStatus = {};\n        ['none', 'exploring', 'piloting', 'scaling', 'mature'].forEach(status => {\n            aiAdoptionByStatus[status] = this.firms.filter(f =>\n                f.aiAdoptionStatus === status).length;\n        });\n\n        // Wage distribution\n        let wageDistribution = null;\n        if (this.wageDynamics) {\n            wageDistribution = this.wageDynamics.getWageDistribution(this.workers);\n        }\n\n        // Training program stats\n        const trainingStats = {\n            totalPrograms: this.trainingPrograms.length,\n            totalEnrolled: this.trainingPrograms.reduce((sum, p) => sum + p.currentEnrollment, 0),\n            totalGraduates: this.trainingPrograms.reduce((sum, p) => sum + p.totalGraduates, 0),\n            avgCompletionRate: this.trainingPrograms.length > 0\n                ? this.trainingPrograms.reduce((sum, p) => sum + p.completionRate, 0) / this.trainingPrograms.length\n                : 0\n        };\n\n        this.results.monthly.push({\n            month,\n            year: Math.floor(month / 12) + 2025,\n            ...stats,\n            aiAdoptionByStatus,\n            policySupport: policyStats,\n            wageDistribution,\n            trainingStats,\n            aiCapabilityLevel: this.aiCapability.getCurrentLevel()\n        });\n\n        // Track policy support trajectory\n        this.results.policySupport.push({\n            month,\n            ...policyStats\n        });\n\n        // Track regional snapshots (every 6 months)\n        if (this.regionalSystem && month % 6 === 0) {\n            this.results.regionalSnapshots.push({\n                month,\n                regions: this.regionalSystem.getAllRegionSnapshots()\n            });\n        }\n\n        // Track wage distribution\n        if (wageDistribution) {\n            this.results.wageDistribution.push({\n                month,\n                ...wageDistribution\n            });\n        }\n    }\n\n    _finalizeResults() {\n        const firstMonth = this.results.monthly[0];\n        const lastMonth = this.results.monthly[this.results.monthly.length - 1];\n\n        // Provide monthlyData as alias for monthly (for compatibility with display functions)\n        this.results.monthlyData = this.results.monthly;\n\n        this.results.summary = {\n            durationMonths: this.config.durationMonths,\n            totalWorkers: this.config.numWorkers,\n            totalFirms: this.config.numFirms,\n            totalTrainingPrograms: this.trainingPrograms.length,\n\n            initial: {\n                unemploymentRate: firstMonth?.unemploymentRate || 0,\n                aiAdoptionRate: firstMonth?.aiAdoptionRate || 0,\n                medianWage: firstMonth?.medianWage || 0,\n                aiCapabilityLevel: firstMonth?.aiCapabilityLevel || 0\n            },\n\n            final: {\n                unemploymentRate: lastMonth?.unemploymentRate || 0,\n                aiAdoptionRate: lastMonth?.aiAdoptionRate || 0,\n                medianWage: lastMonth?.medianWage || 0,\n                employed: lastMonth?.employed || 0,\n                unemployed: lastMonth?.unemployed || 0,\n                outOfLaborForce: lastMonth?.outOfLaborForce || 0,\n                aiCapabilityLevel: lastMonth?.aiCapabilityLevel || 0\n            },\n\n            changes: {\n                unemploymentChange: (lastMonth?.unemploymentRate || 0) - (firstMonth?.unemploymentRate || 0),\n                wageChange: ((lastMonth?.medianWage || 0) - (firstMonth?.medianWage || 0)) / (firstMonth?.medianWage || 1),\n                aiAdoptionChange: (lastMonth?.aiAdoptionRate || 0) - (firstMonth?.aiAdoptionRate || 0)\n            },\n\n            // Peak unemployment\n            peakUnemployment: Math.max(...this.results.monthly.map(m => m.unemploymentRate)),\n            peakUnemploymentMonth: this.results.monthly.findIndex(m =>\n                m.unemploymentRate === Math.max(...this.results.monthly.map(m => m.unemploymentRate))),\n\n            // Total job flows\n            totalHires: this.results.monthly.reduce((sum, m) => sum + (m.monthlyHires || 0), 0),\n            totalLayoffs: this.results.monthly.reduce((sum, m) => sum + (m.monthlyLayoffs || 0), 0),\n\n            // Training outcomes\n            trainingOutcomes: {\n                totalGraduates: this.trainingPrograms.reduce((sum, p) => sum + p.totalGraduates, 0),\n                totalDropouts: this.trainingPrograms.reduce((sum, p) => sum + p.totalDropouts, 0),\n                avgCompletionRate: this.trainingPrograms.length > 0\n                    ? this.trainingPrograms.reduce((sum, p) => sum + p.completionRate, 0) / this.trainingPrograms.length\n                    : 0\n            },\n\n            // Wage inequality\n            wageInequality: lastMonth?.wageDistribution ? {\n                gini: lastMonth.wageDistribution.gini,\n                p90p10Ratio: lastMonth.wageDistribution.p90 / (lastMonth.wageDistribution.p10 || 1)\n            } : null,\n\n            // Final policy support\n            finalPolicySupport: lastMonth?.policySupport || {},\n\n            // Emergent patterns\n            emergentPatterns: this.results.emergentPatterns,\n\n            // AI capability summary\n            aiCapabilitySummary: this.aiCapability.getSummary ? this.aiCapability.getSummary() : null,\n\n            // Information diffusion summary\n            informationSummary: this.informationDiffusion?.getSummary() || null\n        };\n    }\n\n    /**\n     * Stop the simulation\n     */\n    stop() {\n        this.isRunning = false;\n    }\n\n    /**\n     * Pause the simulation\n     */\n    pause() {\n        this.isPaused = true;\n    }\n\n    /**\n     * Resume the simulation\n     */\n    resume() {\n        this.isPaused = false;\n    }\n\n    /**\n     * Get current state\n     */\n    getCurrentState() {\n        return {\n            month: this.currentMonth,\n            isRunning: this.isRunning,\n            isPaused: this.isPaused,\n            workerCount: this.workers.length,\n            firmCount: this.firms.length,\n            trainingProgramCount: this.trainingPrograms.length,\n            currentStats: this.laborMarket?.getMarketStatistics() || null,\n            aiCapabilityLevel: this.aiCapability?.getCurrentLevel() || 0\n        };\n    }\n\n    /**\n     * Get detailed breakdown by region\n     */\n    getRegionalBreakdown() {\n        if (!this.regionalSystem) {\n            return null;\n        }\n        return this.regionalSystem.getAllRegionSnapshots();\n    }\n\n    /**\n     * Get training program statistics\n     */\n    getTrainingStats() {\n        return this.trainingPrograms.map(p => p.getSummary());\n    }\n\n    /**\n     * Get wage analysis\n     */\n    getWageAnalysis() {\n        if (!this.wageDynamics) {\n            return null;\n        }\n        return this.wageDynamics.getSummary(this.workers);\n    }\n}\n\n/**\n * Fallback AI Capability Frontier - Used when separate module not loaded\n */\nclass AICapabilityFrontierInline {\n    constructor(scenario = {}) {\n        this.scenario = scenario;\n        this.currentLevel = scenario.initialAILevel || 0.3;\n        this.adoptionCurve = scenario.adoptionCurve || 's_curve';\n        this.automationPace = scenario.automationPace || 'moderate';\n        this.occupationExposure = {};\n    }\n\n    advance(month, scenario) {\n        const paceMultipliers = {\n            slow: 0.5,\n            moderate: 1.0,\n            fast: 1.5,\n            accelerating: 2.0\n        };\n\n        const pace = paceMultipliers[this.automationPace] || 1.0;\n\n        switch (this.adoptionCurve) {\n            case 'linear':\n                this.currentLevel += 0.005 * pace;\n                break;\n            case 'exponential':\n                this.currentLevel *= 1 + (0.01 * pace);\n                break;\n            case 's_curve':\n            default:\n                const midpoint = 60;\n                const steepness = 0.05;\n                const sCurveGrowth = 0.01 * pace / (1 + Math.exp(-steepness * (month - midpoint)));\n                this.currentLevel += sCurveGrowth;\n                break;\n        }\n\n        this.currentLevel = Math.min(0.95, this.currentLevel);\n    }\n\n    getCurrentLevel() {\n        return this.currentLevel;\n    }\n\n    getOccupationExposure(occupation) {\n        if (this.occupationExposure[occupation]) {\n            return this.occupationExposure[occupation] * this.currentLevel;\n        }\n        this.occupationExposure[occupation] = 0.3 + Math.random() * 0.5;\n        return this.occupationExposure[occupation] * this.currentLevel;\n    }\n\n    getSummary() {\n        return {\n            currentLevel: this.currentLevel,\n            adoptionCurve: this.adoptionCurve,\n            automationPace: this.automationPace\n        };\n    }\n}\n\n// Export for ES modules\nexport { ABMSimulationEngine, AICapabilityFrontierInline };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.ABMSimulationEngine = ABMSimulationEngine;\n    window.AICapabilityFrontierInline = AICapabilityFrontierInline;\n}\n","/**\n * Agent-Based Modeling Module\n *\n * Entry point for the ABM labor market simulation system.\n * Exports all agent classes, market mechanisms, and the simulation engine.\n */\n\n/**\n * Browser initialization helper\n * Call this after all ABM scripts are loaded\n */\nfunction initializeABM() {\n    console.log('ABM Module Initialized');\n    console.log('Available classes:');\n    console.log('  - WorkerAgent');\n    console.log('  - FirmAgent');\n    console.log('  - LaborMarket');\n    console.log('  - ABMSimulationEngine');\n\n    return {\n        WorkerAgent: typeof WorkerAgent !== 'undefined' ? WorkerAgent : null,\n        FirmAgent: typeof FirmAgent !== 'undefined' ? FirmAgent : null,\n        LaborMarket: typeof LaborMarket !== 'undefined' ? LaborMarket : null,\n        ABMSimulationEngine: typeof ABMSimulationEngine !== 'undefined' ? ABMSimulationEngine : null\n    };\n}\n\n/**\n * Quick test function to verify ABM is working\n */\nasync function testABM() {\n    console.log('Running ABM test simulation...');\n\n    const engine = new ABMSimulationEngine({\n        numWorkers: 1000,    // Small for testing\n        numFirms: 50,\n        numRegions: 5,\n        durationMonths: 12,  // 1 year\n        onProgress: (progress) => {\n            console.log(`Month ${progress.month + 1}/${progress.totalMonths}`);\n        }\n    });\n\n    const scenario = {\n        initialUnemploymentRate: 0.05,\n        initialAIAdoption: 0.1,\n        adoptionCurve: 's_curve',\n        automationPace: 'moderate'\n    };\n\n    try {\n        const results = await engine.runSimulation(scenario);\n\n        console.log('\\n=== ABM Test Results ===');\n        console.log(`Initial unemployment: ${(results.summary.initial.unemploymentRate * 100).toFixed(1)}%`);\n        console.log(`Final unemployment: ${(results.summary.final.unemploymentRate * 100).toFixed(1)}%`);\n        console.log(`Peak unemployment: ${(results.summary.peakUnemployment * 100).toFixed(1)}%`);\n        console.log(`Initial AI adoption: ${(results.summary.initial.aiAdoptionRate * 100).toFixed(1)}%`);\n        console.log(`Final AI adoption: ${(results.summary.final.aiAdoptionRate * 100).toFixed(1)}%`);\n        console.log(`Total hires: ${results.summary.totalHires}`);\n        console.log(`Total layoffs: ${results.summary.totalLayoffs}`);\n        console.log(`Emergent patterns detected: ${results.summary.emergentPatterns.length}`);\n\n        console.log('\\n=== Policy Support (Final) ===');\n        Object.entries(results.summary.finalPolicySupport).forEach(([policy, stats]) => {\n            console.log(`  ${policy}: ${(stats.mean * 100).toFixed(0)}% support (feasibility: ${stats.feasibilityScore})`);\n        });\n\n        return results;\n    } catch (error) {\n        console.error('ABM test failed:', error);\n        throw error;\n    }\n}\n\n// Export for ES modules\nexport { initializeABM, testABM };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.initializeABM = initializeABM;\n    window.testABM = testABM;\n}\n","/**\n * WorkerManager - Manages Web Worker for ABM simulation\n *\n * Provides a clean async interface to the simulation worker,\n * handling initialization, communication, and result collection.\n */\n\nclass WorkerManager {\n    constructor() {\n        this.worker = null;\n        this.isInitialized = false;\n        this.pendingRequests = new Map();\n        this.requestId = 0;\n        this.onProgress = null;\n        this.onComplete = null;\n    }\n\n    /**\n     * Check if Web Workers are supported\n     */\n    static isSupported() {\n        return typeof Worker !== 'undefined';\n    }\n\n    /**\n     * Initialize the worker\n     */\n    async initialize(config = {}, scenario = {}) {\n        if (!WorkerManager.isSupported()) {\n            throw new Error('Web Workers are not supported in this browser');\n        }\n\n        // Terminate existing worker if any\n        if (this.worker) {\n            this.terminate();\n        }\n\n        return new Promise((resolve, reject) => {\n            try {\n                // Create the worker\n                this.worker = new Worker('src/workers/simulation-worker.js');\n\n                // Setup message handler\n                this.worker.onmessage = (e) => this._handleMessage(e);\n\n                // Setup error handler\n                this.worker.onerror = (e) => {\n                    console.error('Worker error:', e);\n                    reject(new Error(e.message));\n                };\n\n                // Send init message\n                const requestId = this._getRequestId();\n                this.pendingRequests.set(requestId, { resolve, reject });\n\n                this.worker.postMessage({\n                    type: 'init',\n                    requestId,\n                    payload: { config, scenario }\n                });\n\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    /**\n     * Run a single month of simulation\n     */\n    async runMonth(month, scenario = {}) {\n        if (!this.isInitialized) {\n            throw new Error('Worker not initialized');\n        }\n\n        return new Promise((resolve, reject) => {\n            const requestId = this._getRequestId();\n            this.pendingRequests.set(requestId, { resolve, reject });\n\n            this.worker.postMessage({\n                type: 'runMonth',\n                requestId,\n                payload: { month, scenario }\n            });\n        });\n    }\n\n    /**\n     * Run the full simulation\n     */\n    async runSimulation(scenario = {}) {\n        if (!this.isInitialized) {\n            throw new Error('Worker not initialized');\n        }\n\n        return new Promise((resolve, reject) => {\n            const requestId = this._getRequestId();\n            this.pendingRequests.set(requestId, {\n                resolve,\n                reject,\n                isSimulation: true\n            });\n\n            this.worker.postMessage({\n                type: 'runSimulation',\n                requestId,\n                payload: { scenario }\n            });\n        });\n    }\n\n    /**\n     * Get current worker state\n     */\n    async getState() {\n        if (!this.worker) {\n            return { isInitialized: false };\n        }\n\n        return new Promise((resolve, reject) => {\n            const requestId = this._getRequestId();\n            this.pendingRequests.set(requestId, { resolve, reject });\n\n            this.worker.postMessage({\n                type: 'getState',\n                requestId\n            });\n        });\n    }\n\n    /**\n     * Set progress callback\n     */\n    setProgressCallback(callback) {\n        this.onProgress = callback;\n    }\n\n    /**\n     * Set completion callback\n     */\n    setCompletionCallback(callback) {\n        this.onComplete = callback;\n    }\n\n    /**\n     * Terminate the worker\n     */\n    terminate() {\n        if (this.worker) {\n            this.worker.terminate();\n            this.worker = null;\n        }\n        this.isInitialized = false;\n        this.pendingRequests.clear();\n    }\n\n    /**\n     * Handle messages from worker\n     */\n    _handleMessage(e) {\n        const { type, requestId, payload, error } = e.data;\n\n        switch (type) {\n            case 'initComplete':\n                this.isInitialized = true;\n                this._resolveRequest(requestId, payload);\n                break;\n\n            case 'monthComplete':\n                this._resolveRequest(requestId, payload);\n                break;\n\n            case 'simulationComplete':\n                if (this.onComplete) {\n                    this.onComplete(payload);\n                }\n                this._resolveRequest(requestId, payload);\n                break;\n\n            case 'progress':\n                if (this.onProgress) {\n                    this.onProgress(payload);\n                }\n                // Don't resolve - simulation still running\n                break;\n\n            case 'state':\n                this._resolveRequest(requestId, payload);\n                break;\n\n            case 'chunkComplete':\n                this._resolveRequest(requestId, payload);\n                break;\n\n            case 'error':\n                this._rejectRequest(requestId, new Error(error));\n                break;\n\n            default:\n                console.warn('Unknown message type from worker:', type);\n        }\n    }\n\n    /**\n     * Get a unique request ID\n     */\n    _getRequestId() {\n        return `req_${++this.requestId}`;\n    }\n\n    /**\n     * Resolve a pending request\n     */\n    _resolveRequest(requestId, payload) {\n        const request = this.pendingRequests.get(requestId);\n        if (request) {\n            this.pendingRequests.delete(requestId);\n            request.resolve(payload);\n        }\n    }\n\n    /**\n     * Reject a pending request\n     */\n    _rejectRequest(requestId, error) {\n        const request = this.pendingRequests.get(requestId);\n        if (request) {\n            this.pendingRequests.delete(requestId);\n            request.reject(error);\n        }\n    }\n}\n\n/**\n * ParallelSimulationManager - Coordinates multiple workers for large simulations\n *\n * Splits agent processing across multiple Web Workers for better performance\n * on multi-core systems.\n */\nclass ParallelSimulationManager {\n    constructor(numWorkers = navigator.hardwareConcurrency || 4) {\n        this.numWorkers = numWorkers;\n        this.workers = [];\n        this.isInitialized = false;\n    }\n\n    /**\n     * Initialize parallel workers\n     */\n    async initialize(config = {}, scenario = {}) {\n        if (!WorkerManager.isSupported()) {\n            throw new Error('Web Workers are not supported');\n        }\n\n        // For now, use single worker (full parallel implementation would\n        // require splitting agent data across workers)\n        const manager = new WorkerManager();\n        await manager.initialize(config, scenario);\n\n        this.workers = [manager];\n        this.isInitialized = true;\n\n        return {\n            workerCount: this.workers.length,\n            ready: true\n        };\n    }\n\n    /**\n     * Run simulation with optional parallelization\n     */\n    async runSimulation(scenario = {}, callbacks = {}) {\n        if (!this.isInitialized || this.workers.length === 0) {\n            throw new Error('Workers not initialized');\n        }\n\n        const mainWorker = this.workers[0];\n\n        if (callbacks.onProgress) {\n            mainWorker.setProgressCallback(callbacks.onProgress);\n        }\n\n        if (callbacks.onComplete) {\n            mainWorker.setCompletionCallback(callbacks.onComplete);\n        }\n\n        return mainWorker.runSimulation(scenario);\n    }\n\n    /**\n     * Terminate all workers\n     */\n    terminate() {\n        for (const worker of this.workers) {\n            worker.terminate();\n        }\n        this.workers = [];\n        this.isInitialized = false;\n    }\n}\n\n// Export for ES modules\nexport { WorkerManager, ParallelSimulationManager };\n\n// Also export to window for backwards compatibility with script tags\nif (typeof window !== 'undefined') {\n    window.WorkerManager = WorkerManager;\n    window.ParallelSimulationManager = ParallelSimulationManager;\n}\n","/**\n * AI Labor Market Simulator - Main Entry Point\n *\n * This file serves as the entry point for the Vite build.\n * It imports all modules and initializes the application.\n */\n\n// Import Chart.js\nimport Chart from 'chart.js/auto';\n\n// Make Chart available globally for existing code\nwindow.Chart = Chart;\n\n// Import core data and models\nimport { EconomicDataService } from './data/economic-data.js';\nimport { EconomicIndicators } from './models/indicators.js';\nimport { RealMetricsSystem } from './models/real-metrics.js';\nimport { HypotheticalIndicatorsSystem } from './models/hypothetical-indicators.js';\n\n// Import simulation engine\nimport { SimulationEngine } from './simulation/engine.js';\nimport { InterventionSystem } from './simulation/interventions.js';\n\n// Import utilities\nimport { EconomicCalculations } from './utils/calculations.js';\nimport * as DOMUtils from './utils/dom-utils.js';\n\n// Import visualization\nimport { VisualizationManager } from './components/visualizations.js';\n\n// Import services\nimport { AISummaryService } from './services/ai-summary.js';\nimport { AIScenarioEnhancer } from './services/ai-scenario-enhancer.js';\nimport { ModelTrainer } from './services/model-trainer.js';\nimport { ResultsInterpreter } from './services/results-interpreter.js';\nimport { SimulationHistoryService } from './services/simulation-history.js';\nimport { SimulationSharingService } from './services/simulation-sharing.js';\n\n// Import features\nimport { ScenarioComparison } from './features/scenario-comparison.js';\nimport { OccupationDrilldown } from './features/occupation-drilldown.js';\nimport { PDFExporter } from './features/pdf-export.js';\nimport { PDFReportGenerator } from './features/pdf-report.js';\nimport { SensitivityAnalysis } from './features/sensitivity-analysis.js';\nimport { MonteCarloSimulation } from './features/monte-carlo.js';\nimport { InterventionCostCalculator } from './features/intervention-cost-calculator.js';\nimport { TimelinePlayer, TimelineUI, initializeTimeline } from './features/timeline-player.js';\nimport { RegionalHeatMap } from './features/regional-heatmap.js';\nimport { DemographicsAnalyzer } from './features/demographics-analysis.js';\nimport { ABMSensitivityAnalysis } from './features/abm-sensitivity.js';\nimport { SkillsGapAnalyzer } from './features/skills-gap-analysis.js';\nimport { showShareModal, hideShareModal, copyShareUrl } from './features/url-sharing.js';\n\n// Import ABM components\nimport { WorkerAgent, EmploymentStatus, EducationLevel, AIExperience } from './abm/agents/worker.js';\nimport { FirmAgent, AIAdoptionStatus, FirmSize, LaborStrategy } from './abm/agents/firm.js';\nimport { TrainingProgramAgent, ProgramType, ProgramStatus } from './abm/agents/training-program.js';\nimport { LaborMarket } from './abm/market/labor-market.js';\nimport { WageDynamics } from './abm/market/wage-dynamics.js';\nimport { InformationDiffusion, InformationType, MediaEventType } from './abm/market/information.js';\nimport { AICapabilityFrontier, TaskCategories, OCCUPATION_AUTOMATION_DATA, INDUSTRY_AUTOMATION } from './abm/environment/ai-frontier.js';\nimport { Region, RegionalMarketSystem, US_REGIONS, INDUSTRY_SECTORS } from './abm/environment/regions.js';\nimport { ABMSimulationEngine, AICapabilityFrontierInline } from './abm/engine.js';\nimport { initializeABM, testABM } from './abm/index.js';\n\n// Import worker manager\nimport { WorkerManager, ParallelSimulationManager } from './workers/worker-manager.js';\n\n// Make DOMUtils globally available\nwindow.DOMUtils = DOMUtils;\n\n// The app.js file contains all application logic\n// It will be loaded after all dependencies are available\n// For now, we'll dynamically import it to ensure proper initialization\n\n// Initialize application when DOM is ready\ndocument.addEventListener('DOMContentLoaded', async () => {\n    // Import and execute app.js\n    await import('./app.js');\n\n    // Call initApp if it exists on window\n    if (typeof window.initApp === 'function') {\n        window.initApp();\n    }\n});\n\n// Export everything for potential module usage\nexport {\n    // Chart\n    Chart,\n\n    // Data & Models\n    EconomicDataService,\n    EconomicIndicators,\n    RealMetricsSystem,\n    HypotheticalIndicatorsSystem,\n\n    // Simulation\n    SimulationEngine,\n    InterventionSystem,\n\n    // Utilities\n    EconomicCalculations,\n    DOMUtils,\n\n    // Visualization\n    VisualizationManager,\n\n    // Services\n    AISummaryService,\n    AIScenarioEnhancer,\n    ModelTrainer,\n    ResultsInterpreter,\n    SimulationHistoryService,\n    SimulationSharingService,\n\n    // Features\n    ScenarioComparison,\n    OccupationDrilldown,\n    PDFExporter,\n    PDFReportGenerator,\n    SensitivityAnalysis,\n    MonteCarloSimulation,\n    InterventionCostCalculator,\n    TimelinePlayer,\n    TimelineUI,\n    initializeTimeline,\n    RegionalHeatMap,\n    DemographicsAnalyzer,\n    ABMSensitivityAnalysis,\n    SkillsGapAnalyzer,\n    showShareModal,\n    hideShareModal,\n    copyShareUrl,\n\n    // ABM\n    WorkerAgent,\n    EmploymentStatus,\n    EducationLevel,\n    AIExperience,\n    FirmAgent,\n    AIAdoptionStatus,\n    FirmSize,\n    LaborStrategy,\n    TrainingProgramAgent,\n    ProgramType,\n    ProgramStatus,\n    LaborMarket,\n    WageDynamics,\n    InformationDiffusion,\n    InformationType,\n    MediaEventType,\n    AICapabilityFrontier,\n    TaskCategories,\n    OCCUPATION_AUTOMATION_DATA,\n    INDUSTRY_AUTOMATION,\n    Region,\n    RegionalMarketSystem,\n    US_REGIONS,\n    INDUSTRY_SECTORS,\n    ABMSimulationEngine,\n    AICapabilityFrontierInline,\n    initializeABM,\n    testABM,\n\n    // Workers\n    WorkerManager,\n    ParallelSimulationManager\n};\n"],"file":"assets/main-CRf3ivLP.js"}